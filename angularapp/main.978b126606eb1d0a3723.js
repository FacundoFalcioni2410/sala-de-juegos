(self.webpackChunksala_de_juegos=self.webpackChunksala_de_juegos||[]).push([[179],{8255:rt=>{function Me(H){return Promise.resolve().then(()=>{var O=new Error("Cannot find module '"+H+"'");throw O.code="MODULE_NOT_FOUND",O})}Me.keys=()=>[],Me.resolve=Me,Me.id=8255,rt.exports=Me},8583:(rt,Me,H)=>{"use strict";H.d(Me,{mr:()=>Ge,Ov:()=>fa,ez:()=>Pr,K0:()=>he,Do:()=>pt,V_:()=>K,Ye:()=>At,S$:()=>Ke,sg:()=>sn,O5:()=>$i,b0:()=>Dt,lw:()=>ee,EM:()=>so,JF:()=>Vo,NF:()=>Kr,PM:()=>io,w_:()=>ae,bD:()=>Cr,q:()=>te,Mx:()=>wr,HT:()=>ve});var O=H(7716);let m=null;function te(){return m}function ve(k){m||(m=k)}class ae{}const he=new O.OlP("DocumentToken");let ee=(()=>{class k{historyGo(L){throw new Error("Not implemented")}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=(0,O.Yz7)({factory:ne,token:k,providedIn:"platform"}),k})();function ne(){return(0,O.LFG)(oe)}const K=new O.OlP("Location Initialized");let oe=(()=>{class k extends ee{constructor(L){super(),this._doc=L,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(L){const W=te().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",L,!1),()=>W.removeEventListener("popstate",L)}onHashChange(L){const W=te().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",L,!1),()=>W.removeEventListener("hashchange",L)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(L){this.location.pathname=L}pushState(L,W,le){X()?this._history.pushState(L,W,le):this.location.hash=le}replaceState(L,W,le){X()?this._history.replaceState(L,W,le):this.location.hash=le}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}}return k.\u0275fac=function(L){return new(L||k)(O.LFG(he))},k.\u0275prov=(0,O.Yz7)({factory:ue,token:k,providedIn:"platform"}),k})();function X(){return!!window.history.pushState}function ue(){return new oe((0,O.LFG)(he))}function fe(k,G){if(0==k.length)return G;if(0==G.length)return k;let L=0;return k.endsWith("/")&&L++,G.startsWith("/")&&L++,2==L?k+G.substring(1):1==L?k+G:k+"/"+G}function De(k){const G=k.match(/#|\?|$/),L=G&&G.index||k.length;return k.slice(0,L-("/"===k[L-1]?1:0))+k.slice(L)}function Te(k){return k&&"?"!==k[0]?"?"+k:k}let Ke=(()=>{class k{historyGo(L){throw new Error("Not implemented")}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=(0,O.Yz7)({factory:Ie,token:k,providedIn:"root"}),k})();function Ie(k){const G=(0,O.LFG)(he).location;return new Dt((0,O.LFG)(ee),G&&G.origin||"")}const Ge=new O.OlP("appBaseHref");let Dt=(()=>{class k extends Ke{constructor(L,W){if(super(),this._platformLocation=L,this._removeListenerFns=[],null==W&&(W=this._platformLocation.getBaseHrefFromDOM()),null==W)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=W}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return fe(this._baseHref,L)}path(L=!1){const W=this._platformLocation.pathname+Te(this._platformLocation.search),le=this._platformLocation.hash;return le&&L?`${W}${le}`:W}pushState(L,W,le,Ve){const ze=this.prepareExternalUrl(le+Te(Ve));this._platformLocation.pushState(L,W,ze)}replaceState(L,W,le,Ve){const ze=this.prepareExternalUrl(le+Te(Ve));this._platformLocation.replaceState(L,W,ze)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(L=0){var W,le;null===(le=(W=this._platformLocation).historyGo)||void 0===le||le.call(W,L)}}return k.\u0275fac=function(L){return new(L||k)(O.LFG(ee),O.LFG(Ge,8))},k.\u0275prov=O.Yz7({token:k,factory:k.\u0275fac}),k})(),pt=(()=>{class k extends Ke{constructor(L,W){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(L){const W=fe(this._baseHref,L);return W.length>0?"#"+W:W}pushState(L,W,le,Ve){let ze=this.prepareExternalUrl(le+Te(Ve));0==ze.length&&(ze=this._platformLocation.pathname),this._platformLocation.pushState(L,W,ze)}replaceState(L,W,le,Ve){let ze=this.prepareExternalUrl(le+Te(Ve));0==ze.length&&(ze=this._platformLocation.pathname),this._platformLocation.replaceState(L,W,ze)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(L=0){var W,le;null===(le=(W=this._platformLocation).historyGo)||void 0===le||le.call(W,L)}}return k.\u0275fac=function(L){return new(L||k)(O.LFG(ee),O.LFG(Ge,8))},k.\u0275prov=O.Yz7({token:k,factory:k.\u0275fac}),k})(),At=(()=>{class k{constructor(L,W){this._subject=new O.vpe,this._urlChangeListeners=[],this._platformStrategy=L;const le=this._platformStrategy.getBaseHref();this._platformLocation=W,this._baseHref=De(Kt(le)),this._platformStrategy.onPopState(Ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ve.state,type:Ve.type})})}path(L=!1){return this.normalize(this._platformStrategy.path(L))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(L,W=""){return this.path()==this.normalize(L+Te(W))}normalize(L){return k.stripTrailingSlash(function(k,G){return k&&G.startsWith(k)?G.substring(k.length):G}(this._baseHref,Kt(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._platformStrategy.prepareExternalUrl(L)}go(L,W="",le=null){this._platformStrategy.pushState(le,"",L,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+Te(W)),le)}replaceState(L,W="",le=null){this._platformStrategy.replaceState(le,"",L,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+Te(W)),le)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(L=0){var W,le;null===(le=(W=this._platformStrategy).historyGo)||void 0===le||le.call(W,L)}onUrlChange(L){this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)}))}_notifyUrlChangeListeners(L="",W){this._urlChangeListeners.forEach(le=>le(L,W))}subscribe(L,W,le){return this._subject.subscribe({next:L,error:W,complete:le})}}return k.\u0275fac=function(L){return new(L||k)(O.LFG(Ke),O.LFG(ee))},k.normalizeQueryParams=Te,k.joinWithSlash=fe,k.stripTrailingSlash=De,k.\u0275prov=(0,O.Yz7)({factory:Qt,token:k,providedIn:"root"}),k})();function Qt(){return new At((0,O.LFG)(Ke),(0,O.LFG)(ee))}function Kt(k){return k.replace(/\/index.html$/,"")}var Se=(()=>((Se=Se||{})[Se.Zero=0]="Zero",Se[Se.One=1]="One",Se[Se.Two=2]="Two",Se[Se.Few=3]="Few",Se[Se.Many=4]="Many",Se[Se.Other=5]="Other",Se))();const Ni=O.kL8;class Ur{}let to=(()=>{class k extends Ur{constructor(L){super(),this.locale=L}getPluralCategory(L,W){switch(Ni(W||this.locale)(L)){case Se.Zero:return"zero";case Se.One:return"one";case Se.Two:return"two";case Se.Few:return"few";case Se.Many:return"many";default:return"other"}}}return k.\u0275fac=function(L){return new(L||k)(O.LFG(O.soG))},k.\u0275prov=O.Yz7({token:k,factory:k.\u0275fac}),k})();function wr(k,G){G=encodeURIComponent(G);for(const L of k.split(";")){const W=L.indexOf("="),[le,Ve]=-1==W?[L,""]:[L.slice(0,W),L.slice(W+1)];if(le.trim()===G)return decodeURIComponent(Ve)}return null}class hr{constructor(G,L,W,le){this.$implicit=G,this.ngForOf=L,this.index=W,this.count=le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sn=(()=>{class k{constructor(L,W,le){this._viewContainer=L,this._template=W,this._differs=le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;if(!this._differ&&L)try{this._differ=this._differs.find(L).create(this.ngForTrackBy)}catch(W){throw new Error(`Cannot find a differ supporting object '${L}' of type '${function(k){return k.name||typeof k}(L)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const W=[];L.forEachOperation((le,Ve,ze)=>{if(null==le.previousIndex){const dt=this._viewContainer.createEmbeddedView(this._template,new hr(null,this._ngForOf,-1,-1),null===ze?void 0:ze),Ht=new Fi(le,dt);W.push(Ht)}else if(null==ze)this._viewContainer.remove(null===Ve?void 0:Ve);else if(null!==Ve){const dt=this._viewContainer.get(Ve);this._viewContainer.move(dt,ze);const Ht=new Fi(le,dt);W.push(Ht)}});for(let le=0;le<W.length;le++)this._perViewChange(W[le].view,W[le].record);for(let le=0,Ve=this._viewContainer.length;le<Ve;le++){const ze=this._viewContainer.get(le);ze.context.index=le,ze.context.count=Ve,ze.context.ngForOf=this._ngForOf}L.forEachIdentityChange(le=>{this._viewContainer.get(le.currentIndex).context.$implicit=le.item})}_perViewChange(L,W){L.context.$implicit=W.item}static ngTemplateContextGuard(L,W){return!0}}return k.\u0275fac=function(L){return new(L||k)(O.Y36(O.s_b),O.Y36(O.Rgc),O.Y36(O.ZZ4))},k.\u0275dir=O.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),k})();class Fi{constructor(G,L){this.record=G,this.view=L}}let $i=(()=>{class k{constructor(L,W){this._viewContainer=L,this._context=new No,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){Po("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){Po("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,W){return!0}}return k.\u0275fac=function(L){return new(L||k)(O.Y36(O.s_b),O.Y36(O.Rgc))},k.\u0275dir=O.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),k})();class No{constructor(){this.$implicit=null,this.ngIf=null}}function Po(k,G){if(G&&!G.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,O.AaK)(G)}'.`)}class ns{createSubscription(G,L){return G.subscribe({next:L,error:W=>{throw W}})}dispose(G){G.unsubscribe()}onDestroy(G){G.unsubscribe()}}class ha{createSubscription(G,L){return G.then(L,W=>{throw W})}dispose(G){}onDestroy(G){}}const js=new ha,zl=new ns;let fa=(()=>{class k{constructor(L){this._ref=L,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(L){return this._obj?L!==this._obj?(this._dispose(),this.transform(L)):this._latestValue:(L&&this._subscribe(L),this._latestValue)}_subscribe(L){this._obj=L,this._strategy=this._selectStrategy(L),this._subscription=this._strategy.createSubscription(L,W=>this._updateLatestValue(L,W))}_selectStrategy(L){if((0,O.QGY)(L))return js;if((0,O.F4k)(L))return zl;throw function(k,G){return Error(`InvalidPipeArgument: '${G}' for pipe '${(0,O.AaK)(k)}'`)}(k,L)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(L,W){L===this._obj&&(this._latestValue=W,this._ref.markForCheck())}}return k.\u0275fac=function(L){return new(L||k)(O.Y36(O.sBO,16))},k.\u0275pipe=O.Yjl({name:"async",type:k,pure:!1}),k})(),Pr=(()=>{class k{}return k.\u0275fac=function(L){return new(L||k)},k.\u0275mod=O.oAB({type:k}),k.\u0275inj=O.cJS({providers:[{provide:Ur,useClass:to}]}),k})();const Cr="browser";function Kr(k){return k===Cr}function io(k){return"server"===k}let so=(()=>{class k{}return k.\u0275prov=(0,O.Yz7)({token:k,providedIn:"root",factory:()=>new Lo((0,O.LFG)(he),window)}),k})();class Lo{constructor(G,L){this.document=G,this.window=L,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const L=function(k,G){const L=k.getElementById(G)||k.getElementsByName(G)[0];if(L)return L;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const W=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let le=W.currentNode;for(;le;){const Ve=le.shadowRoot;if(Ve){const ze=Ve.getElementById(G)||Ve.querySelector(`[name="${G}"]`);if(ze)return ze}le=W.nextNode()}}return null}(this.document,G);L&&(this.scrollToElement(L),this.attemptFocus(L))}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const L=this.window.history;L&&L.scrollRestoration&&(L.scrollRestoration=G)}}scrollToElement(G){const L=G.getBoundingClientRect(),W=L.left+this.window.pageXOffset,le=L.top+this.window.pageYOffset,Ve=this.offset();this.window.scrollTo(W-Ve[0],le-Ve[1])}attemptFocus(G){return G.focus(),this.document.activeElement===G}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=Cs(this.window.history)||Cs(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch(G){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(G){return!1}}}function Cs(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Vo{}},7716:(rt,Me,H)=>{"use strict";H.d(Me,{deG:()=>pd,tb:()=>FM,AFp:()=>NM,ip1:()=>iS,CZH:()=>om,hGG:()=>VS,z2F:()=>Ky,sBO:()=>A1,Sil:()=>am,_Vd:()=>mh,EJc:()=>VM,SBq:()=>Jo,qLn:()=>S,vpe:()=>xl,gxx:()=>tr,tBr:()=>fc,XFs:()=>ht,OlP:()=>Sr,zs3:()=>Bn,ZZ4:()=>Iy,aQg:()=>zg,soG:()=>Cw,YKP:()=>cT,v3s:()=>EN,h0i:()=>vh,PXZ:()=>mN,R0b:()=>To,FiY:()=>Ta,Lbi:()=>kM,g9A:()=>PM,Qsj:()=>ZI,FYo:()=>Ml,JOm:()=>yo,Tiy:()=>Gf,q3G:()=>or,tp0:()=>gr,EAV:()=>cR,Rgc:()=>Xo,dDg:()=>mS,DyG:()=>lu,q4F:()=>_h,GfV:()=>Xb,s_b:()=>Ay,ifc:()=>Je,eFA:()=>Ow,G48:()=>ZM,Gpc:()=>oe,f3M:()=>Zh,X6Q:()=>Mw,_c5:()=>Jy,VLi:()=>_S,c2e:()=>LM,zSh:()=>mg,wAp:()=>Ot,vHH:()=>De,EiD:()=>gu,mCW:()=>Wo,qzn:()=>_c,JVY:()=>du,pB0:()=>Nv,eBb:()=>Td,L6k:()=>Bp,LAX:()=>qm,cg1:()=>oy,Tjo:()=>xS,kL8:()=>CI,yhl:()=>Wm,dqk:()=>_n,sIi:()=>Oa,CqO:()=>V_,QGY:()=>Ag,F4k:()=>sb,RDi:()=>oi,AaK:()=>ee,z3N:()=>Si,qOj:()=>Ms,TTD:()=>Pr,_Bn:()=>ku,xp6:()=>sE,uIk:()=>x_,ekj:()=>kf,Suo:()=>hM,Xpm:()=>Jt,lG2:()=>Hl,Yz7:()=>kt,cJS:()=>kn,oAB:()=>Pi,Yjl:()=>za,Y36:()=>ah,_UZ:()=>xi,qZA:()=>Dg,TgZ:()=>ib,EpF:()=>tI,n5z:()=>qi,Ikx:()=>Db,LFG:()=>Ar,$8M:()=>Ki,NdJ:()=>Mg,CRH:()=>fM,kcU:()=>tl,O4$:()=>bp,oxw:()=>U_,ALo:()=>Hy,lcZ:()=>qT,Hsn:()=>ob,F$t:()=>rI,Q6J:()=>Sg,s9C:()=>ab,DdM:()=>HT,iGM:()=>uM,CHM:()=>ec,LSH:()=>mu,kYT:()=>Qc,Udp:()=>kg,WFA:()=>Of,d8E:()=>Fg,YNc:()=>HE,_uU:()=>dh,Oqu:()=>Q_,hij:()=>Lc,Gf:()=>dM});var O=H(9765),m=H(5319),te=H(7574),me=H(6682),ve=H(8819);function ae(a){for(let l in a)if(a[l]===ae)return l;throw Error("Could not find renamed property on target object.")}function he(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ee(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ee).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function ne(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const K=ae({__forward_ref__:ae});function oe(a){return a.__forward_ref__=oe,a.toString=function(){return ee(this())},a}function X(a){return ue(a)?a():a}function ue(a){return"function"==typeof a&&a.hasOwnProperty(K)&&a.__forward_ref__===oe}class De extends Error{constructor(l,u){super(function(a,l){return`${a?`NG0${a}: `:""}${l}`}(l,u)),this.code=l}}function Ie(a){return"string"==typeof a?a:null==a?"":String(a)}function Ge(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ie(a)}function Qt(a,l){const u=l?` in ${l}`:"";throw new De("201",`No provider for ${Ge(a)} found${u}`)}function mt(a,l){null==a&&function(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function kt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function kn(a){return{providers:a.providers||[],imports:a.imports||[]}}function rr(a){return Wn(a,Ni)||Wn(a,Vs)}function Wn(a,l){return a.hasOwnProperty(l)?a[l]:null}function Oo(a){return a&&(a.hasOwnProperty(Ls)||a.hasOwnProperty(Bs))?a[Ls]:null}const Ni=ae({\u0275prov:ae}),Ls=ae({\u0275inj:ae}),Vs=ae({ngInjectableDef:ae}),Bs=ae({ngInjectorDef:ae});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let cr;function yr(a){const l=cr;return cr=a,l}function Gt(a,l,u){const h=rr(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&ht.Optional?null:void 0!==l?l:void Qt(ee(a),"Injector")}function st(a){return{toString:a}.toString()}var tn=(()=>((tn=tn||{})[tn.OnPush=0]="OnPush",tn[tn.Default=1]="Default",tn))(),Je=(()=>((Je=Je||{})[Je.Emulated=0]="Emulated",Je[Je.None=2]="None",Je[Je.ShadowDom=3]="ShadowDom",Je))();const vt="undefined"!=typeof globalThis&&globalThis,$a="undefined"!=typeof window&&window,ca="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ir="undefined"!=typeof global&&global,_n=vt||ir||$a||ca,In={},re=[],ie=ae({\u0275cmp:ae}),we=ae({\u0275dir:ae}),Ae=ae({\u0275pipe:ae}),be=ae({\u0275mod:ae}),Qe=ae({\u0275loc:ae}),ut=ae({\u0275fac:ae}),rn=ae({__NG_ELEMENT_ID__:ae});let cn=0;function Jt(a){return st(()=>{const u={},h={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||re,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Je.Emulated,id:"c",styles:a.styles||re,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,_=a.features,b=a.pipes;return h.id+=cn++,h.inputs=ki(a.inputs,u),h.outputs=ki(a.outputs),_&&_.forEach(C=>C(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(vr):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map(Zn):null,h})}function vr(a){return jn(a)||function(a){return a[we]||null}(a)}function Zn(a){return function(a){return a[Ae]||null}(a)}const Vt={};function Pi(a){return st(()=>{const l={type:a.type,bootstrap:a.bootstrap||re,declarations:a.declarations||re,imports:a.imports||re,exports:a.exports||re,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Vt[a.id]=a.type),l})}function Qc(a,l){return st(()=>{const u=Br(a,!0);u.declarations=l.declarations||re,u.imports=l.imports||re,u.exports=l.exports||re})}function ki(a,l){if(null==a)return In;const u={};for(const h in a)if(a.hasOwnProperty(h)){let f=a[h],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),u[f]=h,l&&(l[f]=_)}return u}const Hl=Jt;function za(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function jn(a){return a[ie]||null}function Br(a,l){const u=a[be]||null;if(!u&&!0===l)throw new Error(`Type ${ee(a)} does not have '\u0275mod' property.`);return u}function Tn(a){return Array.isArray(a)&&"object"==typeof a[1]}function Qn(a){return Array.isArray(a)&&!0===a[1]}function da(a){return 0!=(8&a.flags)}function ts(a){return 2==(2&a.flags)}function ii(a){return 1==(1&a.flags)}function vi(a){return null!==a.template}function Li(a){return 0!=(512&a[2])}function is(a,l){return a.hasOwnProperty(ut)?a[ut]:null}class si{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Pr(){return Cr}function Cr(a){return a.type.prototype.ngOnChanges&&(a.setInput=td),Yl}function Yl(){const a=Kr(this),l=null==a?void 0:a.current;if(l){const u=a.previous;if(u===In)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function td(a,l,u,h){const f=Kr(a)||function(a,l){return a[Ql]=l}(a,{previous:In,current:null}),_=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[u],D=b[C];_[C]=new si(D&&D.currentValue,l,b===In),a[h]=l}Pr.ngInherit=!0;const Ql="__ngSimpleChanges__";function Kr(a){return a[Ql]||null}const so="http://www.w3.org/2000/svg";let Cs;function oi(a){Cs=a}function k(a){return!!a.listen}const L={createRenderer:(a,l)=>void 0!==Cs?Cs:"undefined"!=typeof document?document:void 0};function le(a){for(;Array.isArray(a);)a=a[0];return a}function dt(a,l){return le(l[a])}function Ht(a,l){return le(l[a.index])}function wn(a,l){return a.data[l]}function dn(a,l){const u=l[a];return Tn(u)?u:u[0]}function On(a){return 4==(4&a[2])}function Jn(a){return 128==(128&a[2])}function Hn(a,l){return null==l?null:a[l]}function Wi(a){a[18]=0}function Ei(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Rt={lFrame:Bh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function lo(){return Rt.bindingsEnabled}function We(){return Rt.lFrame.lView}function ln(){return Rt.lFrame.tView}function ec(a){return Rt.lFrame.contextLView=a,a[8]}function Ln(){let a=tc();for(;null!==a&&64===a.type;)a=a.parent;return a}function tc(){return Rt.lFrame.currentTNode}function Is(a,l){const u=Rt.lFrame;u.currentTNode=a,u.isParent=l}function rd(){return Rt.lFrame.isParent}function tu(){Rt.lFrame.isParent=!1}function pa(){return Rt.isInCheckNoChangesMode}function Uo(a){Rt.isInCheckNoChangesMode=a}function jr(){const a=Rt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Ya(){return Rt.lFrame.bindingIndex++}function od(a,l){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=a,rc(l)}function rc(a){Rt.lFrame.currentDirectiveIndex=a}function Qa(a){const l=Rt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function ad(){return Rt.lFrame.currentQueryIndex}function Ja(a){Rt.lFrame.currentQueryIndex=a}function Ep(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function uo(a,l,u){if(u&ht.SkipSelf){let f=l,_=a;for(;!(f=f.parent,null!==f||u&ht.Host||(f=Ep(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;l=f,a=_}const h=Rt.lFrame=Xa();return h.currentTNode=l,h.lView=a,!0}function ic(a){const l=Xa(),u=a[1];Rt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Xa(){const a=Rt.lFrame,l=null===a?null:a.child;return null===l?Bh(a):l}function Bh(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function ru(){const a=Rt.lFrame;return Rt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const ld=ru;function el(){const a=ru();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Tr(){return Rt.lFrame.selectedIndex}function ga(a){Rt.lFrame.selectedIndex=a}function Xn(){const a=Rt.lFrame;return wn(a.tView,a.selectedIndex)}function bp(){Rt.lFrame.currentNamespace=so}function tl(){Rt.lFrame.currentNamespace=null}function iu(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const _=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:N,ngOnDestroy:B}=_;b&&(a.contentHooks||(a.contentHooks=[])).push(-u,b),C&&((a.contentHooks||(a.contentHooks=[])).push(u,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,C)),D&&(a.viewHooks||(a.viewHooks=[])).push(-u,D),N&&((a.viewHooks||(a.viewHooks=[])).push(u,N),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,N)),null!=B&&(a.destroyHooks||(a.destroyHooks=[])).push(u,B)}}function jo(a,l,u){zs(a,l,3,u)}function _a(a,l,u,h){(3&a[2])===u&&zs(a,l,u,h)}function Ho(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function zs(a,l,u,h){const _=null!=h?h:-1,b=l.length-1;let C=0;for(let D=void 0!==h?65535&a[18]:0;D<b;D++)if("number"==typeof l[D+1]){if(C=l[D],null!=h&&C>=h)break}else l[D]<0&&(a[18]+=65536),(C<_||-1==_)&&(wp(a,u,l,D),a[18]=(4294901760&a[18])+D+2),D++}function wp(a,l,u,h){const f=u[h]<0,_=u[h+1],C=a[f?-u[h]:u[h]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{_.call(C)}finally{}}}else try{_.call(C)}finally{}}class Go{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function sl(a,l,u){const h=k(a);let f=0;for(;f<u.length;){const _=u[f];if("number"==typeof _){if(0!==_)break;f++;const b=u[f++],C=u[f++],D=u[f++];h?a.setAttribute(l,C,D,b):l.setAttributeNS(b,C,D)}else{const b=_,C=u[++f];su(b)?h&&a.setProperty(l,b,C):h?a.setAttribute(l,b,C):l.setAttribute(b,C),f++}}return f}function ol(a){return 3===a||4===a||6===a}function su(a){return 64===a.charCodeAt(0)}function fr(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const f=l[h];"number"==typeof f?u=f:0===u||Ip(a,u,f,null,-1===u||2===u?l[++h]:null)}}return a}function Ip(a,l,u,h,f){let _=0,b=a.length;if(-1===l)b=-1;else for(;_<a.length;){const C=a[_++];if("number"==typeof C){if(C===l){b=-1;break}if(C>l){b=_-1;break}}}for(;_<a.length;){const C=a[_];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(a[_+1]=f));if(h===a[_+1])return void(a[_+2]=f)}_++,null!==h&&_++,null!==f&&_++}-1!==b&&(a.splice(b,0,l),_=b+1),a.splice(_++,0,u),null!==h&&a.splice(_++,0,h),null!==f&&a.splice(_++,0,f)}function ud(a){return-1!==a}function va(a){return 32767&a}function al(a,l){let u=function(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let Gh=!0;function ou(a){const l=Gh;return Gh=a,l}let fn=0;function $o(a,l){const u=x(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,ho(h.data,a),ho(l,null),ho(h.blueprint,null));const f=M(a,l),_=a.injectorIndex;if(ud(f)){const b=va(f),C=al(f,l),D=C[1].data;for(let N=0;N<8;N++)l[_+N]=C[b+N]|D[b+N]}return l[_+8]=f,_}function ho(a,l){a.push(0,0,0,0,0,0,0,0,l)}function x(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function M(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,f=l;for(;null!==f;){const _=f[1],b=_.type;if(h=2===b?_.declTNode:1===b?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function T(a,l,u){!function(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(rn)&&(h=u[rn]),null==h&&(h=u[rn]=fn++);const f=255&h;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function V(a,l,u){if(u&ht.Optional)return a;Qt(l,"NodeInjector")}function $(a,l,u,h){if(u&ht.Optional&&void 0===h&&(h=null),0==(u&(ht.Self|ht.Host))){const f=a[9],_=yr(void 0);try{return f?f.get(l,h,u&ht.Optional):Gt(l,h,u&ht.Optional)}finally{yr(_)}}return V(h,l,u)}function se(a,l,u,h=ht.Default,f){if(null!==a){const _=function(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(rn)?a[rn]:void 0;return"number"==typeof l?l>=0?255&l:Ue:l}(u);if("function"==typeof _){if(!uo(l,a,h))return h&ht.Host?V(f,u,h):$(l,u,h,f);try{const b=_(h);if(null!=b||h&ht.Optional)return b;Qt(u)}finally{ld()}}else if("number"==typeof _){let b=null,C=x(a,l),D=-1,N=h&ht.Host?l[16][6]:null;for((-1===C||h&ht.SkipSelf)&&(D=-1===C?M(a,l):l[C+8],-1!==D&&pr(h,!1)?(b=l[1],C=va(D),l=al(D,l)):C=-1);-1!==C;){const B=l[1];if(Et(_,C,B.data)){const z=at(C,l,u,b,h,N);if(z!==pe)return z}D=l[C+8],-1!==D&&pr(h,l[1].data[C+8]===N)&&Et(_,C,l)?(b=B,C=va(D),l=al(D,l)):C=-1}}}return $(l,u,h,f)}const pe={};function Ue(){return new Ci(Ln(),We())}function at(a,l,u,h,f,_){const b=l[1],C=b.data[a+8],B=yt(C,b,u,null==h?ts(C)&&Gh:h!=b&&0!=(3&C.type),f&ht.Host&&_===C);return null!==B?zt(l,b,B,C):pe}function yt(a,l,u,h,f){const _=a.providerIndexes,b=l.data,C=1048575&_,D=a.directiveStart,B=_>>20,Y=f?C+B:a.directiveEnd;for(let ce=h?C:C+B;ce<Y;ce++){const _e=b[ce];if(ce<D&&u===_e||ce>=D&&_e.type===u)return ce}if(f){const ce=b[D];if(ce&&vi(ce)&&ce.type===u)return D}return null}function zt(a,l,u,h){let f=a[u];const _=l.data;if(function(a){return a instanceof Go}(f)){const b=f;b.resolving&&function(a,l){throw new De("200",`Circular dependency in DI detected for ${a}`)}(Ge(_[u]));const C=ou(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?yr(b.injectImpl):null;uo(a,h,ht.Default);try{f=a[u]=b.factory(void 0,_,a,h),l.firstCreatePass&&u>=h.directiveStart&&function(a,l,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:_}=l.type.prototype;if(h){const b=Cr(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),_&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,_))}(u,_[u],l)}finally{null!==D&&yr(D),ou(C),b.resolving=!1,ld()}}return f}function Et(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function pr(a,l){return!(a&ht.Self||a&ht.Host&&l)}class Ci{constructor(l,u){this._tNode=l,this._lView=u}get(l,u){return se(this._tNode,this._lView,l,void 0,u)}}function qi(a){return st(()=>{const l=a.prototype.constructor,u=l[ut]||fo(l),h=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==h;){const _=f[ut]||fo(f);if(_&&_!==u)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function fo(a){return ue(a)?()=>{const l=fo(X(a));return l&&l()}:is(a)}function Ki(a){return function(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const _=u[f];if(ol(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(_===l)return u[f+1];f+=2}}}return null}(Ln(),a)}const Ws="__parameters__";function ac(a,l,u){return st(()=>{const h=function(a){return function(...u){if(a){const h=a(...u);for(const f in h)this[f]=h[f]}}}(l);function f(..._){if(this instanceof f)return h.apply(this,_),this;const b=new f(..._);return C.annotation=b,C;function C(D,N,B){const z=D.hasOwnProperty(Ws)?D[Ws]:Object.defineProperty(D,Ws,{value:[]})[Ws];for(;z.length<=B;)z.push(null);return(z[B]=z[B]||[]).push(b),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class Sr{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=kt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pd=new Sr("AnalyzeForEntryComponents"),lu=Function;function Ti(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),Ti(h,l)):l!==a&&l.push(h)}return l}function Ts(a,l){a.forEach(u=>Array.isArray(u)?Ts(u,l):l(u))}function cl(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function uc(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function qs(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function Dr(a,l,u){let h=cu(a,l);return h>=0?a[1|h]=u:(h=~h,function(a,l,u,h){let f=a.length;if(f==l)a.push(u,h);else if(1===f)a.push(h,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Dp(a,l){const u=cu(a,l);if(u>=0)return a[1|u]}function cu(a,l){return function(a,l,u){let h=0,f=a.length>>u;for(;f!==h;){const _=h+(f-h>>1),b=a[_<<u];if(l===b)return _<<u;b>l?f=_:h=_+1}return~(f<<u)}(a,l,1)}const ul={},vd="__NG_DI_FLAG__",hc="ngTempTokenPath",Fm=/\n/gm,uu="__source",Ca=ae({provide:String,useValue:ae});let dl;function hl(a){const l=dl;return dl=a,l}function Rp(a,l=ht.Default){if(void 0===dl)throw new Error("inject() must be called from an injection context");return null===dl?Gt(a,void 0,l):dl.get(a,l&ht.Optional?null:void 0,l)}function Ar(a,l=ht.Default){return(cr||Rp)(X(a),l)}const Zh=Ar;function zo(a){const l=[];for(let u=0;u<a.length;u++){const h=X(a[u]);if(Array.isArray(h)){if(0===h.length)throw new Error("Arguments array must have arguments.");let f,_=ht.Default;for(let b=0;b<h.length;b++){const C=h[b],D=xp(C);"number"==typeof D?-1===D?f=C.token:_|=D:f=C}l.push(Ar(f,_))}else l.push(Ar(h))}return l}function Ia(a,l){return a[vd]=l,a.prototype[vd]=l,a}function xp(a){return a[vd]}function Vm(a,l,u,h){const f=a[hc];throw l[uu]&&f.unshift(l[uu]),a.message=function(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=ee(l);if(Array.isArray(l))f=l.map(ee).join(" -> ");else if("object"==typeof l){let _=[];for(let b in l)if(l.hasOwnProperty(b)){let C=l[b];_.push(b+":"+("string"==typeof C?JSON.stringify(C):ee(C)))}f=`{${_.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${a.replace(Fm,"\n  ")}`}("\n"+a.message,f,u,h),a.ngTokenPath=f,a[hc]=null,a}const fc=Ia(ac("Inject",a=>({token:a})),-1),Ta=Ia(ac("Optional"),8),gr=Ia(ac("SkipSelf"),4);let Cd;function gl(a){var l;return(null===(l=function(){if(void 0===Cd&&(Cd=null,_n.trustedTypes))try{Cd=_n.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return Cd}())||void 0===l?void 0:l.createHTML(a))||a}class ml{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xv extends ml{getTypeName(){return"HTML"}}class Ov extends ml{getTypeName(){return"Style"}}class Lp extends ml{getTypeName(){return"Script"}}class Vp extends ml{getTypeName(){return"URL"}}class q0 extends ml{getTypeName(){return"ResourceURL"}}function Si(a){return a instanceof ml?a.changingThisBreaksApplicationSecurity:a}function _c(a,l){const u=Wm(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function Wm(a){return a instanceof ml&&a.getTypeName()||null}function du(a){return new xv(a)}function Bp(a){return new Ov(a)}function Td(a){return new Lp(a)}function qm(a){return new Vp(a)}function Nv(a){return new q0(a)}class Km{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(gl(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Zm{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=gl(l),u;const h=this.inertDocument.createElement("body");return h.innerHTML=gl(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&l.removeAttribute(b)}let h=l.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const rf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pv=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wo(a){return(a=String(a)).match(rf)||a.match(Pv)?a:"unsafe:"+a}function go(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function Ss(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const Up=go("area,br,col,hr,img,wbr"),Sd=go("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dd=go("rp,rt"),yc=Ss(Up,Ss(Sd,go("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ss(Dd,go("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ss(Dd,Sd)),vc=go("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fu=go("srcset"),Hp=Ss(vc,fu,go("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),go("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qm=go("script,style,template");class Ad{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!yc.hasOwnProperty(u))return this.sanitizedSomething=!0,!Qm.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let f=0;f<h.length;f++){const _=h.item(f),b=_.name,C=b.toLowerCase();if(!Hp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=_.value;vc[C]&&(D=Wo(D)),fu[C]&&(a=D,D=(a=String(a)).split(",").map(l=>Wo(l.trim())).join(", ")),this.buf.push(" ",b,'="',sf(D),'"')}var a;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();yc.hasOwnProperty(u)&&!Up.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(sf(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const Gp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pu=/([^\#-~ |!])/g;function sf(a){return a.replace(/&/g,"&amp;").replace(Gp,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(pu,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yl;function gu(a,l){let u=null;try{yl=yl||function(a){const l=new Zm(a);return function(){try{return!!(new window.DOMParser).parseFromString(gl(""),"text/html")}catch(a){return!1}}()?new Km(l):l}(a);let h=l?String(l):"";u=yl.getInertBodyElement(h);let f=5,_=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=_,_=u.innerHTML,u=yl.getInertBodyElement(h)}while(h!==_);return gl((new Ad).sanitizeChildren(of(u)||u))}finally{if(u){const h=of(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function of(a){return"content"in a&&function(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var or=(()=>((or=or||{})[or.NONE=0]="NONE",or[or.HTML=1]="HTML",or[or.STYLE=2]="STYLE",or[or.SCRIPT=3]="SCRIPT",or[or.URL=4]="URL",or[or.RESOURCE_URL=5]="RESOURCE_URL",or))();function mu(a){const l=function(){const a=We();return a&&a[12]}();return l?l.sanitize(or.URL,a)||"":_c(a,"URL")?Si(a):Wo(Ie(a))}const mo="__ngContext__";function mr(a,l){a[mo]=l}function zp(a){const l=function(a){return a[mo]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function I(a){return a.ngOriginalError}function E(a,...l){a.error(...l)}class S{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),h=this._findContext(l),f=(a=l)&&a.ngErrorLogger||E;var a;f(this._console,"ERROR",l),u&&f(this._console,"ORIGINAL ERROR",u),h&&f(this._console,"ERROR CONTEXT",h)}_findContext(l){return l?l.ngDebugContext||this._findContext(I(l)):null}_findOriginalError(l){let u=l&&I(l);for(;u&&I(u);)u=I(u);return u||null}}const Nd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_n))();function _o(a){return a instanceof Function?a():a}var yo=(()=>((yo=yo||{})[yo.Important=1]="Important",yo[yo.DashCase=2]="DashCase",yo))();function Vd(a,l){return undefined(a,l)}function hf(a){const l=a[3];return Qn(l)?l[3]:l}function Vv(a){return Uv(a[13])}function Bv(a){return Uv(a[4])}function Uv(a){for(;null!==a&&!Qn(a);)a=a[4];return a}function Bd(a,l,u,h,f){if(null!=h){let _,b=!1;Qn(h)?_=h:Tn(h)&&(b=!0,h=h[0]);const C=le(h);0===a&&null!==u?null==f?s_(l,u,C):Dc(l,u,C,f||null,!0):1===a&&null!==u?Dc(l,u,C,f||null,!0):2===a?function(a,l,u){const h=Xp(a,l);h&&function(a,l,u,h){k(a)?a.removeChild(l,u,h):l.removeChild(u)}(a,h,l,u)}(l,C,b):3===a&&l.destroyNode(C),null!=_&&function(a,l,u,h,f){const _=u[7];_!==le(u)&&Bd(l,a,h,_,f);for(let C=10;C<u.length;C++){const D=u[C];pf(D[1],D,a,l,h,_)}}(l,a,_,u,f)}}function r_(a,l,u){return k(a)?a.createElement(l,u):null===u?a.createElement(l):a.createElementNS(u,l)}function $v(a,l){const u=a[9],h=u.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,Ei(f,-1)),u.splice(h,1)}function Yp(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const f=h[17];null!==f&&f!==a&&$v(f,h),l>0&&(a[u-1][4]=h[4]);const _=uc(a,10+l);!function(a,l){pf(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const b=_[19];null!==b&&b.detachView(_[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Qp(a,l){if(!(256&l[2])){const u=l[11];k(u)&&u.destroyNode&&pf(a,l,u,3,null,null),function(a){let l=a[13];if(!l)return zv(a[1],a);for(;l;){let u=null;if(Tn(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)Tn(l)&&zv(l[1],l),l=l[3];null===l&&(l=a),Tn(l)&&zv(l[1],l),u=l&&l[4]}l=u}}(l)}}function zv(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const f=l[u[h]];if(!(f instanceof Go)){const _=u[h+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const C=f[_[b]],D=_[b+1];try{D.call(C)}finally{}}else try{_.call(f)}finally{}}}}(a,l),function(a,l){const u=a.cleanup,h=l[7];let f=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const b=u[_+1],C="function"==typeof b?b(l):le(l[b]),D=h[f=u[_+2]],N=u[_+3];"boolean"==typeof N?C.removeEventListener(u[_],D,N):N>=0?h[f=N]():h[f=-N].unsubscribe(),_+=2}else{const b=h[f=u[_+1]];u[_].call(b)}if(null!==h){for(let _=f+1;_<h.length;_++)h[_]();l[7]=null}}(a,l),1===l[1].type&&k(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&Qn(l[3])){u!==l[3]&&$v(u,l);const h=l[19];null!==h&&h.detachView(a)}}}function Wv(a,l,u){return function(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const f=a.data[h.directiveStart].encapsulation;if(f===Je.None||f===Je.Emulated)return null}return Ht(h,u)}(a,l.parent,u)}function Dc(a,l,u,h,f){k(a)?a.insertBefore(l,u,h,f):l.insertBefore(u,h,f)}function s_(a,l,u){k(a)?a.appendChild(l,u):l.appendChild(u)}function Kv(a,l,u,h,f){null!==h?Dc(a,l,u,h,f):s_(a,l,u)}function Xp(a,l){return k(a)?a.parentNode(l):l.parentNode}function bu(a,l,u){return Yv(a,l,u)}let Yv=function(a,l,u){return 40&a.type?Ht(a,u):null};function Ud(a,l,u,h){const f=Wv(a,h,l),_=l[11],C=bu(h.parent||l[6],h,l);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)Kv(_,f,u[D],C,!1);else Kv(_,f,u,C,!1)}function ls(a,l){if(null!==l){const u=l.type;if(3&u)return Ht(l,a);if(4&u)return l_(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return ls(a,h);{const f=a[l.index];return Qn(f)?l_(-1,f):le(f)}}if(32&u)return Vd(l,a)()||le(a[l.index]);{const h=Jv(a,l);return null!==h?Array.isArray(h)?h[0]:ls(hf(a[16]),h):ls(a,l.next)}}return null}function Jv(a,l){return null!==l?a[16][6].projection[l.projection]:null}function l_(a,l){const u=10+a+1;if(u<l.length){const h=l[u],f=h[1].firstChild;if(null!==f)return ls(h,f)}return l[7]}function c_(a,l,u,h,f,_,b){for(;null!=u;){const C=h[u.index],D=u.type;if(b&&0===l&&(C&&mr(le(C),h),u.flags|=4),64!=(64&u.flags))if(8&D)c_(a,l,u.child,h,f,_,!1),Bd(l,a,f,C,_);else if(32&D){const N=Vd(u,h);let B;for(;B=N();)Bd(l,a,f,B,_);Bd(l,a,f,C,_)}else 16&D?Xv(a,l,h,u,f,_):Bd(l,a,f,C,_);u=b?u.projectionNext:u.next}}function pf(a,l,u,h,f,_){c_(u,h,a.firstChild,l,f,_,!1)}function Xv(a,l,u,h,f,_){const b=u[16],D=b[6].projection[h.projection];if(Array.isArray(D))for(let N=0;N<D.length;N++)Bd(l,a,f,D[N],_);else c_(a,l,D,b[3],f,_,!0)}function tE(a,l,u){k(a)?a.setAttribute(l,"style",u):l.style.cssText=u}function Hd(a,l,u){k(a)?""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u):l.className=u}function nE(a,l,u){let h=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const _=l.length;if(f+_===h||a.charCodeAt(f+_)<=32)return f}u=f+1}}const nA="ng-template";function Yi(a,l,u){let h=0;for(;h<a.length;){let f=a[h++];if(u&&"class"===f){if(f=a[h],-1!==nE(f.toLowerCase(),l,0))return!0}else if(1===f){for(;h<a.length&&"string"==typeof(f=a[h++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function Gd(a){return 4===a.type&&a.value!==nA}function wu(a,l,u){return l===(4!==a.type||u?a.value:nA)}function rE(a,l,u){let h=4;const f=a.attrs||[],_=function(a){for(let l=0;l<a.length;l++)if(ol(a[l]))return l;return a.length}(f);let b=!1;for(let C=0;C<l.length;C++){const D=l[C];if("number"!=typeof D){if(!b)if(4&h){if(h=2|1&h,""!==D&&!wu(a,D,u)||""===D&&1===l.length){if(Aa(h))return!1;b=!0}}else{const N=8&h?D:l[++C];if(8&h&&null!==a.attrs){if(!Yi(a.attrs,N,u)){if(Aa(h))return!1;b=!0}continue}const z=tt(8&h?"class":D,f,Gd(a),u);if(-1===z){if(Aa(h))return!1;b=!0;continue}if(""!==N){let Y;Y=z>_?"":f[z+1].toLowerCase();const ce=8&h?Y:null;if(ce&&-1!==nE(ce,N,0)||2&h&&N!==Y){if(Aa(h))return!1;b=!0}}}}else{if(!b&&!Aa(h)&&!Aa(D))return!1;if(b&&Aa(D))continue;b=!1,h=D|1&h}}return Aa(h)||b}function Aa(a){return 0==(1&a)}function tt(a,l,u,h){if(null===l)return-1;let f=0;if(h||!u){let _=!1;for(;f<l.length;){const b=l[f];if(b===a)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let C=l[++f];for(;"string"==typeof C;)C=l[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function Xr(a,l,u=!1){for(let h=0;h<l.length;h++)if(rE(a,l[h],u))return!0;return!1}function $t(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let f=0;f<a.length;f++)if(a[f]!==h[f])continue e;return!0}}return!1}function nC(a,l){return a?":not("+l.trim()+")":l}function ot(a){let l=a[0],u=1,h=2,f="",_=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const C=a[++u];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!Aa(b)&&(l+=nC(_,f),f=""),h=b,_=_||!Aa(h);u++}return""!==f&&(l+=nC(_,f)),l}const gt={};function sE(a){rC(ln(),We(),Tr()+a,pa())}function rC(a,l,u,h){if(!h)if(3==(3&l[2])){const _=a.preOrderCheckHooks;null!==_&&jo(l,_,u)}else{const _=a.preOrderHooks;null!==_&&_a(l,_,0,u)}ga(u)}function d_(a,l){return a<<17|l<<2}function Ma(a){return a>>17&32767}function Ds(a){return 2|a}function Ac(a){return(131068&a)>>2}function h_(a,l){return-131069&a|l<<2}function Cu(a){return 1|a}function lE(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],_=u[h+1];if(-1!==_){const b=a.data[_];Ja(f),b.contentQueries(2,l[_],_)}}}function Tu(a,l,u,h,f,_,b,C,D,N){const B=l.blueprint.slice();return B[0]=f,B[2]=140|h,Wi(B),B[3]=B[15]=a,B[8]=u,B[10]=b||a&&a[10],B[11]=C||a&&a[11],B[12]=D||a&&a[12]||null,B[9]=N||a&&a[9]||null,B[6]=_,B[16]=2==l.type?a[16]:B,B}function Oc(a,l,u,h,f){let _=a.data[l];if(null===_)_=function(a,l,u,h,f){const _=tc(),b=rd(),D=a.data[l]=function(a,l,u,h,f,_){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,u,l,h,f);return null===a.firstChild&&(a.firstChild=D),null!==_&&(b?null==_.child&&null!==D.parent&&(_.child=D):null===_.next&&(_.next=D)),D}(a,l,u,h,f),Rt.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=u,_.value=h,_.attrs=f;const b=function(){const a=Rt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return Is(_,!0),_}function yf(a,l,u,h){if(0===u)return-1;const f=l.length;for(let _=0;_<u;_++)l.push(h),a.blueprint.push(h),a.data.push(null);return f}function lg(a,l,u){ic(l);try{const h=a.viewQuery;null!==h&&T_(1,h,u);const f=a.template;null!==f&&cE(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&lE(a,l),a.staticViewQueries&&T_(2,a.viewQuery,u);const _=a.components;null!==_&&function(a,l){for(let u=0;u<l.length;u++)hi(a,l[u])}(l,_)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,el()}}function vf(a,l,u,h){const f=l[2];if(256==(256&f))return;ic(l);const _=pa();try{Wi(l),function(a){Rt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&cE(a,l,u,2,h);const b=3==(3&f);if(!_)if(b){const N=a.preOrderCheckHooks;null!==N&&jo(l,N,null)}else{const N=a.preOrderHooks;null!==N&&_a(l,N,0,null),Ho(l,0)}if(function(a){for(let l=Vv(a);null!==l;l=Bv(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const f=u[h],_=f[3];0==(1024&f[2])&&Ei(_,1),f[2]|=1024}}}(l),function(a){for(let l=Vv(a);null!==l;l=Bv(l))for(let u=10;u<l.length;u++){const h=l[u],f=h[1];Jn(h)&&vf(f,h,f.template,h[8])}}(l),null!==a.contentQueries&&lE(a,l),!_)if(b){const N=a.contentCheckHooks;null!==N&&jo(l,N)}else{const N=a.contentHooks;null!==N&&_a(l,N,1),Ho(l,1)}!function(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)ga(~f);else{const _=f,b=u[++h],C=u[++h];od(b,_),C(2,l[_])}}}finally{ga(-1)}}(a,l);const C=a.components;null!==C&&function(a,l){for(let u=0;u<l.length;u++)mA(a,l[u])}(l,C);const D=a.viewQuery;if(null!==D&&T_(2,D,h),!_)if(b){const N=a.viewCheckHooks;null!==N&&jo(l,N)}else{const N=a.viewHooks;null!==N&&_a(l,N,2),Ho(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),_||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,Ei(l[3],-1))}finally{el()}}function hA(a,l,u,h){const f=l[10],_=!pa(),b=On(l);try{_&&!b&&f.begin&&f.begin(),b&&lg(a,l,h),vf(a,l,u,h)}finally{_&&!b&&f.end&&f.end()}}function cE(a,l,u,h,f){const _=Tr(),b=2&h;try{ga(-1),b&&l.length>20&&rC(a,l,20,pa()),u(h,f)}finally{ga(_)}}function uE(a,l,u){!lo()||(function(a,l,u,h){const f=u.directiveStart,_=u.directiveEnd;a.firstCreatePass||$o(u,l),mr(h,l);const b=u.initialInputs;for(let C=f;C<_;C++){const D=a.data[C],N=vi(D);N&&bf(l,u,D);const B=zt(l,a,C,u);mr(B,l),null!==b&&Wd(0,C-f,B,D,0,b),N&&(dn(u.index,l)[8]=B)}}(a,l,u,Ht(u,l)),128==(128&u.flags)&&function(a,l,u){const h=u.directiveStart,f=u.directiveEnd,b=u.index,C=Rt.lFrame.currentDirectiveIndex;try{ga(b);for(let D=h;D<f;D++){const N=a.data[D],B=l[D];rc(D),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&_E(N,B)}}finally{ga(-1),rc(C)}}(a,l,u))}function dE(a,l,u=Ht){const h=l.localNames;if(null!==h){let f=l.index+1;for(let _=0;_<h.length;_+=2){const b=h[_+1],C=-1===b?u(l,a):a[b];a[f++]=C}}}function cC(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Su(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Su(a,l,u,h,f,_,b,C,D,N){const B=20+h,z=B+f,Y=function(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:gt);return u}(B,z),ce="function"==typeof N?N():N;return Y[1]={type:a,blueprint:Y,template:u,queries:null,viewQuery:C,declTNode:l,data:Y.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:ce,incompleteFirstPass:!1}}function fE(a,l,u,h){const f=wf(l);null===u?f.push(h):(f.push(u),a.firstCreatePass&&S_(a).push(h,f.length-1))}function pE(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const f=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,f):u[h]=[l,f]}return u}function us(a,l,u,h,f,_,b,C){const D=Ht(l,u);let B,N=l.inputs;!C&&null!=N&&(B=N[h])?(Cn(a,u,B,h,f),ts(l)&&function(a,l){const u=dn(l,a);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(h=function(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),f=null!=b?b(f,l.value||"",h):f,k(_)?_.setProperty(D,h,f):su(h)||(D.setProperty?D.setProperty(h,f):D[h]=f))}function v_(a,l,u,h){let f=!1;if(lo()){const _=function(a,l,u){const h=a.directiveRegistry;let f=null;if(h)for(let _=0;_<h.length;_++){const b=h[_];Xr(u,b.selectors,!1)&&(f||(f=[]),T($o(u,l),a,b.type),vi(b)?(yE(a,u),f.unshift(b)):f.push(b))}return f}(a,l,u),b=null===h?null:{"":-1};if(null!==_){f=!0,fC(u,a.data.length,_.length);for(let B=0;B<_.length;B++){const z=_[B];z.providersResolver&&z.providersResolver(z)}let C=!1,D=!1,N=yf(a,l,_.length,null);for(let B=0;B<_.length;B++){const z=_[B];u.mergedAttrs=fr(u.mergedAttrs,z.hostAttrs),vE(a,u,l,N,z),gA(N,z,b),null!==z.contentQueries&&(u.flags|=8),(null!==z.hostBindings||null!==z.hostAttrs||0!==z.hostVars)&&(u.flags|=128);const Y=z.type.prototype;!C&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),C=!0),!D&&(Y.ngOnChanges||Y.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),D=!0),N++}!function(a,l){const h=l.directiveEnd,f=a.data,_=l.attrs,b=[];let C=null,D=null;for(let N=l.directiveStart;N<h;N++){const B=f[N],z=B.inputs,Y=null===_||Gd(l)?null:pC(z,_);b.push(Y),C=pE(z,N,C),D=pE(B.outputs,N,D)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=b,l.inputs=C,l.outputs=D}(a,u)}b&&function(a,l,u){if(l){const h=a.localNames=[];for(let f=0;f<l.length;f+=2){const _=u[l[f+1]];if(null==_)throw new De("301",`Export of name '${l[f+1]}' not found!`);h.push(l[f],_)}}}(u,h,b)}return u.mergedAttrs=fr(u.mergedAttrs,u.attrs),f}function E_(a,l,u,h,f,_){const b=_.hostBindings;if(b){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const D=~l.index;(function(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(h,f,b)}}function _E(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function yE(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function gA(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;vi(l)&&(u[""]=a)}}function fC(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function vE(a,l,u,h,f){a.data[h]=f;const _=f.factory||(f.factory=is(f.type)),b=new Go(_,vi(f),null);a.blueprint[h]=b,u[h]=b,E_(a,l,0,h,yf(a,u,f.hostVars,gt),f)}function bf(a,l,u){const h=Ht(l,a),f=cC(u),_=a[10],b=qd(a,Tu(a,f,null,u.onPush?64:16,h,l,_,_.createRenderer(h,u),null,null));a[l.index]=b}function ds(a,l,u,h,f,_){const b=Ht(a,l);!function(a,l,u,h,f,_,b){if(null==_)k(a)?a.removeAttribute(l,f,u):l.removeAttribute(f);else{const C=null==b?Ie(_):b(_,h||"",f);k(a)?a.setAttribute(l,f,C,u):u?l.setAttributeNS(u,f,C):l.setAttribute(f,C)}}(l[11],b,_,a.value,u,h,f)}function Wd(a,l,u,h,f,_){const b=_[l];if(null!==b){const C=h.setInput;for(let D=0;D<b.length;){const N=b[D++],B=b[D++],z=b[D++];null!==C?h.setInput(u,z,N,B):u[B]=z}}}function pC(a,l){let u=null,h=0;for(;h<l.length;){const f=l[h];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,a[f],l[h+1])),h+=2}else h+=2;else h+=4}return u}function EE(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function mA(a,l){const u=dn(l,a);if(Jn(u)){const h=u[1];80&u[2]?vf(h,u,h.template,u[8]):u[5]>0&&bE(u)}}function bE(a){for(let h=Vv(a);null!==h;h=Bv(h))for(let f=10;f<h.length;f++){const _=h[f];if(1024&_[2]){const b=_[1];vf(b,_,b.template,_[8])}else _[5]>0&&bE(_)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=dn(u[h],a);Jn(f)&&f[5]>0&&bE(f)}}function hi(a,l){const u=dn(l,a),h=u[1];(function(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),lg(h,u,u[8])}function qd(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function wE(a){for(;a;){a[2]|=64;const l=hf(a);if(Li(a)&&!l)return a;a=l}return null}function I_(a,l,u){const h=l[10];h.begin&&h.begin();try{vf(a,l,a.template,u)}catch(f){throw ei(l,f),f}finally{h.end&&h.end()}}function TE(a){!function(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],h=zp(u),f=h[1];hA(f,h,f.template,u)}}(a[8])}function T_(a,l,u){Ja(0),l(a,u)}const mC=(()=>Promise.resolve(null))();function wf(a){return a[7]||(a[7]=[])}function S_(a){return a.cleanup||(a.cleanup=[])}function _C(a,l,u){return(null===a||vi(a))&&(u=function(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function ei(a,l){const u=a[9],h=u?u.get(S,null):null;h&&h.handleError(l)}function Cn(a,l,u,h,f){for(let _=0;_<u.length;){const b=u[_++],C=u[_++],D=l[b],N=a.data[b];null!==N.setInput?N.setInput(D,f,h,C):D[C]=f}}function wl(a,l,u){const h=dt(l,a);!function(a,l,u){k(a)?a.setValue(l,u):l.textContent=u}(a[11],h,u)}function gg(a,l,u){let h=u?a.styles:null,f=u?a.classes:null,_=0;if(null!==l)for(let b=0;b<l.length;b++){const C=l[b];"number"==typeof C?_=C:1==_?f=ne(f,C):2==_&&(h=ne(h,C+": "+l[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=f:a.classesWithoutHost=f}const tr=new Sr("INJECTOR",-1);class SE{get(l,u=ul){if(u===ul){const h=new Error(`NullInjectorError: No provider for ${ee(l)}!`);throw h.name="NullInjectorError",h}return u}}const mg=new Sr("Set Injector scope."),fs={},yA={};let _g;function yC(){return void 0===_g&&(_g=new SE),_g}function EC(a,l=null,u=null,h){return new Vn(a,u,l||yC(),h)}class Vn{constructor(l,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];u&&Ts(u,C=>this.processProvider(C,l,u)),Ts([l],C=>this.processInjectorType(C,[],_)),this.records.set(tr,Pc(void 0,this));const b=this.records.get(mg);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof l?null:ee(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=ul,h=ht.Default){this.assertNotDestroyed();const f=hl(this),_=yr(void 0);try{if(!(h&ht.SkipSelf)){let C=this.records.get(l);if(void 0===C){const D=("function"==typeof(a=l)||"object"==typeof a&&a instanceof Sr)&&rr(l);C=D&&this.injectableDefInScope(D)?Pc(DE(l),fs):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(h&ht.Self?yC():this.parent).get(l,u=h&ht.Optional&&u===ul?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[hc]=b[hc]||[]).unshift(ee(l)),f)throw b;return Vm(b,l,"R3InjectorError",this.source)}throw b}finally{yr(_),hl(f)}var a}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((h,f)=>l.push(ee(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(l,u,h){if(!(l=X(l)))return!1;let f=Oo(l);const _=null==f&&l.ngModule||void 0,b=void 0===_?l:_,C=-1!==h.indexOf(b);if(void 0!==_&&(f=Oo(_)),null==f)return!1;if(null!=f.imports&&!C){let B;h.push(b);try{Ts(f.imports,z=>{this.processInjectorType(z,u,h)&&(void 0===B&&(B=[]),B.push(z))})}finally{}if(void 0!==B)for(let z=0;z<B.length;z++){const{ngModule:Y,providers:ce}=B[z];Ts(ce,_e=>this.processProvider(_e,Y,ce||re))}}this.injectorDefTypes.add(b);const D=is(b)||(()=>new b);this.records.set(b,Pc(D,fs));const N=f.providers;if(null!=N&&!C){const B=l;Ts(N,z=>this.processProvider(z,B,N))}return void 0!==_&&void 0!==l.providers}processProvider(l,u,h){let f=If(l=X(l))?l:X(l&&l.provide);const _=AE(a=l)?Pc(void 0,a.useValue):Pc(Cf(a),fs);var a;if(If(l)||!0!==l.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=Pc(void 0,fs,!0),b.factory=()=>zo(b.multi),this.records.set(f,b)),f=l,b.multi.push(l)}this.records.set(f,_)}hydrate(l,u){return u.value===fs&&(u.value=yA,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(a=u.value)&&"object"==typeof a&&"function"==typeof a.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var a}injectableDefInScope(l){if(!l.providedIn)return!1;const u=X(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function DE(a){const l=rr(a),u=null!==l?l.factory:is(a);if(null!==u)return u;if(a instanceof Sr)throw new Error(`Token ${ee(a)} is missing a \u0275prov definition.`);if(a instanceof Function)return function(a){const l=a.length;if(l>0){const h=qs(l,"?");throw new Error(`Can't resolve all parameters for ${ee(a)}: (${h.join(", ")}).`)}const u=function(a){const l=a&&(a[Ni]||a[Vs]);if(l){const u=function(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Error("unreachable")}function Cf(a,l,u){let h;if(If(a)){const f=X(a);return is(f)||DE(f)}if(AE(a))h=()=>X(a.useValue);else if(function(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...zo(a.deps||[]));else if(function(a){return!(!a||!a.useExisting)}(a))h=()=>Ar(X(a.useExisting));else{const f=X(a&&(a.useClass||a.provide));if(!function(a){return!!a.deps}(a))return is(f)||DE(f);h=()=>new f(...zo(a.deps))}return h}function Pc(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function AE(a){return null!==a&&"object"==typeof a&&Ca in a}function If(a){return"function"==typeof a}const ME=function(a,l,u){return function(a,l=null,u=null,h){const f=EC(a,l,u,h);return f._resolveInjectorDefTypes(),f}({name:u},l,a,u)};class Bn{static create(l,u){return Array.isArray(l)?ME(l,u,""):ME(l.providers,l.parent,l.name||"")}}function Tl(a,l){iu(zp(a)[1],Ln())}function Ms(a){let l=function(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let f;if(vi(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Error("Directives cannot inherit Components");f=l.\u0275dir}if(f){if(u){h.push(f);const b=a;b.inputs=xa(a.inputs),b.declaredInputs=xa(a.declaredInputs),b.outputs=xa(a.outputs);const C=f.hostBindings;C&&DA(a,C);const D=f.viewQuery,N=f.contentQueries;if(D&&Sf(a,D),N&&Df(a,N),he(a.inputs,f.inputs),he(a.declaredInputs,f.declaredInputs),he(a.outputs,f.outputs),vi(f)&&f.data.animation){const B=a.data;B.animation=(B.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const C=_[b];C&&C.ngInherit&&C(a),C===Ms&&(u=!1)}}l=Object.getPrototypeOf(l)}!function(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const f=a[h];f.hostVars=l+=f.hostVars,f.hostAttrs=fr(f.hostAttrs,u=fr(u,f.hostAttrs))}}(h)}function xa(a){return a===In?{}:a===re?[]:a}function Sf(a,l){const u=a.viewQuery;a.viewQuery=u?(h,f)=>{l(h,f),u(h,f)}:l}function Df(a,l){const u=a.contentQueries;a.contentQueries=u?(h,f,_)=>{l(h,f,_),u(h,f,_)}:l}function DA(a,l){const u=a.hostBindings;a.hostBindings=u?(h,f)=>{l(h,f),u(h,f)}:l}Bn.THROW_IF_NOT_FOUND=ul,Bn.NULL=new SE,Bn.\u0275prov=kt({token:Bn,providedIn:"any",factory:()=>Ar(tr)}),Bn.__NG_ELEMENT_ID__=-1;let Jd=null;function ps(){if(!Jd){const a=_n.Symbol;if(a&&a.iterator)Jd=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Jd=h)}}}return Jd}class Rs{constructor(l){this.wrapped=l}static wrap(l){return new Rs(l)}static unwrap(l){return Rs.isWrapped(l)?l.wrapped:l}static isWrapped(l){return l instanceof Rs}}function Oa(a){return!!R_(a)&&(Array.isArray(a)||!(a instanceof Map)&&ps()in a)}function R_(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Zo(a,l,u){return a[l]=u}function Un(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function x_(a,l,u,h){const f=We();return Un(f,Ya(),l)&&(ln(),ds(Xn(),f,a,l,u,h)),x_}function eh(a,l,u,h){return Un(a,Ya(),u)?l+Ie(u)+h:gt}function HE(a,l,u,h,f,_,b,C){const D=We(),N=ln(),B=a+20,z=N.firstCreatePass?function(a,l,u,h,f,_,b,C,D){const N=l.consts,B=Oc(l,a,4,b||null,Hn(N,C));v_(l,u,B,Hn(N,D)),iu(l,B);const z=B.tViews=Su(2,B,h,f,_,l.directiveRegistry,l.pipeRegistry,null,l.schemas,N);return null!==l.queries&&(l.queries.template(l,B),z.queries=l.queries.embeddedTView(B)),B}(B,N,D,l,u,h,f,_,b):N.data[B];Is(z,!1);const Y=D[11].createComment("");Ud(N,D,Y,z),mr(Y,D),qd(D,D[B]=EE(Y,D,Y,z)),ii(z)&&uE(N,D,z),null!=b&&dE(D,z,C)}function ah(a,l=ht.Default){const u=We();return null===u?Ar(a,l):se(Ln(),u,X(a),l)}function Sg(a,l,u){const h=We();return Un(h,Ya(),l)&&us(ln(),Xn(),h,a,l,h[11],u,!1),Sg}function nb(a,l,u,h,f){const b=f?"class":"style";Cn(a,u,l.inputs[b],b,h)}function ib(a,l,u,h){const f=We(),_=ln(),b=20+a,C=f[11],D=f[b]=r_(C,l,Rt.lFrame.currentNamespace),N=_.firstCreatePass?function(a,l,u,h,f,_,b){const C=l.consts,N=Oc(l,a,2,f,Hn(C,_));return v_(l,u,N,Hn(C,b)),null!==N.attrs&&gg(N,N.attrs,!1),null!==N.mergedAttrs&&gg(N,N.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,N),N}(b,_,f,0,l,u,h):_.data[b];Is(N,!0);const B=N.mergedAttrs;null!==B&&sl(C,D,B);const z=N.classes;null!==z&&Hd(C,D,z);const Y=N.styles;null!==Y&&tE(C,D,Y),64!=(64&N.flags)&&Ud(_,f,D,N),0===Rt.lFrame.elementDepthCount&&mr(D,f),Rt.lFrame.elementDepthCount++,ii(N)&&(uE(_,f,N),function(a,l,u){if(da(l)){const f=l.directiveEnd;for(let _=l.directiveStart;_<f;_++){const b=a.data[_];b.contentQueries&&b.contentQueries(1,u[_],_)}}}(_,N,f)),null!==h&&dE(f,N)}function Dg(){let a=Ln();rd()?tu():(a=a.parent,Is(a,!1));const l=a;Rt.lFrame.elementDepthCount--;const u=ln();u.firstCreatePass&&(iu(u,a),da(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function(a){return 0!=(16&a.flags)}(l)&&nb(u,l,We(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function(a){return 0!=(32&a.flags)}(l)&&nb(u,l,We(),l.stylesWithoutHost,!1)}function xi(a,l,u,h){ib(a,l,u,h),Dg()}function tI(){return We()}function Ag(a){return!!a&&"function"==typeof a.then}function sb(a){return!!a&&"function"==typeof a.subscribe}const V_=sb;function Mg(a,l,u,h){const f=We(),_=ln(),b=Ln();return xg(_,f,f[11],b,a,l,!!u,h),Mg}function Of(a,l){const u=Ln(),h=We(),f=ln();return xg(f,h,_C(Qa(f.data),u,h),u,a,l,!1),Of}function xg(a,l,u,h,f,_,b,C){const D=ii(h),B=a.firstCreatePass&&S_(a),z=l[8],Y=wf(l);let ce=!0;if(3&h.type||C){const Ce=Ht(h,l),Ye=C?C(Ce):Ce,je=Y.length,It=C?Ut=>C(le(Ut[h.index])):h.index;if(k(u)){let Ut=null;if(!C&&D&&(Ut=function(a,l,u,h){const f=a.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===u&&f[_+1]===h){const C=l[7],D=f[_+2];return C.length>D?C[D]:null}"string"==typeof b&&(_+=2)}return null}(a,l,f,h.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=_,Ut.__ngLastListenerFn__=_,ce=!1;else{_=Og(h,l,z,_,!1);const hn=u.listen(Ye,f,_);Y.push(_,hn),B&&B.push(f,It,je,je+1)}}else _=Og(h,l,z,_,!0),Ye.addEventListener(f,_,b),Y.push(_),B&&B.push(f,It,je,b)}else _=Og(h,l,z,_,!1);const _e=h.outputs;let Re;if(ce&&null!==_e&&(Re=_e[f])){const Ce=Re.length;if(Ce)for(let Ye=0;Ye<Ce;Ye+=2){const Oi=l[Re[Ye]][Re[Ye+1]].subscribe(_),sa=Y.length;Y.push(_,Oi),B&&B.push(f,h.index,sa,-(sa+1))}}}function B_(a,l,u,h){try{return!1!==u(h)}catch(f){return ei(a,f),!1}}function Og(a,l,u,h,f){return function _(b){if(b===Function)return h;const C=2&a.flags?dn(a.index,l):l;0==(32&l[2])&&wE(C);let D=B_(l,0,h,b),N=_.__ngNextListenerFn__;for(;N;)D=B_(l,0,N,b)&&D,N=N.__ngNextListenerFn__;return f&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function U_(a=1){return function(a){return(Rt.lFrame.contextLView=function(a,l){for(;a>0;)l=l[15],a--;return l}(a,Rt.lFrame.contextLView))[8]}(a)}function nI(a,l){let u=null;const h=function(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let f=0;f<l.length;f++){const _=l[f];if("*"!==_){if(null===h?Xr(a,_,!0):$t(h,_))return f}else u=f}return u}function rI(a){const l=We()[16][6];if(!l.projection){const h=l.projection=qs(a?a.length:1,null),f=h.slice();let _=l.child;for(;null!==_;){const b=a?nI(_,a):0;null!==b&&(f[b]?f[b].projectionNext=_:h[b]=_,f[b]=_),_=_.next}}}function ob(a,l=0,u){const h=We(),f=ln(),_=Oc(f,20+a,16,null,u||null);null===_.projection&&(_.projection=l),tu(),64!=(64&_.flags)&&function(a,l,u){Xv(l[11],0,l,u,Wv(a,u,l),bu(u.parent||l[6],u,l))}(f,h,_)}function ab(a,l,u){return lb(a,"",l,"",u),ab}function lb(a,l,u,h,f){const _=We(),b=eh(_,l,u,h);return b!==gt&&us(ln(),Xn(),_,a,b,_[11],f,!1),lb}function Pf(a,l,u,h,f){const _=a[u+1],b=null===l;let C=h?Ma(_):Ac(_),D=!1;for(;0!==C&&(!1===D||b);){const B=a[C+1];db(a[C],l)&&(D=!0,a[C+1]=h?Cu(B):Ds(B)),C=h?Ma(B):Ac(B)}D&&(a[u+1]=h?Ds(_):Cu(_))}function db(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&cu(a,l)>=0}function kg(a,l,u){return Fa(a,l,u,!1),kg}function kf(a,l){return Fa(a,l,null,!0),kf}function Fa(a,l,u,h){const f=We(),_=ln(),b=function(a){const l=Rt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}(2);_.firstUpdatePass&&function(a,l,u,h){const f=a.data;if(null===f[u+1]){const _=f[Tr()],b=function(a,l){return l>=a.expandoStartIndex}(a,u);(function(a,l){return 0!=(a.flags&(l?16:32))})(_,h)&&null===l&&!b&&(l=!1),l=function(a,l,u,h){const f=Qa(a);let _=h?l.residualClasses:l.residualStyles;if(null===f)0===(h?l.classBindings:l.styleBindings)&&(u=lh(u=mb(null,a,l,u,h),l.attrs,h),_=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==f)if(u=mb(f,a,l,u,h),null===_){let D=function(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==Ac(h))return a[Ma(h)]}(a,l,h);void 0!==D&&Array.isArray(D)&&(D=mb(null,a,l,D[1],h),D=lh(D,l.attrs,h),function(a,l,u,h){a[Ma(u?l.classBindings:l.styleBindings)]=h}(a,l,h,D))}else _=function(a,l,u){let h;const f=l.directiveEnd;for(let _=1+l.directiveStylingLast;_<f;_++)h=lh(h,a[_].hostAttrs,u);return lh(h,l.attrs,u)}(a,l,h)}return void 0!==_&&(h?l.residualClasses=_:l.residualStyles=_),u}(f,_,l,h),function(a,l,u,h,f,_){let b=_?l.classBindings:l.styleBindings,C=Ma(b),D=Ac(b);a[h]=u;let B,N=!1;if(Array.isArray(u)){const z=u;B=z[1],(null===B||cu(z,B)>0)&&(N=!0)}else B=u;if(f)if(0!==D){const Y=Ma(a[C+1]);a[h+1]=d_(Y,C),0!==Y&&(a[Y+1]=h_(a[Y+1],h)),a[C+1]=function(a,l){return 131071&a|l<<17}(a[C+1],h)}else a[h+1]=d_(C,0),0!==C&&(a[C+1]=h_(a[C+1],h)),C=h;else a[h+1]=d_(D,0),0===C?C=h:a[D+1]=h_(a[D+1],h),D=h;N&&(a[h+1]=Ds(a[h+1])),Pf(a,B,h,!0),Pf(a,B,h,!1),function(a,l,u,h,f){const _=f?a.residualClasses:a.residualStyles;null!=_&&"string"==typeof l&&cu(_,l)>=0&&(u[h+1]=Cu(u[h+1]))}(l,B,a,h,_),b=d_(C,D),_?l.classBindings=b:l.styleBindings=b}(f,_,l,u,b,h)}}(_,a,b,h),l!==gt&&Un(f,b,l)&&function(a,l,u,h,f,_,b,C){if(!(3&l.type))return;const D=a.data,N=D[C+1];Va(function(a){return 1==(1&a)}(N)?ch(D,l,u,f,Ac(N),b):void 0)||(Va(_)||function(a){return 2==(2&a)}(N)&&(_=ch(D,null,u,f,C,b)),function(a,l,u,h,f){const _=k(a);if(l)f?_?a.addClass(u,h):u.classList.add(h):_?a.removeClass(u,h):u.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:yo.DashCase;if(null==f)_?a.removeStyle(u,h,b):u.style.removeProperty(h);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),b|=yo.Important),_?a.setStyle(u,h,f,b):u.style.setProperty(h,f,C?"important":"")}}}(h,b,dt(Tr(),u),f,_))}(_,_.data[Tr()],f,f[11],a,f[b+1]=function(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ee(Si(a)))),a}(l,u),h,b)}function mb(a,l,u,h,f){let _=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(_=l[C],h=lh(h,_.hostAttrs,f),_!==a);)C++;return null!==a&&(u.directiveStylingLast=C),h}function lh(a,l,u){const h=u?1:2;let f=-1;if(null!==l)for(let _=0;_<l.length;_++){const b=l[_];"number"==typeof b?f=b:f===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Dr(a,b,!!u||l[++_]))}return void 0===a?null:a}function ch(a,l,u,h,f,_){const b=null===l;let C;for(;f>0;){const D=a[f],N=Array.isArray(D),B=N?D[1]:D,z=null===B;let Y=u[f+1];Y===gt&&(Y=z?re:void 0);let ce=z?Dp(Y,h):B===h?Y:void 0;if(N&&!Va(ce)&&(ce=Dp(D,h)),Va(ce)&&(C=ce,b))return C;const _e=a[f+1];f=b?Ma(_e):Ac(_e)}if(null!==l){let D=_?l.residualClasses:l.residualStyles;null!=D&&(C=Dp(D,h))}return C}function Va(a){return void 0!==a}function dh(a,l=""){const u=We(),h=ln(),f=a+20,_=h.firstCreatePass?Oc(h,f,1,l,null):h.data[f],b=u[f]=function(a,l){return k(a)?a.createText(l):a.createTextNode(l)}(u[11],l);Ud(h,u,b,_),Is(_,!1)}function Q_(a){return Lc("",a,""),Q_}function Lc(a,l,u){const h=We(),f=eh(h,a,l,u);return f!==gt&&wl(h,Tr(),f),Lc}function Db(a,l,u){const h=We();return Un(h,Ya(),l)&&us(ln(),Xn(),h,a,l,h[11],u,!0),Db}function Fg(a,l,u){const h=We();if(Un(h,Ya(),l)){const _=ln(),b=Xn();us(_,b,h,a,l,_C(Qa(_.data),b,h),u,!0)}return Fg}const hh=void 0;var Mb=["en",[["a","p"],["AM","PM"],hh],[["AM","PM"],hh,hh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hh,"{1} 'at' {0}",hh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(a){const l=Math.floor(Math.abs(a)),u=a.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let Nu={};function oy(a){const l=function(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=ay(l);if(u)return u;const h=l.split("-")[0];if(u=ay(h),u)return u;if("en"===h)return Mb;throw new Error(`Missing locale data for the locale "${a}".`)}function CI(a){return oy(a)[Ot.PluralCase]}function ay(a){return a in Nu||(Nu[a]=_n.ng&&_n.ng.common&&_n.ng.common.locales&&_n.ng.common.locales[a]),Nu[a]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const ly="en-US";let TI=ly;function Vg(a){mt(a,"Expected localeId to be defined"),"string"==typeof a&&(TI=a.toLowerCase().replace(/_/g,"-"))}function Kb(a,l,u,h,f){if(a=X(a),Array.isArray(a))for(let _=0;_<a.length;_++)Kb(a[_],l,u,h,f);else{const _=ln(),b=We();let C=If(a)?a:X(a.provide),D=Cf(a);const N=Ln(),B=1048575&N.providerIndexes,z=N.directiveStart,Y=N.providerIndexes>>20;if(If(a)||!a.multi){const ce=new Go(D,f,ah),_e=Zb(C,l,f?B:B+Y,z);-1===_e?(T($o(N,b),_,C),HI(_,a,l.length),l.push(C),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(ce),b.push(ce)):(u[_e]=ce,b[_e]=ce)}else{const ce=Zb(C,l,B+Y,z),_e=Zb(C,l,B,B+Y),Re=ce>=0&&u[ce],Ce=_e>=0&&u[_e];if(f&&!Ce||!f&&!Re){T($o(N,b),_,C);const Ye=function(a,l,u,h,f){const _=new Go(a,u,ah);return _.multi=[],_.index=l,_.componentProviders=0,GI(_,f,h&&!u),_}(f?Vc:$I,u.length,f,h,D);!f&&Ce&&(u[_e].providerFactory=Ye),HI(_,a,l.length,0),l.push(C),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(Ye),b.push(Ye)}else HI(_,a,ce>-1?ce:_e,GI(u[f?_e:ce],D,!f&&h));!f&&h&&Ce&&u[_e].componentProviders++}}}function HI(a,l,u,h){const f=If(l);if(f||function(a){return!!a.useClass}(l)){const b=(l.useClass||l).prototype.ngOnDestroy;if(b){const C=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const D=C.indexOf(u);-1===D?C.push(u,[h,b]):C[D+1].push(h,b)}else C.push(u,b)}}}function GI(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function Zb(a,l,u,h){for(let f=u;f<h;f++)if(l[f]===a)return f;return-1}function $I(a,l,u,h){return zI(this.multi,[])}function Vc(a,l,u,h){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=zt(u,u[1],this.providerFactory.index,h);_=C.slice(0,b),zI(f,_);for(let D=b;D<C.length;D++)_.push(C[D])}else _=[],zI(f,_);return _}function zI(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function ku(a,l=[]){return u=>{u.providersResolver=(h,f)=>function(a,l,u){const h=ln();if(h.firstCreatePass){const f=vi(a);Kb(u,h.data,h.blueprint,f,!0),Kb(l,h.data,h.blueprint,f,!1)}}(h,f?f(a):a,l)}}class WI{}const Yb="ngComponent";class by{resolveComponentFactory(l){throw function(a){const l=Error(`No component factory found for ${ee(a)}. Did you add it to @NgModule.entryComponents?`);return l[Yb]=a,l}(l)}}class mh{}function Fu(...a){}function Lu(a,l){return new Jo(Ht(a,l))}mh.NULL=new by;const C1=function(){return Lu(Ln(),We())};let Jo=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=C1,a})();function wy(a){return a instanceof Jo?a.nativeElement:a}class Ml{}let ZI=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>Qb(),a})();const Qb=function(){const a=We(),u=dn(Ln().index,a);return function(a){return a[11]}(Tn(u)?u:a)};let Gf=(()=>{class a{}return a.\u0275prov=kt({token:a,providedIn:"root",factory:()=>null}),a})();class Xb{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const _h=new Xb("12.2.3");class JI{constructor(){}supports(l){return Oa(l)}create(l){return new Bc(l)}}const Cy=(a,l)=>l;class Bc{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Cy}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,f=0,_=null;for(;u||h;){const b=!h||u&&u.currentIndex<ew(h,f,_)?u:h,C=ew(b,f,_),D=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{_||(_=[]);const N=C-f,B=D-f;if(N!=B){for(let Y=0;Y<N;Y++){const ce=Y<_.length?_[Y]:_[Y]=0,_e=ce+Y;B<=_e&&_e<N&&(_[Y]=ce+1)}_[b.previousIndex]=B-N}}C!==D&&l(b,C,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Oa(l))throw new Error(`Error trying to diff '${ee(l)}'. Only arrays and iterables are allowed`);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,_,b,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)_=l[C],b=this._trackByFn(C,_),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,_,b,C)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,b,C),h=!0),u=u._next}else f=0,function(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[ps()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,C=>{b=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,C,b,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,f){let _;return null===l?_=this._itTail:(_=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,_,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,_,f)):l=this._addAfter(new Gg(u,h),_,f),l}_verifyReinsertion(l,u,h,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?l=this._reinsertAfter(_,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,_=l._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new XI),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new XI),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class Gg{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vu{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class XI{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new Vu,this.map.set(u,h)),h.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ew(a,l,u){const h=a.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+l+f}class tw{constructor(){}supports(l){return l instanceof Map||R_(l)}create(){return new $g}}class $g{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||R_(l)))throw new Error(`Error trying to diff '${ee(l)}'. Only maps and objects are allowed`)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const h=new Bu(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class Bu{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eT(){return new Iy([new JI])}let Iy=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||eT()),deps:[[a,new gr,new Ta]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(a){return a.name||typeof a}(u)}'`)}}return a.\u0275prov=kt({token:a,providedIn:"root",factory:eT}),a})();function tT(){return new zg([new tw])}let zg=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||tT()),deps:[[a,new gr,new Ta]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return a.\u0275prov=kt({token:a,providedIn:"root",factory:tT}),a})();function Ty(a,l,u,h,f=!1){for(;null!==u;){const _=l[u.index];if(null!==_&&h.push(le(_)),Qn(_))for(let C=10;C<_.length;C++){const D=_[C],N=D[1].firstChild;null!==N&&Ty(D[1],D,N,h)}const b=u.type;if(8&b)Ty(a,l,u.child,h);else if(32&b){const C=Vd(u,l);let D;for(;D=C();)h.push(D)}else if(16&b){const C=Jv(l,u);if(Array.isArray(C))h.push(...C);else{const D=hf(l[16]);Ty(D[1],D,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class Wg{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Ty(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Qn(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(Yp(l,h),uc(u,h))}this._attachedToViewContainer=!1}Qp(this._lView[1],this._lView)}onDestroy(l){fE(this._lView[1],this._lView,null,l)}markForCheck(){wE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){I_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(a,l,u){Uo(!0);try{I_(a,l,u)}finally{Uo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var l;this._appRef=null,pf(this._lView[1],l=this._lView,l[11],2,null,null)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=l}}class nT extends Wg{constructor(l){super(l),this._view=l}detectChanges(){TE(this._view)}checkNoChanges(){!function(a){Uo(!0);try{TE(a)}finally{Uo(!1)}}(this._view)}get context(){return null}}const rT=function(a){return function(a,l,u){if(ts(a)&&!u){const h=dn(a.index,l);return new Wg(h,h)}return 47&a.type?new Wg(l[16],l):null}(Ln(),We(),16==(16&a))};let A1=(()=>{class a{}return a.__NG_ELEMENT_ID__=rT,a})();const sT=[new tw],aT=new Iy([new JI]),nw=new zg(sT),lT=function(){return Dy(Ln(),We())};let Xo=(()=>{class a{}return a.__NG_ELEMENT_ID__=lT,a})();const R1=Xo,yh=class extends R1{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l){const u=this._declarationTContainer.tViews,h=Tu(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(u)),lg(u,h,l),new Wg(h)}};function Dy(a,l){return 4&a.type?new yh(l,a,Lu(a,l)):null}class vh{}class cT{}const uT=function(){return fT(Ln(),We())};let Ay=(()=>{class a{}return a.__NG_ELEMENT_ID__=uT,a})();const dT=Ay,hT=class extends dT{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return Lu(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){const l=M(this._hostTNode,this._hostLView);if(ud(l)){const u=al(l,this._hostLView),h=va(l);return new Ci(u[1].data[h+8],u)}return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Eh(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){const f=l.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(l,u,h,f,_){const b=h||this.parentInjector;if(!_&&null==l.ngModule&&b){const D=b.get(vh,null);D&&(_=D)}const C=l.create(b,f,void 0,_);return this.insert(C.hostView,u),C}insert(l,u){const h=l._lView,f=h[1];if(Qn(h[3])){const B=this.indexOf(l);if(-1!==B)this.detach(B);else{const z=h[3],Y=new hT(z,z[6],z[3]);Y.detach(Y.indexOf(l))}}const _=this._adjustIndex(u),b=this._lContainer;!function(a,l,u,h){const f=10+h,_=u.length;h>0&&(u[f-1][4]=l),h<_-10?(l[4]=u[f],cl(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const b=l[17];null!==b&&u!==b&&function(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(b,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=128}(f,h,b,_);const C=l_(_,b),D=h[11],N=Xp(D,b[7]);return null!==N&&function(a,l,u,h,f,_){h[0]=f,h[6]=l,pf(a,h,u,1,f,_)}(f,b[6],D,h,N,C),l.attachToViewContainerRef(),cl(qg(b),_,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Eh(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=Yp(this._lContainer,u);h&&(uc(qg(this._lContainer),u),Qp(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=Yp(this._lContainer,u);return h&&null!=uc(qg(this._lContainer),u)?new Wg(h):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function Eh(a){return a[8]}function qg(a){return a[8]||(a[8]=[])}function fT(a,l){let u;const h=l[a.index];if(Qn(h))u=h;else{let f;if(8&a.type)f=le(h);else{const _=l[11];f=_.createComment("");const b=Ht(a,l);Dc(_,Xp(_,b),f,function(a,l){return k(a)?a.nextSibling(l):l.nextSibling}(_,b),!1)}l[a.index]=u=EE(h,l,f,a),qd(l,u)}return new hT(u,a,l)}const Yf={};class eM extends mh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=jn(l);return new mw(u,this.ngModule)}}function VT(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}const yO=new Sr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Nd});class mw extends WI{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=l.selectors.map(ot).join(","),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return VT(this.componentDef.inputs)}get outputs(){return VT(this.componentDef.outputs)}create(l,u,h,f){const _=(f=f||this.ngModule)?function(a,l){return{get:(u,h,f)=>{const _=a.get(u,Yf,f);return _!==Yf||h===Yf?_:l.get(u,h,f)}}}(l,f.injector):l,b=_.get(Ml,L),C=_.get(Gf,null),D=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=h?function(a,l,u){if(k(a))return a.selectRootElement(l,u===Je.ShadowDom);let h="string"==typeof l?a.querySelector(l):l;return h.textContent="",h}(D,h,this.componentDef.encapsulation):r_(b.createRenderer(null,this.componentDef),N,function(a){const l=a.toLowerCase();return"svg"===l?so:"math"===l?"http://www.w3.org/1998/MathML/":null}(N)),z=this.componentDef.onPush?576:528,Y=function(a,l){return{components:[],scheduler:a||Nd,clean:mC,playerHandler:l||null,flags:0}}(),ce=Su(0,null,null,1,0,null,null,null,null,null),_e=Tu(null,ce,Y,z,null,null,b,D,C,_);let Re,Ce;ic(_e);try{const Ye=function(a,l,u,h,f,_){const b=u[1];u[20]=a;const D=Oc(b,20,2,"#host",null),N=D.mergedAttrs=l.hostAttrs;null!==N&&(gg(D,N,!0),null!==a&&(sl(f,a,N),null!==D.classes&&Hd(f,a,D.classes),null!==D.styles&&tE(f,a,D.styles)));const B=h.createRenderer(a,l),z=Tu(u,cC(l),null,l.onPush?64:16,u[20],D,h,B,_||null,null);return b.firstCreatePass&&(T($o(D,u),b,l.type),yE(b,D),fC(D,u.length,1)),qd(u,z),u[20]=z}(B,this.componentDef,_e,b,D);if(B)if(h)sl(D,B,["ng-version",_h.full]);else{const{attrs:je,classes:It}=function(a){const l=[],u=[];let h=1,f=2;for(;h<a.length;){let _=a[h];if("string"==typeof _)2===f?""!==_&&l.push(_,a[++h]):8===f&&u.push(_);else{if(!Aa(f))break;f=_}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);je&&sl(D,B,je),It&&It.length>0&&Hd(D,B,It.join(" "))}if(Ce=wn(ce,20),void 0!==u){const je=Ce.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Ut=u[It];je.push(null!=Ut?Array.from(Ut):null)}}Re=function(a,l,u,h,f){const _=u[1],b=function(a,l,u){const h=Ln();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),vE(a,h,l,yf(a,l,1,null),u));const f=zt(l,a,h.directiveStart,h);mr(f,l);const _=Ht(h,l);return _&&mr(_,l),f}(_,u,l);if(h.components.push(b),a[8]=b,f&&f.forEach(D=>D(b,l)),l.contentQueries){const D=Ln();l.contentQueries(1,b,D.directiveStart)}const C=Ln();return!_.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ga(C.index),E_(u[1],C,0,C.directiveStart,C.directiveEnd,l),_E(l,b)),b}(Ye,this.componentDef,_e,Y,[Tl]),lg(ce,_e,null)}finally{el()}return new BT(this.componentType,Re,Lu(Ce,_e),_e,Ce)}}class BT extends class{}{constructor(l,u,h,f,_){super(),this.location=h,this._rootLView=f,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new nT(f),this.componentType=l}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}const Qf=new Map;class rm extends vh{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eM(this);const h=Br(l),f=l[Qe]||null;f&&Vg(f),this._bootstrapComponents=_o(h.bootstrap),this._r3Injector=EC(l,u,[{provide:vh,useValue:this},{provide:mh,useValue:this.componentFactoryResolver}],ee(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=Bn.THROW_IF_NOT_FOUND,h=ht.Default){return l===Bn||l===vh||l===tr?this:this._r3Injector.get(l,u,h)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class _w extends cT{constructor(l){super(),this.moduleType=l,null!==Br(l)&&function(a){const l=new Set;!function u(h){const f=Br(h,!0),_=f.id;null!==_&&(function(a,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${a} - ${ee(l)} vs ${ee(l.name)}`)}(_,Qf.get(_),h),Qf.set(_,h));const b=_o(f.imports);for(const C of b)l.has(C)||(l.add(C),u(C))}(a)}(l)}create(l){return new rm(this.moduleType,l)}}function HT(a,l,u){const h=jr()+a,f=We();return f[h]===gt?Zo(f,h,u?l.call(u):l()):function(a,l){return a[l]}(f,h)}function sM(a,l,u,h,f,_){const b=l+u;return Un(a,b,f)?Zo(a,b+1,_?h.call(_,f):h(f)):function(a,l){const u=a[l];return u===gt?void 0:u}(a,b+1)}function Hy(a,l){const u=ln();let h;const f=a+20;u.firstCreatePass?(h=function(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}throw new De("302",`The pipe '${a}' could not be found!`)}(l,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const _=h.factory||(h.factory=is(h.type)),b=yr(ah);try{const C=ou(!1),D=_();return ou(C),function(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,We(),f,D),D}finally{yr(b)}}function qT(a,l,u){const h=a+20,f=We(),_=function(a,l){return a[l]}(f,h);return function(a,l){Rs.isWrapped(l)&&(l=Rs.unwrap(l),a[Rt.lFrame.bindingIndex]=gt);return l}(f,function(a,l){return a[1].data[l].pure}(f,h)?sM(f,jr(),l,_.transform,u,_):_.transform(u))}function Xf(a){return l=>{setTimeout(a,void 0,l)}}const xl=class extends O.xQ{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){var f,_,b;let C=l,D=u||(()=>null),N=h;if(l&&"object"==typeof l){const z=l;C=null===(f=z.next)||void 0===f?void 0:f.bind(z),D=null===(_=z.error)||void 0===_?void 0:_.bind(z),N=null===(b=z.complete)||void 0===b?void 0:b.bind(z)}this.__isAsync&&(D=Xf(D),C&&(C=Xf(C)),N&&(N=Xf(N)));const B=super.subscribe({next:C,error:D,complete:N});return l instanceof m.w&&l.add(B),B}};function oM(){return this._results[ps()]()}class zy{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ps(),h=zy.prototype;h[u]||(h[u]=oM)}get changes(){return this._changes||(this._changes=new xl)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const f=Ti(l);(this._changesDetected=!function(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let f=a[h],_=l[h];if(u&&(f=u(f),_=u(_)),_!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class ZT{constructor(l){this.queryList=l,this.matches=null}clone(){return new ZT(this.queryList)}setDirty(){this.queryList.setDirty()}}class yw{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let _=0;_<h;_++){const b=u.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new yw(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==mM(l,u).matches&&this.queries[u].setDirty()}}class YT{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class vw{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,_=this.getByIndex(h).embeddedTView(l,f);_&&(_.indexInDeclarationView=h,null!==u?u.push(_):u=[_])}return null!==u?new vw(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Ew{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Ew(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const _=h[f];this.matchTNodeWithReadOption(l,u,OO(u,_)),this.matchTNodeWithReadOption(l,u,yt(u,l,_,!1,!1))}else h===Xo?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,yt(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===Jo||f===Ay||f===Xo&&4&u.type)this.addMatch(u.index,-2);else{const _=yt(u,l,f,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function OO(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function aM(a,l,u,h){return-1===u?function(a,l){return 11&a.type?Lu(a,l):4&a.type?Dy(a,l):null}(l,a):-2===u?function(a,l,u){return u===Jo?Lu(l,a):u===Xo?Dy(l,a):u===Ay?fT(l,a):void 0}(a,l,h):zt(a,a[1],u,l)}function cM(a,l,u,h){const f=l[19].queries[h];if(null===f.matches){const _=a.data,b=u.matches,C=[];for(let D=0;D<b.length;D+=2){const N=b[D];C.push(N<0?null:aM(l,_[N],b[D+1],u.metadata.read))}f.matches=C}return f.matches}function QT(a,l,u,h){const f=a.queries.getByIndex(u),_=f.matches;if(null!==_){const b=cM(a,l,f,u);for(let C=0;C<_.length;C+=2){const D=_[C];if(D>0)h.push(b[C/2]);else{const N=_[C+1],B=l[-D];for(let z=10;z<B.length;z++){const Y=B[z];Y[17]===Y[3]&&QT(Y[1],Y,N,h)}if(null!==B[9]){const z=B[9];for(let Y=0;Y<z.length;Y++){const ce=z[Y];QT(ce[1],ce,N,h)}}}}}return h}function uM(a){const l=We(),u=ln(),h=ad();Ja(h+1);const f=mM(u,h);if(a.dirty&&On(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const _=f.crossesNgTemplate?QT(u,l,h,[]):cM(u,l,f,h);a.reset(_,wy),a.notifyOnChanges()}return!0}return!1}function dM(a,l,u){const h=ln();h.firstCreatePass&&(gM(h,new YT(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),pM(h,We(),l)}function hM(a,l,u,h){const f=ln();if(f.firstCreatePass){const _=Ln();gM(f,new YT(l,u,h),_.index),function(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}pM(f,We(),u)}function fM(){return a=We(),l=ad(),a[19].queries[l].queryList;var a,l}function pM(a,l,u){const h=new zy(4==(4&u));fE(a,l,h,h.destroy),null===l[19]&&(l[19]=new yw),l[19].queries.push(new ZT(h))}function gM(a,l,u){null===a.queries&&(a.queries=new vw),a.queries.track(new Ew(l,u))}function mM(a,l){return a.queries.getByIndex(l)}const iS=new Sr("Application Initializer");let om=(()=>{class a{constructor(u){this.appInits=u,this.resolve=Fu,this.reject=Fu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(Ag(_))u.push(_);else if(V_(_)){const b=new Promise((C,D)=>{_.subscribe({complete:C,error:D})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Ar(iS,8))},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})();const NM=new Sr("AppId"),cN={provide:NM,useFactory:function(){return`${sS()}${sS()}${sS()}`},deps:[]};function sS(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const PM=new Sr("Platform Initializer"),kM=new Sr("Platform ID"),FM=new Sr("appBootstrapListener");let LM=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})();const Cw=new Sr("LocaleId"),VM=new Sr("DefaultCurrencyCode");class UM{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}const qy=function(a){return new _w(a)},HM=qy,GM=function(a){return Promise.resolve(qy(a))},cS=function(a){const l=qy(a),h=_o(Br(a).declarations).reduce((f,_)=>{const b=jn(_);return b&&f.push(new mw(b)),f},[]);return new UM(l,h)},fN=cS,zM=function(a){return Promise.resolve(cS(a))};let am=(()=>{class a{constructor(){this.compileModuleSync=HM,this.compileModuleAsync=GM,this.compileModuleAndAllComponentsSync=fN,this.compileModuleAndAllComponentsAsync=zM}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})();const Tw=(()=>Promise.resolve(0))();function Sw(a){"undefined"==typeof Zone?Tw.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class To{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xl(!1),this.onMicrotaskEmpty=new xl(!1),this.onStable=new xl(!1),this.onError=new xl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let a=_n.requestAnimationFrame,l=_n.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function(a){const l=()=>{!function(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(_n,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Dw(a),a.isCheckStableRunning=!0,Gc(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Dw(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,_,b,C)=>{try{return Aw(a),u.invokeTask(f,_,b,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||a.shouldCoalesceRunChangeDetection)&&l(),gS(a)}},onInvoke:(u,h,f,_,b,C,D)=>{try{return Aw(a),u.invoke(f,_,b,C,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),gS(a)}},onHasTask:(u,h,f,_)=>{u.hasTask(f,_),h===f&&("microTask"==_.change?(a._hasPendingMicrotasks=_.microTask,Dw(a),Gc(a)):"macroTask"==_.change&&(a.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,h,f,_)=>(u.handleError(f,_),a.runOutsideAngular(()=>a.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!To.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(To.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,l,hS,Fu,Fu);try{return _.runTask(b,u,h)}finally{_.cancelTask(b)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const hS={};function Gc(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Dw(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Aw(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function gS(a){a._nesting--,Gc(a)}class WM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xl,this.onMicrotaskEmpty=new xl,this.onStable=new xl,this.onError=new xl}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,f){return l.apply(u,h)}}let mS=(()=>{class a{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{To.assertNotInAngularZone(),Sw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(Ar(To))},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})(),ep=(()=>{class a{constructor(){this._applications=new Map,yS.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return yS.findTestabilityInTree(this,u,h)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})();class qM{addToWindow(l){}findTestabilityInTree(l,u,h){return null}}function _S(a){yS=a}let yS=new qM,KM=!0,vS=!1;function Mw(){return vS=!0,KM}function ZM(){if(vS)throw new Error("Cannot enable prod mode after platform setup.");KM=!1}let Ol;const xw=new Sr("AllowMultipleToken");class mN{constructor(l,u){this.name=l,this.token=u}}function Ow(a,l,u=[]){const h=`Platform: ${l}`,f=new Sr(h);return(_=[])=>{let b=Nw();if(!b||b.injector.get(xw,!1))if(a)a(u.concat(_).concat({provide:f,useValue:!0}));else{const C=u.concat(_).concat({provide:f,useValue:!0},{provide:mg,useValue:"platform"});!function(a){if(Ol&&!Ol.destroyed&&!Ol.injector.get(xw,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ol=a.get(nR);const l=a.get(PM,null);l&&l.forEach(u=>u())}(Bn.create({providers:C,name:h}))}return function(a){const l=Nw();if(!l)throw new Error("No platform exists!");if(!l.injector.get(a,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return l}(f)}}function Nw(){return Ol&&!Ol.destroyed?Ol:null}let nR=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const C=function(a,l){let u;return u="noop"===a?new WM:("zone.js"===a?void 0:a)||new To({enableLongStackTrace:Mw(),shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),D=[{provide:To,useValue:C}];return C.run(()=>{const N=Bn.create({providers:D,parent:this.injector,name:u.moduleType.name}),B=u.create(N),z=B.injector.get(S,null);if(!z)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const Y=C.onError.subscribe({next:ce=>{z.handleError(ce)}});B.onDestroy(()=>{wS(this._modules,B),Y.unsubscribe()})}),function(a,l,u){try{const h=u();return Ag(h)?h.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(z,C,()=>{const Y=B.injector.get(om);return Y.runInitializers(),Y.donePromise.then(()=>(Vg(B.injector.get(Cw,ly)||ly),this._moduleDoBootstrap(B),B))})})}bootstrapModule(u,h=[]){const f=bS({},h);return function(a,l,u){const h=new _w(u);return Promise.resolve(h)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(u){const h=u.injector.get(Ky);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${ee(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Ar(Bn))},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})();function bS(a,l){return Array.isArray(l)?l.reduce(bS,a):Object.assign(Object.assign({},a),l)}let Ky=(()=>{class a{constructor(u,h,f,_,b){this._zone=u,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new te.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),D=new te.y(N=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{To.assertNotInAngularZone(),Sw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{To.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{B.unsubscribe(),z.unsubscribe()}});this.isStable=(0,me.T)(C,D.pipe((0,ve.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let f;f=u instanceof WI?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const _=function(a){return a.isBoundToModule}(f)?void 0:this._injector.get(vh),C=f.create(Bn.NULL,[],h||f.selector,_),D=C.location.nativeElement,N=C.injector.get(mS,null),B=N&&C.injector.get(ep);return N&&B&&B.registerApplication(D,N),C.onDestroy(()=>{this.detachView(C.hostView),wS(this.components,C),B&&B.unregisterApplication(D)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;wS(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(FM,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(u){return new(u||a)(Ar(To),Ar(Bn),Ar(S),Ar(mh),Ar(om))},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})();function wS(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}class EN{}class aR{}const lR={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let cR=(()=>{class a{constructor(u,h){this._compiler=u,this._config=h||lR}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[h,f]=u.split("#");return void 0===f&&(f="default"),H(8255)(h).then(_=>_[f]).then(_=>CS(_,h,f)).then(_=>this._compiler.compileModuleAsync(_))}loadFactory(u){let[h,f]=u.split("#"),_="NgFactory";return void 0===f&&(f="default",_=""),H(8255)(this._config.factoryPathPrefix+h+this._config.factoryPathSuffix).then(b=>b[f+_]).then(b=>CS(b,h,f))}}return a.\u0275fac=function(u){return new(u||a)(Ar(am),Ar(aR,8))},a.\u0275prov=kt({token:a,factory:a.\u0275fac}),a})();function CS(a,l,u){if(!a)throw new Error(`Cannot find '${u}' in '${l}'`);return a}const xS=function(a){return null},Jy=Ow(null,"core",[{provide:kM,useValue:"unknown"},{provide:nR,deps:[Bn]},{provide:ep,deps:[]},{provide:LM,deps:[]}]),LS=[{provide:Ky,useClass:Ky,deps:[To,Bn,S,mh,om]},{provide:yO,deps:[To],useFactory:function(a){let l=[];return a.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(u){l.push(u)}}},{provide:om,useClass:om,deps:[[new Ta,iS]]},{provide:am,useClass:am,deps:[]},cN,{provide:Iy,useFactory:function(){return aT},deps:[]},{provide:zg,useFactory:function(){return nw},deps:[]},{provide:Cw,useFactory:function(a){return Vg(a=a||"undefined"!=typeof $localize&&$localize.locale||ly),a},deps:[[new fc(Cw),new Ta,new gr]]},{provide:VM,useValue:"USD"}];let VS=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Ar(Ky))},a.\u0275mod=Pi({type:a}),a.\u0275inj=kn({providers:LS}),a})()},9958:(rt,Me,H)=>{"use strict";H.d(Me,{hO:()=>De,xv:()=>oe,Dh:()=>K,GT:()=>ee,on:()=>X,pX:()=>he});var O=H(7716),m=H(4486);m.Z.registerVersion("firebase","9.0.1","app-compat");var ve=H(9126);rt=H.hmd(rt);const ae=["ngOnDestroy"],he=(Te,Ke,Ie,Ge={})=>new Proxy(Te,{get:(Dt,pt)=>Ie.runOutsideAngular(()=>{var At;if(Te[pt])return(null===(At=null==Ge?void 0:Ge.spy)||void 0===At?void 0:At.get)&&Ge.spy.get(pt,Te[pt]),Te[pt];if(ae.indexOf(pt)>-1)return()=>{};const Qt=Ke.toPromise().then(Pe=>{const Kt=Pe&&Pe[pt];return"function"==typeof Kt?Kt.bind(Pe):Kt&&Kt.then?Kt.then(Nt=>Ie.run(()=>Nt)):Ie.run(()=>Kt)});return new Proxy(()=>{},{get:(Pe,Kt)=>Qt[Kt],apply:(Pe,Kt,Nt)=>Qt.then(Oe=>{var Se;const Le=Oe&&Oe(...Nt);return(null===(Se=null==Ge?void 0:Ge.spy)||void 0===Se?void 0:Se.apply)&&Ge.spy.apply(pt,Nt,Le),Le})})})}),ee=(Te,Ke)=>{Ke.forEach(Ie=>{Object.getOwnPropertyNames(Ie.prototype||Ie).forEach(Ge=>{Object.defineProperty(Te.prototype,Ge,Object.getOwnPropertyDescriptor(Ie.prototype||Ie,Ge))})})};class ne{constructor(Ke){return Ke}}const K=new O.OlP("angularfire2.app.options"),oe=new O.OlP("angularfire2.app.name");function X(Te,Ke,Ie){const Dt="object"==typeof Ie&&Ie||{};Dt.name=Dt.name||"string"==typeof Ie&&Ie||"[DEFAULT]";const At=m.Z.apps.filter(Qt=>Qt&&Qt.name===Dt.name)[0]||Ke.runOutsideAngular(()=>m.Z.initializeApp(Te,Dt));try{JSON.stringify(Te)!==JSON.stringify(At.options)&&ue("error",`${At.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qt){}return new ne(At)}const ue=(Te,...Ke)=>{(0,O.X6Q)()&&"undefined"!=typeof console&&console[Te](...Ke)},fe={provide:ne,useFactory:X,deps:[K,O.R0b,[new O.FiY,oe]]};let De=(()=>{class Te{constructor(Ie){m.Z.registerVersion("angularfire",ve.q4.full,`compat-${Ie.toString()}`),m.Z.registerVersion("angular",O.q4F.full)}static initializeApp(Ie,Ge){return{ngModule:Te,providers:[{provide:K,useValue:Ie},{provide:oe,useValue:Ge}]}}}return Te.\u0275fac=function(Ie){return new(Ie||Te)(O.LFG(O.Lbi))},Te.\u0275mod=O.oAB({type:Te}),Te.\u0275inj=O.cJS({providers:[fe]}),Te})()},9126:(rt,Me,H)=>{"use strict";H.d(Me,{q4:()=>K,iC:()=>Oe,f6:()=>Nt,HU:()=>pt,cc:()=>ue});var O=H(7716);(0,H(5452).registerVersion)("firebase","9.0.1","app");var ve=H(7771),ae=H(3637),he=H(3342),ee=H(309),ne=H(9673);rt=H.hmd(rt);const K=new O.GfV("7.0.2"),oe=!!rt.hot,X=(xe,...Ee)=>{(0,O.X6Q)()&&"undefined"!=typeof console&&console[xe](...Ee)};function ue(xe,Ee,Xe,et,Pt){const[,ct,mt]=globalThis.\u0275AngularfireInstanceCache.find(Tt=>Tt[0]===xe)||[];if(ct)return function(xe,Ee){try{return xe.toString()===Ee.toString()}catch(Xe){return xe===Ee}}(Pt,mt)||(X("error",`${Ee} was already initialized on the ${Xe} Firebase App with different settings.${oe?" You may need to reload as Firebase is not HMR aware.":""}`),X("warn",{is:Pt,was:mt})),ct;{const Tt=et();return globalThis.\u0275AngularfireInstanceCache.push([xe,Tt,Pt]),Tt}}function Ie(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Ge{constructor(Ee,Xe=ve.N){this.zone=Ee,this.delegate=Xe}now(){return this.delegate.now()}schedule(Ee,Xe,et){const Pt=this.zone;return this.delegate.schedule(function(mt){Pt.runGuarded(()=>{Ee.apply(this,[mt])})},Xe,et)}}class Dt{constructor(Ee){this.zone=Ee,this.task=null}call(Ee,Xe){const et=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ie,{},Ie,Ie)),Xe.pipe((0,he.b)({next:et,complete:et,error:et})).subscribe(Ee).add(et)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pt=(()=>{class xe{constructor(Xe){this.ngZone=Xe,this.outsideAngular=Xe.runOutsideAngular(()=>new Ge(Zone.current)),this.insideAngular=Xe.run(()=>new Ge(Zone.current,ae.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return xe.\u0275fac=function(Xe){return new(Xe||xe)(O.LFG(O.R0b))},xe.\u0275prov=O.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();function At(){const xe=globalThis.\u0275AngularFireScheduler;if(!xe)throw new Error("AngularFireModule has not been provided");return xe}function Nt(xe){return xe.pipe((0,ee.QV)(At().insideAngular))}function Oe(xe){return At(),function(xe){return function(Xe){return(Xe=Xe.lift(new Dt(xe.ngZone))).pipe((0,ne.R)(xe.outsideAngular),(0,ee.QV)(xe.insideAngular))}}(At())(xe)}},3507:(rt,Me,H)=>{"use strict";H.d(Me,{F0:()=>Zr,yS:()=>Ho,Bz:()=>Ip,lC:()=>Go});var O=H(8583),m=H(7716),te=H(7574),me=H(4402),ve=H(9193);function ae(x){return new te.y(M=>{let T;try{T=x()}catch(V){return void M.error(V)}return(T?(0,me.D)(T):(0,ve.c)()).subscribe(M)})}var he=H(5917),ee=H(6215),ne=H(9112),K=H(3410),oe=H(8071),X=H(2441),ue=H(9765),fe=H(5345);function De(x){return function(T){const P=new Te(x),V=T.lift(P);return P.caught=V}}class Te{constructor(M){this.selector=M}call(M,T){return T.subscribe(new Ke(M,this.selector,this.caught))}}class Ke extends fe.Ds{constructor(M,T,P){super(M),this.selector=T,this.caught=P}error(M){if(!this.isStopped){let T;try{T=this.selector(M,this.caught)}catch($){return void super.error($)}this._unsubscribeAndRecycle();const P=new fe.IY(this);this.add(P);const V=(0,fe.ft)(T,P);V!==P&&this.add(V)}}}var Ie=H(9773);function Ge(x,M){return(0,Ie.zg)(x,M,1)}var Dt=H(5435),pt=H(7393),At=H(7108);function Qt(x){return function(T){return 0===x?(0,ve.c)():T.lift(new Pe(x))}}class Pe{constructor(M){if(this.total=M,this.total<0)throw new At.W}call(M,T){return T.subscribe(new Kt(M,this.total))}}class Kt extends pt.L{constructor(M,T){super(M),this.total=T,this.ring=new Array,this.count=0}_next(M){const T=this.ring,P=this.total,V=this.count++;T.length<P?T.push(M):T[V%P]=M}_complete(){const M=this.destination;let T=this.count;if(T>0){const P=this.count>=this.total?this.total:this.count,V=this.ring;for(let $=0;$<P;$++){const se=T++%P;M.next(V[se])}}M.complete()}}var Nt=H(4635),Oe=H(5242),Se=H(4487),ke=H(5319);class Ee{constructor(M){this.callback=M}call(M,T){return T.subscribe(new Xe(M,this.callback))}}class Xe extends pt.L{constructor(M,T){super(M),this.add(new ke.w(T))}}var et=H(8002),Pt=H(3190),ct=H(5257),mt=H(9761),Tt=H(2145),xn=H(8049),zn=H(3342),Mn=H(1307),kt=H(3282);class nr{constructor(M,T){this.id=M,this.url=T}}class kn extends nr{constructor(M,T,P="imperative",V=null){super(M,T),this.navigationTrigger=P,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rr extends nr{constructor(M,T,P){super(M,T),this.urlAfterRedirects=P}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wn extends nr{constructor(M,T,P){super(M,T),this.reason=P}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Es extends nr{constructor(M,T,P){super(M,T),this.error=P}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class la extends nr{constructor(M,T,P,V){super(M,T),this.urlAfterRedirects=P,this.state=V}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oo extends nr{constructor(M,T,P,V){super(M,T),this.urlAfterRedirects=P,this.state=V}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends nr{constructor(M,T,P,V,$){super(M,T),this.urlAfterRedirects=P,this.state=V,this.shouldActivate=$}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ls extends nr{constructor(M,T,P,V){super(M,T),this.urlAfterRedirects=P,this.state=V}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vs extends nr{constructor(M,T,P,V){super(M,T),this.urlAfterRedirects=P,this.state=V}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bs{constructor(M){this.route=M}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ht{constructor(M){this.route=M}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cr{constructor(M){this.snapshot=M}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class es{constructor(M){this.snapshot=M}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yr{constructor(M){this.snapshot=M}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gt{constructor(M){this.snapshot=M}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class St{constructor(M,T,P){this.routerEvent=M,this.position=T,this.anchor=P}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const st="primary";class tn{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const T=this.params[M];return Array.isArray(T)?T[0]:T}return null}getAll(M){if(this.has(M)){const T=this.params[M];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function qn(x){return new tn(x)}const En="ngNavigationCancelingError";function Je(x){const M=Error("NavigationCancelingError: "+x);return M[En]=!0,M}function $a(x,M,T){const P=T.path.split("/");if(P.length>x.length||"full"===T.pathMatch&&(M.hasChildren()||P.length<x.length))return null;const V={};for(let $=0;$<P.length;$++){const se=P[$],pe=x[$];if(se.startsWith(":"))V[se.substring(1)]=pe;else if(se!==pe.path)return null}return{consumed:x.slice(0,P.length),posParams:V}}function ir(x,M){const T=x?Object.keys(x):void 0,P=M?Object.keys(M):void 0;if(!T||!P||T.length!=P.length)return!1;let V;for(let $=0;$<T.length;$++)if(V=T[$],!_n(x[V],M[V]))return!1;return!0}function _n(x,M){if(Array.isArray(x)&&Array.isArray(M)){if(x.length!==M.length)return!1;const T=[...x].sort(),P=[...M].sort();return T.every((V,$)=>P[$]===V)}return x===M}function yi(x){return Array.prototype.concat.apply([],x)}function jl(x){return x.length>0?x[x.length-1]:null}function re(x,M){for(const T in x)x.hasOwnProperty(T)&&M(x[T],T)}function ie(x){return(0,m.CqO)(x)?x:(0,m.QGY)(x)?(0,me.D)(Promise.resolve(x)):(0,he.of)(x)}const Ae={exact:function rn(x,M,T){if(!ki(x.segments,M.segments)||!vr(x.segments,M.segments,T)||x.numberOfChildren!==M.numberOfChildren)return!1;for(const P in M.children)if(!x.children[P]||!rn(x.children[P],M.children[P],T))return!1;return!0},subset:Jt},be={exact:function(x,M){return ir(x,M)},subset:function(x,M){return Object.keys(M).length<=Object.keys(x).length&&Object.keys(M).every(T=>_n(x[T],M[T]))},ignored:()=>!0};function Qe(x,M,T){return Ae[T.paths](x.root,M.root,T.matrixParams)&&be[T.queryParams](x.queryParams,M.queryParams)&&!("exact"===T.fragment&&x.fragment!==M.fragment)}function Jt(x,M,T){return Kn(x,M,M.segments,T)}function Kn(x,M,T,P){if(x.segments.length>T.length){const V=x.segments.slice(0,T.length);return!(!ki(V,T)||M.hasChildren()||!vr(V,T,P))}if(x.segments.length===T.length){if(!ki(x.segments,T)||!vr(x.segments,T,P))return!1;for(const V in M.children)if(!x.children[V]||!Jt(x.children[V],M.children[V],P))return!1;return!0}{const V=T.slice(0,x.segments.length),$=T.slice(x.segments.length);return!!(ki(x.segments,V)&&vr(x.segments,V,P)&&x.children[st])&&Kn(x.children[st],M,$,P)}}function vr(x,M,T){return M.every((P,V)=>be[T](x[V].parameters,P.parameters))}class Zn{constructor(M,T,P){this.root=M,this.queryParams=T,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return Er.serialize(this)}}class Vt{constructor(M,T){this.segments=M,this.children=T,this.parent=null,re(T,(P,V)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ni(this)}}class Pi{constructor(M,T){this.path=M,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=qn(this.parameters)),this._parameterMap}toString(){return Xs(this)}}function ki(x,M){return x.length===M.length&&x.every((T,P)=>T.path===M[P].path)}class za{}class jn{parse(M){const T=new to(M);return new Zn(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(M){var x;return`${`/${Br(M.root,!0)}`}${function(x){const M=Object.keys(x).map(T=>{const P=x[T];return Array.isArray(P)?P.map(V=>`${br(T)}=${br(V)}`).join("&"):`${br(T)}=${br(P)}`}).filter(T=>!!T);return M.length?`?${M.join("&")}`:""}(M.queryParams)}${"string"==typeof M.fragment?`#${x=M.fragment,encodeURI(x)}`:""}`}}const Er=new jn;function ni(x){return x.segments.map(M=>Xs(M)).join("/")}function Br(x,M){if(!x.hasChildren())return ni(x);if(M){const T=x.children[st]?Br(x.children[st],!1):"",P=[];return re(x.children,(V,$)=>{$!==st&&P.push(`${$}:${Br(V,!1)}`)}),P.length>0?`${T}(${P.join("//")})`:T}{const T=function(x,M){let T=[];return re(x.children,(P,V)=>{V===st&&(T=T.concat(M(P,V)))}),re(x.children,(P,V)=>{V!==st&&(T=T.concat(M(P,V)))}),T}(x,(P,V)=>V===st?[Br(x.children[st],!1)]:[`${V}:${Br(P,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[st]?`${ni(x)}/${T[0]}`:`${ni(x)}/(${T.join("//")})`}}function ua(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function br(x){return ua(x).replace(/%3B/gi,";")}function Xt(x){return ua(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ft(x){return decodeURIComponent(x)}function qr(x){return Ft(x.replace(/\+/g,"%20"))}function Xs(x){return`${Xt(x.path)}${function(x){return Object.keys(x).map(M=>`;${Xt(M)}=${Xt(x[M])}`).join("")}(x.parameters)}`}const Yn=/^[^\/()?;=#]+/;function eo(x){const M=x.match(Yn);return M?M[0]:""}const Gi=/^[^=?&#]+/,Ur=/^[^?&#]+/;class to{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(M.length>0||Object.keys(T).length>0)&&(P[st]=new Vt(M,T)),P}parseSegment(){const M=eo(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(M),new Pi(Ft(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const T=eo(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const V=eo(this.remaining);V&&(P=V,this.capture(P))}M[Ft(T)]=Ft(P)}parseQueryParam(M){const T=function(x){const M=x.match(Gi);return M?M[0]:""}(this.remaining);if(!T)return;this.capture(T);let P="";if(this.consumeOptional("=")){const se=function(x){const M=x.match(Ur);return M?M[0]:""}(this.remaining);se&&(P=se,this.capture(P))}const V=qr(T),$=qr(P);if(M.hasOwnProperty(V)){let se=M[V];Array.isArray(se)||(se=[se],M[V]=se),se.push($)}else M[V]=$}parseParens(M){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=eo(this.remaining),V=this.remaining[P.length];if("/"!==V&&")"!==V&&";"!==V)throw new Error(`Cannot parse url '${this.url}'`);let $;P.indexOf(":")>-1?($=P.substr(0,P.indexOf(":")),this.capture($),this.capture(":")):M&&($=st);const se=this.parseChildren();T[$]=1===Object.keys(se).length?se[st]:new Vt([],se),this.consumeOptional("//")}return T}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new Error(`Expected "${M}".`)}}class bn{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const T=this.pathFromRoot(M);return T.length>1?T[T.length-2]:null}children(M){const T=wr(M,this._root);return T?T.children.map(P=>P.value):[]}firstChild(M){const T=wr(M,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(M){const T=no(M,this._root);return T.length<2?[]:T[T.length-2].children.map(V=>V.value).filter(V=>V!==M)}pathFromRoot(M){return no(M,this._root).map(T=>T.value)}}function wr(x,M){if(x===M.value)return M;for(const T of M.children){const P=wr(x,T);if(P)return P}return null}function no(x,M){if(x===M.value)return[M];for(const T of M.children){const P=no(x,T);if(P.length)return P.unshift(M),P}return[]}class dr{constructor(M,T){this.value=M,this.children=T}toString(){return`TreeNode(${this.value})`}}function hr(x){const M={};return x&&x.children.forEach(T=>M[T.value.outlet]=T),M}class sn extends bn{constructor(M,T){super(M),this.snapshot=T,Dn(this,M)}toString(){return this.snapshot.toString()}}function Fi(x,M){const T=function(x,M){const se=new zi([],{},{},"",{},st,M,null,x.root,-1,{});return new ri("",new dr(se,[]))}(x,M),P=new ee.X([new Pi("",{})]),V=new ee.X({}),$=new ee.X({}),se=new ee.X({}),pe=new ee.X(""),Ue=new $i(P,V,se,pe,$,st,M,T.root);return Ue.snapshot=T.root,new sn(new dr(Ue,[]),T)}class $i{constructor(M,T,P,V,$,se,pe,Ue){this.url=M,this.params=T,this.queryParams=P,this.fragment=V,this.data=$,this.outlet=se,this.component=pe,this._futureSnapshot=Ue}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,et.U)(M=>qn(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,et.U)(M=>qn(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function No(x,M="emptyOnly"){const T=x.pathFromRoot;let P=0;if("always"!==M)for(P=T.length-1;P>=1;){const V=T[P],$=T[P-1];if(V.routeConfig&&""===V.routeConfig.path)P--;else{if($.component)break;P--}}return function(x){return x.reduce((M,T)=>({params:Object.assign(Object.assign({},M.params),T.params),data:Object.assign(Object.assign({},M.data),T.data),resolve:Object.assign(Object.assign({},M.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(P))}class zi{constructor(M,T,P,V,$,se,pe,Ue,at,yt,zt){this.url=M,this.params=T,this.queryParams=P,this.fragment=V,this.data=$,this.outlet=se,this.component=pe,this.routeConfig=Ue,this._urlSegment=at,this._lastPathIndex=yt,this._resolve=zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ri extends bn{constructor(M,T){super(T),this.url=M,Dn(this,T)}toString(){return $l(this._root)}}function Dn(x,M){M.value._routerState=x,M.children.forEach(T=>Dn(x,T))}function $l(x){const M=x.children.length>0?` { ${x.children.map($l).join(", ")} } `:"";return`${x.value}${M}`}function Tn(x){if(x.snapshot){const M=x.snapshot,T=x._futureSnapshot;x.snapshot=T,ir(M.queryParams,T.queryParams)||x.queryParams.next(T.queryParams),M.fragment!==T.fragment&&x.fragment.next(T.fragment),ir(M.params,T.params)||x.params.next(T.params),function(x,M){if(x.length!==M.length)return!1;for(let T=0;T<x.length;++T)if(!ir(x[T],M[T]))return!1;return!0}(M.url,T.url)||x.url.next(T.url),ir(M.data,T.data)||x.data.next(T.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function Qn(x,M){return ir(x.params,M.params)&&function(x,M){return ki(x,M)&&x.every((T,P)=>ir(T.parameters,M[P].parameters))}(x.url,M.url)&&!(!x.parent!=!M.parent)&&(!x.parent||Qn(x.parent,M.parent))}function ts(x,M,T){if(T&&x.shouldReuseRoute(M.value,T.value.snapshot)){const P=T.value;P._futureSnapshot=M.value;const V=function(x,M,T){return M.children.map(P=>{for(const V of T.children)if(x.shouldReuseRoute(P.value,V.value.snapshot))return ts(x,P,V);return ts(x,P)})}(x,M,T);return new dr(P,V)}{if(x.shouldAttach(M.value)){const $=x.retrieve(M.value);if(null!==$){const se=$.route;return ii(M,se),se}}const P=function(x){return new $i(new ee.X(x.url),new ee.X(x.params),new ee.X(x.queryParams),new ee.X(x.fragment),new ee.X(x.data),x.outlet,x.component,x)}(M.value),V=M.children.map($=>ts(x,$));return new dr(P,V)}}function ii(x,M){if(x.value.routeConfig!==M.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(x.children.length!==M.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");M.value._futureSnapshot=x.value;for(let T=0;T<x.children.length;++T)ii(x.children[T],M.children[T])}function ha(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function js(x){return"object"==typeof x&&null!=x&&x.outlets}function zl(x,M,T,P,V){let $={};return P&&re(P,(se,pe)=>{$[pe]=Array.isArray(se)?se.map(Ue=>`${Ue}`):`${se}`}),new Zn(T.root===x?M:fa(T.root,x,M),$,V)}function fa(x,M,T){const P={};return re(x.children,(V,$)=>{P[$]=V===M?T:fa(V,M,T)}),new Vt(x.segments,P)}class Hs{constructor(M,T,P){if(this.isAbsolute=M,this.numberOfDoubleDots=T,this.commands=P,M&&P.length>0&&ha(P[0]))throw new Error("Root segment cannot have matrix parameters");const V=P.find(js);if(V&&V!==jl(P))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ql{constructor(M,T,P){this.segmentGroup=M,this.processChildren=T,this.index=P}}function Jc(x,M,T){if(x||(x=new Vt([],{})),0===x.segments.length&&x.hasChildren())return Wa(x,M,T);const P=function(x,M,T){let P=0,V=M;const $={match:!1,pathIndex:0,commandIndex:0};for(;V<x.segments.length;){if(P>=T.length)return $;const se=x.segments[V],pe=T[P];if(js(pe))break;const Ue=`${pe}`,at=P<T.length-1?T[P+1]:null;if(V>0&&void 0===Ue)break;if(Ue&&at&&"object"==typeof at&&void 0===at.outlets){if(!bs(Ue,at,se))return $;P+=2}else{if(!bs(Ue,{},se))return $;P++}V++}return{match:!0,pathIndex:V,commandIndex:P}}(x,M,T),V=T.slice(P.commandIndex);if(P.match&&P.pathIndex<x.segments.length){const $=new Vt(x.segments.slice(0,P.pathIndex),{});return $.children[st]=new Vt(x.segments.slice(P.pathIndex),x.children),Wa($,0,V)}return P.match&&0===V.length?new Vt(x.segments,{}):P.match&&!x.hasChildren()?Xc(x,M,T):P.match?Wa(x,0,V):Xc(x,M,T)}function Wa(x,M,T){if(0===T.length)return new Vt(x.segments,{});{const P=function(x){return js(x[0])?x[0].outlets:{[st]:x}}(T),V={};return re(P,($,se)=>{"string"==typeof $&&($=[$]),null!==$&&(V[se]=Jc(x.children[se],M,$))}),re(x.children,($,se)=>{void 0===P[se]&&(V[se]=$)}),new Vt(x.segments,V)}}function Xc(x,M,T){const P=x.segments.slice(0,M);let V=0;for(;V<T.length;){const $=T[V];if(js($)){const Ue=qa($.outlets);return new Vt(P,Ue)}if(0===V&&ha(T[0])){P.push(new Pi(x.segments[M].path,rs(T[0]))),V++;continue}const se=js($)?$.outlets[st]:`${$}`,pe=V<T.length-1?T[V+1]:null;se&&pe&&ha(pe)?(P.push(new Pi(se,rs(pe))),V+=2):(P.push(new Pi(se,{})),V++)}return new Vt(P,{})}function qa(x){const M={};return re(x,(T,P)=>{"string"==typeof T&&(T=[T]),null!==T&&(M[P]=Xc(new Vt([],{}),0,T))}),M}function rs(x){const M={};return re(x,(T,P)=>M[P]=`${T}`),M}function bs(x,M,T){return x==T.path&&ir(M,T.parameters)}class Zl{constructor(M,T,P,V){this.routeReuseStrategy=M,this.futureState=T,this.currState=P,this.forwardEvent=V}activate(M){const T=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,P,M),Tn(this.futureState.root),this.activateChildRoutes(T,P,M)}deactivateChildRoutes(M,T,P){const V=hr(T);M.children.forEach($=>{const se=$.value.outlet;this.deactivateRoutes($,V[se],P),delete V[se]}),re(V,($,se)=>{this.deactivateRouteAndItsChildren($,P)})}deactivateRoutes(M,T,P){const V=M.value,$=T?T.value:null;if(V===$)if(V.component){const se=P.getContext(V.outlet);se&&this.deactivateChildRoutes(M,T,se.children)}else this.deactivateChildRoutes(M,T,P);else $&&this.deactivateRouteAndItsChildren(T,P)}deactivateRouteAndItsChildren(M,T){this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,T):this.deactivateRouteAndOutlet(M,T)}detachAndStoreRouteSubtree(M,T){const P=T.getContext(M.value.outlet);if(P&&P.outlet){const V=P.outlet.detach(),$=P.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:V,route:M,contexts:$})}}deactivateRouteAndOutlet(M,T){const P=T.getContext(M.value.outlet),V=P&&M.value.component?P.children:T,$=hr(M);for(const se of Object.keys($))this.deactivateRouteAndItsChildren($[se],V);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(M,T,P){const V=hr(T);M.children.forEach($=>{this.activateRoutes($,V[$.value.outlet],P),this.forwardEvent(new Gt($.value.snapshot))}),M.children.length&&this.forwardEvent(new es(M.value.snapshot))}activateRoutes(M,T,P){const V=M.value,$=T?T.value:null;if(Tn(V),V===$)if(V.component){const se=P.getOrCreateContext(V.outlet);this.activateChildRoutes(M,T,se.children)}else this.activateChildRoutes(M,T,P);else if(V.component){const se=P.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const pe=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),se.children.onOutletReAttached(pe.contexts),se.attachRef=pe.componentRef,se.route=pe.route.value,se.outlet&&se.outlet.attach(pe.componentRef,pe.route.value),ro(pe.route)}else{const pe=function(x){for(let M=x.parent;M;M=M.parent){const T=M.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(V.snapshot),Ue=pe?pe.module.componentFactoryResolver:null;se.attachRef=null,se.route=V,se.resolver=Ue,se.outlet&&se.outlet.activateWith(V,Ue),this.activateChildRoutes(M,null,se.children)}}else this.activateChildRoutes(M,null,P)}}function ro(x){Tn(x.value),x.children.forEach(ro)}class is{constructor(M,T){this.routes=M,this.module=T}}function si(x){return"function"==typeof x}function Cr(x){return x instanceof Zn}const io=Symbol("INITIAL_VALUE");function kr(){return(0,Pt.w)(x=>(0,ne.aj)(x.map(M=>M.pipe((0,ct.q)(1),(0,mt.O)(io)))).pipe((0,Tt.R)((M,T)=>{let P=!1;return T.reduce((V,$,se)=>V!==io?V:($===io&&(P=!0),P||!1!==$&&se!==T.length-1&&!Cr($)?V:$),M)},io),(0,Dt.h)(M=>M!==io),(0,et.U)(M=>Cr(M)?M:!0===M),(0,ct.q)(1)))}let Jl=(()=>{class x{}return x.\u0275fac=function(T){return new(T||x)},x.\u0275cmp=m.Xpm({type:x,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,P){1&T&&m._UZ(0,"router-outlet")},directives:function(){return[Go]},encapsulation:2}),x})();function Ir(x,M=""){for(let T=0;T<x.length;T++){const P=x[T];so(P,Lo(M,P))}}function so(x,M){x.children&&Ir(x.children,M)}function Lo(x,M){return M?x||M.path?x&&!M.path?`${x}/`:!x&&M.path?M.path:`${x}/${M.path}`:"":x}function Cs(x){const M=x.children&&x.children.map(Cs),T=M?Object.assign(Object.assign({},x),{children:M}):Object.assign({},x);return!T.component&&(M||T.loadChildren)&&T.outlet&&T.outlet!==st&&(T.component=Jl),T}function oi(x){return x.outlet||st}function oo(x,M){const T=x.filter(P=>oi(P)===M);return T.push(...x.filter(P=>oi(P)!==M)),T}const Vo={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function k(x,M,T){var P;if(""===M.path)return"full"===M.pathMatch&&(x.hasChildren()||T.length>0)?Object.assign({},Vo):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const $=(M.matcher||$a)(T,x,M);if(!$)return Object.assign({},Vo);const se={};re($.posParams,(Ue,at)=>{se[at]=Ue.path});const pe=$.consumed.length>0?Object.assign(Object.assign({},se),$.consumed[$.consumed.length-1].parameters):se;return{matched:!0,consumedSegments:$.consumed,lastChild:$.consumed.length,parameters:pe,positionalParamSegments:null!==(P=$.posParams)&&void 0!==P?P:{}}}function G(x,M,T,P,V="corrected"){if(T.length>0&&function(x,M,T){return T.some(P=>ze(x,M,P)&&oi(P)!==st)}(x,T,P)){const se=new Vt(M,function(x,M,T,P){const V={};V[st]=P,P._sourceSegment=x,P._segmentIndexShift=M.length;for(const $ of T)if(""===$.path&&oi($)!==st){const se=new Vt([],{});se._sourceSegment=x,se._segmentIndexShift=M.length,V[oi($)]=se}return V}(x,M,P,new Vt(T,x.children)));return se._sourceSegment=x,se._segmentIndexShift=M.length,{segmentGroup:se,slicedSegments:[]}}if(0===T.length&&function(x,M,T){return T.some(P=>ze(x,M,P))}(x,T,P)){const se=new Vt(x.segments,function(x,M,T,P,V,$){const se={};for(const pe of P)if(ze(x,T,pe)&&!V[oi(pe)]){const Ue=new Vt([],{});Ue._sourceSegment=x,Ue._segmentIndexShift="legacy"===$?x.segments.length:M.length,se[oi(pe)]=Ue}return Object.assign(Object.assign({},V),se)}(x,M,T,P,x.children,V));return se._sourceSegment=x,se._segmentIndexShift=M.length,{segmentGroup:se,slicedSegments:T}}const $=new Vt(x.segments,x.children);return $._sourceSegment=x,$._segmentIndexShift=M.length,{segmentGroup:$,slicedSegments:T}}function ze(x,M,T){return(!(x.hasChildren()||M.length>0)||"full"!==T.pathMatch)&&""===T.path}function dt(x,M,T,P){return!!(oi(x)===P||P!==st&&ze(M,T,x))&&("**"===x.path||k(M,x,T).matched)}function Ht(x,M,T){return 0===M.length&&!x.children[T]}class yn{constructor(M){this.segmentGroup=M||null}}class wn{constructor(M){this.urlTree=M}}function Bt(x){return new te.y(M=>M.error(new yn(x)))}function dn(x){return new te.y(M=>M.error(new wn(x)))}function On(x){return new te.y(M=>M.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${x}'`)))}class Hn{constructor(M,T,P,V,$){this.configLoader=T,this.urlSerializer=P,this.urlTree=V,this.config=$,this.allowRedirects=!0,this.ngModule=M.get(m.h0i)}apply(){const M=G(this.urlTree.root,[],[],this.config).segmentGroup,T=new Vt(M.segments,M.children);return this.expandSegmentGroup(this.ngModule,this.config,T,st).pipe((0,et.U)($=>this.createUrlTree(Ei($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(De($=>{if($ instanceof wn)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof yn?this.noMatchError($):$}))}match(M){return this.expandSegmentGroup(this.ngModule,this.config,M.root,st).pipe((0,et.U)(V=>this.createUrlTree(Ei(V),M.queryParams,M.fragment))).pipe(De(V=>{throw V instanceof yn?this.noMatchError(V):V}))}noMatchError(M){return new Error(`Cannot match any routes. URL Segment: '${M.segmentGroup}'`)}createUrlTree(M,T,P){const V=M.segments.length>0?new Vt([],{[st]:M}):M;return new Zn(V,T,P)}expandSegmentGroup(M,T,P,V){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(M,T,P).pipe((0,et.U)($=>new Vt([],$))):this.expandSegment(M,P,T,P.segments,V,!0)}expandChildren(M,T,P){const V=[];for(const $ of Object.keys(P.children))"primary"===$?V.unshift($):V.push($);return(0,me.D)(V).pipe(Ge($=>{const se=P.children[$],pe=oo(T,$);return this.expandSegmentGroup(M,pe,se,$).pipe((0,et.U)(Ue=>({segment:Ue,outlet:$})))}),(0,Tt.R)(($,se)=>($[se.outlet]=se.segment,$),{}),function(x,M){const T=arguments.length>=2;return P=>P.pipe(x?(0,Dt.h)((V,$)=>x(V,$,P)):Se.y,Qt(1),T?(0,Oe.d)(M):(0,Nt.T)(()=>new K.K))}())}expandSegment(M,T,P,V,$,se){return(0,me.D)(P).pipe(Ge(pe=>this.expandSegmentAgainstRoute(M,T,P,pe,V,$,se).pipe(De(at=>{if(at instanceof yn)return(0,he.of)(null);throw at}))),(0,xn.P)(pe=>!!pe),De((pe,Ue)=>{if(pe instanceof K.K||"EmptyError"===pe.name){if(Ht(T,V,$))return(0,he.of)(new Vt([],{}));throw new yn(T)}throw pe}))}expandSegmentAgainstRoute(M,T,P,V,$,se,pe){return dt(V,T,$,se)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(M,T,V,$,se):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,T,P,V,$,se):Bt(T):Bt(T)}expandSegmentAgainstRouteUsingRedirect(M,T,P,V,$,se){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,P,V,se):this.expandRegularSegmentAgainstRouteUsingRedirect(M,T,P,V,$,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,T,P,V){const $=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?dn($):this.lineralizeSegments(P,$).pipe((0,Ie.zg)(se=>{const pe=new Vt(se,{});return this.expandSegment(M,pe,T,se,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,T,P,V,$,se){const{matched:pe,consumedSegments:Ue,lastChild:at,positionalParamSegments:yt}=k(T,V,$);if(!pe)return Bt(T);const zt=this.applyRedirectCommands(Ue,V.redirectTo,yt);return V.redirectTo.startsWith("/")?dn(zt):this.lineralizeSegments(V,zt).pipe((0,Ie.zg)(An=>this.expandSegment(M,T,P,An.concat($.slice(at)),se,!1)))}matchSegmentAgainstRoute(M,T,P,V,$){if("**"===P.path)return P.loadChildren?(P._loadedConfig?(0,he.of)(P._loadedConfig):this.configLoader.load(M.injector,P)).pipe((0,et.U)(An=>(P._loadedConfig=An,new Vt(V,{})))):(0,he.of)(new Vt(V,{}));const{matched:se,consumedSegments:pe,lastChild:Ue}=k(T,P,V);if(!se)return Bt(T);const at=V.slice(Ue);return this.getChildConfig(M,P,V).pipe((0,Ie.zg)(zt=>{const An=zt.module,Et=zt.routes,{segmentGroup:pr,slicedSegments:Ci}=G(T,pe,at,Et),qi=new Vt(pr.segments,pr.children);if(0===Ci.length&&qi.hasChildren())return this.expandChildren(An,Et,qi).pipe((0,et.U)(Ws=>new Vt(pe,Ws)));if(0===Et.length&&0===Ci.length)return(0,he.of)(new Vt(pe,{}));const fo=oi(P)===$;return this.expandSegment(An,qi,Et,Ci,fo?st:$,!0).pipe((0,et.U)(Ii=>new Vt(pe.concat(Ii.segments),Ii.children)))}))}getChildConfig(M,T,P){return T.children?(0,he.of)(new is(T.children,M)):T.loadChildren?void 0!==T._loadedConfig?(0,he.of)(T._loadedConfig):this.runCanLoadGuards(M.injector,T,P).pipe((0,Ie.zg)(V=>{return V?this.configLoader.load(M.injector,T).pipe((0,et.U)($=>(T._loadedConfig=$,$))):(x=T,new te.y(M=>M.error(Je(`Cannot load children because the guard of the route "path: '${x.path}'" returned false`))));var x})):(0,he.of)(new is([],M))}runCanLoadGuards(M,T,P){const V=T.canLoad;if(!V||0===V.length)return(0,he.of)(!0);const $=V.map(se=>{const pe=M.get(se);let Ue;if((x=pe)&&si(x.canLoad))Ue=pe.canLoad(T,P);else{if(!si(pe))throw new Error("Invalid CanLoad guard");Ue=pe(T,P)}var x;return ie(Ue)});return(0,he.of)($).pipe(kr(),(0,zn.b)(se=>{if(!Cr(se))return;const pe=Je(`Redirecting to "${this.urlSerializer.serialize(se)}"`);throw pe.url=se,pe}),(0,et.U)(se=>!0===se))}lineralizeSegments(M,T){let P=[],V=T.root;for(;;){if(P=P.concat(V.segments),0===V.numberOfChildren)return(0,he.of)(P);if(V.numberOfChildren>1||!V.children[st])return On(M.redirectTo);V=V.children[st]}}applyRedirectCommands(M,T,P){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),M,P)}applyRedirectCreatreUrlTree(M,T,P,V){const $=this.createSegmentGroup(M,T.root,P,V);return new Zn($,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(M,T){const P={};return re(M,(V,$)=>{if("string"==typeof V&&V.startsWith(":")){const pe=V.substring(1);P[$]=T[pe]}else P[$]=V}),P}createSegmentGroup(M,T,P,V){const $=this.createSegments(M,T.segments,P,V);let se={};return re(T.children,(pe,Ue)=>{se[Ue]=this.createSegmentGroup(M,pe,P,V)}),new Vt($,se)}createSegments(M,T,P,V){return T.map($=>$.path.startsWith(":")?this.findPosParam(M,$,V):this.findOrReturn($,P))}findPosParam(M,T,P){const V=P[T.path.substring(1)];if(!V)throw new Error(`Cannot redirect to '${M}'. Cannot find '${T.path}'.`);return V}findOrReturn(M,T){let P=0;for(const V of T){if(V.path===M.path)return T.splice(P),V;P++}return M}}function Ei(x){const M={};for(const P of Object.keys(x.children)){const $=Ei(x.children[P]);($.segments.length>0||$.hasChildren())&&(M[P]=$)}return function(x){if(1===x.numberOfChildren&&x.children[st]){const M=x.children[st];return new Vt(x.segments.concat(M.segments),M.children)}return x}(new Vt(x.segments,M))}class Bo{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class ao{constructor(M,T){this.component=M,this.route=T}}function eu(x,M,T){const P=x._root;return co(P,M?M._root:null,T,[P.value])}function lo(x,M,T){const P=function(x){if(!x)return null;for(let M=x.parent;M;M=M.parent){const T=M.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(M);return(P?P.module.injector:T).get(x)}function co(x,M,T,P,V={canDeactivateChecks:[],canActivateChecks:[]}){const $=hr(M);return x.children.forEach(se=>{(function(x,M,T,P,V={canDeactivateChecks:[],canActivateChecks:[]}){const $=x.value,se=M?M.value:null,pe=T?T.getContext(x.value.outlet):null;if(se&&$.routeConfig===se.routeConfig){const Ue=function(x,M,T){if("function"==typeof T)return T(x,M);switch(T){case"pathParamsChange":return!ki(x.url,M.url);case"pathParamsOrQueryParamsChange":return!ki(x.url,M.url)||!ir(x.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qn(x,M)||!ir(x.queryParams,M.queryParams);case"paramsChange":default:return!Qn(x,M)}}(se,$,$.routeConfig.runGuardsAndResolvers);Ue?V.canActivateChecks.push(new Bo(P)):($.data=se.data,$._resolvedData=se._resolvedData),co(x,M,$.component?pe?pe.children:null:T,P,V),Ue&&pe&&pe.outlet&&pe.outlet.isActivated&&V.canDeactivateChecks.push(new ao(pe.outlet.component,se))}else se&&ec(M,pe,V),V.canActivateChecks.push(new Bo(P)),co(x,null,$.component?pe?pe.children:null:T,P,V)})(se,$[se.value.outlet],T,P.concat([se.value]),V),delete $[se.value.outlet]}),re($,(se,pe)=>ec(se,T.getContext(pe),V)),V}function ec(x,M,T){const P=hr(x),V=x.value;re(P,($,se)=>{ec($,V.component?M?M.children.getContext(se):null:M,T)}),T.canDeactivateChecks.push(new ao(V.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,V))}class pa{}function Uo(x){return new te.y(M=>M.error(x))}class Gs{constructor(M,T,P,V,$,se){this.rootComponentType=M,this.config=T,this.urlTree=P,this.url=V,this.paramsInheritanceStrategy=$,this.relativeLinkResolution=se}recognize(){const M=G(this.urlTree.root,[],[],this.config.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,M,st);if(null===T)return null;const P=new zi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},st,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new dr(P,T),$=new ri(this.url,V);return this.inheritParamsAndData($._root),$}inheritParamsAndData(M){const T=M.value,P=No(T,this.paramsInheritanceStrategy);T.params=Object.freeze(P.params),T.data=Object.freeze(P.data),M.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(M,T,P){return 0===T.segments.length&&T.hasChildren()?this.processChildren(M,T):this.processSegment(M,T,T.segments,P)}processChildren(M,T){const P=[];for(const $ of Object.keys(T.children)){const se=T.children[$],pe=oo(M,$),Ue=this.processSegmentGroup(pe,se,$);if(null===Ue)return null;P.push(...Ue)}const V=id(P);return V.sort((M,T)=>M.value.outlet===st?-1:T.value.outlet===st?1:M.value.outlet.localeCompare(T.value.outlet)),V}processSegment(M,T,P,V){for(const $ of M){const se=this.processSegmentAgainstRoute($,T,P,V);if(null!==se)return se}return Ht(T,P,V)?[]:null}processSegmentAgainstRoute(M,T,P,V){if(M.redirectTo||!dt(M,T,P,V))return null;let $,se=[],pe=[];if("**"===M.path){const Et=P.length>0?jl(P).parameters:{};$=new zi(P,Et,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rc(M),oi(M),M.component,M,od(T),nu(T)+P.length,Qa(M))}else{const Et=k(T,M,P);if(!Et.matched)return null;se=Et.consumedSegments,pe=P.slice(Et.lastChild),$=new zi(se,Et.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rc(M),oi(M),M.component,M,od(T),nu(T)+se.length,Qa(M))}const Ue=(x=M).children?x.children:x.loadChildren?x._loadedConfig.routes:[],{segmentGroup:at,slicedSegments:yt}=G(T,se,pe,Ue.filter(Et=>void 0===Et.redirectTo),this.relativeLinkResolution);var x;if(0===yt.length&&at.hasChildren()){const Et=this.processChildren(Ue,at);return null===Et?null:[new dr($,Et)]}if(0===Ue.length&&0===yt.length)return[new dr($,[])];const zt=oi(M)===V,An=this.processSegment(Ue,at,yt,zt?st:V);return null===An?null:[new dr($,An)]}}function $s(x){const M=x.value.routeConfig;return M&&""===M.path&&void 0===M.redirectTo}function id(x){const M=[],T=new Set;for(const P of x){if(!$s(P)){M.push(P);continue}const V=M.find($=>P.value.routeConfig===$.value.routeConfig);void 0!==V?(V.children.push(...P.children),T.add(V)):M.push(P)}for(const P of T){const V=id(P.children);M.push(new dr(P.value,V))}return M.filter(P=>!T.has(P))}function od(x){let M=x;for(;M._sourceSegment;)M=M._sourceSegment;return M}function nu(x){let M=x,T=M._segmentIndexShift?M._segmentIndexShift:0;for(;M._sourceSegment;)M=M._sourceSegment,T+=M._segmentIndexShift?M._segmentIndexShift:0;return T-1}function rc(x){return x.data||{}}function Qa(x){return x.resolve||{}}function Xa(x){return(0,Pt.w)(M=>{const T=x(M);return T?(0,me.D)(T).pipe((0,et.U)(()=>M)):(0,he.of)(M)})}class ld extends class{shouldDetach(M){return!1}store(M,T){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,T){return M.routeConfig===T.routeConfig}}{}const el=new m.OlP("ROUTES");class Uh{constructor(M,T,P,V){this.loader=M,this.compiler=T,this.onLoadStartListener=P,this.onLoadEndListener=V}load(M,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const V=this.loadModuleFactory(T.loadChildren).pipe((0,et.U)($=>{this.onLoadEndListener&&this.onLoadEndListener(T);const se=$.create(M);return new is(yi(se.injector.get(el,void 0,m.XFs.Self|m.XFs.Optional)).map(Cs),se)}),De($=>{throw T._loader$=void 0,$}));return T._loader$=new X.c(V,()=>new ue.xQ).pipe((0,Mn.x)()),T._loader$}loadModuleFactory(M){return"string"==typeof M?(0,me.D)(this.loader.load(M)):ie(M()).pipe((0,Ie.zg)(T=>T instanceof m.YKP?(0,he.of)(T):(0,me.D)(this.compiler.compileModuleAsync(T))))}}class Mm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Tr,this.attachRef=null}}class Tr{constructor(){this.contexts=new Map}onChildOutletCreated(M,T){const P=this.getOrCreateContext(M);P.outlet=T,this.contexts.set(M,P)}onChildOutletDestroyed(M){const T=this.getContext(M);T&&(T.outlet=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let T=this.getContext(M);return T||(T=new Mm,this.contexts.set(M,T)),T}getContext(M){return this.contexts.get(M)||null}}class Xn{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,T){return M}}function bp(x){throw x}function Rm(x,M,T){return M.parse("/")}function tl(x,M){return(0,he.of)(null)}const ma={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zr=(()=>{class x{constructor(T,P,V,$,se,pe,Ue,at){this.rootComponentType=T,this.urlSerializer=P,this.rootContexts=V,this.location=$,this.config=at,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ue.xQ,this.errorHandler=bp,this.malformedUriErrorHandler=Rm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tl,afterPreactivation:tl},this.urlHandlingStrategy=new Xn,this.routeReuseStrategy=new ld,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=se.get(m.h0i),this.console=se.get(m.c2e);const An=se.get(m.R0b);this.isNgZoneEnabled=An instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(at),this.currentUrlTree=new Zn(new Vt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Uh(pe,Ue,Et=>this.triggerEvent(new Bs(Et)),Et=>this.triggerEvent(new ht(Et))),this.routerState=Fi(this.currentUrlTree,this.rootComponentType),this.transitions=new ee.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const P=this.events;return T.pipe((0,Dt.h)(V=>0!==V.id),(0,et.U)(V=>Object.assign(Object.assign({},V),{extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),(0,Pt.w)(V=>{let $=!1,se=!1;return(0,he.of)(V).pipe((0,zn.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.currentRawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Pt.w)(pe=>{const Ue=!this.navigated||pe.extractedUrl.toString()!==this.browserUrlTree.toString(),at=("reload"===this.onSameUrlNavigation||Ue)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl);if(jo(pe.source)&&(this.browserUrlTree=pe.rawUrl),at)return(0,he.of)(pe).pipe((0,Pt.w)(yt=>{const zt=this.transitions.getValue();return P.next(new kn(yt.id,this.serializeUrl(yt.extractedUrl),yt.source,yt.restoredState)),zt!==this.transitions.getValue()?ve.E:Promise.resolve(yt)}),function(x,M,T,P){return(0,Pt.w)(V=>function(x,M,T,P,V){return new Hn(x,M,T,P,V).apply()}(x,M,T,V.extractedUrl,P).pipe((0,et.U)($=>Object.assign(Object.assign({},V),{urlAfterRedirects:$}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,zn.b)(yt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:yt.urlAfterRedirects})}),function(x,M,T,P,V){return(0,Ie.zg)($=>function(x,M,T,P,V="emptyOnly",$="legacy"){try{const se=new Gs(x,M,T,P,V,$).recognize();return null===se?Uo(new pa):(0,he.of)(se)}catch(se){return Uo(se)}}(x,M,$.urlAfterRedirects,T($.urlAfterRedirects),P,V).pipe((0,et.U)(se=>Object.assign(Object.assign({},$),{targetSnapshot:se}))))}(this.rootComponentType,this.config,yt=>this.serializeUrl(yt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,zn.b)(yt=>{"eager"===this.urlUpdateStrategy&&(yt.extras.skipLocationChange||this.setBrowserUrl(yt.urlAfterRedirects,yt),this.browserUrlTree=yt.urlAfterRedirects);const zt=new la(yt.id,this.serializeUrl(yt.extractedUrl),this.serializeUrl(yt.urlAfterRedirects),yt.targetSnapshot);P.next(zt)}));if(Ue&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:zt,extractedUrl:An,source:Et,restoredState:pr,extras:Ci}=pe,qi=new kn(zt,this.serializeUrl(An),Et,pr);P.next(qi);const fo=Fi(An,this.rootComponentType).snapshot;return(0,he.of)(Object.assign(Object.assign({},pe),{targetSnapshot:fo,urlAfterRedirects:An,extras:Object.assign(Object.assign({},Ci),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=pe.rawUrl,this.browserUrlTree=pe.urlAfterRedirects,pe.resolve(null),ve.E}),Xa(pe=>{const{targetSnapshot:Ue,id:at,extractedUrl:yt,rawUrl:zt,extras:{skipLocationChange:An,replaceUrl:Et}}=pe;return this.hooks.beforePreactivation(Ue,{navigationId:at,appliedUrlTree:yt,rawUrlTree:zt,skipLocationChange:!!An,replaceUrl:!!Et})}),(0,zn.b)(pe=>{const Ue=new Oo(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(Ue)}),(0,et.U)(pe=>Object.assign(Object.assign({},pe),{guards:eu(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)})),function(x,M){return(0,Ie.zg)(T=>{const{targetSnapshot:P,currentSnapshot:V,guards:{canActivateChecks:$,canDeactivateChecks:se}}=T;return 0===se.length&&0===$.length?(0,he.of)(Object.assign(Object.assign({},T),{guardsResult:!0})):function(x,M,T,P){return(0,me.D)(x).pipe((0,Ie.zg)(V=>function(x,M,T,P,V){const $=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,he.of)(!0);const se=$.map(pe=>{const Ue=lo(pe,M,V);let at;if(function(x){return x&&si(x.canDeactivate)}(Ue))at=ie(Ue.canDeactivate(x,M,T,P));else{if(!si(Ue))throw new Error("Invalid CanDeactivate guard");at=ie(Ue(x,M,T,P))}return at.pipe((0,xn.P)())});return(0,he.of)(se).pipe(kr())}(V.component,V.route,T,M,P)),(0,xn.P)(V=>!0!==V,!0))}(se,P,V,x).pipe((0,Ie.zg)(pe=>pe&&function(x){return"boolean"==typeof x}(pe)?function(x,M,T,P){return(0,me.D)(M).pipe(Ge(V=>(0,oe.z)(function(x,M){return null!==x&&M&&M(new cr(x)),(0,he.of)(!0)}(V.route.parent,P),function(x,M){return null!==x&&M&&M(new yr(x)),(0,he.of)(!0)}(V.route,P),function(x,M,T){const P=M[M.length-1],$=M.slice(0,M.length-1).reverse().map(se=>function(x){const M=x.routeConfig?x.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:x,guards:M}:null}(se)).filter(se=>null!==se).map(se=>ae(()=>{const pe=se.guards.map(Ue=>{const at=lo(Ue,se.node,T);let yt;if(function(x){return x&&si(x.canActivateChild)}(at))yt=ie(at.canActivateChild(P,x));else{if(!si(at))throw new Error("Invalid CanActivateChild guard");yt=ie(at(P,x))}return yt.pipe((0,xn.P)())});return(0,he.of)(pe).pipe(kr())}));return(0,he.of)($).pipe(kr())}(x,V.path,T),function(x,M,T){const P=M.routeConfig?M.routeConfig.canActivate:null;if(!P||0===P.length)return(0,he.of)(!0);const V=P.map($=>ae(()=>{const se=lo($,M,T);let pe;if(function(x){return x&&si(x.canActivate)}(se))pe=ie(se.canActivate(M,x));else{if(!si(se))throw new Error("Invalid CanActivate guard");pe=ie(se(M,x))}return pe.pipe((0,xn.P)())}));return(0,he.of)(V).pipe(kr())}(x,V.route,T))),(0,xn.P)(V=>!0!==V,!0))}(P,$,x,M):(0,he.of)(pe)),(0,et.U)(pe=>Object.assign(Object.assign({},T),{guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,zn.b)(pe=>{if(Cr(pe.guardsResult)){const at=Je(`Redirecting to "${this.serializeUrl(pe.guardsResult)}"`);throw at.url=pe.guardsResult,at}const Ue=new Ni(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(Ue)}),(0,Dt.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,""),!1)),Xa(pe=>{if(pe.guards.canActivateChecks.length)return(0,he.of)(pe).pipe((0,zn.b)(Ue=>{const at=new Ls(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(at)}),(0,Pt.w)(Ue=>{let at=!1;return(0,he.of)(Ue).pipe(function(x,M){return(0,Ie.zg)(T=>{const{targetSnapshot:P,guards:{canActivateChecks:V}}=T;if(!V.length)return(0,he.of)(T);let $=0;return(0,me.D)(V).pipe(Ge(se=>function(x,M,T,P){return function(x,M,T,P){const V=Object.keys(x);if(0===V.length)return(0,he.of)({});const $={};return(0,me.D)(V).pipe((0,Ie.zg)(se=>function(x,M,T,P){const V=lo(x,M,P);return ie(V.resolve?V.resolve(M,T):V(M,T))}(x[se],M,T,P).pipe((0,zn.b)(pe=>{$[se]=pe}))),Qt(1),(0,Ie.zg)(()=>Object.keys($).length===V.length?(0,he.of)($):ve.E))}(x._resolve,x,M,P).pipe((0,et.U)($=>(x._resolvedData=$,x.data=Object.assign(Object.assign({},x.data),No(x,T).resolve),null)))}(se.route,P,x,M)),(0,zn.b)(()=>$++),Qt(1),(0,Ie.zg)(se=>$===V.length?(0,he.of)(T):ve.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,zn.b)({next:()=>at=!0,complete:()=>{at||(this.restoreHistory(Ue),this.cancelNavigationTransition(Ue,"At least one route resolver didn't emit any value."))}}))}),(0,zn.b)(Ue=>{const at=new Vs(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(at)}))}),Xa(pe=>{const{targetSnapshot:Ue,id:at,extractedUrl:yt,rawUrl:zt,extras:{skipLocationChange:An,replaceUrl:Et}}=pe;return this.hooks.afterPreactivation(Ue,{navigationId:at,appliedUrlTree:yt,rawUrlTree:zt,skipLocationChange:!!An,replaceUrl:!!Et})}),(0,et.U)(pe=>{const Ue=function(x,M,T){const P=ts(x,M._root,T?T._root:void 0);return new sn(P,M)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return Object.assign(Object.assign({},pe),{targetRouterState:Ue})}),(0,zn.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((x,M,T)=>(0,et.U)(P=>(new Zl(M,P.targetRouterState,P.currentRouterState,T).activate(x),P)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,zn.b)({next(){$=!0},complete(){$=!0}}),function(x){return M=>M.lift(new Ee(x))}(()=>{if(!$&&!se){const pe=`Navigation ID ${V.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(V),this.cancelNavigationTransition(V,pe)):this.cancelNavigationTransition(V,pe)}this.currentNavigation=null}),De(pe=>{if(se=!0,function(x){return x&&x[En]}(pe)){const Ue=Cr(pe.url);Ue||(this.navigated=!0,this.restoreHistory(V,!0));const at=new Wn(V.id,this.serializeUrl(V.extractedUrl),pe.message);P.next(at),Ue?setTimeout(()=>{const yt=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),zt={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jo(V.source)};this.scheduleNavigation(yt,"imperative",null,zt,{resolve:V.resolve,reject:V.reject,promise:V.promise})},0):V.resolve(!1)}else{this.restoreHistory(V,!0);const Ue=new Es(V.id,this.serializeUrl(V.extractedUrl),pe);P.next(Ue);try{V.resolve(this.errorHandler(pe))}catch(at){V.reject(at)}}return ve.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}getTransition(){const T=this.transitions.value;return T.urlAfterRedirects=this.browserUrlTree,T}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const P=this.extractLocationChangeInfoFromEvent(T);this.shouldScheduleNavigation(this.lastLocationChangeInfo,P)&&setTimeout(()=>{const{source:V,state:$,urlTree:se}=P,pe={replaceUrl:!0};if($){const Ue=Object.assign({},$);delete Ue.navigationId,delete Ue.\u0275routerPageId,0!==Object.keys(Ue).length&&(pe.state=Ue)}this.scheduleNavigation(se,V,$,pe)},0),this.lastLocationChangeInfo=P}))}extractLocationChangeInfoFromEvent(T){var P;return{source:"popstate"===T.type?"popstate":"hashchange",urlTree:this.parseUrl(T.url),state:(null===(P=T.state)||void 0===P?void 0:P.navigationId)?T.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(T,P){if(!T)return!0;const V=P.urlTree.toString()===T.urlTree.toString();return P.transitionId!==T.transitionId||!V||!("hashchange"===P.source&&"popstate"===T.source||"popstate"===P.source&&"hashchange"===T.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){Ir(T),this.config=T.map(Cs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,P={}){const{relativeTo:V,queryParams:$,fragment:se,queryParamsHandling:pe,preserveFragment:Ue}=P,at=V||this.routerState.root,yt=Ue?this.currentUrlTree.fragment:se;let zt=null;switch(pe){case"merge":zt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),$);break;case"preserve":zt=this.currentUrlTree.queryParams;break;default:zt=$||null}return null!==zt&&(zt=this.removeEmptyProps(zt)),function(x,M,T,P,V){if(0===T.length)return zl(M.root,M.root,M,P,V);const $=function(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new Hs(!0,0,x);let M=0,T=!1;const P=x.reduce((V,$,se)=>{if("object"==typeof $&&null!=$){if($.outlets){const pe={};return re($.outlets,(Ue,at)=>{pe[at]="string"==typeof Ue?Ue.split("/"):Ue}),[...V,{outlets:pe}]}if($.segmentPath)return[...V,$.segmentPath]}return"string"!=typeof $?[...V,$]:0===se?($.split("/").forEach((pe,Ue)=>{0==Ue&&"."===pe||(0==Ue&&""===pe?T=!0:".."===pe?M++:""!=pe&&V.push(pe))}),V):[...V,$]},[]);return new Hs(T,M,P)}(T);if($.toRoot())return zl(M.root,new Vt([],{}),M,P,V);const se=function(x,M,T){if(x.isAbsolute)return new ql(M.root,!0,0);if(-1===T.snapshot._lastPathIndex){const $=T.snapshot._urlSegment;return new ql($,$===M.root,0)}const P=ha(x.commands[0])?0:1;return function(x,M,T){let P=x,V=M,$=T;for(;$>V;){if($-=V,P=P.parent,!P)throw new Error("Invalid number of '../'");V=P.segments.length}return new ql(P,!1,V-$)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+P,x.numberOfDoubleDots)}($,M,x),pe=se.processChildren?Wa(se.segmentGroup,se.index,$.commands):Jc(se.segmentGroup,se.index,$.commands);return zl(se.segmentGroup,pe,M,P,V)}(at,this.currentUrlTree,T,zt,null!=yt?yt:null)}navigateByUrl(T,P={skipLocationChange:!1}){const V=Cr(T)?T:this.parseUrl(T),$=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation($,"imperative",null,P)}navigate(T,P={skipLocationChange:!1}){return function(x){for(let M=0;M<x.length;M++){const T=x[M];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${M}`)}}(T),this.navigateByUrl(this.createUrlTree(T,P),P)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let P;try{P=this.urlSerializer.parse(T)}catch(V){P=this.malformedUriErrorHandler(V,this.urlSerializer,T)}return P}isActive(T,P){let V;if(V=!0===P?Object.assign({},ma):!1===P?Object.assign({},jh):P,Cr(T))return Qe(this.currentUrlTree,T,V);const $=this.parseUrl(T);return Qe(this.currentUrlTree,$,V)}removeEmptyProps(T){return Object.keys(T).reduce((P,V)=>{const $=T[V];return null!=$&&(P[V]=$),P},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new rr(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(T,P,V,$,se){var pe,Ue;if(this.disposed)return Promise.resolve(!1);const at=this.getTransition(),yt=jo(P)&&at&&!jo(at.source),Et=(this.lastSuccessfulId===at.id||this.currentNavigation?at.rawUrl:at.urlAfterRedirects).toString()===T.toString();if(yt&&Et)return Promise.resolve(!0);let pr,Ci,qi;se?(pr=se.resolve,Ci=se.reject,qi=se.promise):qi=new Promise((Ii,Ws)=>{pr=Ii,Ci=Ws});const fo=++this.navigationId;let Ki;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(V=this.location.getState()),Ki=V&&V.\u0275routerPageId?V.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?null!==(pe=this.browserPageId)&&void 0!==pe?pe:0:(null!==(Ue=this.browserPageId)&&void 0!==Ue?Ue:0)+1):Ki=0,this.setTransition({id:fo,targetPageId:Ki,source:P,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:$,resolve:pr,reject:Ci,promise:qi,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qi.catch(Ii=>Promise.reject(Ii))}setBrowserUrl(T,P){const V=this.urlSerializer.serialize(T),$=Object.assign(Object.assign({},P.extras.state),this.generateNgRouterState(P.id,P.targetPageId));this.location.isCurrentPathEqualTo(V)||P.extras.replaceUrl?this.location.replaceState(V,"",$):this.location.go(V,"",$)}restoreHistory(T,P=!1){var V,$;if("computed"===this.canceledNavigationResolution){const se=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)||0===se?this.currentUrlTree===(null===($=this.currentNavigation)||void 0===$?void 0:$.finalUrl)&&0===se&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(se)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,P){const V=new Wn(T.id,this.serializeUrl(T.extractedUrl),P);this.triggerEvent(V),T.resolve(!1)}generateNgRouterState(T,P){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:P}:{navigationId:T}}}return x.\u0275fac=function(T){return new(T||x)(m.LFG(m.DyG),m.LFG(za),m.LFG(Tr),m.LFG(O.Ye),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();function jo(x){return"imperative"!==x}let Ho=(()=>{class x{constructor(T,P,V){this.router=T,this.route=P,this.locationStrategy=V,this.commands=[],this.onChanges=new ue.xQ,this.subscription=T.events.subscribe($=>{$ instanceof rr&&this.updateTargetUrlAndHref()})}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:[]}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,P,V,$,se){if(0!==T||P||V||$||se||"string"==typeof this.target&&"_self"!=this.target)return!0;const pe={skipLocationChange:zs(this.skipLocationChange),replaceUrl:zs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,pe),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:zs(this.preserveFragment)})}}return x.\u0275fac=function(T){return new(T||x)(m.Y36(Zr),m.Y36($i),m.Y36(O.S$))},x.\u0275dir=m.lG2({type:x,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,P){1&T&&m.NdJ("click",function($){return P.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&T&&(m.Ikx("href",P.href,m.LSH),m.uIk("target",P.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[m.TTD]}),x})();function zs(x){return""===x||!!x}let Go=(()=>{class x{constructor(T,P,V,$,se){this.parentContexts=T,this.location=P,this.resolver=V,this.changeDetector=se,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=$||st,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,T}attach(T,P){this.activated=T,this._activatedRoute=P,this.location.insert(T.hostView)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,P){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const se=(P=P||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),pe=this.parentContexts.getOrCreateContext(this.name).children,Ue=new Cp(T,pe,this.location.injector);this.activated=this.location.createComponent(se,this.location.length,Ue),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(T){return new(T||x)(m.Y36(Tr),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},x.\u0275dir=m.lG2({type:x,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),x})();class Cp{constructor(M,T,P){this.route=M,this.childContexts=T,this.parent=P}get(M,T){return M===$i?this.route:M===Tr?this.childContexts:this.parent.get(M,T)}}class sc{}class cd{preload(M,T){return(0,he.of)(null)}}let rl=(()=>{class x{constructor(T,P,V,$,se){this.router=T,this.injector=$,this.preloadingStrategy=se,this.loader=new Uh(P,V,at=>T.triggerEvent(new Bs(at)),at=>T.triggerEvent(new ht(at)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Dt.h)(T=>T instanceof rr),Ge(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(m.h0i);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,P){const V=[];for(const $ of P)if($.loadChildren&&!$.canLoad&&$._loadedConfig){const se=$._loadedConfig;V.push(this.processRoutes(se.module,se.routes))}else $.loadChildren&&!$.canLoad?V.push(this.preloadConfig(T,$)):$.children&&V.push(this.processRoutes(T,$.children));return(0,me.D)(V).pipe((0,kt.J)(),(0,et.U)($=>{}))}preloadConfig(T,P){return this.preloadingStrategy.preload(P,()=>(P._loadedConfig?(0,he.of)(P._loadedConfig):this.loader.load(T.injector,P)).pipe((0,Ie.zg)($=>(P._loadedConfig=$,this.processRoutes($.module,$.routes)))))}}return x.\u0275fac=function(T){return new(T||x)(m.LFG(Zr),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(sc))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})(),Hh=(()=>{class x{constructor(T,P,V={}){this.router=T,this.viewportScroller=P,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof kn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof rr&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof St&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,P){this.router.triggerEvent(new St(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return x.\u0275fac=function(T){return new(T||x)(m.LFG(Zr),m.LFG(O.EM),m.LFG(void 0))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();const il=new m.OlP("ROUTER_CONFIGURATION"),sl=new m.OlP("ROUTER_FORROOT_GUARD"),su=[O.Ye,{provide:za,useClass:jn},{provide:Zr,useFactory:function(x,M,T,P,V,$,se,pe={},Ue,at){const yt=new Zr(null,x,M,T,P,V,$,yi(se));return Ue&&(yt.urlHandlingStrategy=Ue),at&&(yt.routeReuseStrategy=at),function(x,M){x.errorHandler&&(M.errorHandler=x.errorHandler),x.malformedUriErrorHandler&&(M.malformedUriErrorHandler=x.malformedUriErrorHandler),x.onSameUrlNavigation&&(M.onSameUrlNavigation=x.onSameUrlNavigation),x.paramsInheritanceStrategy&&(M.paramsInheritanceStrategy=x.paramsInheritanceStrategy),x.relativeLinkResolution&&(M.relativeLinkResolution=x.relativeLinkResolution),x.urlUpdateStrategy&&(M.urlUpdateStrategy=x.urlUpdateStrategy)}(pe,yt),pe.enableTracing&&yt.events.subscribe(zt=>{var An,Et;null===(An=console.group)||void 0===An||An.call(console,`Router Event: ${zt.constructor.name}`),console.log(zt.toString()),console.log(zt),null===(Et=console.groupEnd)||void 0===Et||Et.call(console)}),yt},deps:[za,Tr,O.Ye,m.zs3,m.v3s,m.Sil,el,il,[class{},new m.FiY],[class{},new m.FiY]]},Tr,{provide:$i,useFactory:function(x){return x.routerState.root},deps:[Zr]},{provide:m.v3s,useClass:m.EAV},rl,cd,class{preload(M,T){return T().pipe(De(()=>(0,he.of)(null)))}},{provide:il,useValue:{enableTracing:!1}}];function fr(){return new m.PXZ("Router",Zr)}let Ip=(()=>{class x{constructor(T,P){}static forRoot(T,P){return{ngModule:x,providers:[su,al(T),{provide:sl,useFactory:dd,deps:[[Zr,new m.FiY,new m.tp0]]},{provide:il,useValue:P||{}},{provide:O.S$,useFactory:va,deps:[O.lw,[new m.tBr(O.mr),new m.FiY],il]},{provide:Hh,useFactory:ud,deps:[Zr,O.EM,il]},{provide:sc,useExisting:P&&P.preloadingStrategy?P.preloadingStrategy:cd},{provide:m.PXZ,multi:!0,useFactory:fr},[bi,{provide:m.ip1,multi:!0,useFactory:hd,deps:[bi]},{provide:wi,useFactory:fn,deps:[bi]},{provide:m.tb,multi:!0,useExisting:wi}]]}}static forChild(T){return{ngModule:x,providers:[al(T)]}}}return x.\u0275fac=function(T){return new(T||x)(m.LFG(sl,8),m.LFG(Zr,8))},x.\u0275mod=m.oAB({type:x}),x.\u0275inj=m.cJS({}),x})();function ud(x,M,T){return T.scrollOffset&&M.setOffset(T.scrollOffset),new Hh(x,M,T)}function va(x,M,T={}){return T.useHash?new O.Do(x,M):new O.b0(x,M)}function dd(x){return"guarded"}function al(x){return[{provide:m.deG,multi:!0,useValue:x},{provide:el,multi:!0,useValue:x}]}let bi=(()=>{class x{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ue.xQ}appInitializer(){return this.injector.get(O.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let P=null;const V=new Promise(pe=>P=pe),$=this.injector.get(Zr),se=this.injector.get(il);return"disabled"===se.initialNavigation?($.setUpLocationChangeListener(),P(!0)):"enabled"===se.initialNavigation||"enabledBlocking"===se.initialNavigation?($.hooks.afterPreactivation=()=>this.initNavigation?(0,he.of)(null):(this.initNavigation=!0,P(!0),this.resultOfPreactivationDone),$.initialNavigation()):P(!0),V})}bootstrapListener(T){const P=this.injector.get(il),V=this.injector.get(rl),$=this.injector.get(Hh),se=this.injector.get(Zr),pe=this.injector.get(m.z2F);T===pe.components[0]&&(("enabledNonBlocking"===P.initialNavigation||void 0===P.initialNavigation)&&se.initialNavigation(),V.setUpPreloading(),$.init(),se.resetRootComponentType(pe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return x.\u0275fac=function(T){return new(T||x)(m.LFG(m.zs3))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();function hd(x){return x.appInitializer.bind(x)}function fn(x){return x.bootstrapListener.bind(x)}const wi=new m.OlP("Router Initializer")},4486:(rt,Me,H)=>{"use strict";H.d(Me,{Z:()=>Te});var O=H(4685),m=H(6034),te=H(5452),me=H(300);class ve{constructor(Ie,Ge){this._delegate=Ie,this.firebase=Ge,(0,te._addComponent)(Ie,new m.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,te.deleteApp)(this._delegate)))}_getService(Ie,Ge=te._DEFAULT_ENTRY_NAME){var Dt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Ie);return!pt.isInitialized()&&"EXPLICIT"===(null===(Dt=pt.getComponent())||void 0===Dt?void 0:Dt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Ge})}_removeServiceInstance(Ie,Ge=te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(Ge)}_addComponent(Ie){(0,te._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,te._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new O.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ne(){const Ke=function(Ke){const Ie={},Ge={__esModule:!0,initializeApp:function(Nt,Oe={}){const Se=te.initializeApp(Nt,Oe);if((0,O.r3)(Ie,Se.name))return Ie[Se.name];const Le=new Ke(Se,Ge);return Ie[Se.name]=Le,Le},app:pt,registerVersion:te.registerVersion,setLogLevel:te.setLogLevel,onLog:te.onLog,apps:null,SDK_VERSION:te.SDK_VERSION,INTERNAL:{registerComponent:function(Nt){const Oe=Nt.name,Se=Oe.replace("-compat","");if(te._registerComponent(Nt)&&"PUBLIC"===Nt.type){const Le=(ke=pt())=>{if("function"!=typeof ke[Se])throw he.create("invalid-app-argument",{appName:Oe});return ke[Se]()};void 0!==Nt.serviceProps&&(0,O.ZB)(Le,Nt.serviceProps),Ge[Se]=Le,Ke.prototype[Se]=function(...ke){return this._getService.bind(this,Oe).apply(this,Nt.multipleInstances?ke:[])}}return"PUBLIC"===Nt.type?Ge[Se]:null},removeApp:function(Nt){delete Ie[Nt]},useAsService:function(Nt,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:te}};function pt(Nt){if(!(0,O.r3)(Ie,Nt=Nt||te._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Nt});return Ie[Nt]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function(){return Object.keys(Ie).map(Nt=>Ie[Nt])}}),pt.App=Ke,Ge}(ve);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(Ge){(0,O.ZB)(Ke,Ge)},createSubscribe:O.ne,ErrorFactory:O.LL,deepExtend:O.ZB}),Ke}(),oe=new me.Yd("@firebase/app-compat");if((0,O.jU)()&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=K;(0,te.registerVersion)("@firebase/app-compat","0.1.1",undefined);const Te=De},5452:(rt,Me,H)=>{"use strict";H.r(Me),H.d(Me,{FirebaseError:()=>me.ZR,SDK_VERSION:()=>la,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>xn,_addOrOverwriteComponent:()=>zn,_apps:()=>mt,_clearComponents:()=>kn,_components:()=>Tt,_getProvider:()=>kt,_registerComponent:()=>Mn,_removeServiceInstance:()=>nr,deleteApp:()=>Vs,getApp:()=>Ni,getApps:()=>Ls,initializeApp:()=>Oo,onLog:()=>cr,registerVersion:()=>ht,setLogLevel:()=>es});var O=H(8239),m=H(6034),te=H(300),me=H(4685);class ve{constructor(St){this.container=St}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function(Gt){const St=Gt.getComponent();return"VERSION"===(null==St?void 0:St.type)}(st)){const tn=st.getImmediate();return`${tn.library}/${tn.version}`}return null}).filter(st=>st).join(" ")}}const he="@firebase/app",ne=new te.Yd("@firebase/app"),Pt="[DEFAULT]",ct={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mt=new Map,Tt=new Map;function xn(Gt,St){try{Gt.container.addComponent(St)}catch(st){ne.debug(`Component ${St.name} failed to register with FirebaseApp ${Gt.name}`,st)}}function zn(Gt,St){Gt.container.addOrOverwriteComponent(St)}function Mn(Gt){const St=Gt.name;if(Tt.has(St))return ne.debug(`There were multiple attempts to register component ${St}.`),!1;Tt.set(St,Gt);for(const st of mt.values())xn(st,Gt);return!0}function kt(Gt,St){return Gt.container.getProvider(St)}function nr(Gt,St,st=Pt){kt(Gt,St).clearInstance(st)}function kn(){Tt.clear()}const Wn=new me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Es{constructor(St,st,tn){this._isDeleted=!1,this._options=Object.assign({},St),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=tn,this.container.addComponent(new m.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(St){this.checkDestroyed(),this._automaticDataCollectionEnabled=St}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(St){this._isDeleted=St}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}const la="9.0.0";function Oo(Gt,St={}){"object"!=typeof St&&(St={name:St});const st=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},St),tn=st.name;if("string"!=typeof tn||!tn)throw Wn.create("bad-app-name",{appName:String(tn)});const qn=mt.get(tn);if(qn){if((0,me.vZ)(Gt,qn.options)&&(0,me.vZ)(st,qn.config))return qn;throw Wn.create("duplicate-app",{appName:tn})}const En=new m.H0(tn);for(const vt of Tt.values())En.addComponent(vt);const Je=new Es(Gt,st,En);return mt.set(tn,Je),Je}function Ni(Gt=Pt){const St=mt.get(Gt);if(!St)throw Wn.create("no-app",{appName:Gt});return St}function Ls(){return Array.from(mt.values())}function Vs(Gt){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,O.Z)(function*(Gt){const St=Gt.name;mt.has(St)&&(mt.delete(St),yield Promise.all(Gt.container.getProviders().map(st=>st.delete())),Gt.isDeleted=!0)})).apply(this,arguments)}function ht(Gt,St,st){var tn;let qn=null!==(tn=ct[Gt])&&void 0!==tn?tn:Gt;st&&(qn+=`-${st}`);const En=qn.match(/\s|\//),Je=St.match(/\s|\//);if(En||Je){const vt=[`Unable to register library "${qn}" with version "${St}":`];return En&&vt.push(`library name "${qn}" contains illegal characters (whitespace or "/")`),En&&Je&&vt.push("and"),Je&&vt.push(`version name "${St}" contains illegal characters (whitespace or "/")`),void ne.warn(vt.join(" "))}Mn(new m.wA(`${qn}-version`,()=>({library:qn,version:St}),"VERSION"))}function cr(Gt,St){if(null!==Gt&&"function"!=typeof Gt)throw Wn.create("invalid-log-argument");(0,te.Am)(Gt,St)}function es(Gt){(0,te.Ub)(Gt)}Mn(new m.wA("platform-logger",St=>new ve(St),"PRIVATE")),ht(he,"0.7.0",undefined),ht("fire-js","")},6034:(rt,Me,H)=>{"use strict";H.d(Me,{wA:()=>te,H0:()=>ee,zt:()=>ve});var O=H(4762),m=H(4685),te=function(){function ne(K,oe,X){this.name=K,this.instanceFactory=oe,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ne.prototype.setInstantiationMode=function(K){return this.instantiationMode=K,this},ne.prototype.setMultipleInstances=function(K){return this.multipleInstances=K,this},ne.prototype.setServiceProps=function(K){return this.serviceProps=K,this},ne.prototype.setInstanceCreatedCallback=function(K){return this.onInstanceCreated=K,this},ne}(),me="[DEFAULT]",ve=function(){function ne(K,oe){this.name=K,this.container=oe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ne.prototype.get=function(K){var oe=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(oe)){var X=new m.BH;if(this.instancesDeferred.set(oe,X),this.isInitialized(oe)||this.shouldAutoInitialize())try{var ue=this.getOrInitializeService({instanceIdentifier:oe});ue&&X.resolve(ue)}catch(fe){}}return this.instancesDeferred.get(oe).promise},ne.prototype.getImmediate=function(K){var oe,X=this.normalizeInstanceIdentifier(null==K?void 0:K.identifier),ue=null!==(oe=null==K?void 0:K.optional)&&void 0!==oe&&oe;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(ue)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(fe){if(ue)return null;throw fe}},ne.prototype.getComponent=function(){return this.component},ne.prototype.setComponent=function(K){var oe,X;if(K.name!==this.name)throw Error("Mismatching Component "+K.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=K,this.shouldAutoInitialize()){if(function(ne){return"EAGER"===ne.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:me})}catch(Dt){}try{for(var ue=(0,O.XA)(this.instancesDeferred.entries()),fe=ue.next();!fe.done;fe=ue.next()){var De=(0,O.CR)(fe.value,2),Ke=De[1],Ie=this.normalizeInstanceIdentifier(De[0]);try{var Ge=this.getOrInitializeService({instanceIdentifier:Ie});Ke.resolve(Ge)}catch(Dt){}}}catch(Dt){oe={error:Dt}}finally{try{fe&&!fe.done&&(X=ue.return)&&X.call(ue)}finally{if(oe)throw oe.error}}}},ne.prototype.clearInstance=function(K){void 0===K&&(K=me),this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)},ne.prototype.delete=function(){return(0,O.mG)(this,void 0,void 0,function(){var K;return(0,O.Jh)(this,function(oe){switch(oe.label){case 0:return K=Array.from(this.instances.values()),[4,Promise.all((0,O.ev)((0,O.ev)([],(0,O.CR)(K.filter(function(X){return"INTERNAL"in X}).map(function(X){return X.INTERNAL.delete()}))),(0,O.CR)(K.filter(function(X){return"_delete"in X}).map(function(X){return X._delete()}))))];case 1:return oe.sent(),[2]}})})},ne.prototype.isComponentSet=function(){return null!=this.component},ne.prototype.isInitialized=function(K){return void 0===K&&(K=me),this.instances.has(K)},ne.prototype.getOptions=function(K){return void 0===K&&(K=me),this.instancesOptions.get(K)||{}},ne.prototype.initialize=function(K){var oe,X;void 0===K&&(K={});var ue=K.options,fe=void 0===ue?{}:ue,De=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(De))throw Error(this.name+"("+De+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Te=this.getOrInitializeService({instanceIdentifier:De,options:fe});try{for(var Ke=(0,O.XA)(this.instancesDeferred.entries()),Ie=Ke.next();!Ie.done;Ie=Ke.next()){var Ge=(0,O.CR)(Ie.value,2),pt=Ge[1];De===this.normalizeInstanceIdentifier(Ge[0])&&pt.resolve(Te)}}catch(Qt){oe={error:Qt}}finally{try{Ie&&!Ie.done&&(X=Ke.return)&&X.call(Ke)}finally{if(oe)throw oe.error}}return Te},ne.prototype.onInit=function(K,oe){var X,ue=this.normalizeInstanceIdentifier(oe),fe=null!==(X=this.onInitCallbacks.get(ue))&&void 0!==X?X:new Set;fe.add(K),this.onInitCallbacks.set(ue,fe);var De=this.instances.get(ue);return De&&K(De,ue),function(){fe.delete(K)}},ne.prototype.invokeOnInitCallbacks=function(K,oe){var X,ue,fe=this.onInitCallbacks.get(oe);if(fe)try{for(var De=(0,O.XA)(fe),Te=De.next();!Te.done;Te=De.next()){var Ke=Te.value;try{Ke(K,oe)}catch(Ie){}}}catch(Ie){X={error:Ie}}finally{try{Te&&!Te.done&&(ue=De.return)&&ue.call(De)}finally{if(X)throw X.error}}},ne.prototype.getOrInitializeService=function(K){var oe=K.instanceIdentifier,X=K.options,ue=void 0===X?{}:X,fe=this.instances.get(oe);if(!fe&&this.component&&(fe=this.component.instanceFactory(this.container,{instanceIdentifier:ae(oe),options:ue}),this.instances.set(oe,fe),this.instancesOptions.set(oe,ue),this.invokeOnInitCallbacks(fe,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,fe)}catch(De){}return fe||null},ne.prototype.normalizeInstanceIdentifier=function(K){return void 0===K&&(K=me),this.component?this.component.multipleInstances?K:me:K},ne.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ne}();function ae(ne){return ne===me?void 0:ne}var ee=function(){function ne(K){this.name=K,this.providers=new Map}return ne.prototype.addComponent=function(K){var oe=this.getProvider(K.name);if(oe.isComponentSet())throw new Error("Component "+K.name+" has already been registered with "+this.name);oe.setComponent(K)},ne.prototype.addOrOverwriteComponent=function(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)},ne.prototype.getProvider=function(K){if(this.providers.has(K))return this.providers.get(K);var oe=new ve(K,this);return this.providers.set(K,oe),oe},ne.prototype.getProviders=function(){return Array.from(this.providers.values())},ne}()},300:(rt,Me,H)=>{"use strict";function O(){for(var X=0,ue=0,fe=arguments.length;ue<fe;ue++)X+=arguments[ue].length;var De=Array(X),Te=0;for(ue=0;ue<fe;ue++)for(var Ke=arguments[ue],Ie=0,Ge=Ke.length;Ie<Ge;Ie++,Te++)De[Te]=Ke[Ie];return De}H.d(Me,{in:()=>me,Yd:()=>ne,Ub:()=>K,Am:()=>oe});var m,te=[],me=(()=>{return(X=me||(me={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",me;var X})(),ve={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},ae=me.INFO,he=((m={})[me.DEBUG]="log",m[me.VERBOSE]="log",m[me.INFO]="info",m[me.WARN]="warn",m[me.ERROR]="error",m),ee=function(X,ue){for(var fe=[],De=2;De<arguments.length;De++)fe[De-2]=arguments[De];if(!(ue<X.logLevel)){var Te=(new Date).toISOString(),Ke=he[ue];if(!Ke)throw new Error("Attempted to log a message with an invalid logType (value: "+ue+")");console[Ke].apply(console,O(["["+Te+"]  "+X.name+":"],fe))}},ne=function(){function X(ue){this.name=ue,this._logLevel=ae,this._logHandler=ee,this._userLogHandler=null,te.push(this)}return Object.defineProperty(X.prototype,"logLevel",{get:function(){return this._logLevel},set:function(ue){if(!(ue in me))throw new TypeError('Invalid value "'+ue+'" assigned to `logLevel`');this._logLevel=ue},enumerable:!1,configurable:!0}),X.prototype.setLogLevel=function(ue){this._logLevel="string"==typeof ue?ve[ue]:ue},Object.defineProperty(X.prototype,"logHandler",{get:function(){return this._logHandler},set:function(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(ue){this._userLogHandler=ue},enumerable:!1,configurable:!0}),X.prototype.debug=function(){for(var ue=[],fe=0;fe<arguments.length;fe++)ue[fe]=arguments[fe];this._userLogHandler&&this._userLogHandler.apply(this,O([this,me.DEBUG],ue)),this._logHandler.apply(this,O([this,me.DEBUG],ue))},X.prototype.log=function(){for(var ue=[],fe=0;fe<arguments.length;fe++)ue[fe]=arguments[fe];this._userLogHandler&&this._userLogHandler.apply(this,O([this,me.VERBOSE],ue)),this._logHandler.apply(this,O([this,me.VERBOSE],ue))},X.prototype.info=function(){for(var ue=[],fe=0;fe<arguments.length;fe++)ue[fe]=arguments[fe];this._userLogHandler&&this._userLogHandler.apply(this,O([this,me.INFO],ue)),this._logHandler.apply(this,O([this,me.INFO],ue))},X.prototype.warn=function(){for(var ue=[],fe=0;fe<arguments.length;fe++)ue[fe]=arguments[fe];this._userLogHandler&&this._userLogHandler.apply(this,O([this,me.WARN],ue)),this._logHandler.apply(this,O([this,me.WARN],ue))},X.prototype.error=function(){for(var ue=[],fe=0;fe<arguments.length;fe++)ue[fe]=arguments[fe];this._userLogHandler&&this._userLogHandler.apply(this,O([this,me.ERROR],ue)),this._logHandler.apply(this,O([this,me.ERROR],ue))},X}();function K(X){te.forEach(function(ue){ue.setLogLevel(X)})}function oe(X,ue){for(var fe=function(Ie){var Ge=null;ue&&ue.level&&(Ge=ve[ue.level]),Ie.userLogHandler=null===X?null:function(Dt,pt){for(var At=[],Qt=2;Qt<arguments.length;Qt++)At[Qt-2]=arguments[Qt];var Pe=At.map(function(Kt){if(null==Kt)return null;if("string"==typeof Kt)return Kt;if("number"==typeof Kt||"boolean"==typeof Kt)return Kt.toString();if(Kt instanceof Error)return Kt.message;try{return JSON.stringify(Kt)}catch(Nt){return null}}).filter(function(Kt){return Kt}).join(" ");pt>=(null!=Ge?Ge:Dt.logLevel)&&X({level:me[pt].toLowerCase(),message:Pe,args:At,type:Dt.name})}},De=0,Te=te;De<Te.length;De++)fe(Te[De])}},4685:(rt,Me,H)=>{"use strict";H.d(Me,{BH:()=>fe,LL:()=>Xe,ZR:()=>Ee,gQ:()=>Vs,hu:()=>te,g5:()=>me,US:()=>he,tV:()=>K,h$:()=>ee,r3:()=>nr,Sg:()=>De,ne:()=>Bs,p$:()=>oe,vZ:()=>Es,ZB:()=>X,gK:()=>St,pd:()=>Ls,m9:()=>In,z$:()=>Te,GJ:()=>kt,jU:()=>Ge,ru:()=>Dt,d:()=>At,xb:()=>rr,w1:()=>Qt,hl:()=>Oe,uI:()=>Ke,UG:()=>Ie,Yr:()=>Kt,b$:()=>pt,G6:()=>Nt,Mn:()=>Pe,w9:()=>Mn,cI:()=>ct,UI:()=>Wn,xO:()=>Oo,zd:()=>Ni,DV:()=>kn,ug:()=>Je,dS:()=>En,Pz:()=>mt,Dv:()=>Gt,Wj:()=>tn,lb:()=>qn});var O=H(4762),te=function(re,ie){if(!re)throw me(ie)},me=function(re){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+re)},ve=function(re){for(var ie=[],we=0,Ae=0;Ae<re.length;Ae++){var be=re.charCodeAt(Ae);be<128?ie[we++]=be:be<2048?(ie[we++]=be>>6|192,ie[we++]=63&be|128):55296==(64512&be)&&Ae+1<re.length&&56320==(64512&re.charCodeAt(Ae+1))?(be=65536+((1023&be)<<10)+(1023&re.charCodeAt(++Ae)),ie[we++]=be>>18|240,ie[we++]=be>>12&63|128,ie[we++]=be>>6&63|128,ie[we++]=63&be|128):(ie[we++]=be>>12|224,ie[we++]=be>>6&63|128,ie[we++]=63&be|128)}return ie},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(re,ie){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var we=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[],be=0;be<re.length;be+=3){var Qe=re[be],ut=be+1<re.length,rn=ut?re[be+1]:0,cn=be+2<re.length,Jt=cn?re[be+2]:0,Zn=(15&rn)<<2|Jt>>6,Vt=63&Jt;cn||(Vt=64,ut||(Zn=64)),Ae.push(we[Qe>>2],we[(3&Qe)<<4|rn>>4],we[Zn],we[Vt])}return Ae.join("")},encodeString:function(re,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(re):this.encodeByteArray(ve(re),ie)},decodeString:function(re,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(re):function(re){for(var ie=[],we=0,Ae=0;we<re.length;){var be=re[we++];if(be<128)ie[Ae++]=String.fromCharCode(be);else if(be>191&&be<224){var Qe=re[we++];ie[Ae++]=String.fromCharCode((31&be)<<6|63&Qe)}else if(be>239&&be<365){var cn=((7&be)<<18|(63&(Qe=re[we++]))<<12|(63&(ut=re[we++]))<<6|63&re[we++])-65536;ie[Ae++]=String.fromCharCode(55296+(cn>>10)),ie[Ae++]=String.fromCharCode(56320+(1023&cn))}else{Qe=re[we++];var ut=re[we++];ie[Ae++]=String.fromCharCode((15&be)<<12|(63&Qe)<<6|63&ut)}}return ie.join("")}(this.decodeStringToByteArray(re,ie))},decodeStringToByteArray:function(re,ie){this.init_();for(var we=ie?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[],be=0;be<re.length;){var Qe=we[re.charAt(be++)],rn=be<re.length?we[re.charAt(be)]:0,Jt=++be<re.length?we[re.charAt(be)]:64,vr=++be<re.length?we[re.charAt(be)]:64;if(++be,null==Qe||null==rn||null==Jt||null==vr)throw Error();Ae.push(Qe<<2|rn>>4),64!==Jt&&(Ae.push(rn<<4&240|Jt>>2),64!==vr&&Ae.push(Jt<<6&192|vr))}return Ae},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}},ee=function(re){var ie=ve(re);return he.encodeByteArray(ie,!0)},ne=function(re){return ee(re).replace(/\./g,"")},K=function(re){try{return he.decodeString(re,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function oe(re){return X(void 0,re)}function X(re,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===re&&(re={});break;case Array:re=[];break;default:return ie}for(var Ae in ie)!ie.hasOwnProperty(Ae)||!ue(Ae)||(re[Ae]=X(re[Ae],ie[Ae]));return re}function ue(re){return"__proto__"!==re}var fe=function(){function re(){var ie=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(we,Ae){ie.resolve=we,ie.reject=Ae})}return re.prototype.wrapCallback=function(ie){var we=this;return function(Ae,be){Ae?we.reject(Ae):we.resolve(be),"function"==typeof ie&&(we.promise.catch(function(){}),1===ie.length?ie(Ae):ie(Ae,be))}},re}();function De(re,ie){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Ae=ie||"demo-project",be=re.iat||0,Qe=re.sub||re.user_id;if(!Qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var ut=(0,O.pi)({iss:"https://securetoken.google.com/"+Ae,aud:Ae,iat:be,exp:be+3600,auth_time:be,sub:Qe,user_id:Qe,firebase:{sign_in_provider:"custom",identities:{}}},re);return[ne(JSON.stringify({alg:"none",type:"JWT"})),ne(JSON.stringify(ut)),""].join(".")}function Te(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ke(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(re){return!1}}function Ge(){return"object"==typeof self&&self.self===self}function Dt(){var re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function At(){return Te().indexOf("Electron/")>=0}function Qt(){var re=Te();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function Pe(){return Te().indexOf("MSAppHost/")>=0}function Kt(){return!1}function Nt(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){return"indexedDB"in self&&null!=indexedDB}var Ee=function(re){function ie(we,Ae,be){var Qe=re.call(this,Ae)||this;return Qe.code=we,Qe.customData=be,Qe.name="FirebaseError",Object.setPrototypeOf(Qe,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(Qe,Xe.prototype.create),Qe}return(0,O.ZT)(ie,re),ie}(Error),Xe=function(){function re(ie,we,Ae){this.service=ie,this.serviceName=we,this.errors=Ae}return re.prototype.create=function(ie){for(var we=[],Ae=1;Ae<arguments.length;Ae++)we[Ae-1]=arguments[Ae];var be=we[0]||{},Qe=this.service+"/"+ie,ut=this.errors[ie],rn=ut?et(ut,be):"Error",cn=this.serviceName+": "+rn+" ("+Qe+").",Jt=new Ee(Qe,cn,be);return Jt},re}();function et(re,ie){return re.replace(Pt,function(we,Ae){var be=ie[Ae];return null!=be?String(be):"<"+Ae+"?>"})}var Pt=/\{\$([^}]+)}/g;function ct(re){return JSON.parse(re)}function mt(re){return JSON.stringify(re)}var Tt=function(re){var ie={},we={},Ae={},be="";try{var Qe=re.split(".");ie=ct(K(Qe[0])||""),we=ct(K(Qe[1])||""),be=Qe[2],Ae=we.d||{},delete we.d}catch(ut){}return{header:ie,claims:we,data:Ae,signature:be}},Mn=function(re){var we=Tt(re).claims;return!!we&&"object"==typeof we&&we.hasOwnProperty("iat")},kt=function(re){var ie=Tt(re).claims;return"object"==typeof ie&&!0===ie.admin};function nr(re,ie){return Object.prototype.hasOwnProperty.call(re,ie)}function kn(re,ie){if(Object.prototype.hasOwnProperty.call(re,ie))return re[ie]}function rr(re){for(var ie in re)if(Object.prototype.hasOwnProperty.call(re,ie))return!1;return!0}function Wn(re,ie,we){var Ae={};for(var be in re)Object.prototype.hasOwnProperty.call(re,be)&&(Ae[be]=ie.call(we,re[be],be,re));return Ae}function Es(re,ie){if(re===ie)return!0;for(var we=Object.keys(re),Ae=Object.keys(ie),be=0,Qe=we;be<Qe.length;be++){if(!Ae.includes(ut=Qe[be]))return!1;var rn=re[ut],cn=ie[ut];if(la(rn)&&la(cn)){if(!Es(rn,cn))return!1}else if(rn!==cn)return!1}for(var Jt=0,Kn=Ae;Jt<Kn.length;Jt++){var ut;if(!we.includes(ut=Kn[Jt]))return!1}return!0}function la(re){return null!==re&&"object"==typeof re}function Oo(re){for(var ie=[],we=function(cn,Jt){Array.isArray(Jt)?Jt.forEach(function(Kn){ie.push(encodeURIComponent(cn)+"="+encodeURIComponent(Kn))}):ie.push(encodeURIComponent(cn)+"="+encodeURIComponent(Jt))},Ae=0,be=Object.entries(re);Ae<be.length;Ae++){var Qe=be[Ae];we(Qe[0],Qe[1])}return ie.length?"&"+ie.join("&"):""}function Ni(re){var ie={};return re.replace(/^\?/,"").split("&").forEach(function(Ae){if(Ae){var be=Ae.split("="),ut=be[1];ie[decodeURIComponent(be[0])]=decodeURIComponent(ut)}}),ie}function Ls(re){var ie=re.indexOf("?");if(!ie)return"";var we=re.indexOf("#",ie);return re.substring(ie,we>0?we:void 0)}var Vs=function(){function re(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var ie=1;ie<this.blockSize;++ie)this.pad_[ie]=0;this.reset()}return re.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},re.prototype.compress_=function(ie,we){we||(we=0);var Ae=this.W_;if("string"==typeof ie)for(var be=0;be<16;be++)Ae[be]=ie.charCodeAt(we)<<24|ie.charCodeAt(we+1)<<16|ie.charCodeAt(we+2)<<8|ie.charCodeAt(we+3),we+=4;else for(be=0;be<16;be++)Ae[be]=ie[we]<<24|ie[we+1]<<16|ie[we+2]<<8|ie[we+3],we+=4;for(be=16;be<80;be++)Ae[be]=4294967295&((Qe=Ae[be-3]^Ae[be-8]^Ae[be-14]^Ae[be-16])<<1|Qe>>>31);var vr,Zn,ut=this.chain_[0],rn=this.chain_[1],cn=this.chain_[2],Jt=this.chain_[3],Kn=this.chain_[4];for(be=0;be<80;be++){be<40?be<20?(vr=Jt^rn&(cn^Jt),Zn=1518500249):(vr=rn^cn^Jt,Zn=1859775393):be<60?(vr=rn&cn|Jt&(rn|cn),Zn=2400959708):(vr=rn^cn^Jt,Zn=3395469782);var Qe=(ut<<5|ut>>>27)+vr+Kn+Zn+Ae[be]&4294967295;Kn=Jt,Jt=cn,cn=4294967295&(rn<<30|rn>>>2),rn=ut,ut=Qe}this.chain_[0]=this.chain_[0]+ut&4294967295,this.chain_[1]=this.chain_[1]+rn&4294967295,this.chain_[2]=this.chain_[2]+cn&4294967295,this.chain_[3]=this.chain_[3]+Jt&4294967295,this.chain_[4]=this.chain_[4]+Kn&4294967295},re.prototype.update=function(ie,we){if(null!=ie){void 0===we&&(we=ie.length);for(var Ae=we-this.blockSize,be=0,Qe=this.buf_,ut=this.inbuf_;be<we;){if(0===ut)for(;be<=Ae;)this.compress_(ie,be),be+=this.blockSize;if("string"==typeof ie){for(;be<we;)if(Qe[ut]=ie.charCodeAt(be),++be,++ut===this.blockSize){this.compress_(Qe),ut=0;break}}else for(;be<we;)if(Qe[ut]=ie[be],++be,++ut===this.blockSize){this.compress_(Qe),ut=0;break}}this.inbuf_=ut,this.total_+=we}},re.prototype.digest=function(){var ie=[],we=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Ae=this.blockSize-1;Ae>=56;Ae--)this.buf_[Ae]=255&we,we/=256;this.compress_(this.buf_);var be=0;for(Ae=0;Ae<5;Ae++)for(var Qe=24;Qe>=0;Qe-=8)ie[be]=this.chain_[Ae]>>Qe&255,++be;return ie},re}();function Bs(re,ie){var we=new ht(re,ie);return we.subscribe.bind(we)}var ht=function(){function re(ie,we){var Ae=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=we,this.task.then(function(){ie(Ae)}).catch(function(be){Ae.error(be)})}return re.prototype.next=function(ie){this.forEachObserver(function(we){we.next(ie)})},re.prototype.error=function(ie){this.forEachObserver(function(we){we.error(ie)}),this.close(ie)},re.prototype.complete=function(){this.forEachObserver(function(ie){ie.complete()}),this.close()},re.prototype.subscribe=function(ie,we,Ae){var Qe,be=this;if(void 0===ie&&void 0===we&&void 0===Ae)throw new Error("Missing Observer.");void 0===(Qe=function(re,ie){if("object"!=typeof re||null===re)return!1;for(var we=0,Ae=["next","error","complete"];we<Ae.length;we++){var be=Ae[we];if(be in re&&"function"==typeof re[be])return!0}return!1}(ie)?ie:{next:ie,error:we,complete:Ae}).next&&(Qe.next=yr),void 0===Qe.error&&(Qe.error=yr),void 0===Qe.complete&&(Qe.complete=yr);var ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{be.finalError?Qe.error(be.finalError):Qe.complete()}catch(rn){}}),this.observers.push(Qe),ut},re.prototype.unsubscribeOne=function(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},re.prototype.forEachObserver=function(ie){if(!this.finalized)for(var we=0;we<this.observers.length;we++)this.sendOne(we,ie)},re.prototype.sendOne=function(ie,we){var Ae=this;this.task.then(function(){if(void 0!==Ae.observers&&void 0!==Ae.observers[ie])try{we(Ae.observers[ie])}catch(be){"undefined"!=typeof console&&console.error&&console.error(be)}})},re.prototype.close=function(ie){var we=this;this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(function(){we.observers=void 0,we.onNoObservers=void 0}))},re}();function yr(){}var Gt=function(re,ie,we,Ae){var be;if(Ae<ie?be="at least "+ie:Ae>we&&(be=0===we?"none":"no more than "+we),be)throw new Error(re+" failed: Was called with "+Ae+(1===Ae?" argument.":" arguments.")+" Expects "+be+".")};function St(re,ie){return re+" failed: "+ie+" argument "}function tn(re,ie,we,Ae){if((!Ae||we)&&"function"!=typeof we)throw new Error(St(re,ie)+"must be a valid function.")}function qn(re,ie,we,Ae){if((!Ae||we)&&("object"!=typeof we||null===we))throw new Error(St(re,ie)+"must be a valid context object.")}var En=function(re){for(var ie=[],we=0,Ae=0;Ae<re.length;Ae++){var be=re.charCodeAt(Ae);if(be>=55296&&be<=56319){var Qe=be-55296;Ae++,te(Ae<re.length,"Surrogate pair missing trail surrogate."),be=65536+(Qe<<10)+(re.charCodeAt(Ae)-56320)}be<128?ie[we++]=be:be<2048?(ie[we++]=be>>6|192,ie[we++]=63&be|128):be<65536?(ie[we++]=be>>12|224,ie[we++]=be>>6&63|128,ie[we++]=63&be|128):(ie[we++]=be>>18|240,ie[we++]=be>>12&63|128,ie[we++]=be>>6&63|128,ie[we++]=63&be|128)}return ie},Je=function(re){for(var ie=0,we=0;we<re.length;we++){var Ae=re.charCodeAt(we);Ae<128?ie++:Ae<2048?ie+=2:Ae>=55296&&Ae<=56319?(ie+=4,we++):ie+=3}return ie};function In(re){return re&&re._delegate?re._delegate:re}},9083:(rt,Me,H)=>{"use strict";H.r(Me);var O=H(8239),m=H(4486),te=H(4685),me=H(5452),ve=H(4762),ae=H(300),he=H(6034);const De=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ke=new te.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new ae.Yd("@firebase/auth");function Dt(I,...y){Ge.logLevel<=ae.in.ERROR&&Ge.error(`Auth (${me.SDK_VERSION}): ${I}`,...y)}function pt(I,...y){throw Qt(I,...y)}function At(I,...y){return Qt(I,...y)}function Qt(I,...y){if("string"!=typeof I){const E=y[0],S=[...y.slice(1)];return S[0]&&(S[0].appName=I.name),I._errorFactory.create(E,...S)}return Ke.create(I,...y)}function Pe(I,y,...E){if(!I)throw Qt(y,...E)}function Kt(I){const y="INTERNAL ASSERTION FAILED: "+I;throw Dt(y),new Error(y)}function Nt(I,y){I||Kt(y)}const Oe=new Map;function Se(I){Nt(I instanceof Function,"Expected a class definition");let y=Oe.get(I);return y?(Nt(y instanceof I,"Instance stored in cache mismatched with class"),y):(y=new I,Oe.set(I,y),y)}function xe(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function Ee(){return"http:"===Xe()||"https:"===Xe()}function Xe(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class ct{constructor(y,E){this.shortDelay=y,this.longDelay=E,Nt(E>y,"Short delay should be less than long delay!"),this.isMobile=(0,te.uI)()||(0,te.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ee()||(0,te.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function mt(I,y){Nt(I.emulator,"Emulator should always be set here");const{url:E}=I.emulator;return y?`${E}${y.startsWith("/")?y.slice(1):y}`:E}class Tt{static initialize(y,E,S){this.fetchImpl=y,E&&(this.headersImpl=E),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},zn=new ct(3e4,6e4);function Mn(I,y){return I.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:I.tenantId}):y}function kt(I,y,E,S){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*(I,y,E,S,U={}){return kn(I,U,()=>{let q={},ye={};S&&("GET"===y?ye=S:q={body:JSON.stringify(S)});const Be=(0,te.xO)(Object.assign({key:I.config.apiKey},ye)).slice(1),nt=new(Tt.headers());return nt.set("Content-Type","application/json"),nt.set("X-Client-Version",I._getSdkClientVersion()),I.languageCode&&nt.set("X-Firebase-Locale",I.languageCode),Tt.fetch()(la(I,I.config.apiHost,E,Be),Object.assign({method:y,headers:nt,referrerPolicy:"no-referrer"},q))})})).apply(this,arguments)}function kn(I,y,E){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(I,y,E){I._canInitEmulator=!1;const S=Object.assign(Object.assign({},xn),y);try{const U=new Oo(I),q=yield Promise.race([E(),U.promise]);U.clearNetworkTimeout();const ye=yield q.json();if("needConfirmation"in ye)throw Ni(I,"account-exists-with-different-credential",ye);if(q.ok&&!("errorMessage"in ye))return ye;{const nt=(q.ok?ye.errorMessage:ye.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Ni(I,"credential-already-in-use",ye);if("EMAIL_EXISTS"===nt)throw Ni(I,"email-already-in-use",ye);pt(I,S[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(U){if(U instanceof te.ZR)throw U;pt(I,"network-request-failed")}})).apply(this,arguments)}function Wn(I,y,E,S){return Es.apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(I,y,E,S,U={}){const q=yield kt(I,y,E,S,U);return"mfaPendingCredential"in q&&pt(I,"multi-factor-auth-required",{serverResponse:q}),q})).apply(this,arguments)}function la(I,y,E,S){const U=`${y}${E}?${S}`;return I.config.emulator?mt(I.config,U):`${I.config.apiScheme}://${U}`}class Oo{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((E,S)=>{this.timer=setTimeout(()=>S(At(this.auth,"timeout")),zn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ni(I,y,E){const S={appName:I.name};E.email&&(S.email=E.email),E.phoneNumber&&(S.phoneNumber=E.phoneNumber);const U=At(I,y,S);return U.customData._tokenResponse=E,U}function Vs(){return(Vs=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Bs(I,y){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function cr(I,y){return es.apply(this,arguments)}function es(){return(es=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function yr(I){if(I)try{const y=new Date(Number(I));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function st(){return(st=(0,O.Z)(function*(I,y=!1){const E=(0,te.m9)(I),S=yield E.getIdToken(y),U=qn(S);Pe(U&&U.exp&&U.auth_time&&U.iat,E.auth,"internal-error");const q="object"==typeof U.firebase?U.firebase:void 0,ye=null==q?void 0:q.sign_in_provider;return{claims:U,token:S,authTime:yr(tn(U.auth_time)),issuedAtTime:yr(tn(U.iat)),expirationTime:yr(tn(U.exp)),signInProvider:ye||null,signInSecondFactor:(null==q?void 0:q.sign_in_second_factor)||null}})).apply(this,arguments)}function tn(I){return 1e3*Number(I)}function qn(I){const[y,E,S]=I.split(".");if(void 0===y||void 0===E||void 0===S)return Dt("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,te.tV)(E);return U?JSON.parse(U):(Dt("Failed to decode base64 JWT payload"),null)}catch(U){return Dt("Caught error parsing JWT payload as JSON",U),null}}function Je(I,y){return vt.apply(this,arguments)}function vt(){return(vt=(0,O.Z)(function*(I,y,E=!1){if(E)return y;try{return yield y}catch(S){throw S instanceof te.ZR&&$a(S)&&I.auth.currentUser===I&&(yield I.auth.signOut()),S}})).apply(this,arguments)}function $a({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}class ca{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var E;if(y){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const U=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(y=!1){var E=this;if(!this.isRunning)return;const S=this.getInterval(y);this.timerId=setTimeout((0,O.Z)(function*(){yield E.iteration()}),S)}iteration(){var y=this;return(0,O.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E.code&&y.schedule(!0))}y.schedule()})()}}class ir{constructor(y,E){this.createdAt=y,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _n(I){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(I){var y;const E=I.auth,S=yield I.getIdToken(),U=yield Je(I,cr(E,{idToken:S}));Pe(null==U?void 0:U.users.length,E,"internal-error");const q=U.users[0];I._notifyReloadListener(q);const ye=(null===(y=q.providerUserInfo)||void 0===y?void 0:y.length)?ie(q.providerUserInfo):[],Be=re(I.providerData,ye),bt=!!I.isAnonymous&&!(I.email&&q.passwordHash||(null==Be?void 0:Be.length)),xt={uid:q.localId,displayName:q.displayName||null,photoURL:q.photoUrl||null,email:q.email||null,emailVerified:q.emailVerified||!1,phoneNumber:q.phoneNumber||null,tenantId:q.tenantId||null,providerData:Be,metadata:new ir(q.createdAt,q.lastLoginAt),isAnonymous:bt};Object.assign(I,xt)})).apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(I){const y=(0,te.m9)(I);yield _n(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function re(I,y){return[...I.filter(S=>!y.some(U=>U.providerId===S.providerId)),...y]}function ie(I){return I.map(y=>{var{providerId:E}=y,S=(0,ve._T)(y,["providerId"]);return{providerId:E,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}function Ae(){return(Ae=(0,O.Z)(function*(I,y){const E=yield kn(I,{},()=>{const S=(0,te.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:U,apiKey:q}=I.config,ye=la(I,U,"/v1/token",`key=${q}`);return Tt.fetch()(ye,{method:"POST",headers:{"X-Client-Version":I._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:S})});return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class be{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){Pe(y.idToken,"internal-error"),Pe(void 0!==y.idToken,"internal-error"),Pe(void 0!==y.refreshToken,"internal-error");const E="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function(I){const y=qn(I);return Pe(y,"internal-error"),Pe(void 0!==y.exp,"internal-error"),Pe(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,E)}getToken(y,E=!1){var S=this;return(0,O.Z)(function*(){return Pe(!S.accessToken||S.refreshToken,y,"user-token-expired"),E||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(y,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,E){var S=this;return(0,O.Z)(function*(){const{accessToken:U,refreshToken:q,expiresIn:ye}=yield function(I,y){return Ae.apply(this,arguments)}(y,E);S.updateTokensAndExpiration(U,q,Number(ye))})()}updateTokensAndExpiration(y,E,S){this.refreshToken=E||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(y,E){const{refreshToken:S,accessToken:U,expirationTime:q}=E,ye=new be;return S&&(Pe("string"==typeof S,"internal-error",{appName:y}),ye.refreshToken=S),U&&(Pe("string"==typeof U,"internal-error",{appName:y}),ye.accessToken=U),q&&(Pe("number"==typeof q,"internal-error",{appName:y}),ye.expirationTime=q),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new be,this.toJSON())}_performRefresh(){return Kt("not implemented")}}function Qe(I,y){Pe("string"==typeof I||void 0===I,"internal-error",{appName:y})}class ut{constructor(y){var{uid:E,auth:S,stsTokenManager:U}=y,q=(0,ve._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ca(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=S,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=q.displayName||null,this.email=q.email||null,this.phoneNumber=q.phoneNumber||null,this.photoURL=q.photoURL||null,this.isAnonymous=q.isAnonymous||!1,this.metadata=new ir(q.createdAt||void 0,q.lastLoginAt||void 0)}getIdToken(y){var E=this;return(0,O.Z)(function*(){const S=yield Je(E,E.stsTokenManager.getToken(E.auth,y));return Pe(S,E.auth,"internal-error"),E.accessToken!==S&&(E.accessToken=S,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),S})()}getIdTokenResult(y){return function(I){return st.apply(this,arguments)}(this,y)}reload(){return function(I){return In.apply(this,arguments)}(this)}_assign(y){this!==y&&(Pe(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(E=>Object.assign({},E)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new ut(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,E=!1){var S=this;return(0,O.Z)(function*(){let U=!1;y.idToken&&y.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(y),U=!0),E&&(yield _n(S)),yield S.auth._persistUserIfCurrent(S),U&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var y=this;return(0,O.Z)(function*(){const E=yield y.getIdToken();return yield Je(y,function(I,y){return Vs.apply(this,arguments)}(y.auth,{idToken:E})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,E){var S,U,q,ye,Be,nt,ft,bt;const xt=null!==(S=E.displayName)&&void 0!==S?S:void 0,Gr=null!==(U=E.email)&&void 0!==U?U:void 0,Zs=null!==(q=E.phoneNumber)&&void 0!==q?q:void 0,Ic=null!==(ye=E.photoURL)&&void 0!==ye?ye:void 0,Wp=null!==(Be=E.tenantId)&&void 0!==Be?Be:void 0,Nd=null!==(nt=E._redirectEventId)&&void 0!==nt?nt:void 0,qp=null!==(ft=E.createdAt)&&void 0!==ft?ft:void 0,uf=null!==(bt=E.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:Kp,emailVerified:Tc,isAnonymous:_o,providerData:Pd,stsTokenManager:kd}=E;Pe(Kp&&kd,y,"internal-error");const Fd=be.fromJSON(this.name,kd);Pe("string"==typeof Kp,y,"internal-error"),Qe(xt,y.name),Qe(Gr,y.name),Pe("boolean"==typeof Tc,y,"internal-error"),Pe("boolean"==typeof _o,y,"internal-error"),Qe(Zs,y.name),Qe(Ic,y.name),Qe(Wp,y.name),Qe(Nd,y.name),Qe(qp,y.name),Qe(uf,y.name);const df=new ut({uid:Kp,auth:y,email:Gr,emailVerified:Tc,displayName:xt,isAnonymous:_o,photoURL:Ic,phoneNumber:Zs,tenantId:Wp,stsTokenManager:Fd,createdAt:qp,lastLoginAt:uf});return Pd&&Array.isArray(Pd)&&(df.providerData=Pd.map(yo=>Object.assign({},yo))),Nd&&(df._redirectEventId=Nd),df}static _fromIdTokenResponse(y,E,S=!1){return(0,O.Z)(function*(){const U=new be;U.updateFromServerResponse(E);const q=new ut({uid:E.localId,auth:y,stsTokenManager:U,isAnonymous:S});return yield _n(q),q})()}}const cn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.Z)(function*(){return!0})()}_set(E,S){var U=this;return(0,O.Z)(function*(){U.storage[E]=S})()}_get(E){var S=this;return(0,O.Z)(function*(){const U=S.storage[E];return void 0===U?null:U})()}_remove(E){var S=this;return(0,O.Z)(function*(){delete S.storage[E]})()}_addListener(E,S){}_removeListener(E,S){}}return I.type="NONE",I})();function Jt(I,y,E){return`firebase:${I}:${y}:${E}`}class Kn{constructor(y,E,S){this.persistence=y,this.auth=E,this.userKey=S;const{config:U,name:q}=this.auth;this.fullUserKey=Jt(this.userKey,U.apiKey,q),this.fullPersistenceKey=Jt("persistence",U.apiKey,q),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,O.Z)(function*(){const E=yield y.persistence._get(y.fullUserKey);return E?ut._fromJSON(y.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var E=this;return(0,O.Z)(function*(){if(E.persistence===y)return;const S=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=y,S?E.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,E,S="authUser"){return(0,O.Z)(function*(){if(!E.length)return new Kn(Se(cn),y,S);const U=(yield Promise.all(E.map(function(){var ft=(0,O.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return ft.apply(this,arguments)}}()))).filter(ft=>ft);let q=U[0]||Se(cn);const ye=Jt(S,y.config.apiKey,y.name);let Be=null;for(const ft of E)try{const bt=yield ft._get(ye);if(bt){const xt=ut._fromJSON(y,bt);ft!==q&&(Be=xt),q=ft;break}}catch(bt){}const nt=U.filter(ft=>ft._shouldAllowMigration);return q._shouldAllowMigration&&nt.length?(q=nt[0],Be&&(yield q._set(ye,Be.toJSON())),yield Promise.all(E.map(function(){var ft=(0,O.Z)(function*(bt){if(bt!==q)try{yield bt._remove(ye)}catch(xt){}});return function(bt){return ft.apply(this,arguments)}}())),new Kn(q,y,S)):new Kn(q,y,S)})()}}function vr(I){const y=I.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Qc(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Zn(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(Hl(y))return"Blackberry";if(za(y))return"Webos";if(Vt(y))return"Safari";if((y.includes("chrome/")||Pi(y))&&!y.includes("edge/"))return"Chrome";if(ki(y))return"Android";{const S=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==S?void 0:S.length))return S[1]}return"Other"}function Zn(I=(0,te.z$)()){return/firefox\//i.test(I)}function Vt(I=(0,te.z$)()){const y=I.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Pi(I=(0,te.z$)()){return/crios\//i.test(I)}function Qc(I=(0,te.z$)()){return/iemobile/i.test(I)}function ki(I=(0,te.z$)()){return/android/i.test(I)}function Hl(I=(0,te.z$)()){return/blackberry/i.test(I)}function za(I=(0,te.z$)()){return/webos/i.test(I)}function jn(I=(0,te.z$)()){return/iphone|ipad|ipod/i.test(I)}function ua(I=(0,te.z$)()){return jn(I)||ki(I)||za(I)||Hl(I)||/windows phone/i.test(I)||Qc(I)}function it(I,y=[]){let E;switch(I){case"Browser":E=vr((0,te.z$)());break;case"Worker":E=`${vr((0,te.z$)())}-${I}`;break;default:E=I}const S=y.length?y.join(","):"FirebaseCore-web";return`${E}/JsCore/${me.SDK_VERSION}/${S}`}class Xt{constructor(y,E){this.app=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qr(this),this.idTokenSubscription=new qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(y,E){var S=this;return E&&(this._popupRedirectResolver=Se(E)),this._initializationPromise=this.queue((0,O.Z)(function*(){var U;S._deleted||(S.persistenceManager=yield Kn.create(S,y),!S._deleted&&((null===(U=S._popupRedirectResolver)||void 0===U?void 0:U._shouldInitProactively)&&(yield S._popupRedirectResolver._initialize(S)),yield S.initializeCurrentUser(E),!S._deleted&&(S._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,O.Z)(function*(){if(y._deleted)return;const E=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||E){if(y.currentUser&&E&&y.currentUser.uid===E.uid)return y._currentUser._assign(E),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(E)}})()}initializeCurrentUser(y){var E=this;return(0,O.Z)(function*(){var S;let U=yield E.assertedPersistence.getCurrentUser();if(y&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const q=null===(S=E.redirectUser)||void 0===S?void 0:S._redirectEventId,ye=null==U?void 0:U._redirectEventId,Be=yield E.tryRedirectSignIn(y);(!q||q===ye)&&(null==Be?void 0:Be.user)&&(U=Be.user)}return U?U._redirectEventId?(Pe(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===U._redirectEventId?E.directlySetCurrentUser(U):E.reloadAndSetCurrentUserOrClear(U)):E.reloadAndSetCurrentUserOrClear(U):E.directlySetCurrentUser(null)})()}tryRedirectSignIn(y){var E=this;return(0,O.Z)(function*(){let S=null;try{S=yield E._popupRedirectResolver._completeRedirectFn(E,y,!0)}catch(U){yield E._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(y){var E=this;return(0,O.Z)(function*(){try{yield _n(y)}catch(S){if("auth/network-request-failed"!==S.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var y=this;return(0,O.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var E=this;return(0,O.Z)(function*(){const S=y?(0,te.m9)(y):null;return S&&Pe(S.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(S&&S._clone(E))})()}_updateCurrentUser(y){var E=this;return(0,O.Z)(function*(){if(!E._deleted)return y&&Pe(E.tenantId===y.tenantId,E,"tenant-id-mismatch"),E.queue((0,O.Z)(function*(){yield E.directlySetCurrentUser(y),E.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,O.Z)(function*(){return(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null)})()}setPersistence(y){var E=this;return this.queue((0,O.Z)(function*(){yield E.assertedPersistence.setPersistence(Se(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new te.LL("auth","Firebase",y())}onAuthStateChanged(y,E,S){return this.registerStateListener(this.authStateSubscription,y,E,S)}onIdTokenChanged(y,E,S){return this.registerStateListener(this.idTokenSubscription,y,E,S)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,E){var S=this;return(0,O.Z)(function*(){const U=yield S.getOrInitRedirectPersistenceManager(E);return null===y?U.removeCurrentUser():U.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var E=this;return(0,O.Z)(function*(){if(!E.redirectPersistenceManager){const S=y&&Se(y)||E._popupRedirectResolver;Pe(S,E,"argument-error"),E.redirectPersistenceManager=yield Kn.create(E,[Se(S._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(y){var E=this;return(0,O.Z)(function*(){var S,U;return E._isInitialized&&(yield E.queue((0,O.Z)(function*(){}))),(null===(S=E._currentUser)||void 0===S?void 0:S._redirectEventId)===y?E._currentUser:(null===(U=E.redirectUser)||void 0===U?void 0:U._redirectEventId)===y?E.redirectUser:null})()}_persistUserIfCurrent(y){var E=this;return(0,O.Z)(function*(){if(y===E.currentUser)return E.queue((0,O.Z)(function*(){return E.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(E=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,E,S,U){if(this._deleted)return()=>{};const q="function"==typeof E?E:E.next.bind(E),ye=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(ye,this,"internal-error"),ye.then(()=>q(this.currentUser)),"function"==typeof E?y.addObserver(E,S,U):y.addObserver(E)}directlySetCurrentUser(y){var E=this;return(0,O.Z)(function*(){E.currentUser&&E.currentUser!==y&&(E._currentUser._stopProactiveRefresh(),y&&E.isProactiveRefreshEnabled&&y._startProactiveRefresh()),E.currentUser=y,y?yield E.assertedPersistence.setCurrentUser(y):yield E.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=it(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ft(I){return(0,te.m9)(I)}class qr{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,te.ne)(E=>this.observer=E)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ur(I){const y=I.indexOf(":");return y<0?"":I.substr(0,y+1)}function Yn(I){if(!I)return null;const y=Number(I);return isNaN(y)?null:y}class Gi{constructor(y,E){this.providerId=y,this.signInMethod=E}toJSON(){return Kt("not implemented")}_getIdTokenResponse(y){return Kt("not implemented")}_linkToIdToken(y,E){return Kt("not implemented")}_getReauthenticationResolver(y){return Kt("not implemented")}}function jt(I,y){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:resetPassword",Mn(I,y))})).apply(this,arguments)}function sr(I,y){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function bn(I,y){return wr.apply(this,arguments)}function wr(){return(wr=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:update",Mn(I,y))})).apply(this,arguments)}function dr(){return(dr=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signInWithPassword",Mn(I,y))})).apply(this,arguments)}function hr(I,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:sendOobCode",Mn(I,y))})).apply(this,arguments)}function Fi(I,y){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,O.Z)(function*(I,y){return hr(I,y)})).apply(this,arguments)}function $i(I,y){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(I,y){return hr(I,y)})).apply(this,arguments)}function Po(I,y){return zi.apply(this,arguments)}function zi(){return(zi=(0,O.Z)(function*(I,y){return hr(I,y)})).apply(this,arguments)}function ri(I,y){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(I,y){return hr(I,y)})).apply(this,arguments)}function Tn(){return(Tn=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signInWithEmailLink",Mn(I,y))})).apply(this,arguments)}function da(){return(da=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signInWithEmailLink",Mn(I,y))})).apply(this,arguments)}class ts extends Gi{constructor(y,E,S,U=null){super("password",S),this._email=y,this._password=E,this._tenantId=U}static _fromEmailAndPassword(y,E){return new ts(y,E,"password")}static _fromEmailAndCode(y,E,S=null){return new ts(y,E,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y;if((null==E?void 0:E.email)&&(null==E?void 0:E.password)){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(y){var E=this;return(0,O.Z)(function*(){switch(E.signInMethod){case"password":return function(I,y){return dr.apply(this,arguments)}(y,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(I,y){return Tn.apply(this,arguments)}(y,{email:E._email,oobCode:E._password});default:pt(y,"internal-error")}})()}_linkToIdToken(y,E){var S=this;return(0,O.Z)(function*(){switch(S.signInMethod){case"password":return sr(y,{idToken:E,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function(I,y){return da.apply(this,arguments)}(y,{idToken:E,email:S._email,oobCode:S._password});default:pt(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function ii(I,y){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signInWithIdp",Mn(I,y))})).apply(this,arguments)}class ns extends Gi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const E=new ns(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(E.idToken=y.idToken),y.accessToken&&(E.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(E.nonce=y.nonce),y.pendingToken&&(E.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(E.accessToken=y.oauthToken,E.secret=y.oauthTokenSecret):pt("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y,{providerId:S,signInMethod:U}=E,q=(0,ve._T)(E,["providerId","signInMethod"]);if(!S||!U)return null;const ye=new ns(S,U);return Object.assign(ye,q),ye}_getIdTokenResponse(y){return ii(y,this.buildRequest())}_linkToIdToken(y,E){const S=this.buildRequest();return S.idToken=E,ii(y,S)}_getReauthenticationResolver(y){const E=this.buildRequest();return E.autoCreate=!1,ii(y,E)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),y.postBody=(0,te.xO)(E)}return y}}function ha(I,y){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:sendVerificationCode",Mn(I,y))})).apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signInWithPhoneNumber",Mn(I,y))})).apply(this,arguments)}function Wl(){return(Wl=(0,O.Z)(function*(I,y){const E=yield Wn(I,"POST","/v1/accounts:signInWithPhoneNumber",Mn(I,y));if(E.temporaryProof)throw Ni(I,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const ql={USER_NOT_FOUND:"user-not-found"};function Kl(){return(Kl=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signInWithPhoneNumber",Mn(I,Object.assign(Object.assign({},y),{operation:"REAUTH"})),ql)})).apply(this,arguments)}class ko extends Gi{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,E){return new ko({verificationId:y,verificationCode:E})}static _fromTokenResponse(y,E){return new ko({phoneNumber:y,temporaryProof:E})}_getIdTokenResponse(y){return function(I,y){return fa.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,E){return function(I,y){return Wl.apply(this,arguments)}(y,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function(I,y){return Kl.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:E,verificationId:S,verificationCode:U}=this.params;return y&&E?{temporaryProof:y,phoneNumber:E}:{sessionInfo:S,code:U}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:E,verificationCode:S,phoneNumber:U,temporaryProof:q}=y;return S||E||U||q?new ko({verificationId:E,verificationCode:S,phoneNumber:U,temporaryProof:q}):null}}class Fo{constructor(y){var E,S,U,q,ye,Be;const nt=(0,te.zd)((0,te.pd)(y)),ft=null!==(E=nt.apiKey)&&void 0!==E?E:null,bt=null!==(S=nt.oobCode)&&void 0!==S?S:null,xt=function(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=nt.mode)&&void 0!==U?U:null);Pe(ft&&bt&&xt,"argument-error"),this.apiKey=ft,this.operation=xt,this.code=bt,this.continueUrl=null!==(q=nt.continueUrl)&&void 0!==q?q:null,this.languageCode=null!==(ye=nt.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Be=nt.tenantId)&&void 0!==Be?Be:null}static parseLink(y){const E=function(I){const y=(0,te.zd)((0,te.pd)(I)).link,E=y?(0,te.zd)((0,te.pd)(y)).deep_link_id:null,S=(0,te.zd)((0,te.pd)(I)).deep_link_id;return(S?(0,te.zd)((0,te.pd)(S)).link:null)||S||E||y||I}(y);try{return new Fo(E)}catch(S){return null}}}let qa=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(E,S){return ts._fromEmailAndPassword(E,S)}static credentialWithLink(E,S){const U=Fo.parseLink(S);return Pe(U,"argument-error"),ts._fromEmailAndCode(E,U.code,U.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class rs{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class bs extends rs{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class ws extends bs{static credentialFromJSON(y){const E="string"==typeof y?JSON.parse(y):y;return Pe("providerId"in E&&"signInMethod"in E,"argument-error"),ns._fromParams(E)}credential(y){return this._credential(y)}_credential(y){return Pe(y.idToken||y.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return ws.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return ws.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:S,oauthTokenSecret:U,pendingToken:q,nonce:ye,providerId:Be}=y;if(!S&&!U&&!E&&!q||!Be)return null;try{return new ws(Be)._credential({idToken:E,accessToken:S,rawNonce:ye,pendingToken:q})}catch(nt){return null}}}let Zl=(()=>{class I extends bs{constructor(){super("facebook.com")}static credential(E){return ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return I.credential(E.oauthAccessToken)}catch(S){return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),ro=(()=>{class I extends bs{constructor(){super("google.com"),this.addScope("profile")}static credential(E,S){return ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:S})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:S,oauthAccessToken:U}=E;if(!S&&!U)return null;try{return I.credential(S,U)}catch(q){return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Ka=(()=>{class I extends bs{constructor(){super("github.com")}static credential(E){return ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return I.credential(E.oauthAccessToken)}catch(S){return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class si extends Gi{constructor(y,E){super(y,y),this.pendingToken=E}_getIdTokenResponse(y){return ii(y,this.buildRequest())}_linkToIdToken(y,E){const S=this.buildRequest();return S.idToken=E,ii(y,S)}_getReauthenticationResolver(y){const E=this.buildRequest();return E.autoCreate=!1,ii(y,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y,{providerId:S,signInMethod:U,pendingToken:q}=E;return S&&U&&q&&S===U?new si(S,q):null}static _create(y,E){return new si(y,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Yl=(()=>{class I extends bs{constructor(){super("twitter.com")}static credential(E,S){return ns._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:S})}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:S,oauthTokenSecret:U}=E;if(!S||!U)return null;try{return I.credential(S,U)}catch(q){return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function td(I,y){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signUp",Mn(I,y))})).apply(this,arguments)}class Kr{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,E,S,U=!1){return(0,O.Z)(function*(){const q=yield ut._fromIdTokenResponse(y,S,U),ye=io(S);return new Kr({user:q,providerId:ye,_tokenResponse:S,operationType:E})})()}static _forOperation(y,E,S){return(0,O.Z)(function*(){yield y._updateTokensIfNecessary(S,!0);const U=io(S);return new Kr({user:y,providerId:U,_tokenResponse:S,operationType:E})})()}}function io(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function Jl(){return(Jl=(0,O.Z)(function*(I){var y;const E=Ft(I);if(yield E._initializationPromise,null===(y=E.currentUser)||void 0===y?void 0:y.isAnonymous)return new Kr({user:E.currentUser,providerId:null,operationType:"signIn"});const S=yield td(E,{returnSecureToken:!0}),U=yield Kr._fromIdTokenResponse(E,"signIn",S,!0);return yield E._updateCurrentUser(U.user),U})).apply(this,arguments)}class Ir extends te.ZR{constructor(y,E,S,U){var q;super(E.code,E.message),this.operationType=S,this.user=U,this.name="FirebaseError",Object.setPrototypeOf(this,Ir.prototype),this.appName=y.name,this.code=E.code,this.tenantId=null!==(q=y.tenantId)&&void 0!==q?q:void 0,this.serverResponse=E.customData.serverResponse}static _fromErrorAndOperation(y,E,S,U){return new Ir(y,E,S,U)}}function so(I,y,E,S){return("reauthenticate"===y?E._getReauthenticationResolver(I):E._getIdTokenResponse(I)).catch(q=>{throw"auth/multi-factor-auth-required"===q.code?Ir._fromErrorAndOperation(I,q,y,S):q})}function Lo(I){return new Set(I.map(({providerId:y})=>y).filter(y=>!!y))}function oi(){return(oi=(0,O.Z)(function*(I,y){const E=(0,te.m9)(I);yield k(!0,E,y);const{providerUserInfo:S}=yield Bs(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[y]}),U=Lo(S||[]);return E.providerData=E.providerData.filter(q=>U.has(q.providerId)),U.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E})).apply(this,arguments)}function oo(I,y){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(I,y,E=!1){const S=yield Je(I,y._linkToIdToken(I.auth,yield I.getIdToken()),E);return Kr._forOperation(I,"link",S)})).apply(this,arguments)}function k(I,y,E){return G.apply(this,arguments)}function G(){return(G=(0,O.Z)(function*(I,y,E){yield _n(y);const U=!1===I?"provider-already-linked":"no-such-provider";Pe(Lo(y.providerData).has(E)===I,y.auth,U)})).apply(this,arguments)}function L(I,y){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(I,y,E=!1){const{auth:S}=I,U="reauthenticate";try{const q=yield Je(I,so(S,U,y,I),E);Pe(q.idToken,S,"internal-error");const ye=qn(q.idToken);Pe(ye,S,"internal-error");const{sub:Be}=ye;return Pe(I.uid===Be,S,"user-mismatch"),Kr._forOperation(I,U,q)}catch(q){throw"auth/user-not-found"===(null==q?void 0:q.code)&&pt(S,"user-mismatch"),q}})).apply(this,arguments)}function le(I,y){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(I,y,E=!1){const S="signIn",U=yield so(I,S,y),q=yield Kr._fromIdTokenResponse(I,S,U);return E||(yield I._updateCurrentUser(q.user)),q})).apply(this,arguments)}function ze(I,y){return dt.apply(this,arguments)}function dt(){return(dt=(0,O.Z)(function*(I,y){return le(Ft(I),y)})).apply(this,arguments)}function Ht(I,y){return yn.apply(this,arguments)}function yn(){return(yn=(0,O.Z)(function*(I,y){const E=(0,te.m9)(I);return yield k(!1,E,y.providerId),oo(E,y)})).apply(this,arguments)}function wn(I,y){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(I,y){return L((0,te.m9)(I),y)})).apply(this,arguments)}function dn(I,y){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(I,y){return Wn(I,"POST","/v1/accounts:signInWithCustomToken",Mn(I,y))})).apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(I,y){const E=Ft(I),S=yield dn(E,{token:y,returnSecureToken:!0}),U=yield Kr._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(U.user),U})).apply(this,arguments)}class Hn{constructor(y,E){this.factorId=y,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(y,E){return"phoneInfo"in E?Wi._fromServerResponse(y,E):pt(y,"internal-error")}}class Wi extends Hn{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,E){return new Wi(E)}}function Ei(I,y,E){var S;Pe((null===(S=E.url)||void 0===S?void 0:S.length)>0,I,"invalid-continue-uri"),Pe(void 0===E.dynamicLinkDomain||E.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),y.continueUrl=E.url,y.dynamicLinkDomain=E.dynamicLinkDomain,y.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(Pe(E.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),y.iosBundleId=E.iOS.bundleId),E.android&&(Pe(E.android.packageName.length>0,I,"missing-android-pkg-name"),y.androidInstallApp=E.android.installApp,y.androidMinimumVersionCode=E.android.minimumVersion,y.androidPackageName=E.android.packageName)}function Bo(){return(Bo=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I),U={requestType:"PASSWORD_RESET",email:y};E&&Ei(S,U,E),yield $i(S,U)})).apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(I,y,E){yield jt((0,te.m9)(I),{oobCode:y,newPassword:E})})).apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(I,y){yield bn((0,te.m9)(I),{oobCode:y})})).apply(this,arguments)}function Xl(I,y){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(I,y){const E=(0,te.m9)(I),S=yield jt(E,{oobCode:y}),U=S.requestType;switch(Pe(U,E,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pe(S.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pe(S.mfaInfo,E,"internal-error");default:Pe(S.email,E,"internal-error")}let q=null;return S.mfaInfo&&(q=Hn._fromServerResponse(Ft(E),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:q},operation:U}})).apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(I,y){const{data:E}=yield Xl((0,te.m9)(I),y);return E.email})).apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(I,y,E){const S=Ft(I),U=yield td(S,{returnSecureToken:!0,email:y,password:E}),q=yield Kr._fromIdTokenResponse(S,"signIn",U);return yield S._updateCurrentUser(q.user),q})).apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I),U={requestType:"EMAIL_SIGNIN",email:y};Pe(E.handleCodeInApp,S,"argument-error"),E&&Ei(S,U,E),yield Po(S,U)})).apply(this,arguments)}function Vh(){return(Vh=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I),U=qa.credentialWithLink(y,E||xe());return Pe(U._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),ze(S,U)})).apply(this,arguments)}function Am(I,y){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:createAuthUri",Mn(I,y))})).apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(I,y){const S={identifier:y,continueUri:Ee()?xe():"http://localhost"},{signinMethods:U}=yield Am((0,te.m9)(I),S);return U||[]})).apply(this,arguments)}function nc(){return(nc=(0,O.Z)(function*(I,y){const E=(0,te.m9)(I),U={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};y&&Ei(E.auth,U,y);const{email:q}=yield Fi(E.auth,U);q!==I.email&&(yield I.reload())})).apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I),q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:y};E&&Ei(S.auth,q,E);const{email:ye}=yield ri(S.auth,q);ye!==I.email&&(yield I.reload())})).apply(this,arguments)}function id(I,y){return sd.apply(this,arguments)}function sd(){return(sd=(0,O.Z)(function*(I,y){return kt(I,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(I,{displayName:y,photoURL:E}){if(void 0===y&&void 0===E)return;const S=(0,te.m9)(I),q={idToken:yield S.getIdToken(),displayName:y,photoUrl:E,returnSecureToken:!0},ye=yield Je(S,id(S.auth,q));S.displayName=ye.displayName||null,S.photoURL=ye.photoUrl||null;const Be=S.providerData.find(({providerId:nt})=>"password"===nt);Be&&(Be.displayName=S.displayName,Be.photoURL=S.photoURL),yield S._updateTokensIfNecessary(ye)})).apply(this,arguments)}function ad(I,y,E){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(I,y,E){const{auth:S}=I,q={idToken:yield I.getIdToken(),returnSecureToken:!0};y&&(q.email=y),E&&(q.password=E);const ye=yield Je(I,sr(S,q));yield I._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class uo{constructor(y,E,S={}){this.isNewUser=y,this.providerId=E,this.profile=S}}class ic extends uo{constructor(y,E,S,U){super(y,E,S),this.username=U}}class Xa extends uo{constructor(y,E){super(y,"facebook.com",E)}}class Bh extends ic{constructor(y,E){super(y,"github.com",E,"string"==typeof(null==E?void 0:E.login)?null==E?void 0:E.login:null)}}class ru extends uo{constructor(y,E){super(y,"google.com",E)}}class ld extends ic{constructor(y,E,S){super(y,"twitter.com",E,S)}}function el(I){const{user:y,_tokenResponse:E}=I;return y.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function(I){var y,E;if(!I)return null;const{providerId:S}=I,U=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},q=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!S&&(null==I?void 0:I.idToken)){const ye=null===(E=null===(y=qn(I.idToken))||void 0===y?void 0:y.firebase)||void 0===E?void 0:E.sign_in_provider;if(ye)return new uo(q,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!S)return null;switch(S){case"facebook.com":return new Xa(q,U);case"github.com":return new Bh(q,U);case"google.com":return new ru(q,U);case"twitter.com":return new ld(q,U,I.screenName||null);case"custom":case"anonymous":return new uo(q,null);default:return new uo(q,S,U)}}(E)}class ma{constructor(y,E){this.type=y,this.credential=E}static _fromIdtoken(y){return new ma("enroll",y)}static _fromMfaPendingCredential(y){return new ma("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var E,S;if(null==y?void 0:y.multiFactorSession){if(null===(E=y.multiFactorSession)||void 0===E?void 0:E.pendingCredential)return ma._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(S=y.multiFactorSession)||void 0===S?void 0:S.idToken)return ma._fromIdtoken(y.multiFactorSession.idToken)}return null}}class jh{constructor(y,E,S){this.session=y,this.hints=E,this.signInResolver=S}static _fromError(y,E){const S=Ft(y),U=(E.serverResponse.mfaInfo||[]).map(ye=>Hn._fromServerResponse(S,ye));Pe(E.serverResponse.mfaPendingCredential,S,"internal-error");const q=ma._fromMfaPendingCredential(E.serverResponse.mfaPendingCredential);return new jh(q,U,function(){var ye=(0,O.Z)(function*(Be){const nt=yield Be._process(S,q);delete E.serverResponse.mfaInfo,delete E.serverResponse.mfaPendingCredential;const ft=Object.assign(Object.assign({},E.serverResponse),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(E.operationType){case"signIn":const bt=yield Kr._fromIdTokenResponse(S,E.operationType,ft);return yield S._updateCurrentUser(bt.user),bt;case"reauthenticate":return Pe(E.user,S,"internal-error"),Kr._forOperation(E.user,E.operationType,ft);default:pt(S,"internal-error")}});return function(Be){return ye.apply(this,arguments)}}())}resolveSignIn(y){var E=this;return(0,O.Z)(function*(){return E.signInResolver(y)})()}}function iu(I,y){return kt(I,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:I.tenantId},y))}class Ho{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(S=>Hn._fromServerResponse(y.auth,S)))})}static _fromUser(y){return new Ho(y)}getSession(){var y=this;return(0,O.Z)(function*(){return ma._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,E){var S=this;return(0,O.Z)(function*(){const U=y,q=yield S.getSession(),ye=yield Je(S.user,U._process(S.user.auth,q,E));return yield S.user._updateTokensIfNecessary(ye),S.user.reload()})()}unenroll(y){var E=this;return(0,O.Z)(function*(){const S="string"==typeof y?y:y.uid,U=yield E.user.getIdToken(),q=yield Je(E.user,function(I,y){return kt(I,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:I.tenantId},y))}(E.user.auth,{idToken:U,mfaEnrollmentId:S}));E.enrolledFactors=E.enrolledFactors.filter(({uid:ye})=>ye!==S),yield E.user._updateTokensIfNecessary(q);try{yield E.user.reload()}catch(ye){if("auth/user-token-expired"!==ye.code)throw ye}})()}}const zs=new WeakMap,os="__sak";class Go{constructor(y,E){this.storage=y,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(os,"1"),this.storage.removeItem(os),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,E){return this.storage.setItem(y,JSON.stringify(E)),Promise.resolve()}_get(y){const E=this.storage.getItem(y);return Promise.resolve(E?JSON.parse(E):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}}const rl=(()=>{class I extends Go{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const I=(0,te.z$)();return Vt(I)||jn(I)}()&&function(){try{return!(!window||window===window.top)}catch(I){return!1}}(),this.fallbackToPolling=ua(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(E){for(const S of Object.keys(this.listeners)){const U=this.storage.getItem(S),q=this.localCache[S];U!==q&&E(S,q,U)}}onStorageEvent(E,S=!1){if(!E.key)return void this.forAllChangedKeys((Be,nt,ft)=>{this.notifyListeners(Be,ft)});const U=E.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Be=this.storage.getItem(U);if(E.newValue!==Be)null!==E.newValue?this.storage.setItem(U,E.newValue):this.storage.removeItem(U);else if(this.localCache[U]===E.newValue&&!S)return}const q=()=>{const Be=this.storage.getItem(U);!S&&this.localCache[U]===Be||this.notifyListeners(U,Be)},ye=this.storage.getItem(U);(0,te.w1)()&&10===document.documentMode&&ye!==E.newValue&&E.newValue!==E.oldValue?setTimeout(q,10):q()}notifyListeners(E,S){this.localCache[E]=S;const U=this.listeners[E];if(U)for(const q of Array.from(U))q(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,S,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:S,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(S)}_removeListener(E,S){this.listeners[E]&&(this.listeners[E].delete(S),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,S){var U=()=>super._set,q=this;return(0,O.Z)(function*(){yield U().call(q,E,S),q.localCache[E]=JSON.stringify(S)})()}_get(E){var S=()=>super._get,U=this;return(0,O.Z)(function*(){const q=yield S().call(U,E);return U.localCache[E]=JSON.stringify(q),q})()}_remove(E){var S=()=>super._remove,U=this;return(0,O.Z)(function*(){yield S().call(U,E),delete U.localCache[E]})()}}return I.type="LOCAL",I})(),ya=(()=>{class I extends Go{constructor(){super(window.sessionStorage,"SESSION")}_addListener(E,S){}_removeListener(E,S){}}return I.type="SESSION",I})();let sl=(()=>{class I{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const S=this.receivers.find(q=>q.isListeningto(E));if(S)return S;const U=new I(E);return this.receivers.push(U),U}isListeningto(E){return this.eventTarget===E}handleEvent(E){var S=this;return(0,O.Z)(function*(){const U=E,{eventId:q,eventType:ye,data:Be}=U.data,nt=S.handlersMap[ye];if(!(null==nt?void 0:nt.size))return;U.ports[0].postMessage({status:"ack",eventId:q,eventType:ye});const ft=Array.from(nt).map(function(){var xt=(0,O.Z)(function*(Gr){return Gr(U.origin,Be)});return function(Gr){return xt.apply(this,arguments)}}()),bt=yield function(I){return Promise.all(I.map(function(){var y=(0,O.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(S){return{fulfilled:!1,reason:S}}});return function(E){return y.apply(this,arguments)}}()))}(ft);U.ports[0].postMessage({status:"done",eventId:q,eventType:ye,response:bt})})()}_subscribe(E,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(S)}_unsubscribe(E,S){this.handlersMap[E]&&S&&this.handlersMap[E].delete(S),(!S||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function ol(I="",y=10){let E="";for(let S=0;S<y;S++)E+=Math.floor(10*Math.random());return I+E}class su{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,E,S=50){var U=this;return(0,O.Z)(function*(){const q="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!q)throw new Error("connection_unavailable");let ye,Be;return new Promise((nt,ft)=>{const bt=ol("",20);q.port1.start();const xt=setTimeout(()=>{ft(new Error("unsupported_event"))},S);Be={messageChannel:q,onMessage(Gr){const Zs=Gr;if(Zs.data.eventId===bt)switch(Zs.data.status){case"ack":clearTimeout(xt),ye=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),nt(Zs.data.response);break;default:clearTimeout(xt),clearTimeout(ye),ft(new Error("invalid_response"))}}},U.handlers.add(Be),q.port1.addEventListener("message",Be.onMessage),U.target.postMessage({eventType:y,eventId:bt,data:E},[q.port2])}).finally(()=>{Be&&U.removeMessageHandler(Be)})})()}}function fr(){return window}function ud(){return void 0!==fr().WorkerGlobalScope&&"function"==typeof fr().importScripts}function dd(){return(dd=(0,O.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(I){return null}})).apply(this,arguments)}const ou="firebaseLocalStorageDb",bi="firebaseLocalStorage",hd="fbase_key";class fn{constructor(y){this.request=y}toPromise(){return new Promise((y,E)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function wi(I,y){return I.transaction([bi],y?"readwrite":"readonly").objectStore(bi)}function ho(){const I=indexedDB.open(ou,1);return new Promise((y,E)=>{I.addEventListener("error",()=>{E(I.error)}),I.addEventListener("upgradeneeded",()=>{const S=I.result;try{S.createObjectStore(bi,{keyPath:hd})}catch(U){E(U)}}),I.addEventListener("success",(0,O.Z)(function*(){const S=I.result;S.objectStoreNames.contains(bi)?y(S):(S.close(),yield function(){const I=indexedDB.deleteDatabase(ou);return new fn(I).toPromise()}(),y(yield ho()))}))})}function x(I,y,E){return M.apply(this,arguments)}function M(){return(M=(0,O.Z)(function*(I,y,E){const S=wi(I,!0).put({[hd]:y,value:E});return new fn(S).toPromise()})).apply(this,arguments)}function P(){return(P=(0,O.Z)(function*(I,y){const E=wi(I,!1).get(y),S=yield new fn(E).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function V(I,y){const E=wi(I,!0).delete(y);return new fn(E).toPromise()}const Ue=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,O.Z)(function*(){return E.db||(E.db=yield ho()),E.db})()}_withRetries(E){var S=this;return(0,O.Z)(function*(){let U=0;for(;;)try{const q=yield S._openDb();return yield E(q)}catch(q){if(U++>3)throw q;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,O.Z)(function*(){return ud()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,O.Z)(function*(){E.receiver=sl._getInstance(ud()?self:null),E.receiver._subscribe("keyChanged",function(){var S=(0,O.Z)(function*(U,q){return{keyProcessed:(yield E._poll()).includes(q.key)}});return function(U,q){return S.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var S=(0,O.Z)(function*(U,q){return["keyChanged"]});return function(U,q){return S.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,O.Z)(function*(){var S,U;if(E.activeServiceWorker=yield function(){return dd.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new su(E.activeServiceWorker);const q=yield E.sender._send("ping",{},800);!q||(null===(S=q[0])||void 0===S?void 0:S.fulfilled)&&(null===(U=q[0])||void 0===U?void 0:U.value.includes("keyChanged"))&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var S=this;return(0,O.Z)(function*(){if(S.sender&&S.activeServiceWorker&&function(){var I;return(null===(I=null==navigator?void 0:navigator.serviceWorker)||void 0===I?void 0:I.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:E},S.serviceWorkerReceiverAvailable?800:50)}catch(U){}})()}_isAvailable(){return(0,O.Z)(function*(){try{if(!indexedDB)return!1;const E=yield ho();return yield x(E,os,"1"),yield V(E,os),!0}catch(E){}return!1})()}_withPendingWrite(E){var S=this;return(0,O.Z)(function*(){S.pendingWrites++;try{yield E()}finally{S.pendingWrites--}})()}_set(E,S){var U=this;return(0,O.Z)(function*(){return U._withPendingWrite((0,O.Z)(function*(){return yield U._withRetries(q=>x(q,E,S)),U.localCache[E]=S,U.notifyServiceWorker(E)}))})()}_get(E){var S=this;return(0,O.Z)(function*(){const U=yield S._withRetries(q=>function(I,y){return P.apply(this,arguments)}(q,E));return S.localCache[E]=U,U})()}_remove(E){var S=this;return(0,O.Z)(function*(){return S._withPendingWrite((0,O.Z)(function*(){return yield S._withRetries(U=>V(U,E)),delete S.localCache[E],S.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,O.Z)(function*(){const S=yield E._withRetries(ye=>{const Be=wi(ye,!1).getAll();return new fn(Be).toPromise()});if(!S)return[];if(0!==E.pendingWrites)return[];const U=[],q=new Set;for(const{fbase_key:ye,value:Be}of S)q.add(ye),JSON.stringify(E.localCache[ye])!==JSON.stringify(Be)&&(E.notifyListeners(ye,Be),U.push(ye));for(const ye of Object.keys(E.localCache))E.localCache[ye]&&!q.has(ye)&&(E.notifyListeners(ye,null),U.push(ye));return U})()}notifyListeners(E,S){this.localCache[E]=S;const U=this.listeners[E];if(U)for(const q of Array.from(U))q(S)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,O.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(S)}_removeListener(E,S){this.listeners[E]&&(this.listeners[E].delete(S),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})();function at(I,y){return kt(I,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:I.tenantId},y))}function An(){return(An=(0,O.Z)(function*(I){return(yield kt(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function pr(I){return new Promise((y,E)=>{const S=document.createElement("script");S.setAttribute("src",I),S.onload=y,S.onerror=U=>{const q=At("internal-error");q.customData=U,E(q)},S.type="text/javascript",S.charset="UTF-8",function(){var I,y;return null!==(y=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==y?y:document}().appendChild(S)})}function Ci(I){return`__${I}${Math.floor(1e6*Math.random())}`}const Ki=1e12;class Ii{constructor(y){this.auth=y,this.counter=Ki,this._widgets=new Map}render(y,E){const S=this.counter;return this._widgets.set(S,new Ws(y,this.auth.name,E||{})),this.counter++,S}reset(y){var E;const S=y||Ki;null===(E=this._widgets.get(S))||void 0===E||E.delete(),this._widgets.delete(S)}getResponse(y){var E;return(null===(E=this._widgets.get(y||Ki))||void 0===E?void 0:E.getResponse())||""}execute(y){var E=this;return(0,O.Z)(function*(){var S;return null===(S=E._widgets.get(y||Ki))||void 0===S||S.execute(),""})()}}class Ws{constructor(y,E,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof y?document.getElementById(y):y;Pe(U,"argument-error",{appName:E}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(I){const y=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<50;S++)y.push(E.charAt(Math.floor(Math.random()*E.length)));return y.join("")}();const{callback:y,"expired-callback":E}=this.params;if(y)try{y(this.responseToken)}catch(S){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch(S){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ea=Ci("rcb"),oc=new ct(3e4,6e4);class $h{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!fr().grecaptcha}load(y,E=""){return Pe((I=E).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I),y,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(fr().grecaptcha):new Promise((S,U)=>{const q=fr().setTimeout(()=>{U(At(y,"network-request-failed"))},oc.get());fr()[Ea]=()=>{fr().clearTimeout(q),delete fr()[Ea];const Be=fr().grecaptcha;if(!Be)return void U(At(y,"internal-error"));const nt=Be.render;Be.render=(ft,bt)=>{const xt=nt(ft,bt);return this.counter++,xt},this.hostLanguage=E,S(Be)},pr(`https://www.google.com/recaptcha/api.js??${(0,te.xO)({onload:Ea,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(q),U(At(y,"internal-error"))})});var I}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!fr().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class au{load(y){return(0,O.Z)(function*(){return new Ii(y)})()}clearedOneInstance(){}}const zh="recaptcha",Av={theme:"light",type:"image"};class Sr{constructor(y,E=Object.assign({},Av),S){this.parameters=E,this.type=zh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(S),this.isInvisible="invisible"===this.parameters.size,Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof y?document.getElementById(y):y;Pe(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new au:new $h,this.validateStartingState()}verify(){var y=this;return(0,O.Z)(function*(){y.assertNotDestroyed();const E=yield y.render(),S=y.getAssertedRecaptcha();return S.getResponse(E)||new Promise(q=>{const ye=Be=>{!Be||(y.tokenChangeListeners.delete(ye),q(Be))};y.tokenChangeListeners.add(ye),y.isInvisible&&S.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){Pe(!this.parameters.sitekey,this.auth,"argument-error"),Pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return E=>{if(this.tokenChangeListeners.forEach(S=>S(E)),"function"==typeof y)y(E);else if("string"==typeof y){const S=fr()[y];"function"==typeof S&&S(E)}}}assertNotDestroyed(){Pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,O.Z)(function*(){if(yield y.init(),!y.widgetId){let E=y.container;if(!y.isInvisible){const S=document.createElement("div");E.appendChild(S),E=S}y.widgetId=y.getAssertedRecaptcha().render(E,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,O.Z)(function*(){Pe(Ee()&&!ud(),y.auth,"internal-error"),yield function(){let I=null;return new Promise(y=>{"complete"!==document.readyState?(I=()=>y(),window.addEventListener("load",I)):y()}).catch(y=>{throw I&&window.removeEventListener("load",I),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const E=yield function(I){return An.apply(this,arguments)}(y.auth);Pe(E,y.auth,"internal-error"),y.parameters.sitekey=E})()}getAssertedRecaptcha(){return Pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class lc{constructor(y,E){this.verificationId=y,this.onConfirmation=E}confirm(y){const E=ko._fromVerification(this.verificationId,y);return this.onConfirmation(E)}}function xm(){return(xm=(0,O.Z)(function*(I,y,E){const S=Ft(I),U=yield ba(S,y,(0,te.m9)(E));return new lc(U,q=>ze(S,q))})).apply(this,arguments)}function Tp(){return(Tp=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I);yield k(!1,S,"phone");const U=yield ba(S.auth,y,(0,te.m9)(E));return new lc(U,q=>Ht(S,q))})).apply(this,arguments)}function cc(){return(cc=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I),U=yield ba(S.auth,y,(0,te.m9)(E));return new lc(U,q=>wn(S,q))})).apply(this,arguments)}function ba(I,y,E){return po.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(I,y,E){var S;const U=yield E.verify();try{let q;if(Pe("string"==typeof U,I,"argument-error"),Pe(E.type===zh,I,"argument-error"),q="string"==typeof y?{phoneNumber:y}:y,"session"in q){const ye=q.session;if("phoneNumber"in q)return Pe("enroll"===ye.type,I,"internal-error"),(yield iu(I,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:q.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{Pe("signin"===ye.type,I,"internal-error");const Be=(null===(S=q.multiFactorHint)||void 0===S?void 0:S.uid)||q.multiFactorUid;return Pe(Be,I,"missing-multi-factor-info"),(yield at(I,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Be,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield ha(I,{phoneNumber:q.phoneNumber,recaptchaToken:U});return ye}}finally{E._reset()}})).apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*(I,y){yield oo((0,te.m9)(I),y)})).apply(this,arguments)}let Wh=(()=>{class I{constructor(E){this.providerId=I.PROVIDER_ID,this.auth=Ft(E)}verifyPhoneNumber(E,S){return ba(this.auth,E,(0,te.m9)(S))}static credential(E,S){return ko._fromVerification(E,S)}static credentialFromResult(E){return I.credentialFromTaggedObject(E)}static credentialFromError(E){return I.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:S,temporaryProof:U}=E;return S&&U?ko._fromTokenResponse(S,U):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Gn(I,y){return y?Se(y):(Pe(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class lu extends Gi{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return ii(y,this._buildIdpRequest())}_linkToIdToken(y,E){return ii(y,this._buildIdpRequest(E))}_getReauthenticationResolver(y){return ii(y,this._buildIdpRequest())}_buildIdpRequest(y){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(E.idToken=y),E}}function lt(I){return le(I.auth,new lu(I),I.bypassAuthState)}function Om(I){const{auth:y,user:E}=I;return Pe(E,y,"internal-error"),L(E,new lu(I),I.bypassAuthState)}function Wt(I){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(I){const{auth:y,user:E}=I;return Pe(E,y,"internal-error"),oo(E,new lu(I),I.bypassAuthState)})).apply(this,arguments)}class Ts{constructor(y,E,S,U,q=!1){this.auth=y,this.resolver=S,this.user=U,this.bypassAuthState=q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var y=this;return new Promise(function(){var E=(0,O.Z)(function*(S,U){y.pendingPromise={resolve:S,reject:U};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(q){y.reject(q)}});return function(S,U){return E.apply(this,arguments)}}())}onAuthEvent(y){var E=this;return(0,O.Z)(function*(){const{urlResponse:S,sessionId:U,postBody:q,tenantId:ye,error:Be,type:nt}=y;if(Be)return void E.reject(Be);const ft={auth:E.auth,requestUri:S,sessionId:U,tenantId:ye||void 0,postBody:q||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(nt)(ft))}catch(bt){E.reject(bt)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return lt;case"linkViaPopup":case"linkViaRedirect":return Wt;case"reauthViaPopup":case"reauthViaRedirect":return Om;default:pt(this.auth,"internal-error")}}resolve(y){Nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){Nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cl=new ct(2e3,1e4);function qs(){return(qs=(0,O.Z)(function*(I,y,E){const S=Ft(I);Pe(y instanceof rs,I,"argument-error");const U=Gn(S,E);return new gd(S,"signInViaPopup",y,U).executeNotNull()})).apply(this,arguments)}function Sp(){return(Sp=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I);Pe(y instanceof rs,S.auth,"argument-error");const U=Gn(S.auth,E);return new gd(S.auth,"reauthViaPopup",y,U,S).executeNotNull()})).apply(this,arguments)}function ai(){return(ai=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I);Pe(y instanceof rs,S.auth,"argument-error");const U=Gn(S.auth,E);return new gd(S.auth,"linkViaPopup",y,U,S).executeNotNull()})).apply(this,arguments)}let gd=(()=>{class I extends Ts{constructor(E,S,U,q,ye){super(E,S,q,ye),this.provider=U,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var E=this;return(0,O.Z)(function*(){const S=yield E.execute();return Pe(S,E.auth,"internal-error"),S})()}onExecution(){var E=this;return(0,O.Z)(function*(){Nt(1===E.filter.length,"Popup operations only handle one event");const S=ol();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],S),E.authWindow.associatedEvent=S,E.resolver._originValidation(E.auth).catch(U=>{E.reject(U)}),E.resolver._isIframeWebStorageSupported(E.auth,U=>{U||E.reject(At(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const E=()=>{var S,U;this.pollId=(null===(U=null===(S=this.authWindow)||void 0===S?void 0:S.window)||void 0===U?void 0:U.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,cl.get())};E()}}return I.currentPopupAction=null,I})();const Dr=new Map;class Dp extends Ts{constructor(y,E,S=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,S),this.eventId=null}execute(){var y=()=>super.execute,E=this;return(0,O.Z)(function*(){let S=Dr.get(E.auth._key());if(!S){try{const q=(yield function(I,y){return Ap.apply(this,arguments)}(E.resolver,E.auth))?yield y().call(E):null;S=()=>Promise.resolve(q)}catch(U){S=()=>Promise.reject(U)}Dr.set(E.auth._key(),S)}return S()})()}onAuthEvent(y){var E=()=>super.onAuthEvent,S=this;return(0,O.Z)(function*(){if("signInViaRedirect"===y.type)return E().call(S,y);if("unknown"!==y.type){if(y.eventId){const U=yield S.auth._redirectUserForId(y.eventId);if(U)return S.user=U,E().call(S,y);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,O.Z)(function*(){})()}cleanUp(){}}function Ap(){return(Ap=(0,O.Z)(function*(I,y){const E=yd(y),S="true"===(yield _d(I)._get(E));return yield _d(I)._remove(E),S})).apply(this,arguments)}function md(I,y){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,O.Z)(function*(I,y){return _d(I)._set(yd(y),"true")})).apply(this,arguments)}function _d(I){return Se(I._redirectPersistence)}function yd(I){return Jt("pendingRedirect",I.config.apiKey,I.name)}function dc(){return(dc=(0,O.Z)(function*(I,y,E){const S=Ft(I);Pe(y instanceof rs,I,"argument-error");const U=Gn(S,E);return yield md(U,S),U._openRedirect(S,y,"signInViaRedirect")})).apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I);Pe(y instanceof rs,S.auth,"argument-error");const U=Gn(S.auth,E);yield md(U,S.auth);const q=yield Ca(S);return U._openRedirect(S.auth,y,"reauthViaRedirect",q)})).apply(this,arguments)}function qh(){return(qh=(0,O.Z)(function*(I,y,E){const S=(0,te.m9)(I);Pe(y instanceof rs,S.auth,"argument-error");const U=Gn(S.auth,E);yield k(!1,S,y.providerId),yield md(U,S.auth);const q=yield Ca(S);return U._openRedirect(S.auth,y,"linkViaRedirect",q)})).apply(this,arguments)}function Ed(){return(Ed=(0,O.Z)(function*(I,y){return yield Ft(I)._initializationPromise,uu(I,y,!1)})).apply(this,arguments)}function uu(I,y){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,O.Z)(function*(I,y,E=!1){const S=Ft(I),U=Gn(S,y),ye=yield new Dp(S,U,E).execute();return ye&&!E&&(delete ye.user._redirectEventId,yield S._persistUserIfCurrent(ye.user),yield S._setRedirectUser(null,y)),ye})).apply(this,arguments)}function Ca(I){return dl.apply(this,arguments)}function dl(){return(dl=(0,O.Z)(function*(I){const y=ol(`${I.uid}:::`);return I._redirectEventId=y,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),y})).apply(this,arguments)}class Rp{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let E=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(y,S)&&(E=!0,this.sendToConsumer(y,S),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kh(I);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=y,E=!0)),E}sendToConsumer(y,E){var S;if(y.error&&!Kh(y)){const U=(null===(S=y.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";E.onError(At(this.auth,U))}else E.onAuthEvent(y)}isEventForConsumer(y,E){const S=null===E.eventId||!!y.eventId&&y.eventId===E.eventId;return E.filter.includes(y.type)&&S}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ar(y))}saveEventToCache(y){this.cachedEventUids.add(Ar(y)),this.lastProcessedEventTime=Date.now()}}function Ar(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(y=>y).join("-")}function Kh({type:I,error:y}){return"unknown"===I&&"auth/no-auth-event"===(null==y?void 0:y.code)}function zo(I){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,O.Z)(function*(I,y={}){return kt(I,"GET","/v1/projects",y)})).apply(this,arguments)}const xp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vm=/^https?/;function Yh(){return(Yh=(0,O.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:y}=yield zo(I);for(const E of y)try{if(fc(E))return}catch(S){}pt(I,"unauthorized-domain")})).apply(this,arguments)}function fc(I){const y=xe(),{protocol:E,hostname:S}=new URL(y);if(I.startsWith("chrome-extension://")){const ye=new URL(I);return""===ye.hostname&&""===S?"chrome-extension:"===E&&I.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===E&&ye.hostname===S}if(!Vm.test(E))return!1;if(xp.test(I))return S===I;const U=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(S)}const Ta=new ct(3e4,6e4);function bd(){const I=fr().___jsl;if(null==I?void 0:I.H)for(const y of Object.keys(I.H))if(I.H[y].r=I.H[y].r||[],I.H[y].L=I.H[y].L||[],I.H[y].r=[...I.H[y].L],I.CP)for(let E=0;E<I.CP.length;E++)I.CP[E]=null}let fl=null;function Um(I){return fl=fl||function(I){return new Promise((y,E)=>{var S,U,q;function ye(){bd(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{bd(),E(At(I,"network-request-failed"))},timeout:Ta.get()})}if(null===(U=null===(S=fr().gapi)||void 0===S?void 0:S.iframes)||void 0===U?void 0:U.Iframe)y(gapi.iframes.getContext());else{if(!(null===(q=fr().gapi)||void 0===q?void 0:q.load)){const Be=Ci("iframefcb");return fr()[Be]=()=>{gapi.load?ye():E(At(I,"network-request-failed"))},pr(`https://apis.google.com/js/api.js?onload=${Be}`)}ye()}}).catch(y=>{throw fl=null,y})}(I),fl}const pc=new ct(5e3,15e3),Jh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Xh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pl(I){const y=I.config;Pe(y.authDomain,I,"auth-domain-config-required");const E=y.emulator?mt(y,"emulator/auth/iframe"):`https://${I.config.authDomain}/__/auth/iframe`,S={apiKey:y.apiKey,appName:I.name,v:me.SDK_VERSION},U=Xh.get(I.config.apiHost);U&&(S.eid=U);const q=I._getFrameworks();return q.length&&(S.fw=q.join(",")),`${E}?${(0,te.xO)(S).slice(1)}`}function wd(){return(wd=(0,O.Z)(function*(I){const y=yield Um(I),E=fr().gapi;return Pe(E,I,"internal-error"),y.open({where:document.body,url:pl(I),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jh,dontclear:!0},S=>new Promise(function(){var U=(0,O.Z)(function*(q,ye){yield S.restyle({setHideOnLeave:!1});const Be=At(I,"network-request-failed"),nt=fr().setTimeout(()=>{ye(Be)},pc.get());function ft(){fr().clearTimeout(nt),q(S)}S.ping(ft).then(ft,()=>{ye(Be)})});return function(q,ye){return U.apply(this,arguments)}}()))})).apply(this,arguments)}const Hm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Np{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function Id(I,y,E,S,U,q){Pe(I.config.authDomain,I,"auth-domain-config-required"),Pe(I.config.apiKey,I,"invalid-api-key");const ye={apiKey:I.config.apiKey,appName:I.name,authType:E,redirectUrl:S,v:me.SDK_VERSION,eventId:U};if(y instanceof rs){y.setDefaultLanguage(I.languageCode),ye.providerId=y.providerId||"",(0,te.xb)(y.getCustomParameters())||(ye.customParameters=JSON.stringify(y.getCustomParameters()));for(const[nt,ft]of Object.entries(q||{}))ye[nt]=ft}if(y instanceof bs){const nt=y.getScopes().filter(ft=>""!==ft);nt.length>0&&(ye.scopes=nt.join(","))}I.tenantId&&(ye.tid=I.tenantId);const Be=ye;for(const nt of Object.keys(Be))void 0===Be[nt]&&delete Be[nt];return`${function({config:I}){return I.emulator?mt(I,"emulator/auth/handler"):`https://${I.authDomain}/__/auth/handler`}(I)}?${(0,te.xO)(Be).slice(1)}`}const Qr="webStorageSupport";class tf extends class{constructor(y){this.factorId=y}_process(y,E,S){switch(E.type){case"enroll":return this._finalizeEnroll(y,E.credential,S);case"signin":return this._finalizeSignIn(y,E.credential);default:return Kt("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new tf(y)}_finalizeEnroll(y,E,S){return function(I,y){return kt(I,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:I.tenantId},y))}(y,{idToken:E,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,E){return function(I,y){return kt(I,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:I.tenantId},y))}(y,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class zm{constructor(){}static assertion(y){return tf._fromCredential(y)}}var I;class Ov{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var E=this;return(0,O.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const E=this.auth.onIdTokenChanged(S=>{var U;y((null===(U=S)||void 0===U?void 0:U.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,E),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const E=this.internalListeners.get(y);!E||(this.internalListeners.delete(y),E(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Si(){return window}function du(){return(du=(0,O.Z)(function*(I,y,E){var S;const{BuildInfo:U}=Si();Nt(y.sessionId,"AuthEvent did not contain a session ID");const q=yield Zm(y.sessionId),ye={};return jn()?ye.ibi=U.packageName:ki()?ye.apn=U.packageName:pt(I,"operation-not-supported-in-this-environment"),U.displayName&&(ye.appDisplayName=U.displayName),ye.sessionId=q,Id(I,E,y.type,void 0,null!==(S=y.eventId)&&void 0!==S?S:void 0,ye)})).apply(this,arguments)}function Td(){return(Td=(0,O.Z)(function*(I){const{BuildInfo:y}=Si(),E={};jn()?E.iosBundleId=y.packageName:ki()?E.androidPackageName=y.packageName:pt(I,"operation-not-supported-in-this-environment"),yield zo(I,E)})).apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(I,y,E){const{cordova:S}=Si();let U=()=>{};try{yield new Promise((q,ye)=>{let Be=null;function nt(){var xt;q();const Gr=null===(xt=S.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof Gr&&Gr(),"function"==typeof(null==E?void 0:E.close)&&E.close()}function ft(){Be||(Be=window.setTimeout(()=>{ye(At(I,"redirect-cancelled-by-user"))},2e3))}function bt(){"visible"===(null==document?void 0:document.visibilityState)&&ft()}y.addPassiveListener(nt),document.addEventListener("resume",ft,!1),ki()&&document.addEventListener("visibilitychange",bt,!1),U=()=>{y.removePassiveListener(nt),document.removeEventListener("resume",ft,!1),document.removeEventListener("visibilitychange",bt,!1),Be&&window.clearTimeout(Be)}})}finally{U()}})).apply(this,arguments)}function Zm(I){return nf.apply(this,arguments)}function nf(){return(nf=(0,O.Z)(function*(I){const y=rf(I),E=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(E)).map(U=>U.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function rf(I){if(Nt(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(I);const y=new ArrayBuffer(I.length),E=new Uint8Array(y);for(let S=0;S<I.length;S++)E[S]=I.charCodeAt(S);return E}I="Browser",(0,me._registerComponent)(new he.wA("auth",(y,{options:E})=>{const S=y.getProvider("app").getImmediate(),{apiKey:U,authDomain:q}=S.options;return(ye=>{Pe(U&&!U.includes(":"),"invalid-api-key",{appName:ye.name}),Pe(!(null==q?void 0:q.includes(":")),"argument-error",{appName:ye.name});const Be={apiKey:U,authDomain:q,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:it(I)},nt=new Xt(ye,Be);return function(I,y){const E=(null==y?void 0:y.persistence)||[],S=(Array.isArray(E)?E:[E]).map(Se);(null==y?void 0:y.errorMap)&&I._updateErrorMap(y.errorMap),I._initializeWithPersistence(S,null==y?void 0:y.popupRedirectResolver)}(nt,E),nt})(S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,E,S)=>{y.getProvider("auth-internal").initialize()})),(0,me._registerComponent)(new he.wA("auth-internal",y=>{const E=Ft(y.getProvider("auth").getImmediate());return new Ov(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.registerVersion)("@firebase/auth","0.17.1",void 0);class Pv extends Rp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(y)),super.onEvent(y)}initialized(){var y=this;return(0,O.Z)(function*(){yield y.initPromise})()}}function go(I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(I){const y=yield Dd()._get(hu(I));return y&&(yield Dd()._remove(hu(I))),y})).apply(this,arguments)}function Sd(){const I=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<20;E++){const S=Math.floor(Math.random()*y.length);I.push(y.charAt(S))}return I.join("")}function Dd(){return Se(rl)}function hu(I){return Jt("authEvent",I.config.apiKey,I.name)}function yc(I){if(!(null==I?void 0:I.includes("?")))return{};const[y,...E]=I.split("?");return(0,te.zd)(E.join("?"))}function jp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:At("no-auth-event")}}function pu(){var I;return(null===(I=null==self?void 0:self.location)||void 0===I?void 0:I.protocol)||null}function yl(I=(0,te.z$)()){return!("file:"!==pu()&&"ionic:"!==pu()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Md(){try{const I=self.localStorage,y=ol();if(I)return I.setItem(y,"1"),I.removeItem(y),!function(I=(0,te.z$)()){return(0,te.w1)()&&11===(null==document?void 0:document.documentMode)||function(I=(0,te.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,te.hl)()}catch(I){return Rd()&&(0,te.hl)()}return!1}function Rd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function mu(){return("http:"===pu()||"https:"===pu()||(0,te.ru)()||yl())&&!((0,te.b$)()||(0,te.UG)())&&Md()&&!Rd()}function af(){return yl()&&"undefined"!=typeof document}function $p(){return($p=(0,O.Z)(function*(){return!!af()&&new Promise(I=>{const y=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),I(!0)})})})).apply(this,arguments)}const Di={LOCAL:"local",NONE:"none",SESSION:"session"},_u=Pe,xd="persistence";function vl(I){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(I){yield I._initializationPromise;const y=yu(),E=Jt(xd,I.config.apiKey,I.name);(null==y?void 0:y.sessionStorage)&&y.sessionStorage.setItem(E,I._getPersistence())})).apply(this,arguments)}function yu(){return"undefined"!=typeof window?window:null}const Ec=Pe;class mo{constructor(){this.browserResolver=Se(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ya,this._completeRedirectFn=uu}_openPopup(y,E,S,U){var q=this;return(0,O.Z)(function*(){var ye;Nt(null===(ye=q.eventManagers[y._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Be=Id(y,E,S,xe(),U);return function(I,y,E,S=500,U=600){const q=Math.max((window.screen.availHeight-U)/2,0).toString(),ye=Math.max((window.screen.availWidth-S)/2,0).toString();let Be="";const nt=Object.assign(Object.assign({},Hm),{width:S.toString(),height:U.toString(),top:q,left:ye}),ft=(0,te.z$)().toLowerCase();E&&(Be=Pi(ft)?"_blank":E),Zn(ft)&&(y=y||"http://localhost",nt.scrollbars="yes");const bt=Object.entries(nt).reduce((Gr,[Zs,Ic])=>`${Gr}${Zs}=${Ic},`,"");if(function(I=(0,te.z$)()){var y;return jn(I)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(ft)&&"_self"!==Be)return function(I,y){const E=document.createElement("a");E.href=I,E.target=y;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(S)}(y||"",Be),new Np(null);const xt=window.open(y||"",Be,bt);Pe(xt,I,"popup-blocked");try{xt.focus()}catch(Gr){}return new Np(xt)}(y,Be,ol())})()}_openRedirect(y,E,S,U){var q=this;return(0,O.Z)(function*(){return yield q._originValidation(y),I=Id(y,E,S,xe(),U),fr().location.href=I,new Promise(()=>{});var I})()}_initialize(y){const E=y._key();if(this.eventManagers[E]){const{manager:U,promise:q}=this.eventManagers[E];return U?Promise.resolve(U):(Nt(q,"If manager is not set, promise should be"),q)}const S=this.initAndGetManager(y);return this.eventManagers[E]={promise:S},S}initAndGetManager(y){var E=this;return(0,O.Z)(function*(){const S=yield function(I){return wd.apply(this,arguments)}(y),U=new Rp(y);return S.register("authEvent",q=>(Pe(null==q?void 0:q.authEvent,y,"invalid-auth-event"),{status:U.onEvent(q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[y._key()]={manager:U},E.iframes[y._key()]=S,U})()}_isIframeWebStorageSupported(y,E){this.iframes[y._key()].send(Qr,{type:Qr},U=>{var q;const ye=null===(q=null==U?void 0:U[0])||void 0===q?void 0:q[Qr];void 0!==ye&&E(!!ye),pt(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const E=y._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function(I){return Yh.apply(this,arguments)}(y)),this.originValidationPromises[E]}get _shouldInitProactively(){return ua()||Vt()||jn()}}),this.cordovaResolver=Se(class{constructor(){this._redirectPersistence=ya,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uu}_initialize(y){var E=this;return(0,O.Z)(function*(){const S=y._key();let U=E.eventManagers.get(S);return U||(U=new Pv(y),E.eventManagers.set(S,U),E.attachCallbackListeners(y,U)),U})()}_openPopup(y){pt(y,"operation-not-supported-in-this-environment")}_openRedirect(y,E,S,U){var q=this;return(0,O.Z)(function*(){!function(I){var y,E,S,U,q,ye,Be,nt,ft,bt;const xt=Si();Pe("function"==typeof(null===(y=null==xt?void 0:xt.universalLinks)||void 0===y?void 0:y.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pe(void 0!==(null===(E=null==xt?void 0:xt.BuildInfo)||void 0===E?void 0:E.packageName),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pe("function"==typeof(null===(q=null===(U=null===(S=null==xt?void 0:xt.cordova)||void 0===S?void 0:S.plugins)||void 0===U?void 0:U.browsertab)||void 0===q?void 0:q.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(nt=null===(Be=null===(ye=null==xt?void 0:xt.cordova)||void 0===ye?void 0:ye.plugins)||void 0===Be?void 0:Be.browsertab)||void 0===nt?void 0:nt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(bt=null===(ft=null==xt?void 0:xt.cordova)||void 0===ft?void 0:ft.InAppBrowser)||void 0===bt?void 0:bt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const ye=yield q._initialize(y);yield ye.initialized(),ye.resetRedirect(),Dr.clear(),yield q._originValidation(y);const Be=function(I,y,E=null){return{type:y,eventId:E,urlResponse:null,sessionId:Sd(),postBody:null,tenantId:I.tenantId,error:At(I,"no-auth-event")}}(y,S,U);yield function(I,y){return Dd()._set(hu(I),y)}(y,Be);const nt=yield function(I,y,E){return du.apply(this,arguments)}(y,Be,E),ft=yield function(I){const{cordova:y}=Si();return new Promise(E=>{y.plugins.browsertab.isAvailable(S=>{let U=null;S?y.plugins.browsertab.openUrl(I):U=y.InAppBrowser.open(I,function(I=(0,te.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),E(U)})})}(nt);return function(I,y,E){return _l.apply(this,arguments)}(y,ye,ft)})()}_isIframeWebStorageSupported(y,E){throw new Error("Method not implemented.")}_originValidation(y){const E=y._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function(I){return Td.apply(this,arguments)}(y)),this.originValidationPromises[E]}attachCallbackListeners(y,E){const{universalLinks:S,handleOpenURL:U,BuildInfo:q}=Si(),ye=setTimeout((0,O.Z)(function*(){yield go(y),E.onEvent(jp())}),500),Be=function(){var bt=(0,O.Z)(function*(xt){clearTimeout(ye);const Gr=yield go(y);let Zs=null;Gr&&(null==xt?void 0:xt.url)&&(Zs=function(I,y){var E,S;const U=function(I){const y=yc(I),E=y.link?decodeURIComponent(y.link):void 0,S=yc(E).link,U=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return yc(U).link||U||S||E||I}(y);if(U.includes("/__/auth/callback")){const q=yc(U),ye=q.firebaseError?function(I){try{return JSON.parse(I)}catch(y){return null}}(decodeURIComponent(q.firebaseError)):null,Be=null===(S=null===(E=null==ye?void 0:ye.code)||void 0===E?void 0:E.split("auth/"))||void 0===S?void 0:S[1],nt=Be?At(Be):null;return nt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:nt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:U,postBody:null}}return null}(Gr,xt.url)),E.onEvent(Zs||jp())});return function(Gr){return bt.apply(this,arguments)}}();void 0!==S&&"function"==typeof S.subscribe&&S.subscribe(null,Be);const nt=U,ft=`${q.packageName.toLowerCase()}://`;Si().handleOpenURL=function(){var bt=(0,O.Z)(function*(xt){if(xt.toLowerCase().startsWith(ft)&&Be({url:xt}),"function"==typeof nt)try{nt(xt)}catch(Gr){console.error(Gr)}});return function(xt){return bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ya,this._completeRedirectFn=uu}_initialize(y){var E=this;return(0,O.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,E,S,U){var q=this;return(0,O.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._openPopup(y,E,S,U)})()}_openRedirect(y,E,S,U){var q=this;return(0,O.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._openRedirect(y,E,S,U)})()}_isIframeWebStorageSupported(y,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,E)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return af()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ec(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,O.Z)(function*(){if(y.underlyingResolver)return;const E=yield function(){return $p.apply(this,arguments)}();y.underlyingResolver=E?y.cordovaResolver:y.browserResolver})()}}function mr(I){return I.unwrap()}function zp(I){return qo(I)}function bc(I,y){var E;const S=null===(E=y.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===y.code)y.resolver=new er(I,function(I,y){var E;const S=(0,te.m9)(I),U=y;return Pe(y.operationType,S,"argument-error"),Pe(null===(E=U.serverResponse)||void 0===E?void 0:E.mfaPendingCredential,S,"argument-error"),jh._fromError(S,U)}(I,y));else if(S){const U=qo(y),q=y;U&&(q.credential=U,q.tenantId=S.tenantId||void 0,q.email=S.email||void 0,q.phoneNumber=S.phoneNumber||void 0)}}function qo(I){const{_tokenResponse:y}=I instanceof te.ZR?I.customData:I;if(!y)return null;if(!(I instanceof te.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return Wh.credentialFromResult(I);const E=y.providerId;if(!E||"password"===E)return null;let S;switch(E){case"google.com":S=ro;break;case"facebook.com":S=Zl;break;case"github.com":S=Ka;break;case"twitter.com":S=Yl;break;default:const{oauthIdToken:U,oauthAccessToken:q,oauthTokenSecret:ye,pendingToken:Be,nonce:nt}=y;return q||ye||U||Be?Be?E.startsWith("saml.")?si._create(E,Be):ns._fromParams({providerId:E,signInMethod:E,pendingToken:Be,idToken:U,accessToken:q}):new ws(E).credential({idToken:U,accessToken:q,rawNonce:nt}):null}return I instanceof te.ZR?S.credentialFromError(I):S.credentialFromResult(I)}function ui(I,y){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,O.Z)(function*(I,y){let E;try{E=yield y}catch(q){throw q instanceof te.ZR&&bc(I,q),q}const{operationType:S,user:U}=E;return{operationType:S,credential:zp(E),additionalUserInfo:el(E),user:Ks.getOrCreate(U)}})).apply(this,arguments)}function wc(I,y){return cf.apply(this,arguments)}function cf(){return(cf=(0,O.Z)(function*(I,y){const E=yield y;return{verificationId:E.verificationId,confirm:S=>ui(I,E.confirm(S))}})).apply(this,arguments)}class er{constructor(y,E){this.resolver=E,this.auth=function(I){return I.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return ui(mr(this.auth),this.resolver.resolveSignIn(y))}}class Ks{constructor(y){this._delegate=y,this.multiFactor=function(I){const y=(0,te.m9)(I);return zs.has(y)||zs.set(y,Ho._fromUser(y)),zs.get(y)}(y)}static getOrCreate(y){return Ks.USER_MAP.has(y)||Ks.USER_MAP.set(y,new Ks(y)),Ks.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var E=this;return(0,O.Z)(function*(){return ui(E.auth,Ht(E._delegate,y))})()}linkWithPhoneNumber(y,E){var S=this;return(0,O.Z)(function*(){return wc(S.auth,function(I,y,E){return Tp.apply(this,arguments)}(S._delegate,y,E))})()}linkWithPopup(y){var E=this;return(0,O.Z)(function*(){return ui(E.auth,function(I,y,E){return ai.apply(this,arguments)}(E._delegate,y,mo))})()}linkWithRedirect(y){var E=this;return(0,O.Z)(function*(){return yield vl(Ft(E.auth)),function(I,y,E){return function(I,y,E){return qh.apply(this,arguments)}(I,y,E)}(E._delegate,y,mo)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var E=this;return(0,O.Z)(function*(){return ui(E.auth,wn(E._delegate,y))})()}reauthenticateWithPhoneNumber(y,E){return wc(this.auth,function(I,y,E){return cc.apply(this,arguments)}(this._delegate,y,E))}reauthenticateWithPopup(y){return ui(this.auth,function(I,y,E){return Sp.apply(this,arguments)}(this._delegate,y,mo))}reauthenticateWithRedirect(y){var E=this;return(0,O.Z)(function*(){return yield vl(Ft(E.auth)),function(I,y,E){return function(I,y,E){return ul.apply(this,arguments)}(I,y,E)}(E._delegate,y,mo)})()}sendEmailVerification(y){return function(I,y){return nc.apply(this,arguments)}(this._delegate,y)}unlink(y){var E=this;return(0,O.Z)(function*(){return yield function(I,y){return oi.apply(this,arguments)}(E._delegate,y),E})()}updateEmail(y){return function(I,y){return ad((0,te.m9)(I),y,null)}(this._delegate,y)}updatePassword(y){return function(I,y){return ad((0,te.m9)(I),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function(I,y){return wa.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function(I,y){return nu.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,E){return function(I,y,E){return $s.apply(this,arguments)}(this._delegate,y,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ks.USER_MAP=new WeakMap;const Od=Pe;let Xm=(()=>{class I{constructor(E,S){if(this.app=E,S.isInitialized())return this._delegate=S.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:U}=E.options;Od(U,"invalid-api-key",{appName:E.name});let q=[cn];if("undefined"!=typeof window){q=function(I,y){const E=yu();if(!(null==E?void 0:E.sessionStorage))return[];const S=Jt(xd,I,y);switch(E.sessionStorage.getItem(S)){case Di.NONE:return[cn];case Di.LOCAL:return[Ue,ya];case Di.SESSION:return[ya];default:return[]}}(U,E.name);for(const Be of[Ue,rl,ya])q.includes(Be)||q.push(Be)}Od(U,"invalid-api-key",{appName:E.name});const ye="undefined"!=typeof window?mo:void 0;this._delegate=S.initialize({options:{persistence:q,popupRedirectResolver:ye}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ks.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,S){!function(I,y,E){const S=Ft(I);Pe(S._canInitEmulator,S,"emulator-config-failed"),Pe(/^https?:\/\//.test(y),S,"invalid-emulator-scheme");const U=!!(null==E?void 0:E.disableWarnings),q=ur(y),{host:ye,port:Be}=function(I){const y=ur(I),E=/(\/\/)?([^?#/]+)/.exec(I.substr(y.length));if(!E)return{host:"",port:null};const S=E[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(S);if(U){const q=U[1];return{host:q,port:Yn(S.substr(q.length+1))}}{const[q,ye]=S.split(":");return{host:q,port:Yn(ye)}}}(y);S.config.emulator={url:`${q}//${ye}${null===Be?"":`:${Be}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:ye,port:Be,protocol:q.replace(":",""),options:Object.freeze({disableWarnings:U})}),function(I){function y(){const E=document.createElement("p"),S=E.style;E.innerText="Running in emulator mode. Do not use with production credentials.",S.position="fixed",S.width="100%",S.backgroundColor="#ffffff",S.border=".1em solid #000000",S.color="#b50000",S.bottom="0px",S.left="0px",S.margin="0px",S.zIndex="10000",S.textAlign="center",E.classList.add("firebase-emulator-warning"),document.body.appendChild(E)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!I&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}(U)}(this._delegate,E,S)}applyActionCode(E){return function(I,y){return lo.apply(this,arguments)}(this._delegate,E)}checkActionCode(E){return Xl(this._delegate,E)}confirmPasswordReset(E,S){return function(I,y,E){return eu.apply(this,arguments)}(this._delegate,E,S)}createUserWithEmailAndPassword(E,S){var U=this;return(0,O.Z)(function*(){return ui(U._delegate,function(I,y,E){return Ln.apply(this,arguments)}(U._delegate,E,S))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return function(I,y){return jr.apply(this,arguments)}(this._delegate,E)}isSignInWithEmailLink(E){return function(I,y){const E=Fo.parseLink(y);return"EMAIL_SIGNIN"===(null==E?void 0:E.operation)}(0,E)}getRedirectResult(){var E=this;return(0,O.Z)(function*(){Od(mu(),E._delegate,"operation-not-supported-in-this-environment");const S=yield function(I,y){return Ed.apply(this,arguments)}(E._delegate,mo);return S?ui(E._delegate,Promise.resolve(S)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function(I,y){Ft(I)._logFramework(y)}(this._delegate,E)}onAuthStateChanged(E,S,U){const{next:q,error:ye,complete:Be}=Cc(E,S,U);return this._delegate.onAuthStateChanged(q,ye,Be)}onIdTokenChanged(E,S,U){const{next:q,error:ye,complete:Be}=Cc(E,S,U);return this._delegate.onIdTokenChanged(q,ye,Be)}sendSignInLinkToEmail(E,S){return function(I,y,E){return Is.apply(this,arguments)}(this._delegate,E,S)}sendPasswordResetEmail(E,S){return function(I,y,E){return Bo.apply(this,arguments)}(this._delegate,E,S||void 0)}setPersistence(E){var S=this;return(0,O.Z)(function*(){let U;switch(function(I,y){_u(Object.values(Di).includes(y),I,"invalid-persistence-type"),(0,te.b$)()?_u(y!==Di.SESSION,I,"unsupported-persistence-type"):(0,te.UG)()?_u(y===Di.NONE,I,"unsupported-persistence-type"):Rd()?_u(y===Di.NONE||y===Di.LOCAL&&(0,te.hl)(),I,"unsupported-persistence-type"):_u(y===Di.NONE||Md(),I,"unsupported-persistence-type")}(S._delegate,E),E){case Di.SESSION:U=ya;break;case Di.LOCAL:U=(yield Se(Ue)._isAvailable())?Ue:rl;break;case Di.NONE:U=cn;break;default:return pt("argument-error",{appName:S._delegate.name})}return S._delegate.setPersistence(U)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return ui(this._delegate,function(I){return Jl.apply(this,arguments)}(this._delegate))}signInWithCredential(E){return ui(this._delegate,ze(this._delegate,E))}signInWithCustomToken(E){return ui(this._delegate,function(I,y){return ss.apply(this,arguments)}(this._delegate,E))}signInWithEmailAndPassword(E,S){return ui(this._delegate,function(I,y,E){return ze((0,te.m9)(I),qa.credential(y,E))}(this._delegate,E,S))}signInWithEmailLink(E,S){return ui(this._delegate,function(I,y,E){return Vh.apply(this,arguments)}(this._delegate,E,S))}signInWithPhoneNumber(E,S){return wc(this._delegate,function(I,y,E){return xm.apply(this,arguments)}(this._delegate,E,S))}signInWithPopup(E){var S=this;return(0,O.Z)(function*(){return Od(mu(),S._delegate,"operation-not-supported-in-this-environment"),ui(S._delegate,function(I,y,E){return qs.apply(this,arguments)}(S._delegate,E,mo))})()}signInWithRedirect(E){var S=this;return(0,O.Z)(function*(){return Od(mu(),S._delegate,"operation-not-supported-in-this-environment"),yield vl(S._delegate),function(I,y,E){return function(I,y,E){return dc.apply(this,arguments)}(I,y,E)}(S._delegate,E,mo)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return function(I,y){return ln.apply(this,arguments)}(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=Di,I})();function Cc(I,y,E){let S=I;"function"!=typeof I&&({next:S,error:y,complete:E}=I);const U=S;return{next:ye=>U(ye&&Ks.getOrCreate(ye)),error:y,complete:E}}class Da{constructor(){this.providerId="phone",this._delegate=new Wh(mr(m.Z.auth()))}static credential(y,E){return Wh.credential(y,E)}verifyPhoneNumber(y,E){return this._delegate.verifyPhoneNumber(y,E)}unwrap(){return this._delegate}}Da.PHONE_SIGN_IN_METHOD=Wh.PHONE_SIGN_IN_METHOD,Da.PROVIDER_ID=Wh.PROVIDER_ID;const e_=Pe;class t_{constructor(y,E,S=m.Z.app()){var U;e_(null===(U=S.options)||void 0===U?void 0:U.apiKey,"invalid-api-key",{appName:S.name}),this._delegate=new Sr(y,E,S.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(I){I.INTERNAL.registerComponent(new he.wA("auth-compat",y=>{const E=y.getProvider("app-compat").getImmediate(),S=y.getProvider("auth");return new Xm(E,S)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:qa,FacebookAuthProvider:Zl,GithubAuthProvider:Ka,GoogleAuthProvider:ro,OAuthProvider:ws,PhoneAuthProvider:Da,PhoneMultiFactorGenerator:zm,RecaptchaVerifier:t_,TwitterAuthProvider:Yl,Auth:Xm,AuthCredential:Gi,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.1.1")}(m.Z)},6215:(rt,Me,H)=>{"use strict";H.d(Me,{X:()=>te});var O=H(9765),m=H(7971);class te extends O.xQ{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const ae=super._subscribe(ve);return ae&&!ae.closed&&ve.next(this._value),ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new m.N;return this._value}next(ve){super.next(this._value=ve)}}},7574:(rt,Me,H)=>{"use strict";H.d(Me,{y:()=>oe});var O=H(7393),te=H(9181),me=H(6490),ae=H(6554),he=H(4487);var K=H(2494);let oe=(()=>{class ue{constructor(De){this._isScalar=!1,De&&(this._subscribe=De)}lift(De){const Te=new ue;return Te.source=this,Te.operator=De,Te}subscribe(De,Te,Ke){const{operator:Ie}=this,Ge=function(ue,fe,De){if(ue){if(ue instanceof O.L)return ue;if(ue[te.b])return ue[te.b]()}return ue||fe||De?new O.L(ue,fe,De):new O.L(me.c)}(De,Te,Ke);if(Ge.add(Ie?Ie.call(Ge,this.source):this.source||K.v.useDeprecatedSynchronousErrorHandling&&!Ge.syncErrorThrowable?this._subscribe(Ge):this._trySubscribe(Ge)),K.v.useDeprecatedSynchronousErrorHandling&&Ge.syncErrorThrowable&&(Ge.syncErrorThrowable=!1,Ge.syncErrorThrown))throw Ge.syncErrorValue;return Ge}_trySubscribe(De){try{return this._subscribe(De)}catch(Te){K.v.useDeprecatedSynchronousErrorHandling&&(De.syncErrorThrown=!0,De.syncErrorValue=Te),function(ue){for(;ue;){const{closed:fe,destination:De,isStopped:Te}=ue;if(fe||Te)return!1;ue=De&&De instanceof O.L?De:null}return!0}(De)?De.error(Te):console.warn(Te)}}forEach(De,Te){return new(Te=X(Te))((Ke,Ie)=>{let Ge;Ge=this.subscribe(Dt=>{try{De(Dt)}catch(pt){Ie(pt),Ge&&Ge.unsubscribe()}},Ie,Ke)})}_subscribe(De){const{source:Te}=this;return Te&&Te.subscribe(De)}[ae.L](){return this}pipe(...De){return 0===De.length?this:function(ue){return 0===ue.length?he.y:1===ue.length?ue[0]:function(De){return ue.reduce((Te,Ke)=>Ke(Te),De)}}(De)(this)}toPromise(De){return new(De=X(De))((Te,Ke)=>{let Ie;this.subscribe(Ge=>Ie=Ge,Ge=>Ke(Ge),()=>Te(Ie))})}}return ue.create=fe=>new ue(fe),ue})();function X(ue){if(ue||(ue=K.v.Promise||Promise),!ue)throw new Error("no Promise impl found");return ue}},6490:(rt,Me,H)=>{"use strict";H.d(Me,{c:()=>te});var O=H(2494),m=H(4449);const te={closed:!0,next(me){},error(me){if(O.v.useDeprecatedSynchronousErrorHandling)throw me;(0,m.z)(me)},complete(){}}},5197:(rt,Me,H)=>{"use strict";H.d(Me,{L:()=>m});var O=H(7393);class m extends O.L{notifyNext(me,ve,ae,he,ee){this.destination.next(ve)}notifyError(me,ve){this.destination.error(me)}notifyComplete(me){this.destination.complete()}}},9765:(rt,Me,H)=>{"use strict";H.d(Me,{Yc:()=>he,xQ:()=>ee});var O=H(7574),m=H(7393),te=H(5319),me=H(7971),ve=H(8858),ae=H(9181);class he extends m.L{constructor(oe){super(oe),this.destination=oe}}let ee=(()=>{class K extends O.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ae.b](){return new he(this)}lift(X){const ue=new ne(this,this);return ue.operator=X,ue}next(X){if(this.closed)throw new me.N;if(!this.isStopped){const{observers:ue}=this,fe=ue.length,De=ue.slice();for(let Te=0;Te<fe;Te++)De[Te].next(X)}}error(X){if(this.closed)throw new me.N;this.hasError=!0,this.thrownError=X,this.isStopped=!0;const{observers:ue}=this,fe=ue.length,De=ue.slice();for(let Te=0;Te<fe;Te++)De[Te].error(X);this.observers.length=0}complete(){if(this.closed)throw new me.N;this.isStopped=!0;const{observers:X}=this,ue=X.length,fe=X.slice();for(let De=0;De<ue;De++)fe[De].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(X){if(this.closed)throw new me.N;return super._trySubscribe(X)}_subscribe(X){if(this.closed)throw new me.N;return this.hasError?(X.error(this.thrownError),te.w.EMPTY):this.isStopped?(X.complete(),te.w.EMPTY):(this.observers.push(X),new ve.W(this,X))}asObservable(){const X=new O.y;return X.source=this,X}}return K.create=(oe,X)=>new ne(oe,X),K})();class ne extends ee{constructor(oe,X){super(),this.destination=oe,this.source=X}next(oe){const{destination:X}=this;X&&X.next&&X.next(oe)}error(oe){const{destination:X}=this;X&&X.error&&this.destination.error(oe)}complete(){const{destination:oe}=this;oe&&oe.complete&&this.destination.complete()}_subscribe(oe){const{source:X}=this;return X?this.source.subscribe(oe):te.w.EMPTY}}},8858:(rt,Me,H)=>{"use strict";H.d(Me,{W:()=>m});var O=H(5319);class m extends O.w{constructor(me,ve){super(),this.subject=me,this.subscriber=ve,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const me=this.subject,ve=me.observers;if(this.subject=null,!ve||0===ve.length||me.isStopped||me.closed)return;const ae=ve.indexOf(this.subscriber);-1!==ae&&ve.splice(ae,1)}}},7393:(rt,Me,H)=>{"use strict";H.d(Me,{L:()=>he});var O=H(9105),m=H(6490),te=H(5319),me=H(9181),ve=H(2494),ae=H(4449);class he extends te.w{constructor(K,oe,X){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=m.c;break;case 1:if(!K){this.destination=m.c;break}if("object"==typeof K){K instanceof he?(this.syncErrorThrowable=K.syncErrorThrowable,this.destination=K,K.add(this)):(this.syncErrorThrowable=!0,this.destination=new ee(this,K));break}default:this.syncErrorThrowable=!0,this.destination=new ee(this,K,oe,X)}}[me.b](){return this}static create(K,oe,X){const ue=new he(K,oe,X);return ue.syncErrorThrowable=!1,ue}next(K){this.isStopped||this._next(K)}error(K){this.isStopped||(this.isStopped=!0,this._error(K))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(K){this.destination.next(K)}_error(K){this.destination.error(K),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:K}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=K,this}}class ee extends he{constructor(K,oe,X,ue){super(),this._parentSubscriber=K;let fe,De=this;(0,O.m)(oe)?fe=oe:oe&&(fe=oe.next,X=oe.error,ue=oe.complete,oe!==m.c&&(De=Object.create(oe),(0,O.m)(De.unsubscribe)&&this.add(De.unsubscribe.bind(De)),De.unsubscribe=this.unsubscribe.bind(this))),this._context=De,this._next=fe,this._error=X,this._complete=ue}next(K){if(!this.isStopped&&this._next){const{_parentSubscriber:oe}=this;ve.v.useDeprecatedSynchronousErrorHandling&&oe.syncErrorThrowable?this.__tryOrSetError(oe,this._next,K)&&this.unsubscribe():this.__tryOrUnsub(this._next,K)}}error(K){if(!this.isStopped){const{_parentSubscriber:oe}=this,{useDeprecatedSynchronousErrorHandling:X}=ve.v;if(this._error)X&&oe.syncErrorThrowable?(this.__tryOrSetError(oe,this._error,K),this.unsubscribe()):(this.__tryOrUnsub(this._error,K),this.unsubscribe());else if(oe.syncErrorThrowable)X?(oe.syncErrorValue=K,oe.syncErrorThrown=!0):(0,ae.z)(K),this.unsubscribe();else{if(this.unsubscribe(),X)throw K;(0,ae.z)(K)}}}complete(){if(!this.isStopped){const{_parentSubscriber:K}=this;if(this._complete){const oe=()=>this._complete.call(this._context);ve.v.useDeprecatedSynchronousErrorHandling&&K.syncErrorThrowable?(this.__tryOrSetError(K,oe),this.unsubscribe()):(this.__tryOrUnsub(oe),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(K,oe){try{K.call(this._context,oe)}catch(X){if(this.unsubscribe(),ve.v.useDeprecatedSynchronousErrorHandling)throw X;(0,ae.z)(X)}}__tryOrSetError(K,oe,X){if(!ve.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{oe.call(this._context,X)}catch(ue){return ve.v.useDeprecatedSynchronousErrorHandling?(K.syncErrorValue=ue,K.syncErrorThrown=!0,!0):((0,ae.z)(ue),!0)}return!1}_unsubscribe(){const{_parentSubscriber:K}=this;this._context=null,this._parentSubscriber=null,K.unsubscribe()}}},5319:(rt,Me,H)=>{"use strict";H.d(Me,{w:()=>ae});var O=H(9796),m=H(1555),te=H(9105);const ve=(()=>{function ee(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((K,oe)=>`${oe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return ee.prototype=Object.create(Error.prototype),ee})();class ae{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:K,_ctorUnsubscribe:oe,_unsubscribe:X,_subscriptions:ue}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,K instanceof ae)K.remove(this);else if(null!==K)for(let fe=0;fe<K.length;++fe)K[fe].remove(this);if((0,te.m)(X)){oe&&(this._unsubscribe=void 0);try{X.call(this)}catch(fe){ne=fe instanceof ve?he(fe.errors):[fe]}}if((0,O.k)(ue)){let fe=-1,De=ue.length;for(;++fe<De;){const Te=ue[fe];if((0,m.K)(Te))try{Te.unsubscribe()}catch(Ke){ne=ne||[],Ke instanceof ve?ne=ne.concat(he(Ke.errors)):ne.push(Ke)}}}if(ne)throw new ve(ne)}add(ne){let K=ne;if(!ne)return ae.EMPTY;switch(typeof ne){case"function":K=new ae(ne);case"object":if(K===this||K.closed||"function"!=typeof K.unsubscribe)return K;if(this.closed)return K.unsubscribe(),K;if(!(K instanceof ae)){const ue=K;K=new ae,K._subscriptions=[ue]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:oe}=K;if(null===oe)K._parentOrParents=this;else if(oe instanceof ae){if(oe===this)return K;K._parentOrParents=[oe,this]}else{if(-1!==oe.indexOf(this))return K;oe.push(this)}const X=this._subscriptions;return null===X?this._subscriptions=[K]:X.push(K),K}remove(ne){const K=this._subscriptions;if(K){const oe=K.indexOf(ne);-1!==oe&&K.splice(oe,1)}}}var ee;function he(ee){return ee.reduce((ne,K)=>ne.concat(K instanceof ve?K.errors:K),[])}ae.EMPTY=((ee=new ae).closed=!0,ee)},2494:(rt,Me,H)=>{"use strict";H.d(Me,{v:()=>m});let O=!1;const m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(te){if(te){const me=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+me.stack)}else O&&console.log("RxJS: Back to a better error behavior. Thank you. <3");O=te},get useDeprecatedSynchronousErrorHandling(){return O}}},5345:(rt,Me,H)=>{"use strict";H.d(Me,{IY:()=>me,Ds:()=>ae,ft:()=>ee});var O=H(7393),m=H(7574),te=H(7444);class me extends O.L{constructor(K){super(),this.parent=K}_next(K){this.parent.notifyNext(K)}_error(K){this.parent.notifyError(K),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ae extends O.L{notifyNext(K){this.destination.next(K)}notifyError(K){this.destination.error(K)}notifyComplete(){this.destination.complete()}}function ee(ne,K){if(K.closed)return;if(ne instanceof m.y)return ne.subscribe(K);let oe;try{oe=(0,te.s)(ne)(K)}catch(X){K.error(X)}return oe}},2441:(rt,Me,H)=>{"use strict";H.d(Me,{c:()=>ve,N:()=>ae});var O=H(9765),m=H(7574),te=H(5319),me=H(1307);class ve extends m.y{constructor(oe,X){super(),this.source=oe,this.subjectFactory=X,this._refCount=0,this._isComplete=!1}_subscribe(oe){return this.getSubject().subscribe(oe)}getSubject(){const oe=this._subject;return(!oe||oe.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let oe=this._connection;return oe||(this._isComplete=!1,oe=this._connection=new te.w,oe.add(this.source.subscribe(new he(this.getSubject(),this))),oe.closed&&(this._connection=null,oe=te.w.EMPTY)),oe}refCount(){return(0,me.x)()(this)}}const ae=(()=>{const K=ve.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:K._subscribe},_isComplete:{value:K._isComplete,writable:!0},getSubject:{value:K.getSubject},connect:{value:K.connect},refCount:{value:K.refCount}}})();class he extends O.Yc{constructor(oe,X){super(oe),this.connectable=X}_error(oe){this._unsubscribe(),super._error(oe)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const oe=this.connectable;if(oe){this.connectable=null;const X=oe._connection;oe._refCount=0,oe._subject=null,oe._connection=null,X&&X.unsubscribe()}}}},9112:(rt,Me,H)=>{"use strict";H.d(Me,{aj:()=>he});var O=H(4869),m=H(9796),te=H(5197),me=H(509),ve=H(6693);const ae={};function he(...K){let oe,X;return(0,O.K)(K[K.length-1])&&(X=K.pop()),"function"==typeof K[K.length-1]&&(oe=K.pop()),1===K.length&&(0,m.k)(K[0])&&(K=K[0]),(0,ve.n)(K,X).lift(new ee(oe))}class ee{constructor(oe){this.resultSelector=oe}call(oe,X){return X.subscribe(new ne(oe,this.resultSelector))}}class ne extends te.L{constructor(oe,X){super(oe),this.resultSelector=X,this.active=0,this.values=[],this.observables=[]}_next(oe){this.values.push(ae),this.observables.push(oe)}_complete(){const oe=this.observables,X=oe.length;if(0===X)this.destination.complete();else{this.active=X,this.toRespond=X;for(let ue=0;ue<X;ue++)this.add((0,me.D)(this,oe[ue],void 0,ue))}}notifyComplete(oe){0==(this.active-=1)&&this.destination.complete()}notifyNext(oe,X,ue){const fe=this.values,Te=this.toRespond?fe[ue]===ae?--this.toRespond:this.toRespond:0;fe[ue]=X,0===Te&&(this.resultSelector?this._tryResultSelector(fe):this.destination.next(fe.slice()))}_tryResultSelector(oe){let X;try{X=this.resultSelector.apply(this,oe)}catch(ue){return void this.destination.error(ue)}this.destination.next(X)}}},8071:(rt,Me,H)=>{"use strict";H.d(Me,{z:()=>me});var O=H(5917),m=H(3282);function me(...ve){return(0,m.J)(1)((0,O.of)(...ve))}},9193:(rt,Me,H)=>{"use strict";H.d(Me,{E:()=>m,c:()=>te});var O=H(7574);const m=new O.y(ve=>ve.complete());function te(ve){return ve?function(ve){return new O.y(ae=>ve.schedule(()=>ae.complete()))}(ve):m}},4402:(rt,Me,H)=>{"use strict";H.d(Me,{D:()=>De});var O=H(7574),m=H(7444),te=H(5319),me=H(6554),he=H(4087),ee=H(377),oe=H(4072),X=H(9489);function De(Te,Ke){return Ke?function(Te,Ke){if(null!=Te){if(function(Te){return Te&&"function"==typeof Te[me.L]}(Te))return function(Te,Ke){return new O.y(Ie=>{const Ge=new te.w;return Ge.add(Ke.schedule(()=>{const Dt=Te[me.L]();Ge.add(Dt.subscribe({next(pt){Ge.add(Ke.schedule(()=>Ie.next(pt)))},error(pt){Ge.add(Ke.schedule(()=>Ie.error(pt)))},complete(){Ge.add(Ke.schedule(()=>Ie.complete()))}}))})),Ge})}(Te,Ke);if((0,oe.t)(Te))return function(Te,Ke){return new O.y(Ie=>{const Ge=new te.w;return Ge.add(Ke.schedule(()=>Te.then(Dt=>{Ge.add(Ke.schedule(()=>{Ie.next(Dt),Ge.add(Ke.schedule(()=>Ie.complete()))}))},Dt=>{Ge.add(Ke.schedule(()=>Ie.error(Dt)))}))),Ge})}(Te,Ke);if((0,X.z)(Te))return(0,he.r)(Te,Ke);if(function(Te){return Te&&"function"==typeof Te[ee.hZ]}(Te)||"string"==typeof Te)return function(Te,Ke){if(!Te)throw new Error("Iterable cannot be null");return new O.y(Ie=>{const Ge=new te.w;let Dt;return Ge.add(()=>{Dt&&"function"==typeof Dt.return&&Dt.return()}),Ge.add(Ke.schedule(()=>{Dt=Te[ee.hZ](),Ge.add(Ke.schedule(function(){if(Ie.closed)return;let pt,At;try{const Qt=Dt.next();pt=Qt.value,At=Qt.done}catch(Qt){return void Ie.error(Qt)}At?Ie.complete():(Ie.next(pt),this.schedule())}))})),Ge})}(Te,Ke)}throw new TypeError((null!==Te&&typeof Te||Te)+" is not observable")}(Te,Ke):Te instanceof O.y?Te:new O.y((0,m.s)(Te))}},6693:(rt,Me,H)=>{"use strict";H.d(Me,{n:()=>me});var O=H(7574),m=H(5015),te=H(4087);function me(ve,ae){return ae?(0,te.r)(ve,ae):new O.y((0,m.V)(ve))}},6682:(rt,Me,H)=>{"use strict";H.d(Me,{T:()=>ve});var O=H(7574),m=H(4869),te=H(3282),me=H(6693);function ve(...ae){let he=Number.POSITIVE_INFINITY,ee=null,ne=ae[ae.length-1];return(0,m.K)(ne)?(ee=ae.pop(),ae.length>1&&"number"==typeof ae[ae.length-1]&&(he=ae.pop())):"number"==typeof ne&&(he=ae.pop()),null===ee&&1===ae.length&&ae[0]instanceof O.y?ae[0]:(0,te.J)(he)((0,me.n)(ae,ee))}},5917:(rt,Me,H)=>{"use strict";H.d(Me,{of:()=>me});var O=H(4869),m=H(6693),te=H(4087);function me(...ve){let ae=ve[ve.length-1];return(0,O.K)(ae)?(ve.pop(),(0,te.r)(ve,ae)):(0,m.n)(ve)}},5242:(rt,Me,H)=>{"use strict";H.d(Me,{d:()=>m});var O=H(7393);function m(ve=null){return ae=>ae.lift(new te(ve))}class te{constructor(ae){this.defaultValue=ae}call(ae,he){return he.subscribe(new me(ae,this.defaultValue))}}class me extends O.L{constructor(ae,he){super(ae),this.defaultValue=he,this.isEmpty=!0}_next(ae){this.isEmpty=!1,this.destination.next(ae)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5435:(rt,Me,H)=>{"use strict";H.d(Me,{h:()=>m});var O=H(7393);function m(ve,ae){return function(ee){return ee.lift(new te(ve,ae))}}class te{constructor(ae,he){this.predicate=ae,this.thisArg=he}call(ae,he){return he.subscribe(new me(ae,this.predicate,this.thisArg))}}class me extends O.L{constructor(ae,he,ee){super(ae),this.predicate=he,this.thisArg=ee,this.count=0}_next(ae){let he;try{he=this.predicate.call(this.thisArg,ae,this.count++)}catch(ee){return void this.destination.error(ee)}he&&this.destination.next(ae)}}},8049:(rt,Me,H)=>{"use strict";H.d(Me,{P:()=>he});var O=H(3410),m=H(5435),te=H(5257),me=H(5242),ve=H(4635),ae=H(4487);function he(ee,ne){const K=arguments.length>=2;return oe=>oe.pipe(ee?(0,m.h)((X,ue)=>ee(X,ue,oe)):ae.y,(0,te.q)(1),K?(0,me.d)(ne):(0,ve.T)(()=>new O.K))}},8002:(rt,Me,H)=>{"use strict";H.d(Me,{U:()=>m});var O=H(7393);function m(ve,ae){return function(ee){if("function"!=typeof ve)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ee.lift(new te(ve,ae))}}class te{constructor(ae,he){this.project=ae,this.thisArg=he}call(ae,he){return he.subscribe(new me(ae,this.project,this.thisArg))}}class me extends O.L{constructor(ae,he,ee){super(ae),this.project=he,this.count=0,this.thisArg=ee||this}_next(ae){let he;try{he=this.project.call(this.thisArg,ae,this.count++)}catch(ee){return void this.destination.error(ee)}this.destination.next(he)}}},3282:(rt,Me,H)=>{"use strict";H.d(Me,{J:()=>te});var O=H(9773),m=H(4487);function te(me=Number.POSITIVE_INFINITY){return(0,O.zg)(m.y,me)}},9773:(rt,Me,H)=>{"use strict";H.d(Me,{zg:()=>me});var O=H(8002),m=H(4402),te=H(5345);function me(ee,ne,K=Number.POSITIVE_INFINITY){return"function"==typeof ne?oe=>oe.pipe(me((X,ue)=>(0,m.D)(ee(X,ue)).pipe((0,O.U)((fe,De)=>ne(X,fe,ue,De))),K)):("number"==typeof ne&&(K=ne),oe=>oe.lift(new ve(ee,K)))}class ve{constructor(ne,K=Number.POSITIVE_INFINITY){this.project=ne,this.concurrent=K}call(ne,K){return K.subscribe(new ae(ne,this.project,this.concurrent))}}class ae extends te.Ds{constructor(ne,K,oe=Number.POSITIVE_INFINITY){super(ne),this.project=K,this.concurrent=oe,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ne){this.active<this.concurrent?this._tryNext(ne):this.buffer.push(ne)}_tryNext(ne){let K;const oe=this.index++;try{K=this.project(ne,oe)}catch(X){return void this.destination.error(X)}this.active++,this._innerSub(K)}_innerSub(ne){const K=new te.IY(this),oe=this.destination;oe.add(K);const X=(0,te.ft)(ne,K);X!==K&&oe.add(X)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ne){this.destination.next(ne)}notifyComplete(){const ne=this.buffer;this.active--,ne.length>0?this._next(ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(rt,Me,H)=>{"use strict";H.d(Me,{ht:()=>oe,QV:()=>ne});var O=H(7393),m=H(9193),te=H(5917),me=H(7574);class ee{constructor(fe,De,Te){this.kind=fe,this.value=De,this.error=Te,this.hasValue="N"===fe}observe(fe){switch(this.kind){case"N":return fe.next&&fe.next(this.value);case"E":return fe.error&&fe.error(this.error);case"C":return fe.complete&&fe.complete()}}do(fe,De,Te){switch(this.kind){case"N":return fe&&fe(this.value);case"E":return De&&De(this.error);case"C":return Te&&Te()}}accept(fe,De,Te){return fe&&"function"==typeof fe.next?this.observe(fe):this.do(fe,De,Te)}toObservable(){switch(this.kind){case"N":return(0,te.of)(this.value);case"E":return ue=this.error,new me.y(De=>De.error(ue));case"C":return(0,m.c)()}var ue;throw new Error("unexpected notification kind value")}static createNext(fe){return void 0!==fe?new ee("N",fe):ee.undefinedValueNotification}static createError(fe){return new ee("E",void 0,fe)}static createComplete(){return ee.completeNotification}}function ne(ue,fe=0){return function(Te){return Te.lift(new K(ue,fe))}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0);class K{constructor(fe,De=0){this.scheduler=fe,this.delay=De}call(fe,De){return De.subscribe(new oe(fe,this.scheduler,this.delay))}}class oe extends O.L{constructor(fe,De,Te=0){super(fe),this.scheduler=De,this.delay=Te}static dispatch(fe){const{notification:De,destination:Te}=fe;De.observe(Te),this.unsubscribe()}scheduleMessage(fe){this.destination.add(this.scheduler.schedule(oe.dispatch,this.delay,new X(fe,this.destination)))}_next(fe){this.scheduleMessage(ee.createNext(fe))}_error(fe){this.scheduleMessage(ee.createError(fe)),this.unsubscribe()}_complete(){this.scheduleMessage(ee.createComplete()),this.unsubscribe()}}class X{constructor(fe,De){this.notification=fe,this.destination=De}}},1307:(rt,Me,H)=>{"use strict";H.d(Me,{x:()=>m});var O=H(7393);function m(){return function(ae){return ae.lift(new te(ae))}}class te{constructor(ae){this.connectable=ae}call(ae,he){const{connectable:ee}=this;ee._refCount++;const ne=new me(ae,ee),K=he.subscribe(ne);return ne.closed||(ne.connection=ee.connect()),K}}class me extends O.L{constructor(ae,he){super(ae),this.connectable=he}_unsubscribe(){const{connectable:ae}=this;if(!ae)return void(this.connection=null);this.connectable=null;const he=ae._refCount;if(he<=0)return void(this.connection=null);if(ae._refCount=he-1,he>1)return void(this.connection=null);const{connection:ee}=this,ne=ae._connection;this.connection=null,ne&&(!ee||ne===ee)&&ne.unsubscribe()}}},2145:(rt,Me,H)=>{"use strict";H.d(Me,{R:()=>m});var O=H(7393);function m(ve,ae){let he=!1;return arguments.length>=2&&(he=!0),function(ne){return ne.lift(new te(ve,ae,he))}}class te{constructor(ae,he,ee=!1){this.accumulator=ae,this.seed=he,this.hasSeed=ee}call(ae,he){return he.subscribe(new me(ae,this.accumulator,this.seed,this.hasSeed))}}class me extends O.L{constructor(ae,he,ee,ne){super(ae),this.accumulator=he,this._seed=ee,this.hasSeed=ne,this.index=0}get seed(){return this._seed}set seed(ae){this.hasSeed=!0,this._seed=ae}_next(ae){if(this.hasSeed)return this._tryNext(ae);this.seed=ae,this.destination.next(ae)}_tryNext(ae){const he=this.index++;let ee;try{ee=this.accumulator(this.seed,ae,he)}catch(ne){this.destination.error(ne)}this.seed=ee,this.destination.next(ee)}}},8819:(rt,Me,H)=>{"use strict";H.d(Me,{B:()=>he});var O=H(2441);var me=H(1307),ve=H(9765);function ae(){return new ve.xQ}function he(){return ee=>(0,me.x)()(function(ee,ne){return function(oe){let X;X="function"==typeof ee?ee:function(){return ee};const ue=Object.create(oe,O.N);return ue.source=oe,ue.subjectFactory=X,ue}}(ae)(ee))}},9761:(rt,Me,H)=>{"use strict";H.d(Me,{O:()=>te});var O=H(8071),m=H(4869);function te(...me){const ve=me[me.length-1];return(0,m.K)(ve)?(me.pop(),ae=>(0,O.z)(me,ae,ve)):ae=>(0,O.z)(me,ae)}},9673:(rt,Me,H)=>{"use strict";H.d(Me,{R:()=>ve});var O=H(7574),m=H(4581),te=H(6561);class me extends O.y{constructor(ee,ne=0,K=m.e){super(),this.source=ee,this.delayTime=ne,this.scheduler=K,(!(0,te.k)(ne)||ne<0)&&(this.delayTime=0),(!K||"function"!=typeof K.schedule)&&(this.scheduler=m.e)}static create(ee,ne=0,K=m.e){return new me(ee,ne,K)}static dispatch(ee){const{source:ne,subscriber:K}=ee;return this.add(ne.subscribe(K))}_subscribe(ee){return this.scheduler.schedule(me.dispatch,this.delayTime,{source:this.source,subscriber:ee})}}function ve(he,ee=0){return function(K){return K.lift(new ae(he,ee))}}class ae{constructor(ee,ne){this.scheduler=ee,this.delay=ne}call(ee,ne){return new me(ne,this.delay,this.scheduler).subscribe(ee)}}},3190:(rt,Me,H)=>{"use strict";H.d(Me,{w:()=>me});var O=H(8002),m=H(4402),te=H(5345);function me(he,ee){return"function"==typeof ee?ne=>ne.pipe(me((K,oe)=>(0,m.D)(he(K,oe)).pipe((0,O.U)((X,ue)=>ee(K,X,oe,ue))))):ne=>ne.lift(new ve(he))}class ve{constructor(ee){this.project=ee}call(ee,ne){return ne.subscribe(new ae(ee,this.project))}}class ae extends te.Ds{constructor(ee,ne){super(ee),this.project=ne,this.index=0}_next(ee){let ne;const K=this.index++;try{ne=this.project(ee,K)}catch(oe){return void this.destination.error(oe)}this._innerSub(ne)}_innerSub(ee){const ne=this.innerSubscription;ne&&ne.unsubscribe();const K=new te.IY(this),oe=this.destination;oe.add(K),this.innerSubscription=(0,te.ft)(ee,K),this.innerSubscription!==K&&oe.add(this.innerSubscription)}_complete(){const{innerSubscription:ee}=this;(!ee||ee.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ee){this.destination.next(ee)}}},5257:(rt,Me,H)=>{"use strict";H.d(Me,{q:()=>me});var O=H(7393),m=H(7108),te=H(9193);function me(he){return ee=>0===he?(0,te.c)():ee.lift(new ve(he))}class ve{constructor(ee){if(this.total=ee,this.total<0)throw new m.W}call(ee,ne){return ne.subscribe(new ae(ee,this.total))}}class ae extends O.L{constructor(ee,ne){super(ee),this.total=ne,this.count=0}_next(ee){const ne=this.total,K=++this.count;K<=ne&&(this.destination.next(ee),K===ne&&(this.destination.complete(),this.unsubscribe()))}}},3342:(rt,Me,H)=>{"use strict";H.d(Me,{b:()=>me});var O=H(7393);function m(){}var te=H(9105);function me(he,ee,ne){return function(oe){return oe.lift(new ve(he,ee,ne))}}class ve{constructor(ee,ne,K){this.nextOrObserver=ee,this.error=ne,this.complete=K}call(ee,ne){return ne.subscribe(new ae(ee,this.nextOrObserver,this.error,this.complete))}}class ae extends O.L{constructor(ee,ne,K,oe){super(ee),this._tapNext=m,this._tapError=m,this._tapComplete=m,this._tapError=K||m,this._tapComplete=oe||m,(0,te.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||m,this._tapError=ne.error||m,this._tapComplete=ne.complete||m)}_next(ee){try{this._tapNext.call(this._context,ee)}catch(ne){return void this.destination.error(ne)}this.destination.next(ee)}_error(ee){try{this._tapError.call(this._context,ee)}catch(ne){return void this.destination.error(ne)}this.destination.error(ee)}_complete(){try{this._tapComplete.call(this._context)}catch(ee){return void this.destination.error(ee)}return this.destination.complete()}}},4635:(rt,Me,H)=>{"use strict";H.d(Me,{T:()=>te});var O=H(3410),m=H(7393);function te(he=ae){return ee=>ee.lift(new me(he))}class me{constructor(ee){this.errorFactory=ee}call(ee,ne){return ne.subscribe(new ve(ee,this.errorFactory))}}class ve extends m.L{constructor(ee,ne){super(ee),this.errorFactory=ne,this.hasValue=!1}_next(ee){this.hasValue=!0,this.destination.next(ee)}_complete(){if(this.hasValue)return this.destination.complete();{let ee;try{ee=this.errorFactory()}catch(ne){ee=ne}this.destination.error(ee)}}}function ae(){return new O.K}},4087:(rt,Me,H)=>{"use strict";H.d(Me,{r:()=>te});var O=H(7574),m=H(5319);function te(me,ve){return new O.y(ae=>{const he=new m.w;let ee=0;return he.add(ve.schedule(function(){ee!==me.length?(ae.next(me[ee++]),ae.closed||he.add(this.schedule())):ae.complete()})),he})}},6465:(rt,Me,H)=>{"use strict";H.d(Me,{o:()=>te});var O=H(5319);class m extends O.w{constructor(ve,ae){super()}schedule(ve,ae=0){return this}}class te extends m{constructor(ve,ae){super(ve,ae),this.scheduler=ve,this.work=ae,this.pending=!1}schedule(ve,ae=0){if(this.closed)return this;this.state=ve;const he=this.id,ee=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(ee,he,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(ee,this.id,ae),this}requestAsyncId(ve,ae,he=0){return setInterval(ve.flush.bind(ve,this),he)}recycleAsyncId(ve,ae,he=0){if(null!==he&&this.delay===he&&!1===this.pending)return ae;clearInterval(ae)}execute(ve,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ve,ae);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,ae){let ee,he=!1;try{this.work(ve)}catch(ne){he=!0,ee=!!ne&&ne||new Error(ne)}if(he)return this.unsubscribe(),ee}_unsubscribe(){const ve=this.id,ae=this.scheduler,he=ae.actions,ee=he.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ee&&he.splice(ee,1),null!=ve&&(this.id=this.recycleAsyncId(ae,ve,null)),this.delay=null}}},6102:(rt,Me,H)=>{"use strict";H.d(Me,{v:()=>m});let O=(()=>{class te{constructor(ve,ae=te.now){this.SchedulerAction=ve,this.now=ae}schedule(ve,ae=0,he){return new this.SchedulerAction(this,ve).schedule(he,ae)}}return te.now=()=>Date.now(),te})();class m extends O{constructor(me,ve=O.now){super(me,()=>m.delegate&&m.delegate!==this?m.delegate.now():ve()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(me,ve=0,ae){return m.delegate&&m.delegate!==this?m.delegate.schedule(me,ve,ae):super.schedule(me,ve,ae)}flush(me){const{actions:ve}=this;if(this.active)return void ve.push(me);let ae;this.active=!0;do{if(ae=me.execute(me.state,me.delay))break}while(me=ve.shift());if(this.active=!1,ae){for(;me=ve.shift();)me.unsubscribe();throw ae}}}},4581:(rt,Me,H)=>{"use strict";H.d(Me,{e:()=>X,E:()=>oe});let O=1;const m=Promise.resolve(),te={};function me(ue){return ue in te&&(delete te[ue],!0)}const ve={setImmediate(ue){const fe=O++;return te[fe]=!0,m.then(()=>me(fe)&&ue()),fe},clearImmediate(ue){me(ue)}};var he=H(6465),ne=H(6102);const oe=new class extends ne.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:De}=this;let Te,Ke=-1,Ie=De.length;fe=fe||De.shift();do{if(Te=fe.execute(fe.state,fe.delay))break}while(++Ke<Ie&&(fe=De.shift()));if(this.active=!1,Te){for(;++Ke<Ie&&(fe=De.shift());)fe.unsubscribe();throw Te}}}(class extends he.o{constructor(fe,De){super(fe,De),this.scheduler=fe,this.work=De}requestAsyncId(fe,De,Te=0){return null!==Te&&Te>0?super.requestAsyncId(fe,De,Te):(fe.actions.push(this),fe.scheduled||(fe.scheduled=ve.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,De,Te=0){if(null!==Te&&Te>0||null===Te&&this.delay>0)return super.recycleAsyncId(fe,De,Te);0===fe.actions.length&&(ve.clearImmediate(De),fe.scheduled=void 0)}}),X=oe},3637:(rt,Me,H)=>{"use strict";H.d(Me,{z:()=>te,P:()=>me});var O=H(6465);const te=new(H(6102).v)(O.o),me=te},7771:(rt,Me,H)=>{"use strict";H.d(Me,{c:()=>ae,N:()=>ve});var O=H(6465),te=H(6102);const ve=new class extends te.v{}(class extends O.o{constructor(ee,ne){super(ee,ne),this.scheduler=ee,this.work=ne}schedule(ee,ne=0){return ne>0?super.schedule(ee,ne):(this.delay=ne,this.state=ee,this.scheduler.flush(this),this)}execute(ee,ne){return ne>0||this.closed?super.execute(ee,ne):this._execute(ee,ne)}requestAsyncId(ee,ne,K=0){return null!==K&&K>0||null===K&&this.delay>0?super.requestAsyncId(ee,ne,K):ee.flush(this)}}),ae=ve},377:(rt,Me,H)=>{"use strict";H.d(Me,{hZ:()=>m});const m="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(rt,Me,H)=>{"use strict";H.d(Me,{L:()=>O});const O="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(rt,Me,H)=>{"use strict";H.d(Me,{b:()=>O});const O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(rt,Me,H)=>{"use strict";H.d(Me,{W:()=>m});const m=(()=>{function te(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return te.prototype=Object.create(Error.prototype),te})()},3410:(rt,Me,H)=>{"use strict";H.d(Me,{K:()=>m});const m=(()=>{function te(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return te.prototype=Object.create(Error.prototype),te})()},7971:(rt,Me,H)=>{"use strict";H.d(Me,{N:()=>m});const m=(()=>{function te(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return te.prototype=Object.create(Error.prototype),te})()},4449:(rt,Me,H)=>{"use strict";function O(m){setTimeout(()=>{throw m},0)}H.d(Me,{z:()=>O})},4487:(rt,Me,H)=>{"use strict";function O(m){return m}H.d(Me,{y:()=>O})},9796:(rt,Me,H)=>{"use strict";H.d(Me,{k:()=>O});const O=Array.isArray||(m=>m&&"number"==typeof m.length)},9489:(rt,Me,H)=>{"use strict";H.d(Me,{z:()=>O});const O=m=>m&&"number"==typeof m.length&&"function"!=typeof m},9105:(rt,Me,H)=>{"use strict";function O(m){return"function"==typeof m}H.d(Me,{m:()=>O})},6561:(rt,Me,H)=>{"use strict";H.d(Me,{k:()=>m});var O=H(9796);function m(te){return!(0,O.k)(te)&&te-parseFloat(te)+1>=0}},1555:(rt,Me,H)=>{"use strict";function O(m){return null!==m&&"object"==typeof m}H.d(Me,{K:()=>O})},4072:(rt,Me,H)=>{"use strict";function O(m){return!!m&&"function"!=typeof m.subscribe&&"function"==typeof m.then}H.d(Me,{t:()=>O})},4869:(rt,Me,H)=>{"use strict";function O(m){return m&&"function"==typeof m.schedule}H.d(Me,{K:()=>O})},7444:(rt,Me,H)=>{"use strict";H.d(Me,{s:()=>oe});var O=H(5015),m=H(4449),me=H(377),ae=H(6554),ee=H(9489),ne=H(4072),K=H(1555);const oe=X=>{if(X&&"function"==typeof X[ae.L])return(X=>ue=>{const fe=X[ae.L]();if("function"!=typeof fe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return fe.subscribe(ue)})(X);if((0,ee.z)(X))return(0,O.V)(X);if((0,ne.t)(X))return(X=>ue=>(X.then(fe=>{ue.closed||(ue.next(fe),ue.complete())},fe=>ue.error(fe)).then(null,m.z),ue))(X);if(X&&"function"==typeof X[me.hZ])return(X=>ue=>{const fe=X[me.hZ]();for(;;){let De;try{De=fe.next()}catch(Te){return ue.error(Te),ue}if(De.done){ue.complete();break}if(ue.next(De.value),ue.closed)break}return"function"==typeof fe.return&&ue.add(()=>{fe.return&&fe.return()}),ue})(X);{const fe=`You provided ${(0,K.K)(X)?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(fe)}}},5015:(rt,Me,H)=>{"use strict";H.d(Me,{V:()=>O});const O=m=>te=>{for(let me=0,ve=m.length;me<ve&&!te.closed;me++)te.next(m[me]);te.complete()}},509:(rt,Me,H)=>{"use strict";H.d(Me,{D:()=>ve});var O=H(7393);class m extends O.L{constructor(he,ee,ne){super(),this.parent=he,this.outerValue=ee,this.outerIndex=ne,this.index=0}_next(he){this.parent.notifyNext(this.outerValue,he,this.outerIndex,this.index++,this)}_error(he){this.parent.notifyError(he,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var te=H(7444),me=H(7574);function ve(ae,he,ee,ne,K=new m(ae,ee,ne)){if(!K.closed)return he instanceof me.y?he.subscribe(K):(0,te.s)(he)(K)}},5038:(rt,Me,H)=>{"use strict";var O=H(8583),m=H(7716);class te extends O.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends te{static makeCurrent(){(0,O.HT)(new me)}onAndCancel(r,i,o){return r.addEventListener(i,o,!1),()=>{r.removeEventListener(i,o,!1)}}dispatchEvent(r,i){r.dispatchEvent(i)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,i){return(i=i||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,i){return"window"===i?window:"document"===i?r:"body"===i?r.body:null}getBaseHref(r){const i=(ve=ve||document.querySelector("base"),ve?ve.getAttribute("href"):null);return null==i?null:function(s){he=he||document.createElement("a"),he.setAttribute("href",s);const r=he.pathname;return"/"===r.charAt(0)?r:`/${r}`}(i)}resetBaseElement(){ve=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return(0,O.Mx)(document.cookie,r)}}let he,ve=null;const ne=new m.OlP("TRANSITION_ID"),oe=[{provide:m.ip1,useFactory:function(s,r,i){return()=>{i.get(m.CZH).donePromise.then(()=>{const o=(0,O.q)(),c=r.querySelectorAll(`style[ng-transition="${s}"]`);for(let d=0;d<c.length;d++)o.remove(c[d])})}},deps:[ne,O.K0,m.zs3],multi:!0}];class X{static init(){(0,m.VLi)(new X)}addToWindow(r){m.dqk.getAngularTestability=(o,c=!0)=>{const d=r.findTestabilityInTree(o,c);if(null==d)throw new Error("Could not find testability for element.");return d},m.dqk.getAllAngularTestabilities=()=>r.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>r.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(o=>{const c=m.dqk.getAllAngularTestabilities();let d=c.length,g=!1;const v=function(w){g=g||w,d--,0==d&&o(g)};c.forEach(function(w){w.whenStable(v)})})}findTestabilityInTree(r,i,o){if(null==i)return null;const c=r.getTestability(i);return null!=c?c:o?(0,O.q)().isShadowRoot(i)?this.findTestabilityInTree(r,i.host,!0):this.findTestabilityInTree(r,i.parentElement,!0):null}}let ue=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();const Le=new m.OlP("EventManagerPlugins");let ke=(()=>{class s{constructor(i,o){this._zone=o,this._eventNameToPlugin=new Map,i.forEach(c=>c.manager=this),this._plugins=i.slice().reverse()}addEventListener(i,o,c){return this._findPluginFor(o).addEventListener(i,o,c)}addGlobalEventListener(i,o,c){return this._findPluginFor(o).addGlobalEventListener(i,o,c)}getZone(){return this._zone}_findPluginFor(i){const o=this._eventNameToPlugin.get(i);if(o)return o;const c=this._plugins;for(let d=0;d<c.length;d++){const g=c[d];if(g.supports(i))return this._eventNameToPlugin.set(i,g),g}throw new Error(`No event manager plugin found for event ${i}`)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(Le),m.LFG(m.R0b))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();class xe{constructor(r){this._doc=r}addGlobalEventListener(r,i,o){const c=(0,O.q)().getGlobalEventTarget(this._doc,r);if(!c)throw new Error(`Unsupported event target ${c} for event ${i}`);return this.addEventListener(c,i,o)}}let Ee=(()=>{class s{constructor(){this._stylesSet=new Set}addStyles(i){const o=new Set;i.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),o.add(c))}),this.onStylesAdded(o)}onStylesAdded(i){}getAllStyles(){return Array.from(this._stylesSet)}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})(),Xe=(()=>{class s extends Ee{constructor(i){super(),this._doc=i,this._hostNodes=new Map,this._hostNodes.set(i.head,[])}_addStylesToHost(i,o,c){i.forEach(d=>{const g=this._doc.createElement("style");g.textContent=d,c.push(o.appendChild(g))})}addHost(i){const o=[];this._addStylesToHost(this._stylesSet,i,o),this._hostNodes.set(i,o)}removeHost(i){const o=this._hostNodes.get(i);o&&o.forEach(et),this._hostNodes.delete(i)}onStylesAdded(i){this._hostNodes.forEach((o,c)=>{this._addStylesToHost(i,c,o)})}ngOnDestroy(){this._hostNodes.forEach(i=>i.forEach(et))}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();function et(s){(0,O.q)().remove(s)}const Pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ct=/%COMP%/g;function nr(s,r,i){for(let o=0;o<r.length;o++){let c=r[o];Array.isArray(c)?nr(s,c,i):(c=c.replace(ct,s),i.push(c))}return i}function kn(s){return r=>{if("__ngUnwrap__"===r)return s;!1===s(r)&&(r.preventDefault(),r.returnValue=!1)}}let Wn=(()=>{class s{constructor(i,o,c){this.eventManager=i,this.sharedStylesHost=o,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new Es(i)}createRenderer(i,o){if(!i||!o)return this.defaultRenderer;switch(o.encapsulation){case m.ifc.Emulated:{let c=this.rendererByCompId.get(o.id);return c||(c=new Ls(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,c)),c.applyToHost(i),c}case 1:case m.ifc.ShadowDom:return new Vs(this.eventManager,this.sharedStylesHost,i,o);default:if(!this.rendererByCompId.has(o.id)){const c=nr(o.id,o.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(ke),m.LFG(Xe),m.LFG(m.AFp))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();class Es{constructor(r){this.eventManager=r,this.data=Object.create(null)}destroy(){}createElement(r,i){return i?document.createElementNS(Pt[i]||i,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,i){r.appendChild(i)}insertBefore(r,i,o){r&&r.insertBefore(i,o)}removeChild(r,i){r&&r.removeChild(i)}selectRootElement(r,i){let o="string"==typeof r?document.querySelector(r):r;if(!o)throw new Error(`The selector "${r}" did not match any elements`);return i||(o.textContent=""),o}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,i,o,c){if(c){i=c+":"+i;const d=Pt[c];d?r.setAttributeNS(d,i,o):r.setAttribute(i,o)}else r.setAttribute(i,o)}removeAttribute(r,i,o){if(o){const c=Pt[o];c?r.removeAttributeNS(c,i):r.removeAttribute(`${o}:${i}`)}else r.removeAttribute(i)}addClass(r,i){r.classList.add(i)}removeClass(r,i){r.classList.remove(i)}setStyle(r,i,o,c){c&(m.JOm.DashCase|m.JOm.Important)?r.style.setProperty(i,o,c&m.JOm.Important?"important":""):r.style[i]=o}removeStyle(r,i,o){o&m.JOm.DashCase?r.style.removeProperty(i):r.style[i]=""}setProperty(r,i,o){r[i]=o}setValue(r,i){r.nodeValue=i}listen(r,i,o){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,i,kn(o)):this.eventManager.addEventListener(r,i,kn(o))}}class Ls extends Es{constructor(r,i,o,c){super(r),this.component=o;const d=nr(c+"-"+o.id,o.styles,[]);i.addStyles(d),this.contentAttr="_ngcontent-%COMP%".replace(ct,c+"-"+o.id),this.hostAttr=function(s){return"_nghost-%COMP%".replace(ct,s)}(c+"-"+o.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,i){const o=super.createElement(r,i);return super.setAttribute(o,this.contentAttr,""),o}}class Vs extends Es{constructor(r,i,o,c){super(r),this.sharedStylesHost=i,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=nr(c.id,c.styles,[]);for(let g=0;g<d.length;g++){const v=document.createElement("style");v.textContent=d[g],this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,i){return super.appendChild(this.nodeOrShadowRoot(r),i)}insertBefore(r,i,o){return super.insertBefore(this.nodeOrShadowRoot(r),i,o)}removeChild(r,i){return super.removeChild(this.nodeOrShadowRoot(r),i)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let Bs=(()=>{class s extends xe{constructor(i){super(i)}supports(i){return!0}addEventListener(i,o,c){return i.addEventListener(o,c,!1),()=>this.removeEventListener(i,o,c)}removeEventListener(i,o,c){return i.removeEventListener(o,c)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();const En=["alt","control","meta","shift"],vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$a={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jl={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let In=(()=>{class s extends xe{constructor(i){super(i)}supports(i){return null!=s.parseEventName(i)}addEventListener(i,o,c){const d=s.parseEventName(o),g=s.eventCallback(d.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,O.q)().onAndCancel(i,d.domEventName,g))}static parseEventName(i){const o=i.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const d=s._normalizeKey(o.pop());let g="";if(En.forEach(w=>{const R=o.indexOf(w);R>-1&&(o.splice(R,1),g+=w+".")}),g+=d,0!=o.length||0===d.length)return null;const v={};return v.domEventName=c,v.fullKey=g,v}static getEventFullKey(i){let o="",c=function(s){let r=s.key;if(null==r){if(r=s.keyIdentifier,null==r)return"Unidentified";r.startsWith("U+")&&(r=String.fromCharCode(parseInt(r.substring(2),16)),3===s.location&&$a.hasOwnProperty(r)&&(r=$a[r]))}return vt[r]||r}(i);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),En.forEach(d=>{d!=c&&jl[d](i)&&(o+=d+".")}),o+=c,o}static eventCallback(i,o,c){return d=>{s.getEventFullKey(d)===i&&c.runGuarded(()=>o(d))}}static _normalizeKey(i){switch(i){case"esc":return"escape";default:return i}}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();const Zn=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:O.bD},{provide:m.g9A,useValue:function(){me.makeCurrent(),X.init()},multi:!0},{provide:O.K0,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),Vt=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:Le,useClass:Bs,multi:!0,deps:[O.K0,m.R0b,m.Lbi]},{provide:Le,useClass:In,multi:!0,deps:[O.K0]},[],{provide:Wn,useClass:Wn,deps:[ke,Xe,m.AFp]},{provide:m.FYo,useExisting:Wn},{provide:Ee,useExisting:Xe},{provide:Xe,useClass:Xe,deps:[O.K0]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:ke,useClass:ke,deps:[Le,m.R0b]},{provide:O.JF,useClass:ue,deps:[]},[]];let Pi=(()=>{class s{constructor(i){if(i)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(i){return{ngModule:s,providers:[{provide:m.AFp,useValue:i.appId},{provide:ne,useExisting:m.AFp},oe]}}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(s,12))},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({providers:Vt,imports:[O.ez,m.hGG]}),s})();"undefined"!=typeof window&&window;var Ur=H(4402),sr=H(7574),to=H(9796),bn=H(8002),wr=H(1555);function dr(s,r){return new sr.y(i=>{const o=s.length;if(0===o)return void i.complete();const c=new Array(o);let d=0,g=0;for(let v=0;v<o;v++){const w=(0,Ur.D)(s[v]);let R=!1;i.add(w.subscribe({next:F=>{R||(R=!0,g++),c[v]=F},error:F=>i.error(F),complete:()=>{d++,(d===o||!R)&&(g===o&&i.next(r?r.reduce((F,j,Q)=>(F[j]=c[Q],F),{}):c),i.complete())}}))}})}let hr=(()=>{class s{constructor(i,o){this._renderer=i,this._elementRef=o,this.onChange=c=>{},this.onTouched=()=>{}}setProperty(i,o){this._renderer.setProperty(this._elementRef.nativeElement,i,o)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(m.Qsj),m.Y36(m.SBq))},s.\u0275dir=m.lG2({type:s}),s})(),sn=(()=>{class s extends hr{}return s.\u0275fac=function(){let r;return function(o){return(r||(r=m.n5z(s)))(o||s)}}(),s.\u0275dir=m.lG2({type:s,features:[m.qOj]}),s})();const Fi=new m.OlP("NgValueAccessor"),No={provide:Fi,useExisting:(0,m.Gpc)(()=>ri),multi:!0},zi=new m.OlP("CompositionEventMode");let ri=(()=>{class s extends hr{constructor(i,o,c){super(i,o),this._compositionMode=c,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const s=(0,O.q)()?(0,O.q)().getUserAgent():"";return/android (\d+)/.test(s.toLowerCase())}())}writeValue(i){this.setProperty("value",null==i?"":i)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(zi,8))},s.\u0275dir=m.lG2({type:s,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){1&i&&m.NdJ("input",function(d){return o._handleInput(d.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(d){return o._compositionEnd(d.target.value)})},features:[m._Bn([No]),m.qOj]}),s})();const Tn=new m.OlP("NgValidators"),Qn=new m.OlP("NgAsyncValidators");function Wl(s){return null!=s}function ql(s){const r=(0,m.QGY)(s)?(0,Ur.D)(s):s;return(0,m.CqO)(r),r}function ed(s){let r={};return s.forEach(i=>{r=null!=i?Object.assign(Object.assign({},r),i):r}),0===Object.keys(r).length?null:r}function Kl(s,r){return r.map(i=>i(s))}function Jc(s){return s.map(r=>function(s){return!s.validate}(r)?r:i=>r.validate(i))}function Fo(s){return null!=s?function(s){if(!s)return null;const r=s.filter(Wl);return 0==r.length?null:function(i){return ed(Kl(i,r))}}(Jc(s)):null}function qa(s){return null!=s?function(s){if(!s)return null;const r=s.filter(Wl);return 0==r.length?null:function(i){return function(...s){if(1===s.length){const r=s[0];if((0,to.k)(r))return dr(r,null);if((0,wr.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){const i=Object.keys(r);return dr(i.map(o=>r[o]),i)}}if("function"==typeof s[s.length-1]){const r=s.pop();return dr(s=1===s.length&&(0,to.k)(s[0])?s[0]:s,null).pipe((0,bn.U)(i=>r(...i)))}return dr(s,null)}(Kl(i,r).map(ql)).pipe((0,bn.U)(ed))}}(Jc(s)):null}function rs(s,r){return null===s?[r]:Array.isArray(s)?[...s,r]:[s,r]}function Zl(s){return s?Array.isArray(s)?s:[s]:[]}function ro(s,r){return Array.isArray(s)?s.includes(r):s===r}function Ka(s,r){const i=Zl(r);return Zl(s).forEach(c=>{ro(i,c)||i.push(c)}),i}function is(s,r){return Zl(r).filter(i=>!ro(s,i))}let si=(()=>{class s{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=Fo(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=qa(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,o){return!!this.control&&this.control.hasError(i,o)}getError(i,o){return this.control?this.control.getError(i,o):null}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=m.lG2({type:s}),s})(),Pr=(()=>{class s extends si{get formDirective(){return null}get path(){return null}}return s.\u0275fac=function(){let r;return function(o){return(r||(r=m.n5z(s)))(o||s)}}(),s.\u0275dir=m.lG2({type:s,features:[m.qOj]}),s})();class Cr extends si{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Yl{constructor(r){this._cd=r}is(r){var i,o,c;return"submitted"===r?!!(null===(i=this._cd)||void 0===i?void 0:i.submitted):!!(null===(c=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===c?void 0:c[r])}}let Kr=(()=>{class s extends Yl{constructor(i){super(i)}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(Cr,2))},s.\u0275dir=m.lG2({type:s,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){2&i&&m.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[m.qOj]}),s})(),io=(()=>{class s extends Yl{constructor(i){super(i)}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(Pr,10))},s.\u0275dir=m.lG2({type:s,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){2&i&&m.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))("ng-submitted",o.is("submitted"))},features:[m.qOj]}),s})();function so(s,r){oo(s,r),r.valueAccessor.writeValue(s.value),function(s,r){r.valueAccessor.registerOnChange(i=>{s._pendingValue=i,s._pendingChange=!0,s._pendingDirty=!0,"change"===s.updateOn&&L(s,r)})}(s,r),function(s,r){const i=(o,c)=>{r.valueAccessor.writeValue(o),c&&r.viewToModelUpdate(o)};s.registerOnChange(i),r._registerOnDestroy(()=>{s._unregisterOnChange(i)})}(s,r),function(s,r){r.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,"blur"===s.updateOn&&s._pendingChange&&L(s,r),"submit"!==s.updateOn&&s.markAsTouched()})}(s,r),function(s,r){if(r.valueAccessor.setDisabledState){const i=o=>{r.valueAccessor.setDisabledState(o)};s.registerOnDisabledChange(i),r._registerOnDestroy(()=>{s._unregisterOnDisabledChange(i)})}}(s,r)}function Cs(s,r){s.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(r)})}function oo(s,r){const i=function(s){return s._rawValidators}(s);null!==r.validator?s.setValidators(rs(i,r.validator)):"function"==typeof i&&s.setValidators([i]);const o=function(s){return s._rawAsyncValidators}(s);null!==r.asyncValidator?s.setAsyncValidators(rs(o,r.asyncValidator)):"function"==typeof o&&s.setAsyncValidators([o]);const c=()=>s.updateValueAndValidity();Cs(r._rawValidators,c),Cs(r._rawAsyncValidators,c)}function L(s,r){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),r.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function dn(s,r){const i=s.indexOf(r);i>-1&&s.splice(i,1)}const Jn="VALID",ss="INVALID",Hn="PENDING",Wi="DISABLED";function Rt(s){return(nd(s)?s.validators:s)||null}function Bo(s){return Array.isArray(s)?Fo(s):s||null}function ao(s,r){return(nd(r)?r.asyncValidators:s)||null}function eu(s){return Array.isArray(s)?qa(s):s||null}function nd(s){return null!=s&&!Array.isArray(s)&&"object"==typeof s}class lo{constructor(r,i){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=r,this._rawAsyncValidators=i,this._composedValidatorFn=Bo(this._rawValidators),this._composedAsyncValidatorFn=eu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(r){this._rawValidators=this._composedValidatorFn=r}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(r){this._rawAsyncValidators=this._composedAsyncValidatorFn=r}get parent(){return this._parent}get valid(){return this.status===Jn}get invalid(){return this.status===ss}get pending(){return this.status==Hn}get disabled(){return this.status===Wi}get enabled(){return this.status!==Wi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(r){this._rawValidators=r,this._composedValidatorFn=Bo(r)}setAsyncValidators(r){this._rawAsyncValidators=r,this._composedAsyncValidatorFn=eu(r)}addValidators(r){this.setValidators(Ka(r,this._rawValidators))}addAsyncValidators(r){this.setAsyncValidators(Ka(r,this._rawAsyncValidators))}removeValidators(r){this.setValidators(is(r,this._rawValidators))}removeAsyncValidators(r){this.setAsyncValidators(is(r,this._rawAsyncValidators))}hasValidator(r){return ro(this._rawValidators,r)}hasAsyncValidator(r){return ro(this._rawAsyncValidators,r)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(r={}){this.touched=!0,this._parent&&!r.onlySelf&&this._parent.markAsTouched(r)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(r=>r.markAllAsTouched())}markAsUntouched(r={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}markAsDirty(r={}){this.pristine=!1,this._parent&&!r.onlySelf&&this._parent.markAsDirty(r)}markAsPristine(r={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}markAsPending(r={}){this.status=Hn,!1!==r.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!r.onlySelf&&this._parent.markAsPending(r)}disable(r={}){const i=this._parentMarkedDirty(r.onlySelf);this.status=Wi,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},r),{onlySelf:!0}))}),this._updateValue(),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},r),{skipPristineCheck:i})),this._onDisabledChange.forEach(o=>o(!0))}enable(r={}){const i=this._parentMarkedDirty(r.onlySelf);this.status=Jn,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},r),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},r),{skipPristineCheck:i})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(r){this._parent&&!r.onlySelf&&(this._parent.updateValueAndValidity(r),r.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(r){this._parent=r}updateValueAndValidity(r={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jn||this.status===Hn)&&this._runAsyncValidator(r.emitEvent)),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!r.onlySelf&&this._parent.updateValueAndValidity(r)}_updateTreeValidity(r={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(r)),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wi:Jn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(r){if(this.asyncValidator){this.status=Hn,this._hasOwnPendingAsyncValidator=!0;const i=ql(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:r})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(r,i={}){this.errors=r,this._updateControlsErrors(!1!==i.emitEvent)}get(r){return function(s,r,i){if(null==r||(Array.isArray(r)||(r=r.split(".")),Array.isArray(r)&&0===r.length))return null;let o=s;return r.forEach(c=>{o=o instanceof co?o.controls.hasOwnProperty(c)?o.controls[c]:null:o instanceof We&&o.at(c)||null}),o}(this,r)}getError(r,i){const o=i?this.get(i):this;return o&&o.errors?o.errors[r]:null}hasError(r,i){return!!this.getError(r,i)}get root(){let r=this;for(;r._parent;)r=r._parent;return r}_updateControlsErrors(r){this.status=this._calculateStatus(),r&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(r)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?Wi:this.errors?ss:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hn)?Hn:this._anyControlsHaveStatus(ss)?ss:Jn}_anyControlsHaveStatus(r){return this._anyControls(i=>i.status===r)}_anyControlsDirty(){return this._anyControls(r=>r.dirty)}_anyControlsTouched(){return this._anyControls(r=>r.touched)}_updatePristine(r={}){this.pristine=!this._anyControlsDirty(),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}_updateTouched(r={}){this.touched=this._anyControlsTouched(),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}_isBoxedValue(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}_registerOnCollectionChange(r){this._onCollectionChange=r}_setUpdateStrategy(r){nd(r)&&null!=r.updateOn&&(this._updateOn=r.updateOn)}_parentMarkedDirty(r){return!r&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Xl extends lo{constructor(r=null,i,o){super(Rt(i),ao(o,i)),this._onChange=[],this._applyFormState(r),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(r,i={}){this.value=this._pendingValue=r,this._onChange.length&&!1!==i.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==i.emitViewToModelChange)),this.updateValueAndValidity(i)}patchValue(r,i={}){this.setValue(r,i)}reset(r=null,i={}){this._applyFormState(r),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(r){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(r){this._onChange.push(r)}_unregisterOnChange(r){dn(this._onChange,r)}registerOnDisabledChange(r){this._onDisabledChange.push(r)}_unregisterOnDisabledChange(r){dn(this._onDisabledChange,r)}_forEachChild(r){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(r){this._isBoxedValue(r)?(this.value=this._pendingValue=r.value,r.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=r}}class co extends lo{constructor(r,i,o){super(Rt(i),ao(o,i)),this.controls=r,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(r,i){return this.controls[r]?this.controls[r]:(this.controls[r]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(r,i,o={}){this.registerControl(r,i),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(r,i={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(r,i,o={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],i&&this.registerControl(r,i),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(r){return this.controls.hasOwnProperty(r)&&this.controls[r].enabled}setValue(r,i={}){this._checkAllValuesPresent(r),Object.keys(r).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(r[o],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(r,i={}){null!=r&&(Object.keys(r).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(r[o],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(r={},i={}){this._forEachChild((o,c)=>{o.reset(r[c],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(r,i,o)=>(r[o]=i instanceof Xl?i.value:i.getRawValue(),r))}_syncPendingControls(){let r=this._reduceChildren(!1,(i,o)=>!!o._syncPendingControls()||i);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_throwIfControlMissing(r){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[r])throw new Error(`Cannot find form control with name: ${r}.`)}_forEachChild(r){Object.keys(this.controls).forEach(i=>{const o=this.controls[i];o&&r(o,i)})}_setUpControls(){this._forEachChild(r=>{r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(r){for(const i of Object.keys(this.controls)){const o=this.controls[i];if(this.contains(i)&&r(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(r,i,o)=>((i.enabled||this.disabled)&&(r[o]=i.value),r))}_reduceChildren(r,i){let o=r;return this._forEachChild((c,d)=>{o=i(o,c,d)}),o}_allControlsDisabled(){for(const r of Object.keys(this.controls))if(this.controls[r].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(r){this._forEachChild((i,o)=>{if(void 0===r[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class We extends lo{constructor(r,i,o){super(Rt(i),ao(o,i)),this.controls=r,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(r){return this.controls[r]}push(r,i={}){this.controls.push(r),this._registerControl(r),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(r,i,o={}){this.controls.splice(r,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(r,i={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(r,i,o={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),i&&(this.controls.splice(r,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(r,i={}){this._checkAllValuesPresent(r),r.forEach((o,c)=>{this._throwIfControlMissing(c),this.at(c).setValue(o,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(r,i={}){null!=r&&(r.forEach((o,c)=>{this.at(c)&&this.at(c).patchValue(o,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(r=[],i={}){this._forEachChild((o,c)=>{o.reset(r[c],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(r=>r instanceof Xl?r.value:r.getRawValue())}clear(r={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:r.emitEvent}))}_syncPendingControls(){let r=this.controls.reduce((i,o)=>!!o._syncPendingControls()||i,!1);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_throwIfControlMissing(r){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(r))throw new Error(`Cannot find form control at index ${r}`)}_forEachChild(r){this.controls.forEach((i,o)=>{r(i,o)})}_updateValue(){this.value=this.controls.filter(r=>r.enabled||this.disabled).map(r=>r.value)}_anyControls(r){return this.controls.some(i=>i.enabled&&r(i))}_setUpControls(){this._forEachChild(r=>this._registerControl(r))}_checkAllValuesPresent(r){this._forEachChild((i,o)=>{if(void 0===r[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const r of this.controls)if(r.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(r){r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)}}const ln={provide:Pr,useExisting:(0,m.Gpc)(()=>tc)},Ln=(()=>Promise.resolve(null))();let tc=(()=>{class s extends Pr{constructor(i,o){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new m.vpe,this.form=new co({},Fo(i),qa(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Ln.then(()=>{const o=this._findContainer(i.path);i.control=o.registerControl(i.name,i.control),so(i.control,i),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Ln.then(()=>{const o=this._findContainer(i.path);o&&o.removeControl(i.name),dn(this._directives,i)})}addFormGroup(i){Ln.then(()=>{const o=this._findContainer(i.path),c=new co({});(function(s,r){oo(s,r)})(c,i),o.registerControl(i.name,c),c.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Ln.then(()=>{const o=this._findContainer(i.path);o&&o.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,o){Ln.then(()=>{this.form.get(i.path).setValue(o)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,function(s,r){s._syncPendingControls(),r.forEach(i=>{const o=i.control;"submit"===o.updateOn&&o._pendingChange&&(i.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(i),!1}onReset(){this.resetForm()}resetForm(i){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(Tn,10),m.Y36(Qn,10))},s.\u0275dir=m.lG2({type:s,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){1&i&&m.NdJ("submit",function(d){return o.onSubmit(d)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([ln]),m.qOj]}),s})();const Vh={provide:Cr,useExisting:(0,m.Gpc)(()=>Uo)},pa=(()=>Promise.resolve(null))();let Uo=(()=>{class s extends Cr{constructor(i,o,c,d){super(),this.control=new Xl,this._registered=!1,this.update=new m.vpe,this._parent=i,this._setValidators(o),this._setAsyncValidators(c),this.valueAccessor=function(s,r){if(!r)return null;let i,o,c;return Array.isArray(r),r.forEach(d=>{d.constructor===ri?i=d:function(s){return Object.getPrototypeOf(s.constructor)===sn}(d)?o=d:c=d}),c||o||i||null}(0,d)}ngOnChanges(i){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in i&&this._updateDisabled(i),function(s,r){if(!s.hasOwnProperty("model"))return!1;const i=s.model;return!!i.isFirstChange()||!Object.is(r,i.currentValue)}(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(s,r){return[...r.path,s]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){so(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(i){pa.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1})})}_updateDisabled(i){const o=i.isDisabled.currentValue,c=""===o||o&&"false"!==o;pa.then(()=>{c&&!this.control.disabled?this.control.disable():!c&&this.control.disabled&&this.control.enable()})}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(Pr,9),m.Y36(Tn,10),m.Y36(Qn,10),m.Y36(Fi,10))},s.\u0275dir=m.lG2({type:s,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([Vh]),m.qOj,m.TTD]}),s})(),jr=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=m.lG2({type:s,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),s})(),id=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({}),s})();const Go={provide:Tn,useExisting:(0,m.Gpc)(()=>sc),multi:!0};let sc=(()=>{class s{constructor(){this._required=!1}get required(){return this._required}set required(i){this._required=null!=i&&!1!==i&&"false"!=`${i}`,this._onChange&&this._onChange()}validate(i){return this.required?function(s){return function(s){return null==s||0===s.length}(s.value)?{required:!0}:null}(i):null}registerOnValidatorChange(i){this._onChange=i}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=m.lG2({type:s,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){2&i&&m.uIk("required",o.required?"":null)},inputs:{required:"required"},features:[m._Bn([Go])]}),s})(),va=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[id]]}),s})(),dd=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[va]}),s})();var bi=H(3507);let hd=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=m.Xpm({type:s,selectors:[["app-home"]],decls:25,vars:0,consts:[[1,"container"],[1,"d-flex","justify-content-center"],[1,"card","mt-3","mb-3",2,"width","30rem"],["src","../../../assets/ahorcado.jpg","width","300px","height","300px","alt","...",1,"card-img-top"],[1,"card-body"],[1,"card-title","font"],[1,"card-text"]],template:function(i,o){1&i&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m._UZ(3,"img",3),m.TgZ(4,"div",4),m.TgZ(5,"h5",5),m._uU(6,"Ahorcado"),m.qZA(),m.TgZ(7,"p",6),m._uU(8,"Some quick example text to build on the card title and make up the bulk of the card's content."),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(9,"div",1),m.TgZ(10,"div",2),m._UZ(11,"img",3),m.TgZ(12,"div",4),m.TgZ(13,"h5",5),m._uU(14,"Mayor y menor"),m.qZA(),m.TgZ(15,"p",6),m._uU(16,"Some quick example text to build on the card title and make up the bulk of the card's content."),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",1),m.TgZ(18,"div",2),m._UZ(19,"img",3),m.TgZ(20,"div",4),m.TgZ(21,"h5",5),m._uU(22,"Preguntados"),m.qZA(),m.TgZ(23,"p",6),m._uU(24,"Some quick example text to build on the card title and make up the bulk of the card's content."),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA())},styles:[""]}),s})();var fn=H(9765),wi=H(5917),$o=H(6682),ho=H(309),x=H(3190),M=H(7771),T=H(5319),P=H(7971),V=H(8858);class $ extends fn.xQ{constructor(r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=r<1?1:r,this._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(r){if(!this.isStopped){const i=this._events;i.push(r),i.length>this._bufferSize&&i.shift()}super.next(r)}nextTimeWindow(r){this.isStopped||(this._events.push(new se(this._getNow(),r)),this._trimBufferThenGetEvents()),super.next(r)}_subscribe(r){const i=this._infiniteTimeWindow,o=i?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,d=o.length;let g;if(this.closed)throw new P.N;if(this.isStopped||this.hasError?g=T.w.EMPTY:(this.observers.push(r),g=new V.W(this,r)),c&&r.add(r=new ho.ht(r,c)),i)for(let v=0;v<d&&!r.closed;v++)r.next(o[v]);else for(let v=0;v<d&&!r.closed;v++)r.next(o[v].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),g}_getNow(){return(this.scheduler||M.c).now()}_trimBufferThenGetEvents(){const r=this._getNow(),i=this._bufferSize,o=this._windowTime,c=this._events,d=c.length;let g=0;for(;g<d&&!(r-c[g].time<o);)g++;return d>i&&(g=Math.max(g,d-i)),g>0&&c.splice(0,g),c}}class se{constructor(r,i){this.time=r,this.value=i}}function pe(s,r,i){let o;return o=s&&"object"==typeof s?s:{bufferSize:s,windowTime:r,refCount:!1,scheduler:i},c=>c.lift(function({bufferSize:s=Number.POSITIVE_INFINITY,windowTime:r=Number.POSITIVE_INFINITY,refCount:i,scheduler:o}){let c,g,d=0,v=!1,w=!1;return function(F){let j;d++,!c||v?(v=!1,c=new $(s,r,o),j=c.subscribe(this),g=F.subscribe({next(Q){c.next(Q)},error(Q){v=!0,c.error(Q)},complete(){w=!0,g=void 0,c.complete()}}),w&&(g=void 0)):j=c.subscribe(this),this.add(()=>{d--,j.unsubscribe(),j=void 0,g&&!w&&i&&0===d&&(g.unsubscribe(),g=void 0,c=void 0)})}}(o))}var at=H(8049);function yt(s,r){return r?(0,x.w)(()=>s,r):(0,x.w)(()=>s)}var zt=H(9673),An=H(5435),Et=H(9126),pr=H(9958);const qi=new m.OlP("angularfire2.auth.use-emulator"),fo=new m.OlP("angularfire2.auth.settings"),Ki=new m.OlP("angularfire2.auth.tenant-id"),Ii=new m.OlP("angularfire2.auth.langugage-code"),Ws=new m.OlP("angularfire2.auth.use-device-language"),ll=new m.OlP("angularfire.auth.persistence"),Ea=(s,r,i,o,c,d,g,v)=>(0,Et.cc)(`${s.name}.auth`,"AngularFireAuth",s.name,()=>{const w=r.runOutsideAngular(()=>s.auth());if(i&&w.useEmulator(...i),o&&(w.tenantId=o),w.languageCode=c,d&&w.useDeviceLanguage(),g)for(const[R,F]of Object.entries(g))w.settings[R]=F;return v&&w.setPersistence(v),w},[i,o,c,d,g,v]);let oc=(()=>{class s{constructor(i,o,c,d,g,v,w,R,F,j,Q){const de=new fn.xQ,ge=(0,wi.of)(void 0).pipe((0,ho.QV)(g.outsideAngular),(0,x.w)(()=>d.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,9083)))),(0,bn.U)(()=>(0,pr.on)(i,d,o)),(0,bn.U)(Ne=>Ea(Ne,d,v,R,F,j,w,Q)),pe({bufferSize:1,refCount:!1}));if((0,O.PM)(c))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,wi.of)(null);else{ge.pipe((0,at.P)()).subscribe();const $e=ge.pipe((0,x.w)(Yt=>Yt.getRedirectResult().then(un=>un,()=>null)),Et.iC,pe({bufferSize:1,refCount:!1})),Mt=ge.pipe((0,x.w)(Yt=>new sr.y(un=>({unsubscribe:d.runOutsideAngular(()=>Yt.onAuthStateChanged(Hi=>un.next(Hi),Hi=>un.error(Hi),()=>un.complete()))})))),qt=ge.pipe((0,x.w)(Yt=>new sr.y(un=>({unsubscribe:d.runOutsideAngular(()=>Yt.onIdTokenChanged(Hi=>un.next(Hi),Hi=>un.error(Hi),()=>un.complete()))}))));this.authState=$e.pipe(yt(Mt),(0,zt.R)(g.outsideAngular),(0,ho.QV)(g.insideAngular)),this.user=$e.pipe(yt(qt),(0,zt.R)(g.outsideAngular),(0,ho.QV)(g.insideAngular)),this.idToken=this.user.pipe((0,x.w)(Yt=>Yt?(0,Ur.D)(Yt.getIdToken()):(0,wi.of)(null))),this.idTokenResult=this.user.pipe((0,x.w)(Yt=>Yt?(0,Ur.D)(Yt.getIdTokenResult()):(0,wi.of)(null))),this.credential=(0,$o.T)($e,de,this.authState.pipe((0,An.h)(Yt=>!Yt))).pipe((0,bn.U)(Yt=>(null==Yt?void 0:Yt.user)?Yt:null),(0,zt.R)(g.outsideAngular),(0,ho.QV)(g.insideAngular))}return(0,pr.pX)(this,ge,d,{spy:{apply:(Ne,$e,Mt)=>{(Ne.startsWith("signIn")||Ne.startsWith("createUser"))&&Mt.then(qt=>de.next(qt))}}})}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(pr.Dh),m.LFG(pr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Et.HU),m.LFG(qi,8),m.LFG(fo,8),m.LFG(Ki,8),m.LFG(Ii,8),m.LFG(Ws,8),m.LFG(ll,8))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),ac=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({providers:[oc]}),s})();var $h=H(3637),fd=H(9761),au=H(7393);function zh(){return s=>s.lift(new Av)}class Av{call(r,i){return i.subscribe(new Sr(r))}}class Sr extends au.L{constructor(r){super(r),this.hasPrev=!1}_next(r){let i;this.hasPrev?i=[this.prev,r]:this.hasPrev=!0,this.prev=r,i&&this.destination.next(i)}}var pd=H(2145);function lc(s,r){return i=>i.lift(new z0(s,r))}class z0{constructor(r,i){this.compare=r,this.keySelector=i}call(r,i){return i.subscribe(new xm(r,this.compare,this.keySelector))}}class xm extends au.L{constructor(r,i,o){super(r),this.keySelector=o,this.hasKey=!1,"function"==typeof i&&(this.compare=i)}compare(r,i){return r===i}_next(r){let i;try{const{keySelector:c}=this;i=c?c(r):r}catch(c){return this.destination.error(c)}let o=!1;if(this.hasKey)try{const{compare:c}=this;o=c(this.key,i)}catch(c){return this.destination.error(c)}else this.hasKey=!0;o||(this.key=i,this.destination.next(r))}}H(9083);var Tp=H(4486),He=H(8239),cc=H(5452),ba=H(6034),po=H(300),J=H(4685),wa=function(s,r){return(wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])})(s,r)};function Gn(s){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&s[r],o=0;if(i)return i.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&o>=s.length&&(s=void 0),{value:s&&s[o++],done:!s}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}var lt,lu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Om=Om||{},Wt=lu||self;function Ti(){}function Ts(s){var r=typeof s;return"array"==(r="object"!=r?r:s?Array.isArray(s)?"array":r:"null")||"object"==r&&"number"==typeof s.length}function cl(s){var r=typeof s;return"object"==r&&null!=s||"function"==r}var qs="closure_uid_"+(1e9*Math.random()>>>0),Nm=0;function Sp(s,r,i){return s.call.apply(s.bind,arguments)}function Mv(s,r,i){if(!s)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,o),s.apply(r,c)}}return function(){return s.apply(r,arguments)}}function ai(s,r,i){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sp:Mv).apply(null,arguments)}function gd(s,r){var i=Array.prototype.slice.call(arguments,1);return function(){var o=i.slice();return o.push.apply(o,arguments),s.apply(this,o)}}function li(s,r){function i(){}i.prototype=r.prototype,s.Z=r.prototype,s.prototype=new i,s.prototype.constructor=s,s.Vb=function(o,c,d){for(var g=Array(arguments.length-2),v=2;v<arguments.length;v++)g[v-2]=arguments[v];return r.prototype[c].apply(o,g)}}function Dr(){this.s=this.s,this.o=this.o}var cu={};Dr.prototype.s=!1,Dr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,qs)&&s[qs]||(s[qs]=++Nm)}(this);delete cu[s]}},Dr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ap=Array.prototype.indexOf?function(s,r){return Array.prototype.indexOf.call(s,r,void 0)}:function(s,r){if("string"==typeof s)return"string"!=typeof r||1!=r.length?-1:s.indexOf(r,0);for(var i=0;i<s.length;i++)if(i in s&&s[i]===r)return i;return-1},md=Array.prototype.forEach?function(s,r,i){Array.prototype.forEach.call(s,r,i)}:function(s,r,i){for(var o=s.length,c="string"==typeof s?s.split(""):s,d=0;d<o;d++)d in c&&r.call(i,c[d],d,s)};function Pm(s){return Array.prototype.concat.apply([],arguments)}function _d(s){var r=s.length;if(0<r){for(var i=Array(r),o=0;o<r;o++)i[o]=s[o];return i}return[]}function yd(s){return/^[\s\xa0]*$/.test(s)}var ci,km=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function Yr(s,r){return-1!=s.indexOf(r)}function dc(s,r){return s<r?-1:s>r?1:0}e:{var Rv=Wt.navigator;if(Rv){var ul=Rv.userAgent;if(ul){ci=ul;break e}}ci=""}function vd(s,r,i){for(var o in s)r.call(i,s[o],o,s)}function hc(s){var r={};for(var i in s)r[i]=s[i];return r}var qh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fm(s,r){for(var i,o,c=1;c<arguments.length;c++){for(i in o=arguments[c])s[i]=o[i];for(var d=0;d<qh.length;d++)i=qh[d],Object.prototype.hasOwnProperty.call(o,i)&&(s[i]=o[i])}}function Ed(s){return Ed[" "](s),s}Ed[" "]=Ti;var Zh,s,Lm=Yr(ci,"Opera"),Ca=Yr(ci,"Trident")||Yr(ci,"MSIE"),dl=Yr(ci,"Edge"),hl=dl||Ca,Rp=Yr(ci,"Gecko")&&!(Yr(ci.toLowerCase(),"webkit")&&!Yr(ci,"Edge"))&&!(Yr(ci,"Trident")||Yr(ci,"MSIE"))&&!Yr(ci,"Edge"),Ar=Yr(ci.toLowerCase(),"webkit")&&!Yr(ci,"Edge");function Kh(){var s=Wt.document;return s?s.documentMode:void 0}e:{var zo="",Ia=(s=ci,Rp?/rv:([^\);]+)(\)|;)/.exec(s):dl?/Edge\/([\d\.]+)/.exec(s):Ca?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Ar?/WebKit\/(\S+)/.exec(s):Lm?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Ia&&(zo=Ia?Ia[1]:""),Ca){var xp=Kh();if(null!=xp&&xp>parseFloat(zo)){Zh=String(xp);break e}}Zh=zo}var Vm={};function Bm(){return r=Vm,Object.prototype.hasOwnProperty.call(r,9)?r[9]:r[9]=function(){for(var s=0,r=km(String(Zh)).split("."),i=km("9").split("."),o=Math.max(r.length,i.length),c=0;0==s&&c<o;c++){var d=r[c]||"",g=i[c]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==d[0].length&&0==g[0].length)break;s=dc(0==d[1].length?0:parseInt(d[1],10),0==g[1].length?0:parseInt(g[1],10))||dc(0==d[2].length,0==g[2].length)||dc(d[2],g[2]),d=d[3],g=g[3]}while(0==s)}return 0<=s}();var r}var Ta=Wt.document&&Ca&&(Kh()||parseInt(Zh,10))||void 0,bd=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var s=!1,r=Object.defineProperty({},"passive",{get:function(){s=!0}});try{Wt.addEventListener("test",Ti,r),Wt.removeEventListener("test",Ti,r)}catch(i){}return s}();function gr(s,r){this.type=s,this.g=this.target=r,this.defaultPrevented=!1}function fl(s,r){if(gr.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var i=this.type=s.type,o=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=r,r=s.relatedTarget){if(Rp){e:{try{Ed(r.nodeName);var c=!0;break e}catch(d){}c=!1}c||(r=null)}}else"mouseover"==i?r=s.fromElement:"mouseout"==i&&(r=s.toElement);this.relatedTarget=r,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:Um[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&fl.Z.h.call(this)}}gr.prototype.h=function(){this.defaultPrevented=!0},li(fl,gr);var Um={2:"touch",3:"pen",4:"mouse"};fl.prototype.h=function(){fl.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var pc="closure_listenable_"+(1e6*Math.random()|0),Qh=0;function jm(s,r,i,o,c){this.listener=s,this.proxy=null,this.src=r,this.type=i,this.capture=!!o,this.ia=c,this.key=++Qh,this.ca=this.fa=!1}function Jh(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function Xh(s){this.src=s,this.g={},this.h=0}function pl(s,r){var i=r.type;if(i in s.g){var d,o=s.g[i],c=Ap(o,r);(d=0<=c)&&Array.prototype.splice.call(o,c,1),d&&(Jh(r),0==s.g[i].length&&(delete s.g[i],s.h--))}}function gc(s,r,i,o){for(var c=0;c<s.length;++c){var d=s[c];if(!d.ca&&d.listener==r&&d.capture==!!i&&d.ia==o)return c}return-1}Xh.prototype.add=function(s,r,i,o,c){var d=s.toString();(s=this.g[d])||(s=this.g[d]=[],this.h++);var g=gc(s,r,o,c);return-1<g?(r=s[g],i||(r.fa=!1)):((r=new jm(r,this.src,d,!!o,c)).fa=i,s.push(r)),r};var wd="closure_lm_"+(1e6*Math.random()|0),Hm={};function Op(s,r,i,o,c){if(o&&o.once)return $m(s,r,i,o,c);if(Array.isArray(r)){for(var d=0;d<r.length;d++)Op(s,r[d],i,o,c);return null}return i=Fp(i),s&&s[pc]?s.N(r,i,cl(o)?!!o.capture:!!o,c):Gm(s,r,i,!1,o,c)}function Gm(s,r,i,o,c,d){if(!r)throw Error("Invalid event type");var g=cl(c)?!!c.capture:!!c,v=gl(s);if(v||(s[wd]=v=new Xh(s)),(i=v.add(r,i,o,g,d)).proxy)return i;if(o=function(){var r=kp;return function s(i){return r.call(s.src,s.listener,i)}}(),i.proxy=o,o.src=s,o.listener=i,s.addEventListener)bd||(c=g),void 0===c&&(c=!1),s.addEventListener(r.toString(),o,c);else if(s.attachEvent)s.attachEvent(Cd(r.toString()),o);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(o)}return i}function $m(s,r,i,o,c){if(Array.isArray(r)){for(var d=0;d<r.length;d++)$m(s,r[d],i,o,c);return null}return i=Fp(i),s&&s[pc]?s.O(r,i,cl(o)?!!o.capture:!!o,c):Gm(s,r,i,!0,o,c)}function Np(s,r,i,o,c){if(Array.isArray(r))for(var d=0;d<r.length;d++)Np(s,r[d],i,o,c);else o=cl(o)?!!o.capture:!!o,i=Fp(i),s&&s[pc]?(s=s.i,(r=String(r).toString())in s.g&&-1<(i=gc(d=s.g[r],i,o,c))&&(Jh(d[i]),Array.prototype.splice.call(d,i,1),0==d.length&&(delete s.g[r],s.h--))):s&&(s=gl(s))&&(r=s.g[r.toString()],s=-1,r&&(s=gc(r,i,o,c)),(i=-1<s?r[s]:null)&&Pp(i))}function Pp(s){if("number"!=typeof s&&s&&!s.ca){var r=s.src;if(r&&r[pc])pl(r.i,s);else{var i=s.type,o=s.proxy;r.removeEventListener?r.removeEventListener(i,o,s.capture):r.detachEvent?r.detachEvent(Cd(i),o):r.addListener&&r.removeListener&&r.removeListener(o),(i=gl(r))?(pl(i,s),0==i.h&&(i.src=null,r[wd]=null)):Jh(s)}}}function Cd(s){return s in Hm?Hm[s]:Hm[s]="on"+s}function kp(s,r){if(s.ca)s=!0;else{r=new fl(r,this);var i=s.listener,o=s.ia||s.src;s.fa&&Pp(s),s=i.call(o,r)}return s}function gl(s){return(s=s[wd])instanceof Xh?s:null}var Id="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fp(s){return"function"==typeof s?s:(s[Id]||(s[Id]=function(r){return s.handleEvent(r)}),s[Id])}function Qr(){Dr.call(this),this.i=new Xh(this),this.P=this,this.I=null}function Hr(s,r){var i,o=s.I;if(o)for(i=[];o;o=o.I)i.push(o);if(s=s.P,o=r.type||r,"string"==typeof r)r=new gr(r,s);else if(r instanceof gr)r.target=r.target||s;else{var c=r;Fm(r=new gr(o,s),c)}if(c=!0,i)for(var d=i.length-1;0<=d;d--){var g=r.g=i[d];c=mc(g,o,!0,r)&&c}if(c=mc(g=r.g=s,o,!0,r)&&c,c=mc(g,o,!1,r)&&c,i)for(d=0;d<i.length;d++)c=mc(g=r.g=i[d],o,!1,r)&&c}function mc(s,r,i,o){if(!(r=s.i.g[String(r)]))return!0;r=r.concat();for(var c=!0,d=0;d<r.length;++d){var g=r[d];if(g&&!g.ca&&g.capture==i){var v=g.listener,w=g.ia||g.src;g.fa&&pl(s.i,g),c=!1!==v.call(w,o)&&c}}return c&&!o.defaultPrevented}li(Qr,Dr),Qr.prototype[pc]=!0,Qr.prototype.removeEventListener=function(s,r,i,o){Np(this,s,r,i,o)},Qr.prototype.M=function(){if(Qr.Z.M.call(this),this.i){var r,s=this.i;for(r in s.g){for(var i=s.g[r],o=0;o<i.length;o++)Jh(i[o]);delete s.g[r],s.h--}}this.I=null},Qr.prototype.N=function(s,r,i,o){return this.i.add(String(s),r,!1,i,o)},Qr.prototype.O=function(s,r,i,o){return this.i.add(String(s),r,!0,i,o)};var ef=Wt.JSON.stringify;function tf(){var s=_c,r=null;return s.g&&(r=s.g,s.g=s.g.next,s.g||(s.h=null),r.next=null),r}var Vp,zm=function(){function s(){this.h=this.g=null}return s.prototype.add=function(r,i){var o=ml.get();o.set(r,i),this.h?this.h.next=o:this.g=o,this.h=o},s}(),ml=new(function(){function s(r,i){this.i=r,this.j=i,this.h=0,this.g=null}return s.prototype.get=function(){var r;return 0<this.h?(this.h--,this.g=(r=this.g).next,r.next=null):r=this.i(),r},s}())(function(){return new xv},function(s){return s.reset()}),xv=function(){function s(){this.next=this.g=this.h=null}return s.prototype.set=function(r,i){this.h=r,this.g=i,this.next=null},s.prototype.reset=function(){this.next=this.g=this.h=null},s}();function Ov(s){Wt.setTimeout(function(){throw s},0)}function Lp(s,r){Vp||function(){var s=Wt.Promise.resolve(void 0);Vp=function(){s.then(Wm)}}(),Si||(Vp(),Si=!0),_c.add(s,r)}var Si=!1,_c=new zm;function Wm(){for(var s;s=tf();){try{s.h.call(s.g)}catch(i){Ov(i)}var r=ml;r.j(s),100>r.h&&(r.h++,s.next=r.g,r.g=s)}Si=!1}function du(s,r){Qr.call(this),this.h=s||1,this.g=r||Wt,this.j=ai(this.kb,this),this.l=Date.now()}function Bp(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function Td(s,r,i){if("function"==typeof s)i&&(s=ai(s,i));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=ai(s.handleEvent,s)}return 2147483647<Number(r)?-1:Wt.setTimeout(s,r||0)}function qm(s){s.g=Td(function(){s.g=null,s.i&&(s.i=!1,qm(s))},s.j);var r=s.h;s.h=null,s.m.apply(null,r)}li(du,Qr),(lt=du.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Hr(this,"tick"),this.da&&(Bp(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){du.Z.M.call(this),Bp(this),delete this.g};var Nv=function(s){function r(i,o){var c=s.call(this)||this;return c.m=i,c.j=o,c.h=null,c.i=!1,c.g=null,c}return function(s,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=s}wa(s,r),s.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}(r,s),r.prototype.l=function(i){this.h=arguments,this.g?this.i=!0:qm(this)},r.prototype.M=function(){s.prototype.M.call(this),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},r}(Dr);function _l(s){Dr.call(this),this.h=s,this.g={}}li(_l,Dr);var Km=[];function Zm(s,r,i,o){Array.isArray(i)||(i&&(Km[0]=i.toString()),i=Km);for(var c=0;c<i.length;c++){var d=Op(r,i[c],o||s.handleEvent,!1,s.h||s);if(!d)break;s.g[d.key]=d}}function nf(s){vd(s.g,function(r,i){this.g.hasOwnProperty(i)&&Pp(r)},s),s.g={}}function rf(){this.g=!0}function Wo(s,r,i,o){s.info(function(){return"XMLHTTP TEXT ("+r+"): "+function(s,r){if(!s.g)return r;if(!r)return null;try{var i=JSON.parse(r);if(i)for(s=0;s<i.length;s++)if(Array.isArray(i[s])){var o=i[s];if(!(2>o.length)){var c=o[1];if(Array.isArray(c)&&!(1>c.length)){var d=c[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<c.length;g++)c[g]=""}}}return ef(i)}catch(v){return r}}(s,i)+(o?" "+o:"")})}_l.prototype.M=function(){_l.Z.M.call(this),nf(this)},_l.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rf.prototype.Aa=function(){this.g=!1},rf.prototype.info=function(){};var Ss={},Up=null;function Sd(){return Up=Up||new Qr}function Dd(s){gr.call(this,Ss.Ma,s)}function hu(s){var r=Sd();Hr(r,new Dd(r,s))}function kv(s,r){gr.call(this,Ss.STAT_EVENT,s),this.stat=r}function as(s){var r=Sd();Hr(r,new kv(r,s))}function yc(s,r){gr.call(this,Ss.Na,s),this.size=r}function vc(s,r){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){s()},r)}Ss.Ma="serverreachability",li(Dd,gr),Ss.STAT_EVENT="statevent",li(kv,gr),Ss.Na="timingevent",li(yc,gr);var fu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function jp(){}function Qm(){}jp.prototype.h=null;var sf,Ad={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Gp(){gr.call(this,"d")}function pu(){gr.call(this,"c")}function yl(){}function gu(s,r,i,o){this.l=s,this.j=r,this.m=i,this.X=o||1,this.V=new _l(this),this.P=Lv,this.W=new du(s=hl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new of}function of(){this.i=null,this.g="",this.h=!1}li(Gp,gr),li(pu,gr),li(yl,jp),yl.prototype.g=function(){return new XMLHttpRequest},yl.prototype.i=function(){return{}},sf=new yl;var Lv=45e3,or={},Md={};function Rd(s,r,i){s.K=1,s.v=Ks(qo(r)),s.s=i,s.U=!0,mu(s,null)}function mu(s,r){s.F=Date.now(),Di(s),s.A=qo(s.v);var i=s.A,o=s.X;Array.isArray(o)||(o=[String(o)]),ye(i.h,"t",o),s.C=0,i=s.l.H,s.h=new of,s.g=a_(s.l,i?r:null,!s.s),0<s.O&&(s.L=new Nv(ai(s.Ia,s,s.g),s.O)),Zm(s.V,s.g,"readystatechange",s.gb),r=s.H?hc(s.H):{},s.s?(s.u||(s.u="POST"),r["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,r)):(s.u="GET",s.g.ea(s.A,s.u,null,r)),hu(1),function(s,r,i,o,c,d){s.info(function(){if(s.g)if(d)for(var g="",v=d.split("&"),w=0;w<v.length;w++){var R=v[w].split("=");if(1<R.length){var F=R[0];R=R[1];var j=F.split("_");g=2<=j.length&&"type"==j[1]?g+(F+"=")+R+"&":g+(F+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+c+"]: "+r+"\n"+i+"\n"+g})}(s.j,s.u,s.A,s.m,s.X,s.s)}function af(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function Jm(s,r,i){for(var c,o=!0;!s.I&&s.C<i.length;){if((c=$p(s,i))==Md){4==r&&(s.o=4,as(14),o=!1),Wo(s.j,s.m,null,"[Incomplete Response]");break}if(c==or){s.o=4,as(15),Wo(s.j,s.m,i,"[Invalid Chunk]"),o=!1;break}Wo(s.j,s.m,c,null),Sa(s,c)}af(s)&&c!=Md&&c!=or&&(s.h.g="",s.C=0),4!=r||0!=i.length||s.h.h||(s.o=1,as(16),o=!1),s.i=s.i&&o,o?0<i.length&&!s.aa&&(s.aa=!0,(r=s.l).g==s&&r.$&&!r.L&&(r.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),s_(r),r.L=!0,as(11))):(Wo(s.j,s.m,i,"[Invalid Chunked Response]"),vl(s),lf(s))}function $p(s,r){var i=s.C,o=r.indexOf("\n",i);return-1==o?Md:(i=Number(r.substring(i,o)),isNaN(i)?or:(o+=1)+i>r.length?Md:(r=r.substr(o,i),s.C=o+i,r))}function Di(s){s.Y=Date.now()+s.P,_u(s,s.P)}function _u(s,r){if(null!=s.B)throw Error("WatchDog timer not null");s.B=vc(ai(s.eb,s),r)}function xd(s){s.B&&(Wt.clearTimeout(s.B),s.B=null)}function lf(s){0==s.l.G||s.I||Xp(s.l,s)}function vl(s){xd(s);var r=s.L;r&&"function"==typeof r.na&&r.na(),s.L=null,Bp(s.W),nf(s.V),s.g&&(r=s.g,s.g=null,r.abort(),r.na())}function Sa(s,r){try{var i=s.l;if(0!=i.G&&(i.g==s||Ic(i.i,s)))if(i.I=s.N,!s.J&&Ic(i.i,s)&&3==i.G){try{var o=i.Ca.g.parse(r)}catch($e){o=null}if(Array.isArray(o)&&3==o.length){var c=o;if(0==c[0])e:if(i.u)i.ta=c[1],0<i.ta-i.U&&37500>c[2]&&i.N&&0==i.A&&!i.v&&(i.v=vc(ai(i.ab,i),6e3));else{if(i.g){if(!(i.g.F+3e3<s.F))break e;o_(i),i_(i)}Dc(i),as(18)}if(1>=Zs(i.i)&&i.ka){try{i.ka()}catch($e){}i.ka=void 0}}else bu(i,11)}else if((s.J||i.g==s)&&o_(i),!yd(r))for(c=i.Ca.g.parse(r),r=0;r<c.length;r++){var d=c[r];if(i.U=d[0],d=d[1],2==i.G)if("c"==d[0]){i.J=d[1],i.la=d[2];var g=d[3];null!=g&&(i.ma=g,i.h.info("VER="+i.ma));var v=d[4];null!=v&&(i.za=v,i.h.info("SVER="+i.za));var w=d[5];null!=w&&"number"==typeof w&&0<w&&(i.K=o=1.5*w,i.h.info("backChannelRequestTimeoutMs_="+o)),o=i;var R=s.g;if(R){var F=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var j=o.i;!j.g&&(Yr(F,"spdy")||Yr(F,"quic")||Yr(F,"h2"))&&(j.j=j.l,j.g=new Set,j.h&&(Wp(j,j.h),j.h=null))}if(o.D){var Q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(o.sa=Q,er(o.F,o.D,Q))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-s.F,i.h.info("Handshake RTT: "+i.O+"ms"));var de=s;if((o=i).oa=Yv(o,o.H?o.la:null,o.W),de.J){Nd(o.i,de);var ge=de,Ne=o.K;Ne&&ge.setTimeout(Ne),ge.B&&(xd(ge),Di(ge)),o.g=de}else qv(o);0<i.l.length&&Qp(i)}else"stop"!=d[0]&&"close"!=d[0]||bu(i,7);else 3==i.G&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?bu(i,7):Gv(i):"noop"!=d[0]&&i.j&&i.j.wa(d),i.A=0)}hu(4)}catch($e){}}function yu(s,r){if(s.forEach&&"function"==typeof s.forEach)s.forEach(r,void 0);else if(Ts(s)||"string"==typeof s)md(s,r,void 0);else{if(s.T&&"function"==typeof s.T)var i=s.T();else if(s.R&&"function"==typeof s.R)i=void 0;else if(Ts(s)||"string"==typeof s){i=[];for(var o=s.length,c=0;c<o;c++)i.push(c)}else for(c in i=[],o=0,s)i[o++]=c;c=(o=function(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(Ts(s)){for(var r=[],i=s.length,o=0;o<i;o++)r.push(s[o]);return r}for(o in r=[],i=0,s)r[i++]=s[o];return r}(s)).length;for(var d=0;d<c;d++)r.call(void 0,o[d],i&&i[d],s)}}function Ec(s,r){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var o=0;o<i;o+=2)this.set(arguments[o],arguments[o+1])}else if(s)if(s instanceof Ec)for(i=s.T(),o=0;o<i.length;o++)this.set(i[o],s.get(i[o]));else for(o in s)this.set(o,s[o])}function mo(s){if(s.i!=s.g.length){for(var r=0,i=0;r<s.g.length;){var o=s.g[r];mr(s.h,o)&&(s.g[i++]=o),r++}s.g.length=i}if(s.i!=s.g.length){var c={};for(i=r=0;r<s.g.length;)mr(c,o=s.g[r])||(s.g[i++]=o,c[o]=1),r++;s.g.length=i}}function mr(s,r){return Object.prototype.hasOwnProperty.call(s,r)}(lt=gu.prototype).setTimeout=function(s){this.P=s},lt.gb=function(s){s=s.target;var r=this.L;r&&3==Sc(s)?r.l():this.Ia(s)},lt.Ia=function(s){try{if(s==this.g)e:{var r=Sc(this.g),i=this.g.Da(),o=this.g.ba();if(!(3>r)&&(3!=r||hl||this.g&&(this.h.h||this.g.ga()||r_(this.g)))){this.I||4!=r||7==i||hu(8==i||0>=o?3:2),xd(this);var c=this.g.ba();this.N=c;t:if(af(this)){var d=r_(this.g);s="";var g=d.length,v=4==Sc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vl(this),lf(this);var w="";break t}this.h.i=new Wt.TextDecoder}for(i=0;i<g;i++)this.h.h=!0,s+=this.h.i.decode(d[i],{stream:v&&i==g-1});d.splice(0,g),this.h.g+=s,this.C=0,w=this.h.g}else w=this.g.ga();if(this.i=200==c,function(s,r,i,o,c,d,g){s.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+c+"]: "+r+"\n"+i+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.X,r,c),this.i){if(this.$&&!this.J){t:{if(this.g){var R,F=this.g;if((R=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yd(R)){var j=R;break t}}j=null}if(!(c=j)){this.i=!1,this.o=3,as(12),vl(this),lf(this);break e}Wo(this.j,this.m,c,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Sa(this,c)}this.U?(Jm(this,r,w),hl&&this.i&&3==r&&(Zm(this.V,this.W,"tick",this.fb),this.W.start())):(Wo(this.j,this.m,w,null),Sa(this,w)),4==r&&vl(this),this.i&&!this.I&&(4==r?Xp(this.l,this):(this.i=!1,Di(this)))}else 400==c&&0<w.indexOf("Unknown SID")?(this.o=3,as(12)):(this.o=0,as(13)),vl(this),lf(this)}}}catch(Q){}},lt.fb=function(){if(this.g){var s=Sc(this.g),r=this.g.ga();this.C<r.length&&(xd(this),Jm(this,s,r),this.i&&4!=s&&Di(this))}},lt.cancel=function(){this.I=!0,vl(this)},lt.eb=function(){this.B=null;var s=Date.now();0<=s-this.Y?(function(s,r){s.info(function(){return"TIMEOUT: "+r})}(this.j,this.A),2!=this.K&&(hu(3),as(17)),vl(this),this.o=2,lf(this)):_u(this,this.Y-s)},(lt=Ec.prototype).R=function(){mo(this);for(var s=[],r=0;r<this.g.length;r++)s.push(this.h[this.g[r]]);return s},lt.T=function(){return mo(this),this.g.concat()},lt.get=function(s,r){return mr(this.h,s)?this.h[s]:r},lt.set=function(s,r){mr(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=r},lt.forEach=function(s,r){for(var i=this.T(),o=0;o<i.length;o++){var c=i[o],d=this.get(c);s.call(r,d,c,this)}};var vu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bc(s,r){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof bc){this.g=void 0!==r?r:s.g,ui(this,s.j),this.s=s.s,Eu(this,s.i),wc(this,s.m),this.l=s.l,r=s.h;var i=new E;i.i=r.i,r.g&&(i.g=new Ec(r.g),i.h=r.h),cf(this,i),this.o=s.o}else s&&(i=String(s).match(vu))?(this.g=!!r,ui(this,i[1]||"",!0),this.s=Cc(i[2]||""),Eu(this,i[3]||"",!0),wc(this,i[4]),this.l=Cc(i[5]||"",!0),cf(this,i[6]||"",!0),this.o=Cc(i[7]||"")):(this.g=!!r,this.h=new E(null,this.g))}function qo(s){return new bc(s)}function ui(s,r,i){s.j=i?Cc(r,!0):r,s.j&&(s.j=s.j.replace(/:$/,""))}function Eu(s,r,i){s.i=i?Cc(r,!0):r}function wc(s,r){if(r){if(r=Number(r),isNaN(r)||0>r)throw Error("Bad port number "+r);s.m=r}else s.m=null}function cf(s,r,i){r instanceof E?(s.h=r,function(s,r){r&&!s.j&&(S(s),s.i=null,s.g.forEach(function(i,o){var c=o.toLowerCase();o!=c&&(U(this,o),ye(this,c,i))},s)),s.j=r}(s.h,s.g)):(i||(r=Da(r,I)),s.h=new E(r,s.g))}function er(s,r,i){s.h.set(r,i)}function Ks(s){return er(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Cc(s,r){return s?r?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Da(s,r,i){return"string"==typeof s?(s=encodeURI(s).replace(r,e_),i&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function e_(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}bc.prototype.toString=function(){var s=[],r=this.j;r&&s.push(Da(r,t_,!0),":");var i=this.i;return(i||"file"==r)&&(s.push("//"),(r=this.s)&&s.push(Da(r,t_,!0),"@"),s.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&s.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&s.push("/"),s.push(Da(i,"/"==i.charAt(0)?n_:Z0,!0))),(i=this.h.toString())&&s.push("?",i),(i=this.o)&&s.push("#",Da(i,y)),s.join("")};var t_=/[#\/\?@]/g,Z0=/[#\?:]/g,n_=/[#\?]/g,I=/[#\?@]/g,y=/#/g;function E(s,r){this.h=this.g=null,this.i=s||null,this.j=!!r}function S(s){s.g||(s.g=new Ec,s.h=0,s.i&&function(s,r){if(s){s=s.split("&");for(var i=0;i<s.length;i++){var o=s[i].indexOf("="),c=null;if(0<=o){var d=s[i].substring(0,o);c=s[i].substring(o+1)}else d=s[i];r(d,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(s.i,function(r,i){s.add(decodeURIComponent(r.replace(/\+/g," ")),i)}))}function U(s,r){S(s),r=Be(s,r),mr(s.g.h,r)&&(s.i=null,s.h-=s.g.get(r).length,mr((s=s.g).h,r)&&(delete s.h[r],s.i--,s.g.length>2*s.i&&mo(s)))}function q(s,r){return S(s),r=Be(s,r),mr(s.g.h,r)}function ye(s,r,i){U(s,r),0<i.length&&(s.i=null,s.g.set(Be(s,r),_d(i)),s.h+=i.length)}function Be(s,r){return r=String(r),s.j&&(r=r.toLowerCase()),r}(lt=E.prototype).add=function(s,r){S(this),this.i=null,s=Be(this,s);var i=this.g.get(s);return i||this.g.set(s,i=[]),i.push(r),this.h+=1,this},lt.forEach=function(s,r){S(this),this.g.forEach(function(i,o){md(i,function(c){s.call(r,c,o,this)},this)},this)},lt.T=function(){S(this);for(var s=this.g.R(),r=this.g.T(),i=[],o=0;o<r.length;o++)for(var c=s[o],d=0;d<c.length;d++)i.push(r[o]);return i},lt.R=function(s){S(this);var r=[];if("string"==typeof s)q(this,s)&&(r=Pm(r,this.g.get(Be(this,s))));else{s=this.g.R();for(var i=0;i<s.length;i++)r=Pm(r,s[i])}return r},lt.set=function(s,r){return S(this),this.i=null,q(this,s=Be(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[r]),this.h+=1,this},lt.get=function(s,r){return s&&0<(s=this.R(s)).length?String(s[0]):r},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],r=this.g.T(),i=0;i<r.length;i++){var o=r[i],c=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var g=c;""!==o[d]&&(g+="="+encodeURIComponent(String(o[d]))),s.push(g)}}return this.i=s.join("&")};var ft=function(r,i){this.h=r,this.g=i};function bt(s){this.l=s||xt,s=Wt.PerformanceNavigationTiming?0<(s=Wt.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ea&&Wt.g.Ea()&&Wt.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xt=10;function Gr(s){return!!s.h||!!s.g&&s.g.size>=s.j}function Zs(s){return s.h?1:s.g?s.g.size:0}function Ic(s,r){return s.h?s.h==r:!!s.g&&s.g.has(r)}function Wp(s,r){s.g?s.g.add(r):s.h=r}function Nd(s,r){s.h&&s.h==r?s.h=null:s.g&&s.g.has(r)&&s.g.delete(r)}function qp(s){var r,i;if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){var o=s.i;try{for(var c=Gn(s.g.values()),d=c.next();!d.done;d=c.next())o=o.concat(d.value.D)}catch(v){r={error:v}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return o}return _d(s.i)}function uf(){}function Kp(){this.g=new uf}function Tc(s,r,i){var o=i||"";try{yu(s,function(c,d){var g=c;cl(c)&&(g=ef(c)),r.push(o+d+"="+encodeURIComponent(g))})}catch(c){throw r.push(o+"type="+encodeURIComponent("_badmap")),c}}function Pd(s,r,i,o,c){try{r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null,c(o)}catch(d){}}function kd(s){this.l=s.$b||null,this.j=s.ib||!1}function Fd(s,r){Qr.call(this),this.D=s,this.u=r,this.m=void 0,this.readyState=df,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt.prototype.cancel=function(){var s,r;if(this.i=qp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var i=Gn(this.g.values()),o=i.next();!o.done;o=i.next())o.value.cancel()}catch(d){s={error:d}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}this.g.clear()}},uf.prototype.stringify=function(s){return Wt.JSON.stringify(s,void 0)},uf.prototype.parse=function(s){return Wt.JSON.parse(s,void 0)},li(kd,jp),kd.prototype.g=function(){return new Fd(this.l,this.j)},kd.prototype.i=function(s){return function(){return s}}({}),li(Fd,Qr);var df=0;function yo(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function Ld(s){s.readyState=4,s.l=null,s.j=null,s.A=null,Vd(s)}function Vd(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(lt=Fd.prototype).open=function(s,r){if(this.readyState!=df)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=r,this.readyState=1,Vd(this)},lt.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var r={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(r.body=s),(this.D||Wt).fetch(new Request(this.B,r)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ld(this)),this.readyState=df},lt.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Vd(this)),this.g&&(this.readyState=3,Vd(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Wt.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yo(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var r=s.value?s.value:new Uint8Array(0);(r=this.A.decode(r,{stream:!s.done}))&&(this.response=this.responseText+=r)}s.done?Ld(this):Vd(this),3==this.readyState&&yo(this)}},lt.Ua=function(s){this.g&&(this.response=this.responseText=s,Ld(this))},lt.Ta=function(s){this.g&&(this.response=s,Ld(this))},lt.ha=function(){this.g&&Ld(this)},lt.setRequestHeader=function(s,r){this.v.append(s,r)},lt.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";for(var s=[],r=this.h.entries(),i=r.next();!i.done;)s.push((i=i.value)[0]+": "+i[1]),i=r.next();return s.join("\r\n")},Object.defineProperty(Fd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var XD=Wt.JSON.parse;function Jr(s){Qr.call(this),this.headers=new Ec,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hf,this.K=this.L=!1}li(Jr,Qr);var hf="",Y0=/^https?$/i,Q0=["POST","PUT"];function Bv(s){return"content-type"==s.toLowerCase()}function Uv(s,r){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=r,s.m=5,eA(s),ff(s)}function eA(s){s.D||(s.D=!0,Hr(s,"complete"),Hr(s,"error"))}function Bd(s){if(s.h&&void 0!==Om&&(!s.C[1]||4!=Sc(s)||2!=s.ba()))if(s.v&&4==Sc(s))Td(s.Fa,0,s);else if(Hr(s,"readystatechange"),4==Sc(s)){s.h=!1;try{var o,r=s.ba();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(o=i)){var c;if(c=0===r){var d=String(s.H).match(vu)[1]||null;if(!d&&Wt.self&&Wt.self.location){var g=Wt.self.location.protocol;d=g.substr(0,g.length-1)}c=!Y0.test(d?d.toLowerCase():"")}o=c}if(o)Hr(s,"complete"),Hr(s,"success");else{s.m=6;try{var v=2<Sc(s)?s.g.statusText:""}catch(w){v=""}s.j=v+" ["+s.ba()+"]",eA(s)}}finally{ff(s)}}}function ff(s,r){if(s.g){jv(s);var i=s.g,o=s.C[0]?Ti:null;s.g=null,s.C=null,r||Hr(s,"ready");try{i.onreadystatechange=o}catch(c){}}}function jv(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(Wt.clearTimeout(s.A),s.A=null)}function Sc(s){return s.g?s.g.readyState:0}function r_(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case hf:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(r){return null}}function Hv(s,r,i){e:{for(o in i){var o=!1;break e}o=!0}o||(i=function(s){var r="";return vd(s,function(i,o){r+=o,r+=":",r+=i,r+="\r\n"}),r}(i),"string"==typeof s?null!=i&&encodeURIComponent(String(i)):er(s,r,i))}function Zp(s,r,i){return i&&i.internalChannelParams&&i.internalChannelParams[s]||r}function J0(s){this.za=0,this.l=[],this.h=new rf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zp("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zp("baseRetryDelayMs",5e3,s),this.$a=Zp("retryDelaySeedMs",1e4,s),this.Ya=Zp("forwardChannelMaxRetries",2,s),this.ra=Zp("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new bt(s&&s.concurrentRequestLimit),this.Ca=new Kp,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function Gv(s){if($v(s),3==s.G){var r=s.V++,i=qo(s.F);er(i,"SID",s.J),er(i,"RID",r),er(i,"TYPE","terminate"),Jp(s,i),(r=new gu(s,s.h,r,void 0)).K=2,r.v=Ks(qo(i)),i=!1,Wt.navigator&&Wt.navigator.sendBeacon&&(i=Wt.navigator.sendBeacon(r.v.toString(),"")),!i&&Wt.Image&&((new Image).src=r.v,i=!0),i||(r.g=a_(r.l,null),r.g.ea(r.v)),r.F=Date.now(),Di(r)}Zv(s)}function i_(s){s.g&&(s_(s),s.g.cancel(),s.g=null)}function $v(s){i_(s),s.u&&(Wt.clearTimeout(s.u),s.u=null),o_(s),s.i.cancel(),s.m&&("number"==typeof s.m&&Wt.clearTimeout(s.m),s.m=null)}function Yp(s,r){s.l.push(new ft(s.Za++,r)),3==s.G&&Qp(s)}function Qp(s){Gr(s.i)||s.m||(s.m=!0,Lp(s.Ha,s),s.C=0)}function X0(s,r){var i;i=r?r.m:s.V++;var o=qo(s.F);er(o,"SID",s.J),er(o,"RID",i),er(o,"AID",s.U),Jp(s,o),s.o&&s.s&&Hv(o,s.o,s.s),i=new gu(s,s.h,i,s.C+1),null===s.o&&(i.H=s.s),r&&(s.l=r.D.concat(s.l)),r=Wv(s,i,1e3),i.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),Wp(s.i,i),Rd(i,o,r)}function Jp(s,r){s.j&&yu({},function(i,o){er(r,o,i)})}function Wv(s,r,i){i=Math.min(s.l.length,i);var o=s.j?ai(s.j.Oa,s.j,s):null;e:for(var c=s.l,d=-1;;){var g=["count="+i];-1==d?0<i?g.push("ofs="+(d=c[0].h)):d=0:g.push("ofs="+d);for(var v=!0,w=0;w<i;w++){var R=c[w].h,F=c[w].g;if(0>(R-=d))d=Math.max(0,c[w].h-100),v=!1;else try{Tc(F,g,"req"+R+"_")}catch(j){o&&o(F)}}if(v){o=g.join("&");break e}}return s=s.l.splice(0,i),r.D=s,o}function qv(s){s.g||s.u||(s.Y=1,Lp(s.Ga,s),s.A=0)}function Dc(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=vc(ai(s.Ga,s),eC(s,s.A)),s.A++,0))}function s_(s){null!=s.B&&(Wt.clearTimeout(s.B),s.B=null)}function Kv(s){s.g=new gu(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var r=qo(s.oa);er(r,"RID","rpc"),er(r,"SID",s.J),er(r,"CI",s.N?"0":"1"),er(r,"AID",s.U),Jp(s,r),er(r,"TYPE","xmlhttp"),s.o&&s.s&&Hv(r,s.o,s.s),s.K&&s.g.setTimeout(s.K);var i=s.g;s=s.la,i.K=1,i.v=Ks(qo(r)),i.s=null,i.U=!0,mu(i,s)}function o_(s){null!=s.v&&(Wt.clearTimeout(s.v),s.v=null)}function Xp(s,r){var i=null;if(s.g==r){o_(s),s_(s),s.g=null;var o=2}else{if(!Ic(s.i,r))return;i=r.D,Nd(s.i,r),o=1}if(s.I=r.N,0!=s.G)if(r.i)if(1==o){i=r.s?r.s.length:0,r=Date.now()-r.F;var c=s.C;Hr(o=Sd(),new yc(o,i,r,c)),Qp(s)}else qv(s);else if(3==(c=r.o)||0==c&&0<s.I||!(1==o&&function(s,r){return!(Zs(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=r.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=vc(ai(s.Ha,s,r),eC(s,s.C)),s.C++,0)))}(s,r)||2==o&&Dc(s)))switch(i&&0<i.length&&(r=s.i,r.i=r.i.concat(i)),c){case 1:bu(s,5);break;case 4:bu(s,10);break;case 3:bu(s,6);break;default:bu(s,2)}}function eC(s,r){var i=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(i*=2),i*r}function bu(s,r){if(s.h.info("Error code "+r),2==r){var i=null;s.j&&(i=null);var o=ai(s.jb,s);i||(i=new bc("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||ui(i,"https"),Ks(i)),function(s,r){var i=new rf;if(Wt.Image){var o=new Image;o.onload=gd(Pd,i,o,"TestLoadImage: loaded",!0,r),o.onerror=gd(Pd,i,o,"TestLoadImage: error",!1,r),o.onabort=gd(Pd,i,o,"TestLoadImage: abort",!1,r),o.ontimeout=gd(Pd,i,o,"TestLoadImage: timeout",!1,r),Wt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=s}else r(!1)}(i.toString(),o)}else as(2);s.G=0,s.j&&s.j.va(r),Zv(s),$v(s)}function Zv(s){s.G=0,s.I=-1,s.j&&((0!=qp(s.i).length||0!=s.l.length)&&(s.i.i.length=0,_d(s.l),s.l.length=0),s.j.ua())}function Yv(s,r,i){var o=function(s){return s instanceof bc?qo(s):new bc(s,void 0)}(i);if(""!=o.i)r&&Eu(o,r+"."+o.i),wc(o,o.m);else{var c=Wt.location;o=function(s,r,i,o){var c=new bc(null,void 0);return s&&ui(c,s),r&&Eu(c,r),i&&wc(c,i),o&&(c.l=o),c}(c.protocol,r?r+"."+c.hostname:c.hostname,+c.port,i)}return s.aa&&vd(s.aa,function(d,g){er(o,g,d)}),i=s.sa,(r=s.D)&&i&&er(o,r,i),er(o,"VER",s.ma),Jp(s,o),o}function a_(s,r,i){if(r&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(r=new Jr(i&&s.Ba&&!s.qa?new kd({ib:!0}):s.qa)).L=s.H,r}function Qv(){}function Ud(){if(Ca&&!(10<=Number(Ta)))throw Error("Environmental error: no available transport.")}function ls(s,r){Qr.call(this),this.g=new J0(r),this.l=s,this.h=r&&r.messageUrlParams||null,s=r&&r.messageHeaders||null,r&&r.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=r&&r.initMessageHeaders||null,r&&r.messageContentType&&(s?s["X-WebChannel-Content-Type"]=r.messageContentType:s={"X-WebChannel-Content-Type":r.messageContentType}),r&&r.ya&&(s?s["X-WebChannel-Client-Profile"]=r.ya:s={"X-WebChannel-Client-Profile":r.ya}),this.g.P=s,(s=r&&r.httpHeadersOverwriteParam)&&!yd(s)&&(this.g.o=s),this.A=r&&r.supportsCrossDomainXhr||!1,this.v=r&&r.sendRawJson||!1,(r=r&&r.httpSessionIdParam)&&!yd(r)&&(this.g.D=r,null!==(s=this.h)&&r in s&&r in(s=this.h)&&delete s[r]),this.j=new jd(this)}function Jv(s){Gp.call(this);var r=s.__sm__;if(r){e:{for(var i in r){s=i;break e}s=void 0}(this.i=s)&&(s=this.i,r=null!==r&&s in r?r[s]:void 0),this.data=r}else this.data=s}function l_(){pu.call(this),this.status=1}function jd(s){this.g=s}(lt=Jr.prototype).ea=function(s,r,i,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);r=r?r.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sf.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:sf),this.g.onreadystatechange=ai(this.Fa,this);try{this.F=!0,this.g.open(r,String(s),!0),this.F=!1}catch(d){return void Uv(this,d)}s=i||"";var c=new Ec(this.headers);o&&yu(o,function(d,g){c.set(g,d)}),o=function(s){e:{for(var r=Bv,i=s.length,o="string"==typeof s?s.split(""):s,c=0;c<i;c++)if(c in o&&r.call(void 0,o[c],c,s)){r=c;break e}r=-1}return 0>r?null:"string"==typeof s?s.charAt(r):s[r]}(c.T()),i=Wt.FormData&&s instanceof Wt.FormData,!(0<=Ap(Q0,r))||o||i||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(d,g){this.g.setRequestHeader(g,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jv(this),0<this.B&&((this.K=function(s){return Ca&&Bm()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.pa,this)):this.A=Td(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(d){Uv(this,d)}},lt.pa=function(){void 0!==Om&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hr(this,"timeout"),this.abort(8))},lt.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,Hr(this,"complete"),Hr(this,"abort"),ff(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ff(this,!0)),Jr.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?Bd(this):this.cb())},lt.cb=function(){Bd(this)},lt.ba=function(){try{return 2<Sc(this)?this.g.status:-1}catch(s){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},lt.Qa=function(s){if(this.g){var r=this.g.responseText;return s&&0==r.indexOf(s)&&(r=r.substring(s.length)),XD(r)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=J0.prototype).ma=8,lt.G=1,lt.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch(r){}},lt.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;var r=new gu(this,this.h,s,void 0),i=this.s;if(this.P&&(i?Fm(i=hc(i),this.P):i=this.P),null===this.o&&(r.H=i),this.ja)e:{for(var o=0,c=0;c<this.l.length;c++){var d=this.l[c];if(void 0===(d="__data__"in d.g&&"string"==typeof(d=d.g.__data__)?d.length:void 0))break;if(4096<(o+=d)){o=c;break e}if(4096===o||c===this.l.length-1){o=c+1;break e}}o=1e3}else o=1e3;o=Wv(this,r,o),er(c=qo(this.F),"RID",s),er(c,"CVER",22),this.D&&er(c,"X-HTTP-Session-Id",this.D),Jp(this,c),this.o&&i&&Hv(c,this.o,i),Wp(this.i,r),this.Ra&&er(c,"TYPE","init"),this.ja?(er(c,"$req",o),er(c,"SID","null"),r.$=!0,Rd(r,c,null)):Rd(r,c,o),this.G=2}}else 3==this.G&&(s?X0(this,s):0==this.l.length||Gr(this.i)||X0(this))},lt.Ga=function(){if(this.u=null,Kv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=vc(ai(this.bb,this),s)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,as(10),i_(this),Kv(this))},lt.ab=function(){null!=this.v&&(this.v=null,i_(this),Dc(this),as(19))},lt.jb=function(s){s?(this.h.info("Successfully pinged google.com"),as(2)):(this.h.info("Failed to ping google.com"),as(1))},(lt=Qv.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},Ud.prototype.g=function(s,r){return new ls(s,r)},li(ls,Qr),ls.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,r=this.l,i=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),Lp(ai(s.hb,s,r))),as(0),s.W=r,s.aa=i||{},s.N=s.X,s.F=Yv(s,null,s.W),Qp(s)},ls.prototype.close=function(){Gv(this.g)},ls.prototype.u=function(s){if("string"==typeof s){var r={};r.__data__=s,Yp(this.g,r)}else this.v?((r={}).__data__=ef(s),Yp(this.g,r)):Yp(this.g,s)},ls.prototype.M=function(){this.g.j=null,delete this.j,Gv(this.g),delete this.g,ls.Z.M.call(this)},li(Jv,Gp),li(l_,pu),li(jd,Qv),jd.prototype.xa=function(){Hr(this.g,"a")},jd.prototype.wa=function(s){Hr(this.g,new Jv(s))},jd.prototype.va=function(s){Hr(this.g,new l_(s))},jd.prototype.ua=function(){Hr(this.g,"b")},Ud.prototype.createWebChannel=Ud.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,fu.NO_ERROR=0,fu.TIMEOUT=8,fu.HTTP_ERROR=6,Fv.COMPLETE="complete",Qm.EventType=Ad,Ad.OPEN="a",Ad.CLOSE="b",Ad.ERROR="c",Ad.MESSAGE="d",Qr.prototype.listen=Qr.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var u_=fu,Xv=Fv,tC=Ss,eE_PROXY=10,eE_NOPROXY=11,tE=kd,Hd=Qm,nE=Jr;class Yi{constructor(r){this.uid=r}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(r){return r.uid===this.uid}}Yi.UNAUTHENTICATED=new Yi(null),Yi.GOOGLE_CREDENTIALS=new Yi("google-credentials-uid"),Yi.FIRST_PARTY=new Yi("first-party-uid"),Yi.MOCK_USER=new Yi("mock-user");let Gd="9.0.1";const wu=new po.Yd("@firebase/firestore");function rE(){return wu.logLevel}function tt(s,...r){if(wu.logLevel<=po.in.DEBUG){const i=r.map(iE);wu.debug(`Firestore (${Gd}): ${s}`,...i)}}function Xr(s,...r){if(wu.logLevel<=po.in.ERROR){const i=r.map(iE);wu.error(`Firestore (${Gd}): ${s}`,...i)}}function eg(s,...r){if(wu.logLevel<=po.in.WARN){const i=r.map(iE);wu.warn(`Firestore (${Gd}): ${s}`,...i)}}function iE(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(i){return s}}function wt(s="Unexpected state"){const r=`FIRESTORE (${Gd}) INTERNAL ASSERTION FAILED: `+s;throw Xr(r),new Error(r)}function $t(s,r){s||wt()}function ot(s,r){return s}const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Error{constructor(r,i){super(i),this.code=r,this.message=i,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gt{constructor(){this.promise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}}class sE{constructor(r,i){this.user=i,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${r}`}}class rC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(r,i){r.enqueueRetryable(()=>i(Yi.UNAUTHENTICATED))}shutdown(){}}class d_{constructor(r){this.token=r,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(r,i){this.changeListener=i,r.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Ma{constructor(r){this.t=r,this.currentUser=Yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(r,i){var o=this;let c=this.i;const d=w=>this.i!==c?(c=this.i,i(w)):Promise.resolve();let g=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new gt,r.enqueueRetryable(()=>d(this.currentUser))};const v=w=>{r.enqueueRetryable((0,He.Z)(function*(){tt("FirebaseCredentialsProvider","Auth detected"),o.auth=w,o.auth.addAuthTokenListener(o.o),yield g.promise,yield d(o.currentUser)}))};this.t.onInit(w=>v(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?v(w):(tt("FirebaseCredentialsProvider","Auth not yet detected"),g.resolve(),g=new gt)}},0),r.enqueueRetryable((0,He.Z)(function*(){0===o.i&&(yield g.promise,yield d(o.currentUser))}))}getToken(){const r=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(o=>this.i!==r?(tt("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?($t("string"==typeof o.accessToken),new sE(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const r=this.auth&&this.auth.getUid();return $t(null===r||"string"==typeof r),new Yi(r)}}class iC{constructor(r,i,o){this.h=r,this.l=i,this.m=o,this.type="FirstParty",this.user=Yi.FIRST_PARTY}get authHeaders(){const r={"X-Goog-AuthUser":this.l},i=this.h.auth.getAuthHeaderValueForFirstParty([]);return i&&(r.Authorization=i),this.m&&(r["X-Goog-Iam-Authorization-Token"]=this.m),r}}class rA{constructor(r,i,o){this.h=r,this.l=i,this.m=o}getToken(){return Promise.resolve(new iC(this.h,this.l,this.m))}start(r,i){r.enqueueRetryable(()=>i(Yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ds{constructor(r,i){this.previousValue=r,i&&(i.sequenceNumberHandler=o=>this.g(o),this.p=o=>i.writeSequenceNumber(o))}g(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.p&&this.p(r),r}}function Ac(s){const r="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(r&&"function"==typeof r.getRandomValues)r.getRandomValues(i);else for(let o=0;o<s;o++)i[o]=Math.floor(256*Math.random());return i}Ds.T=-1;class h_{static I(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/r.length)*r.length;let o="";for(;o.length<20;){const c=Ac(40);for(let d=0;d<c.length;++d)o.length<20&&c[d]<i&&(o+=r.charAt(c[d]%r.length))}return o}}function pn(s,r){return s<r?-1:s>r?1:0}function Cu(s,r,i){return s.length===r.length&&s.every((o,c)=>i(o,r[c]))}function iA(s){return s+"\0"}class Ai{constructor(r,i){if(this.seconds=r,this.nanoseconds=i,i<0)throw new Ze(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Ze(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(r<-62135596800)throw new Ze(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r);if(r>=253402300800)throw new Ze(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r)}static now(){return Ai.fromMillis(Date.now())}static fromDate(r){return Ai.fromMillis(r.getTime())}static fromMillis(r){const i=Math.floor(r/1e3),o=Math.floor(1e6*(r-1e3*i));return new Ai(i,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(r){return this.seconds===r.seconds?pn(this.nanoseconds,r.nanoseconds):pn(this.seconds,r.seconds)}isEqual(r){return r.seconds===this.seconds&&r.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class on{constructor(r){this.timestamp=r}static fromTimestamp(r){return new on(r)}static min(){return new on(new Ai(0,0))}compareTo(r){return this.timestamp._compareTo(r.timestamp)}isEqual(r){return this.timestamp.isEqual(r.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function El(s){let r=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&r++;return r}function bl(s,r){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&r(i,s[i])}function tg(s){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r))return!1;return!0}class $d{constructor(r,i,o){void 0===i?i=0:i>r.length&&wt(),void 0===o?o=r.length-i:o>r.length-i&&wt(),this.segments=r,this.offset=i,this.len=o}get length(){return this.len}isEqual(r){return 0===$d.comparator(this,r)}child(r){const i=this.segments.slice(this.offset,this.limit());return r instanceof $d?r.forEach(o=>{i.push(o)}):i.push(r),this.construct(i)}limit(){return this.offset+this.length}popFirst(r){return this.construct(this.segments,this.offset+(r=void 0===r?1:r),this.length-r)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(r){return this.segments[this.offset+r]}isEmpty(){return 0===this.length}isPrefixOf(r){if(r.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==r.get(i))return!1;return!0}isImmediateParentOf(r){if(this.length+1!==r.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==r.get(i))return!1;return!0}forEach(r){for(let i=this.offset,o=this.limit();i<o;i++)r(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(r,i){const o=Math.min(r.length,i.length);for(let c=0;c<o;c++){const d=r.get(c),g=i.get(c);if(d<g)return-1;if(d>g)return 1}return r.length<i.length?-1:r.length>i.length?1:0}}class Nn extends $d{construct(r,i,o){return new Nn(r,i,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...r){const i=[];for(const o of r){if(o.indexOf("//")>=0)throw new Ze(Fe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);i.push(...o.split("/").filter(c=>c.length>0))}return new Nn(i)}static emptyPath(){return new Nn([])}}const sA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends $d{construct(r,i,o){return new Vi(r,i,o)}static isValidIdentifier(r){return sA.test(r)}canonicalString(){return this.toArray().map(r=>(r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(r)||(r="`"+r+"`"),r)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vi(["__name__"])}static fromServerFormat(r){const i=[];let o="",c=0;const d=()=>{if(0===o.length)throw new Ze(Fe.INVALID_ARGUMENT,`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(o),o=""};let g=!1;for(;c<r.length;){const v=r[c];if("\\"===v){if(c+1===r.length)throw new Ze(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+r);const w=r[c+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ze(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);o+=w,c+=2}else"`"===v?(g=!g,c++):"."!==v||g?(o+=v,c++):(d(),c++)}if(d(),g)throw new Ze(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new Vi(i)}static emptyPath(){return new Vi([])}}class ng{constructor(r){this.fields=r,r.sort(Vi.comparator)}covers(r){for(const i of this.fields)if(i.isPrefixOf(r))return!0;return!1}isEqual(r){return Cu(this.fields,r.fields,(i,o)=>i.isEqual(o))}}class Qi{constructor(r){this.binaryString=r}static fromBase64String(r){const i=atob(r);return new Qi(i)}static fromUint8Array(r){const i=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(r);return new Qi(i)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(r){return pn(this.binaryString,r.binaryString)}isEqual(r){return this.binaryString===r.binaryString}}Qi.EMPTY_BYTE_STRING=new Qi("");const sC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(s){if($t(!!s),"string"==typeof s){let r=0;const i=sC.exec(s);if($t(!!i),i[1]){let c=i[1];c=(c+"000000000").substr(0,9),r=Number(c)}const o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:r}}return{seconds:di(s.seconds),nanos:di(s.nanos)}}function di(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function Iu(s){return"string"==typeof s?Qi.fromBase64String(s):Qi.fromUint8Array(s)}function oC(s){var r,i;return"server_timestamp"===(null===(i=((null===(r=null==s?void 0:s.mapValue)||void 0===r?void 0:r.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function aA(s){const r=s.mapValue.fields.__previous_value__;return oC(r)?aA(r):r}function f_(s){const r=Mc(s.mapValue.fields.__local_write_time__.timestampValue);return new Ai(r.seconds,r.nanos)}function gf(s){return null==s}function oE(s){return 0===s&&1/s==-1/0}function lA(s){return"number"==typeof s&&Number.isInteger(s)&&!oE(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}class Ct{constructor(r){this.path=r}static fromPath(r){return new Ct(Nn.fromString(r))}static fromName(r){return new Ct(Nn.fromString(r).popFirst(5))}hasCollectionId(r){return this.path.length>=2&&this.path.get(this.path.length-2)===r}isEqual(r){return null!==r&&0===Nn.comparator(this.path,r.path)}toString(){return this.path.toString()}static comparator(r,i){return Nn.comparator(r.path,i.path)}static isDocumentKey(r){return r.length%2==0}static fromSegments(r){return new Ct(new Nn(r.slice()))}}function mf(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?oC(s)?4:10:wt()}function Rc(s,r){const i=mf(s);if(i!==mf(r))return!1;switch(i){case 0:return!0;case 1:return s.booleanValue===r.booleanValue;case 4:return f_(s).isEqual(f_(r));case 3:return function(o,c){if("string"==typeof o.timestampValue&&"string"==typeof c.timestampValue&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Mc(o.timestampValue),g=Mc(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,r);case 5:return s.stringValue===r.stringValue;case 6:return c=r,Iu(s.bytesValue).isEqual(Iu(c.bytesValue));case 7:return s.referenceValue===r.referenceValue;case 8:return function(o,c){return di(o.geoPointValue.latitude)===di(c.geoPointValue.latitude)&&di(o.geoPointValue.longitude)===di(c.geoPointValue.longitude)}(s,r);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return di(o.integerValue)===di(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=di(o.doubleValue),g=di(c.doubleValue);return d===g?oE(d)===oE(g):isNaN(d)&&isNaN(g)}return!1}(s,r);case 9:return Cu(s.arrayValue.values||[],r.arrayValue.values||[],Rc);case 10:return function(o,c){const d=o.mapValue.fields||{},g=c.mapValue.fields||{};if(El(d)!==El(g))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(void 0===g[v]||!Rc(d[v],g[v])))return!1;return!0}(s,r);default:return wt()}var c}function p_(s,r){return void 0!==(s.values||[]).find(i=>Rc(i,r))}function rg(s,r){const i=mf(s),o=mf(r);if(i!==o)return pn(i,o);switch(i){case 0:return 0;case 1:return pn(s.booleanValue,r.booleanValue);case 2:return function(c,d){const g=di(c.integerValue||c.doubleValue),v=di(d.integerValue||d.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1}(s,r);case 3:return xc(s.timestampValue,r.timestampValue);case 4:return xc(f_(s),f_(r));case 5:return pn(s.stringValue,r.stringValue);case 6:return function(c,d){const g=Iu(c),v=Iu(d);return g.compareTo(v)}(s.bytesValue,r.bytesValue);case 7:return function(c,d){const g=c.split("/"),v=d.split("/");for(let w=0;w<g.length&&w<v.length;w++){const R=pn(g[w],v[w]);if(0!==R)return R}return pn(g.length,v.length)}(s.referenceValue,r.referenceValue);case 8:return function(c,d){const g=pn(di(c.latitude),di(d.latitude));return 0!==g?g:pn(di(c.longitude),di(d.longitude))}(s.geoPointValue,r.geoPointValue);case 9:return function(c,d){const g=c.values||[],v=d.values||[];for(let w=0;w<g.length&&w<v.length;++w){const R=rg(g[w],v[w]);if(R)return R}return pn(g.length,v.length)}(s.arrayValue,r.arrayValue);case 10:return function(c,d){const g=c.fields||{},v=Object.keys(g),w=d.fields||{},R=Object.keys(w);v.sort(),R.sort();for(let F=0;F<v.length&&F<R.length;++F){const j=pn(v[F],R[F]);if(0!==j)return j;const Q=rg(g[v[F]],w[R[F]]);if(0!==Q)return Q}return pn(v.length,R.length)}(s.mapValue,r.mapValue);default:throw wt()}}function xc(s,r){if("string"==typeof s&&"string"==typeof r&&s.length===r.length)return pn(s,r);const i=Mc(s),o=Mc(r),c=pn(i.seconds,o.seconds);return 0!==c?c:pn(i.nanos,o.nanos)}function ig(s){return aE(s)}function aE(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(o){const c=Mc(o);return`time(${c.seconds},${c.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?Iu(s.bytesValue).toBase64():"referenceValue"in s?Ct.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(r=s.geoPointValue).latitude},${r.longitude})`:"arrayValue"in s?function(o){let c="[",d=!0;for(const g of o.values||[])d?d=!1:c+=",",c+=aE(g);return c+"]"}(s.arrayValue):"mapValue"in s?function(o){const c=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const v of c)g?g=!1:d+=",",d+=`${v}:${aE(o.fields[v])}`;return d+"}"}(s.mapValue):wt();var r}function sg(s,r){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${r.path.canonicalString()}`}}function og(s){return!!s&&"integerValue"in s}function g_(s){return!!s&&"arrayValue"in s}function m_(s){return!!s&&"nullValue"in s}function aC(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ra(s){return!!s&&"mapValue"in s}function _f(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const r={mapValue:{fields:{}}};return bl(s.mapValue.fields,(i,o)=>r.mapValue.fields[i]=_f(o)),r}if(s.arrayValue){const r={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)r.arrayValue.values[i]=_f(s.arrayValue.values[i]);return r}return Object.assign({},s)}class cs{constructor(r){this.value=r}static empty(){return new cs({mapValue:{}})}field(r){if(r.isEmpty())return this.value;{let i=this.value;for(let o=0;o<r.length-1;++o)if(i=(i.mapValue.fields||{})[r.get(o)],!Ra(i))return null;return i=(i.mapValue.fields||{})[r.lastSegment()],i||null}}set(r,i){this.getFieldsMap(r.popLast())[r.lastSegment()]=_f(i)}setAll(r){let i=Vi.emptyPath(),o={},c=[];r.forEach((g,v)=>{if(!i.isImmediateParentOf(v)){const w=this.getFieldsMap(i);this.applyChanges(w,o,c),o={},c=[],i=v.popLast()}g?o[v.lastSegment()]=_f(g):c.push(v.lastSegment())});const d=this.getFieldsMap(i);this.applyChanges(d,o,c)}delete(r){const i=this.field(r.popLast());Ra(i)&&i.mapValue.fields&&delete i.mapValue.fields[r.lastSegment()]}isEqual(r){return Rc(this.value,r.value)}getFieldsMap(r){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let o=0;o<r.length;++o){let c=i.mapValue.fields[r.get(o)];Ra(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},i.mapValue.fields[r.get(o)]=c),i=c}return i.mapValue.fields}applyChanges(r,i,o){bl(i,(c,d)=>r[c]=d);for(const c of o)delete r[c]}clone(){return new cs(_f(this.value))}}function cA(s){const r=[];return bl(s.fields,(i,o)=>{const c=new Vi([i]);if(Ra(o)){const d=cA(o.mapValue).fields;if(0===d.length)r.push(c);else for(const g of d)r.push(c.child(g))}else r.push(c)}),new ng(r)}class ar{constructor(r,i,o,c,d){this.key=r,this.documentType=i,this.version=o,this.data=c,this.documentState=d}static newInvalidDocument(r){return new ar(r,0,on.min(),cs.empty(),0)}static newFoundDocument(r,i,o){return new ar(r,1,i,o,0)}static newNoDocument(r,i){return new ar(r,2,i,cs.empty(),0)}static newUnknownDocument(r,i){return new ar(r,3,i,cs.empty(),2)}convertToFoundDocument(r,i){return this.version=r,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(r){return this.version=r,this.documentType=2,this.data=cs.empty(),this.documentState=0,this}convertToUnknownDocument(r){return this.version=r,this.documentType=3,this.data=cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(r){return r instanceof ar&&this.key.isEqual(r.key)&&this.version.isEqual(r.version)&&this.documentType===r.documentType&&this.documentState===r.documentState&&this.data.isEqual(r.data)}clone(){return new ar(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uA{constructor(r,i=null,o=[],c=[],d=null,g=null,v=null){this.path=r,this.collectionGroup=i,this.orderBy=o,this.filters=c,this.limit=d,this.startAt=g,this.endAt=v,this.A=null}}function lE(s,r=null,i=[],o=[],c=null,d=null,g=null){return new uA(s,r,i,o,c,d,g)}function ag(s){const r=ot(s);if(null===r.A){let i=r.path.canonicalString();null!==r.collectionGroup&&(i+="|cg:"+r.collectionGroup),i+="|f:",i+=r.filters.map(o=>function(s){return s.field.canonicalString()+s.op.toString()+ig(s.value)}(o)).join(","),i+="|ob:",i+=r.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),gf(r.limit)||(i+="|l:",i+=r.limit),r.startAt&&(i+="|lb:",i+=__(r.startAt)),r.endAt&&(i+="|ub:",i+=__(r.endAt)),r.A=i}return r.A}function Tu(s,r){if(s.limit!==r.limit||s.orderBy.length!==r.orderBy.length)return!1;for(let c=0;c<s.orderBy.length;c++)if(!Hx(s.orderBy[c],r.orderBy[c]))return!1;if(s.filters.length!==r.filters.length)return!1;for(let c=0;c<s.filters.length;c++)if((i=s.filters[c]).op!==(o=r.filters[c]).op||!i.field.isEqual(o.field)||!Rc(i.value,o.value))return!1;var i,o;return s.collectionGroup===r.collectionGroup&&!!s.path.isEqual(r.path)&&!!fE(s.startAt,r.startAt)&&fE(s.endAt,r.endAt)}function Oc(s){return Ct.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}class Ji extends class{}{constructor(r,i,o){super(),this.field=r,this.op=i,this.value=o}static create(r,i,o){return r.isKeyField()?"in"===i||"not-in"===i?this.R(r,i,o):new lg(r,i,o):"array-contains"===i?new lC(r,o):"in"===i?new uE(r,o):"not-in"===i?new dE(r,o):"array-contains-any"===i?new cC(r,o):new Ji(r,i,o)}static R(r,i,o){return"in"===i?new vf(r,o):new hA(r,o)}matches(r){const i=r.data.field(this.field);return"!="===this.op?null!==i&&this.P(rg(i,this.value)):null!==i&&mf(this.value)===mf(i)&&this.P(rg(i,this.value))}P(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return 0===r;case"!=":return 0!==r;case">":return r>0;case">=":return r>=0;default:return wt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lg extends Ji{constructor(r,i,o){super(r,i,o),this.key=Ct.fromName(o.referenceValue)}matches(r){const i=Ct.comparator(r.key,this.key);return this.P(i)}}class vf extends Ji{constructor(r,i){super(r,"in",i),this.keys=cE(0,i)}matches(r){return this.keys.some(i=>i.isEqual(r.key))}}class hA extends Ji{constructor(r,i){super(r,"not-in",i),this.keys=cE(0,i)}matches(r){return!this.keys.some(i=>i.isEqual(r.key))}}function cE(s,r){var i;return((null===(i=r.arrayValue)||void 0===i?void 0:i.values)||[]).map(o=>Ct.fromName(o.referenceValue))}class lC extends Ji{constructor(r,i){super(r,"array-contains",i)}matches(r){const i=r.data.field(this.field);return g_(i)&&p_(i.arrayValue,this.value)}}class uE extends Ji{constructor(r,i){super(r,"in",i)}matches(r){const i=r.data.field(this.field);return null!==i&&p_(this.value.arrayValue,i)}}class dE extends Ji{constructor(r,i){super(r,"not-in",i)}matches(r){if(p_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=r.data.field(this.field);return null!==i&&!p_(this.value.arrayValue,i)}}class cC extends Ji{constructor(r,i){super(r,"array-contains-any",i)}matches(r){const i=r.data.field(this.field);return!(!g_(i)||!i.arrayValue.values)&&i.arrayValue.values.some(o=>p_(this.value.arrayValue,o))}}class Su{constructor(r,i){this.position=r,this.before=i}}function __(s){return`${s.before?"b":"a"}:${s.position.map(r=>ig(r)).join(",")}`}class zd{constructor(r,i="asc"){this.field=r,this.dir=i}}function Hx(s,r){return s.dir===r.dir&&s.field.isEqual(r.field)}function hE(s,r,i){let o=0;for(let c=0;c<s.position.length;c++){const d=r[c],g=s.position[c];if(o=d.field.isKeyField()?Ct.comparator(Ct.fromName(g.referenceValue),i.key):rg(g,i.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return s.before?o<=0:o<0}function fE(s,r){if(null===s)return null===r;if(null===r||s.before!==r.before||s.position.length!==r.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Rc(s.position[i],r.position[i]))return!1;return!0}class Nc{constructor(r,i=null,o=[],c=[],d=null,g="F",v=null,w=null){this.path=r,this.collectionGroup=i,this.explicitOrderBy=o,this.filters=c,this.limit=d,this.limitType=g,this.startAt=v,this.endAt=w,this.V=null,this.S=null}}function pE(s,r,i,o,c,d,g,v){return new Nc(s,r,i,o,c,d,g,v)}function Ef(s){return new Nc(s)}function y_(s){return!gf(s.limit)&&"F"===s.limitType}function us(s){return!gf(s.limit)&&"L"===s.limitType}function gE(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function mE(s){for(const r of s.filters)if(r.v())return r.field;return null}function uC(s){return null!==s.collectionGroup}function cg(s){const r=ot(s);if(null===r.V){r.V=[];const i=mE(r),o=gE(r);if(null!==i&&null===o)i.isKeyField()||r.V.push(new zd(i)),r.V.push(new zd(Vi.keyField(),"asc"));else{let c=!1;for(const d of r.explicitOrderBy)r.V.push(d),d.field.isKeyField()&&(c=!0);if(!c){const d=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";r.V.push(new zd(Vi.keyField(),d))}}}return r.V}function vo(s){const r=ot(s);if(!r.S)if("F"===r.limitType)r.S=lE(r.path,r.collectionGroup,cg(r),r.filters,r.limit,r.startAt,r.endAt);else{const i=[];for(const d of cg(r))i.push(new zd(d.field,"desc"===d.dir?"asc":"desc"));const o=r.endAt?new Su(r.endAt.position,!r.endAt.before):null,c=r.startAt?new Su(r.startAt.position,!r.startAt.before):null;r.S=lE(r.path,r.collectionGroup,i,r.filters,r.limit,o,c)}return r.S}function fA(s,r,i){return new Nc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),r,i,s.startAt,s.endAt)}function ug(s,r){return Tu(vo(s),vo(r))&&s.limitType===r.limitType}function v_(s){return`${ag(vo(s))}|lt:${s.limitType}`}function E_(s){return`Query(target=${function(s){let r=s.path.canonicalString();return null!==s.collectionGroup&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map(i=>{return`${(o=i).field.canonicalString()} ${o.op} ${ig(o.value)}`;var o}).join(", ")}]`),gf(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),s.startAt&&(r+=", startAt: "+__(s.startAt)),s.endAt&&(r+=", endAt: "+__(s.endAt)),`Target(${r})`}(vo(s))}; limitType=${s.limitType})`}function dg(s,r){return r.isFoundDocument()&&function(i,o){const c=o.key.path;return null!==i.collectionGroup?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Ct.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)}(s,r)&&function(i,o){for(const c of i.explicitOrderBy)if(!c.field.isKeyField()&&null===o.data.field(c.field))return!1;return!0}(s,r)&&function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0}(s,r)&&(o=r,!((i=s).startAt&&!hE(i.startAt,cg(i),o)||i.endAt&&hE(i.endAt,cg(i),o)));var i,o}function dC(s){return(r,i)=>{let o=!1;for(const c of cg(s)){const d=pA(c,r,i);if(0!==d)return d;o=o||c.field.isKeyField()}return 0}}function pA(s,r,i){const o=s.field.isKeyField()?Ct.comparator(r.key,i.key):function(c,d,g){const v=d.data.field(c),w=g.data.field(c);return null!==v&&null!==w?rg(v,w):wt()}(s.field,r,i);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return wt()}}function _E(s,r){if(s.D){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oE(r)?"-0":r}}function hC(s){return{integerValue:""+s}}function yE(s,r){return lA(r)?hC(r):_E(s,r)}class b_{constructor(){this._=void 0}}function gA(s,r,i){return s instanceof bf?function(o,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&(d.fields.__previous_value__=c),{mapValue:d}}(i,r):s instanceof ds?w_(s,r):s instanceof Wd?pC(s,r):function(o,c){const d=vE(o,c),g=EE(d)+EE(o.C);return og(d)&&og(o.C)?hC(g):_E(o.N,g)}(s,r)}function fC(s,r,i){return s instanceof ds?w_(s,r):s instanceof Wd?pC(s,r):i}function vE(s,r){return s instanceof hg?og(i=r)||(o=i)&&"doubleValue"in o?r:{integerValue:0}:null;var o,i}class bf extends b_{}class ds extends b_{constructor(r){super(),this.elements=r}}function w_(s,r){const i=gC(r);for(const o of s.elements)i.some(c=>Rc(c,o))||i.push(o);return{arrayValue:{values:i}}}class Wd extends b_{constructor(r){super(),this.elements=r}}function pC(s,r){let i=gC(r);for(const o of s.elements)i=i.filter(c=>!Rc(c,o));return{arrayValue:{values:i}}}class hg extends b_{constructor(r,i){super(),this.N=r,this.C=i}}function EE(s){return di(s.integerValue||s.doubleValue)}function gC(s){return g_(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class fg{constructor(r,i){this.field=r,this.transform=i}}class bE{constructor(r,i){this.version=r,this.transformResults=i}}class hi{constructor(r,i){this.updateTime=r,this.exists=i}static none(){return new hi}static exists(r){return new hi(void 0,r)}static updateTime(r){return new hi(r)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(r){return this.exists===r.exists&&(this.updateTime?!!r.updateTime&&this.updateTime.isEqual(r.updateTime):!r.updateTime)}}function C_(s,r){return void 0!==s.updateTime?r.isFoundDocument()&&r.version.isEqual(s.updateTime):void 0===s.exists||s.exists===r.isFoundDocument()}class qd{}function wE(s,r,i){s instanceof pg?function(o,c,d){const g=o.value.clone(),v=_A(o.fieldTransforms,c,d.transformResults);g.setAll(v),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,r,i):s instanceof Du?function(o,c,d){if(!C_(o.precondition,c))return void c.convertToUnknownDocument(d.version);const g=_A(o.fieldTransforms,c,d.transformResults),v=c.data;v.setAll(T_(o)),v.setAll(g),c.convertToFoundDocument(d.version,v).setHasCommittedMutations()}(s,r,i):r.convertToNoDocument(i.version).setHasCommittedMutations()}function CE(s,r,i){var c;s instanceof pg?function(o,c,d){if(!C_(o.precondition,c))return;const g=o.value.clone(),v=mC(o.fieldTransforms,d,c);g.setAll(v),c.convertToFoundDocument(TE(c),g).setHasLocalMutations()}(s,r,i):s instanceof Du?function(o,c,d){if(!C_(o.precondition,c))return;const g=mC(o.fieldTransforms,d,c),v=c.data;v.setAll(T_(o)),v.setAll(g),c.convertToFoundDocument(TE(c),v).setHasLocalMutations()}(s,r,i):C_(s.precondition,c=r)&&c.convertToNoDocument(on.min())}function IE(s,r){let i=null;for(const o of s.fieldTransforms){const c=r.data.field(o.field),d=vE(o.transform,c||null);null!=d&&(null==i&&(i=cs.empty()),i.set(o.field,d))}return i||null}function I_(s,r){return s.type===r.type&&!!s.key.isEqual(r.key)&&!!s.precondition.isEqual(r.precondition)&&(o=r.fieldTransforms,!!(void 0===(i=s.fieldTransforms)&&void 0===o||i&&o&&Cu(i,o,(c,d)=>function(s,r){return s.field.isEqual(r.field)&&(o=r.transform,(i=s.transform)instanceof ds&&o instanceof ds||i instanceof Wd&&o instanceof Wd?Cu(i.elements,o.elements,Rc):i instanceof hg&&o instanceof hg?Rc(i.C,o.C):i instanceof bf&&o instanceof bf);var i,o}(c,d))))&&(0===s.type?s.value.isEqual(r.value):1!==s.type||s.data.isEqual(r.data)&&s.fieldMask.isEqual(r.fieldMask));var i,o}function TE(s){return s.isFoundDocument()?s.version:on.min()}class pg extends qd{constructor(r,i,o,c=[]){super(),this.key=r,this.value=i,this.precondition=o,this.fieldTransforms=c,this.type=0}}class Du extends qd{constructor(r,i,o,c,d=[]){super(),this.key=r,this.data=i,this.fieldMask=o,this.precondition=c,this.fieldTransforms=d,this.type=1}}function T_(s){const r=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const o=s.data.field(i);r.set(i,o)}}),r}function _A(s,r,i){const o=new Map;$t(s.length===i.length);for(let c=0;c<i.length;c++){const d=s[c],g=d.transform,v=r.data.field(d.field);o.set(d.field,fC(g,v,i[c]))}return o}function mC(s,r,i){const o=new Map;for(const c of s){const d=c.transform,g=i.data.field(c.field);o.set(c.field,gA(d,g,r))}return o}class wf extends qd{constructor(r,i){super(),this.key=r,this.precondition=i,this.type=2,this.fieldTransforms=[]}}class S_ extends qd{constructor(r,i){super(),this.key=r,this.precondition=i,this.type=3,this.fieldTransforms=[]}}class _C{constructor(r){this.count=r}}var ei,Cn;function wl(s){switch(s){case Fe.OK:return wt();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0;default:return wt()}}function gg(s){if(void 0===s)return Xr("GRPC error has no .code"),Fe.UNKNOWN;switch(s){case ei.OK:return Fe.OK;case ei.CANCELLED:return Fe.CANCELLED;case ei.UNKNOWN:return Fe.UNKNOWN;case ei.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case ei.INTERNAL:return Fe.INTERNAL;case ei.UNAVAILABLE:return Fe.UNAVAILABLE;case ei.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case ei.NOT_FOUND:return Fe.NOT_FOUND;case ei.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case ei.ABORTED:return Fe.ABORTED;case ei.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case ei.DATA_LOSS:return Fe.DATA_LOSS;default:return wt()}}(Cn=ei||(ei={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class Mi{constructor(r,i){this.comparator=r,this.root=i||hs.EMPTY}insert(r,i){return new Mi(this.comparator,this.root.insert(r,i,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(r){return new Mi(this.comparator,this.root.remove(r,this.comparator).copy(null,null,hs.BLACK,null,null))}get(r){let i=this.root;for(;!i.isEmpty();){const o=this.comparator(r,i.key);if(0===o)return i.value;o<0?i=i.left:o>0&&(i=i.right)}return null}indexOf(r){let i=0,o=this.root;for(;!o.isEmpty();){const c=this.comparator(r,o.key);if(0===c)return i+o.left.size;c<0?o=o.left:(i+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(r){return this.root.inorderTraversal(r)}forEach(r){this.inorderTraversal((i,o)=>(r(i,o),!1))}toString(){const r=[];return this.inorderTraversal((i,o)=>(r.push(`${i}:${o}`),!1)),`{${r.join(", ")}}`}reverseTraversal(r){return this.root.reverseTraversal(r)}getIterator(){return new D_(this.root,null,this.comparator,!1)}getIteratorFrom(r){return new D_(this.root,r,this.comparator,!1)}getReverseIterator(){return new D_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(r){return new D_(this.root,r,this.comparator,!0)}}class D_{constructor(r,i,o,c){this.isReverse=c,this.nodeStack=[];let d=1;for(;!r.isEmpty();)if(d=i?o(r.key,i):1,c&&(d*=-1),d<0)r=this.isReverse?r.left:r.right;else{if(0===d){this.nodeStack.push(r);break}this.nodeStack.push(r),r=this.isReverse?r.right:r.left}}getNext(){let r=this.nodeStack.pop();const i={key:r.key,value:r.value};if(this.isReverse)for(r=r.left;!r.isEmpty();)this.nodeStack.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack.push(r),r=r.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const r=this.nodeStack[this.nodeStack.length-1];return{key:r.key,value:r.value}}}class hs{constructor(r,i,o,c,d){this.key=r,this.value=i,this.color=null!=o?o:hs.RED,this.left=null!=c?c:hs.EMPTY,this.right=null!=d?d:hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(r,i,o,c,d){return new hs(null!=r?r:this.key,null!=i?i:this.value,null!=o?o:this.color,null!=c?c:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,i,o){let c=this;const d=o(r,c.key);return c=d<0?c.copy(null,null,null,c.left.insert(r,i,o),null):0===d?c.copy(null,i,null,null,null):c.copy(null,null,null,null,c.right.insert(r,i,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return hs.EMPTY;let r=this;return r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.removeMin(),null),r.fixUp()}remove(r,i){let o,c=this;if(i(r,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(r,i),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===i(r,c.key)){if(c.right.isEmpty())return hs.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(r,i))}return c.fixUp()}isRed(){return this.color}fixUp(){let r=this;return r.right.isRed()&&!r.left.isRed()&&(r=r.rotateLeft()),r.left.isRed()&&r.left.left.isRed()&&(r=r.rotateRight()),r.left.isRed()&&r.right.isRed()&&(r=r.colorFlip()),r}moveRedLeft(){let r=this.colorFlip();return r.right.left.isRed()&&(r=r.copy(null,null,null,null,r.right.rotateRight()),r=r.rotateLeft(),r=r.colorFlip()),r}moveRedRight(){let r=this.colorFlip();return r.left.left.isRed()&&(r=r.rotateRight(),r=r.colorFlip()),r}rotateLeft(){const r=this.copy(null,null,hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight(){const r=this.copy(null,null,hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip(){const r=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,i)}checkMaxDepth(){const r=this.check();return Math.pow(2,r)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const r=this.left.check();if(r!==this.right.check())throw wt();return r+(this.isRed()?0:1)}}hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1,hs.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(s,r,i,o,c){return this}insert(s,r,i){return new hs(s,r)}remove(s,r){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tr{constructor(r){this.comparator=r,this.data=new Mi(this.comparator)}has(r){return null!==this.data.get(r)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(r){return this.data.indexOf(r)}forEach(r){this.data.inorderTraversal((i,o)=>(r(i),!1))}forEachInRange(r,i){const o=this.data.getIteratorFrom(r[0]);for(;o.hasNext();){const c=o.getNext();if(this.comparator(c.key,r[1])>=0)return;i(c.key)}}forEachWhile(r,i){let o;for(o=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();o.hasNext();)if(!r(o.getNext().key))return}firstAfterOrEqual(r){const i=this.data.getIteratorFrom(r);return i.hasNext()?i.getNext().key:null}getIterator(){return new SE(this.data.getIterator())}getIteratorFrom(r){return new SE(this.data.getIteratorFrom(r))}add(r){return this.copy(this.data.remove(r).insert(r,!0))}delete(r){return this.has(r)?this.copy(this.data.remove(r)):this}isEmpty(){return this.data.isEmpty()}unionWith(r){let i=this;return i.size<r.size&&(i=r,r=this),r.forEach(o=>{i=i.add(o)}),i}isEqual(r){if(!(r instanceof tr)||this.size!==r.size)return!1;const i=this.data.getIterator(),o=r.data.getIterator();for(;i.hasNext();){const c=i.getNext().key,d=o.getNext().key;if(0!==this.comparator(c,d))return!1}return!0}toArray(){const r=[];return this.forEach(i=>{r.push(i)}),r}toString(){const r=[];return this.forEach(i=>r.push(i)),"SortedSet("+r.toString()+")"}copy(r){const i=new tr(this.comparator);return i.data=r,i}}class SE{constructor(r){this.iter=r}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const mg=new Mi(Ct.comparator);function fs(){return mg}const yA=new Mi(Ct.comparator);function _g(){return yA}const yC=new Mi(Ct.comparator);function vC(){return yC}const EC=new tr(Ct.comparator);function Vn(...s){let r=EC;for(const i of s)r=r.add(i);return r}const DE=new tr(pn);function A_(){return DE}class yg{constructor(r,i,o,c,d){this.snapshotVersion=r,this.targetChanges=i,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(r,i){const o=new Map;return o.set(r,Cf.createSynthesizedTargetChangeForCurrentChange(r,i)),new yg(on.min(),o,A_(),fs(),Vn())}}class Cf{constructor(r,i,o,c,d){this.resumeToken=r,this.current=i,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(r,i){return new Cf(Qi.EMPTY_BYTE_STRING,i,Vn(),Vn(),Vn())}}class Pc{constructor(r,i,o,c){this.k=r,this.removedTargetIds=i,this.key=o,this.$=c}}class AE{constructor(r,i){this.targetId=r,this.O=i}}class bC{constructor(r,i,o=Qi.EMPTY_BYTE_STRING,c=null){this.state=r,this.targetIds=i,this.resumeToken=o,this.cause=c}}class wC{constructor(){this.F=0,this.M=IC(),this.L=Qi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(r){r.approximateByteSize()>0&&(this.U=!0,this.L=r)}W(){let r=Vn(),i=Vn(),o=Vn();return this.M.forEach((c,d)=>{switch(d){case 0:r=r.add(c);break;case 2:i=i.add(c);break;case 1:o=o.add(c);break;default:wt()}}),new Cf(this.L,this.B,r,i,o)}G(){this.U=!1,this.M=IC()}H(r,i){this.U=!0,this.M=this.M.insert(r,i)}J(r){this.U=!0,this.M=this.M.remove(r)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class If{constructor(r){this.tt=r,this.et=new Map,this.nt=fs(),this.st=CC(),this.it=new tr(pn)}rt(r){for(const i of r.k)r.$&&r.$.isFoundDocument()?this.ot(i,r.$):this.at(i,r.key,r.$);for(const i of r.removedTargetIds)this.at(i,r.key,r.$)}ct(r){this.forEachTarget(r,i=>{const o=this.ut(i);switch(r.state){case 0:this.ht(i)&&o.j(r.resumeToken);break;case 1:o.X(),o.q||o.G(),o.j(r.resumeToken);break;case 2:o.X(),o.q||this.removeTarget(i);break;case 3:this.ht(i)&&(o.Z(),o.j(r.resumeToken));break;case 4:this.ht(i)&&(this.lt(i),o.j(r.resumeToken));break;default:wt()}})}forEachTarget(r,i){r.targetIds.length>0?r.targetIds.forEach(i):this.et.forEach((o,c)=>{this.ht(c)&&i(c)})}ft(r){const i=r.targetId,o=r.O.count,c=this.dt(i);if(c){const d=c.target;if(Oc(d))if(0===o){const g=new Ct(d.path);this.at(i,g,ar.newNoDocument(g,on.min()))}else $t(1===o);else this.wt(i)!==o&&(this.lt(i),this.it=this.it.add(i))}}_t(r){const i=new Map;this.et.forEach((d,g)=>{const v=this.dt(g);if(v){if(d.current&&Oc(v.target)){const w=new Ct(v.target.path);null!==this.nt.get(w)||this.gt(g,w)||this.at(g,w,ar.newNoDocument(w,r))}d.K&&(i.set(g,d.W()),d.G())}});let o=Vn();this.st.forEach((d,g)=>{let v=!0;g.forEachWhile(w=>{const R=this.dt(w);return!R||2===R.purpose||(v=!1,!1)}),v&&(o=o.add(d))});const c=new yg(r,i,this.it,this.nt,o);return this.nt=fs(),this.st=CC(),this.it=new tr(pn),c}ot(r,i){if(!this.ht(r))return;const o=this.gt(r,i.key)?2:0;this.ut(r).H(i.key,o),this.nt=this.nt.insert(i.key,i),this.st=this.st.insert(i.key,this.yt(i.key).add(r))}at(r,i,o){if(!this.ht(r))return;const c=this.ut(r);this.gt(r,i)?c.H(i,1):c.J(i),this.st=this.st.insert(i,this.yt(i).delete(r)),o&&(this.nt=this.nt.insert(i,o))}removeTarget(r){this.et.delete(r)}wt(r){const i=this.ut(r).W();return this.tt.getRemoteKeysForTarget(r).size+i.addedDocuments.size-i.removedDocuments.size}Y(r){this.ut(r).Y()}ut(r){let i=this.et.get(r);return i||(i=new wC,this.et.set(r,i)),i}yt(r){let i=this.st.get(r);return i||(i=new tr(pn),this.st=this.st.insert(r,i)),i}ht(r){const i=null!==this.dt(r);return i||tt("WatchChangeAggregator","Detected inactive target",r),i}dt(r){const i=this.et.get(r);return i&&i.q?null:this.tt.Et(r)}lt(r){this.et.set(r,new wC),this.tt.getRemoteKeysForTarget(r).forEach(i=>{this.at(r,i,null)})}gt(r,i){return this.tt.getRemoteKeysForTarget(r).has(i)}}function CC(){return new Mi(Ct.comparator)}function IC(){return new Mi(Ct.comparator)}const vA={asc:"ASCENDING",desc:"DESCENDING"},EA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Gx{constructor(r,i){this.databaseId=r,this.D=i}}function vg(s,r){return s.D?`${new Date(1e3*r.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+r.nanoseconds).slice(-9)}Z`:{seconds:""+r.seconds,nanos:r.nanoseconds}}function ME(s,r){return s.D?r.toBase64():r.toUint8Array()}function Bn(s,r){return vg(s,r.toTimestamp())}function fi(s){return $t(!!s),on.fromTimestamp(function(r){const i=Mc(r);return new Ai(i.seconds,i.nanos)}(s))}function TC(s,r){return(i=s,new Nn(["projects",i.projectId,"databases",i.database])).child("documents").child(r).canonicalString();var i}function Cl(s){const r=Nn.fromString(s);return $t(TA(r)),r}function Kd(s,r){return TC(s.databaseId,r.path)}function Ko(s,r){const i=Cl(r);if(i.get(1)!==s.databaseId.projectId)throw new Ze(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new Ze(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Ct(RE(i))}function SC(s,r){return TC(s.databaseId,r)}function DC(s){const r=Cl(s);return 4===r.length?Nn.emptyPath():RE(r)}function Eg(s){return new Nn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function RE(s){return $t(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function xE(s,r,i){return{name:Kd(s,r),fields:i.value.mapValue.fields}}function OE(s,r,i){const o=Ko(s,r.name),c=fi(r.updateTime),d=new cs({mapValue:{fields:r.fields}}),g=ar.newFoundDocument(o,c,d);return i&&g.setHasCommittedMutations(),i?g.setHasCommittedMutations():g}function M_(s,r){let i;if(r instanceof pg)i={update:xE(s,r.key,r.value)};else if(r instanceof wf)i={delete:Kd(s,r.key)};else if(r instanceof Du)i={update:xE(s,r.key,r.data),updateMask:$x(r.fieldMask)};else{if(!(r instanceof S_))return wt();i={verify:Kd(s,r.key)}}return r.fieldTransforms.length>0&&(i.updateTransforms=r.fieldTransforms.map(o=>function(c,d){const g=d.transform;if(g instanceof bf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ds)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Wd)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof hg)return{fieldPath:d.field.canonicalString(),increment:g.C};throw wt()}(0,o))),r.precondition.isNone||(i.currentDocument=void 0!==(c=r.precondition).updateTime?{updateTime:Bn(s,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:wt()),i;var c}function Tf(s,r){const i=r.currentDocument?void 0!==(c=r.currentDocument).updateTime?hi.updateTime(fi(c.updateTime)):void 0!==c.exists?hi.exists(c.exists):hi.none():hi.none(),o=r.updateTransforms?r.updateTransforms.map(c=>function(d,g){let v=null;"setToServerValue"in g?($t("REQUEST_TIME"===g.setToServerValue),v=new bf):"appendMissingElements"in g?v=new ds(g.appendMissingElements.values||[]):"removeAllFromArray"in g?v=new Wd(g.removeAllFromArray.values||[]):"increment"in g?v=new hg(d,g.increment):wt();const w=Vi.fromServerFormat(g.fieldPath);return new fg(w,v)}(s,c)):[];var c;if(r.update){const c=Ko(s,r.update.name),d=new cs({mapValue:{fields:r.update.fields}});if(r.updateMask){const g=new ng((r.updateMask.fieldPaths||[]).map(R=>Vi.fromServerFormat(R)));return new Du(c,d,g,i,o)}return new pg(c,d,i,o)}if(r.delete){const c=Ko(s,r.delete);return new wf(c,i)}if(r.verify){const c=Ko(s,r.verify);return new S_(c,i)}return wt()}function PE(s,r){return{documents:[SC(s,r.path)]}}function kE(s,r){const i={structuredQuery:{}},o=r.path;null!==r.collectionGroup?(i.parent=SC(s,o),i.structuredQuery.from=[{collectionId:r.collectionGroup,allDescendants:!0}]):(i.parent=SC(s,o.popLast()),i.structuredQuery.from=[{collectionId:o.lastSegment()}]);const c=function(v){if(0===v.length)return;const w=v.map(R=>function(F){if("=="===F.op){if(aC(F.value))return{unaryFilter:{field:bg(F.field),op:"IS_NAN"}};if(m_(F.value))return{unaryFilter:{field:bg(F.field),op:"IS_NULL"}}}else if("!="===F.op){if(aC(F.value))return{unaryFilter:{field:bg(F.field),op:"IS_NOT_NAN"}};if(m_(F.value))return{unaryFilter:{field:bg(F.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bg(F.field),op:NC(F.op),value:F.value}}}(R));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(r.filters);c&&(i.structuredQuery.where=c);const d=function(v){if(0!==v.length)return v.map(w=>{return{field:bg((R=w).field),direction:wA(R.dir)};var R})}(r.orderBy);d&&(i.structuredQuery.orderBy=d);const g=(w=r.limit,s.D||gf(w)?w:{value:w});var w;return null!==g&&(i.structuredQuery.limit=g),r.startAt&&(i.structuredQuery.startAt=xC(r.startAt)),r.endAt&&(i.structuredQuery.endAt=xC(r.endAt)),i}function FE(s){let r=DC(s.parent);const i=s.structuredQuery,o=i.from?i.from.length:0;let c=null;if(o>0){$t(1===o);const F=i.from[0];F.allDescendants?c=F.collectionId:r=r.child(F.collectionId)}let d=[];i.where&&(d=RC(i.where));let g=[];i.orderBy&&(g=i.orderBy.map(F=>{return new zd(Zd((j=F).field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction));var j}));let v=null;i.limit&&(v=function(F){let j;return j="object"==typeof F?F.value:F,gf(j)?null:j}(i.limit));let w=null;i.startAt&&(w=OC(i.startAt));let R=null;return i.endAt&&(R=OC(i.endAt)),pE(r,c,g,d,v,"F",w,R)}function RC(s){return s?void 0!==s.unaryFilter?[IA(s)]:void 0!==s.fieldFilter?[CA(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(r=>RC(r)).reduce((r,i)=>r.concat(i)):wt():[]}function xC(s){return{before:s.before,values:s.position}}function OC(s){return new Su(s.values||[],!!s.before)}function wA(s){return vA[s]}function NC(s){return EA[s]}function bg(s){return{fieldPath:s.canonicalString()}}function Zd(s){return Vi.fromServerFormat(s.fieldPath)}function CA(s){return Ji.create(Zd(s.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return wt()}}(s.fieldFilter.op),s.fieldFilter.value)}function IA(s){switch(s.unaryFilter.op){case"IS_NAN":const r=Zd(s.unaryFilter.field);return Ji.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zd(s.unaryFilter.field);return Ji.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zd(s.unaryFilter.field);return Ji.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Zd(s.unaryFilter.field);return Ji.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return wt()}}function $x(s){const r=[];return s.fields.forEach(i=>r.push(i.canonicalString())),{fieldPaths:r}}function TA(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Eo(s){let r="";for(let i=0;i<s.length;i++)r.length>0&&(r=LE(r)),r=SA(s.get(i),r);return LE(r)}function SA(s,r){let i=r;const o=s.length;for(let c=0;c<o;c++){const d=s.charAt(c);switch(d){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=d}}return i}function LE(s){return s+"\x01\x01"}function Il(s){const r=s.length;if($t(r>=2),2===r)return $t("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Nn.emptyPath();const i=r-2,o=[];let c="";for(let d=0;d<r;){const g=s.indexOf("\x01",d);switch((g<0||g>i)&&wt(),s.charAt(g+1)){case"\x01":const v=s.substring(d,g);let w;0===c.length?w=v:(c+=v,w=c,c=""),o.push(w);break;case"\x10":c+=s.substring(d,g),c+="\0";break;case"\x11":c+=s.substring(d,g+1);break;default:wt()}d=g+2}return new Nn(o)}class zx{constructor(r,i){this.seconds=r,this.nanoseconds=i}}class Fr{constructor(r,i,o){this.ownerId=r,this.allowTabSynchronization=i,this.leaseTimestampMs=o}}Fr.store="owner",Fr.key="owner";class Yd{constructor(r,i,o){this.userId=r,this.lastAcknowledgedBatchId=i,this.lastStreamToken=o}}Yd.store="mutationQueues",Yd.keyPath="userId";class Mr{constructor(r,i,o,c,d){this.userId=r,this.batchId=i,this.localWriteTimeMs=o,this.baseMutations=c,this.mutations=d}}Mr.store="mutations",Mr.keyPath="batchId",Mr.userMutationsIndex="userMutationsIndex",Mr.userMutationsKeyPath=["userId","batchId"];class As{constructor(){}static prefixForUser(r){return[r]}static prefixForPath(r,i){return[r,Eo(i)]}static key(r,i,o){return[r,Eo(i),o]}}As.store="documentMutations",As.PLACEHOLDER=new As;class PC{constructor(r,i){this.path=r,this.readTime=i}}class kC{constructor(r,i){this.path=r,this.version=i}}class Lr{constructor(r,i,o,c,d,g){this.unknownDocument=r,this.noDocument=i,this.document=o,this.hasCommittedMutations=c,this.readTime=d,this.parentPath=g}}Lr.store="remoteDocuments",Lr.readTimeIndex="readTimeIndex",Lr.readTimeIndexPath="readTime",Lr.collectionReadTimeIndex="collectionReadTimeIndex",Lr.collectionReadTimeIndexPath=["parentPath","readTime"];class Tl{constructor(r){this.byteSize=r}}Tl.store="remoteDocumentGlobal",Tl.key="remoteDocumentGlobalKey";class bo{constructor(r,i,o,c,d,g,v){this.targetId=r,this.canonicalId=i,this.readTime=o,this.resumeToken=c,this.lastListenSequenceNumber=d,this.lastLimboFreeSnapshotVersion=g,this.query=v}}bo.store="targets",bo.keyPath="targetId",bo.queryTargetsIndexName="queryTargetsIndex",bo.queryTargetsKeyPath=["canonicalId","targetId"];class Bi{constructor(r,i,o){this.targetId=r,this.path=i,this.sequenceNumber=o}}Bi.store="targetDocuments",Bi.keyPath=["targetId","path"],Bi.documentTargetsIndex="documentTargetsIndex",Bi.documentTargetsKeyPath=["path","targetId"];class Ms{constructor(r,i,o,c){this.highestTargetId=r,this.highestListenSequenceNumber=i,this.lastRemoteSnapshotVersion=o,this.targetCount=c}}Ms.key="targetGlobalKey",Ms.store="targetGlobal";class Qd{constructor(r,i){this.collectionId=r,this.parent=i}}Qd.store="collectionParents",Qd.keyPath=["collectionId","parent"];class xa{constructor(r,i,o,c){this.clientId=r,this.updateTimeMs=i,this.networkEnabled=o,this.inForeground=c}}xa.store="clientMetadata",xa.keyPath="clientId";class Sf{constructor(r,i,o){this.bundleId=r,this.createTime=i,this.version=o}}Sf.store="bundles",Sf.keyPath="bundleId";class Df{constructor(r,i,o){this.name=r,this.readTime=i,this.bundledQuery=o}}Df.store="namedQueries",Df.keyPath="name";const DA=[Yd.store,Mr.store,As.store,Lr.store,bo.store,Fr.store,Ms.store,Bi.store,xa.store,Tl.store,Qd.store,Sf.store,Df.store],FC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(r){this.onCommittedListeners.push(r)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(r=>r())}}class qe{constructor(r){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,r(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(r){return this.next(void 0,r)}next(r,i){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new qe((o,c)=>{this.nextCallback=d=>{this.wrapSuccess(r,d).next(o,c)},this.catchCallback=d=>{this.wrapFailure(i,d).next(o,c)}})}toPromise(){return new Promise((r,i)=>{this.next(r,i)})}wrapUserFunction(r){try{const i=r();return i instanceof qe?i:qe.resolve(i)}catch(i){return qe.reject(i)}}wrapSuccess(r,i){return r?this.wrapUserFunction(()=>r(i)):qe.resolve(i)}wrapFailure(r,i){return r?this.wrapUserFunction(()=>r(i)):qe.reject(i)}static resolve(r){return new qe((i,o)=>{i(r)})}static reject(r){return new qe((i,o)=>{o(r)})}static waitFor(r){return new qe((i,o)=>{let c=0,d=0,g=!1;r.forEach(v=>{++c,v.next(()=>{++d,g&&d===c&&i()},w=>o(w))}),g=!0,d===c&&i()})}static or(r){let i=qe.resolve(!1);for(const o of r)i=i.next(c=>c?qe.resolve(c):o());return i}static forEach(r,i){const o=[];return r.forEach((c,d)=>{o.push(i.call(this,c,d))}),this.waitFor(o)}}class Jd{constructor(r,i){this.action=r,this.transaction=i,this.aborted=!1,this.Tt=new gt,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{i.error?this.Tt.reject(new Rs(r,i.error)):this.Tt.resolve()},this.transaction.onerror=o=>{const c=Zo(o.target.error);this.Tt.reject(new Rs(r,c))}}static open(r,i,o,c){try{return new Jd(i,r.transaction(c,o))}catch(d){throw new Rs(i,d)}}get It(){return this.Tt.promise}abort(r){r&&this.Tt.reject(r),this.aborted||(tt("SimpleDb","Aborting transaction:",r?r.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(r){const i=this.transaction.objectStore(r);return new AA(i)}}class ps{constructor(r,i,o){this.name=r,this.version=i,this.At=o,12.2===ps.Rt((0,J.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(r){return tt("SimpleDb","Removing database:",r),Xd(window.indexedDB.deleteDatabase(r)).toPromise()}static Pt(){if("undefined"==typeof indexedDB)return!1;if(ps.bt())return!0;const r=(0,J.z$)(),i=ps.Rt(r),o=0<i&&i<10,c=ps.vt(r),d=0<c&&c<4.5;return!(r.indexOf("MSIE ")>0||r.indexOf("Trident/")>0||r.indexOf("Edge/")>0||o||d)}static bt(){var r;return"undefined"!=typeof process&&"YES"===(null===(r=process.env)||void 0===r?void 0:r.Vt)}static St(r,i){return r.store(i)}static Rt(r){const i=r.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static vt(r){const i=r.match(/Android ([\d.]+)/i),o=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Dt(r){var i=this;return(0,He.Z)(function*(){return i.db||(tt("SimpleDb","Opening database:",i.name),i.db=yield new Promise((o,c)=>{const d=indexedDB.open(i.name,i.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{c(new Rs(r,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const v=g.target.error;c("VersionError"===v.name?new Ze(Fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Rs(r,v))},d.onupgradeneeded=g=>{tt("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',g.oldVersion),i.At.Ct(g.target.result,d.transaction,g.oldVersion,i.version).next(()=>{tt("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.Nt&&(i.db.onversionchange=o=>i.Nt(o)),i.db})()}xt(r){this.Nt=r,this.db&&(this.db.onversionchange=i=>r(i))}runTransaction(r,i,o,c){var d=this;return(0,He.Z)(function*(){const g="readonly"===i;let v=0;for(;;){++v;try{d.db=yield d.Dt(r);const w=Jd.open(d.db,r,g?"readonly":"readwrite",o),R=c(w).catch(F=>(w.abort(F),qe.reject(F))).toPromise();return R.catch(()=>{}),yield w.It,R}catch(w){const R="FirebaseError"!==w.name&&v<3;if(tt("SimpleDb","Transaction failed with error:",w.message,"Retrying:",R),d.close(),!R)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class VC{constructor(r){this.kt=r,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(r){this.kt=r}done(){this.$t=!0}Mt(r){this.Ot=r}delete(){return Xd(this.kt.delete())}}class Rs extends Ze{constructor(r,i){super(Fe.UNAVAILABLE,`IndexedDB transaction '${r}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function Oa(s){return"IndexedDbTransactionError"===s.name}class AA{constructor(r){this.store=r}put(r,i){let o;return void 0!==i?(tt("SimpleDb","PUT",this.store.name,r,i),o=this.store.put(i,r)):(tt("SimpleDb","PUT",this.store.name,"<auto-key>",r),o=this.store.put(r)),Xd(o)}add(r){return tt("SimpleDb","ADD",this.store.name,r,r),Xd(this.store.add(r))}get(r){return Xd(this.store.get(r)).next(i=>(void 0===i&&(i=null),tt("SimpleDb","GET",this.store.name,r,i),i))}delete(r){return tt("SimpleDb","DELETE",this.store.name,r),Xd(this.store.delete(r))}count(){return tt("SimpleDb","COUNT",this.store.name),Xd(this.store.count())}Lt(r,i){const o=this.cursor(this.options(r,i)),c=[];return this.Bt(o,(d,g)=>{c.push(g)}).next(()=>c)}Ut(r,i){tt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(r,i);o.qt=!1;const c=this.cursor(o);return this.Bt(c,(d,g,v)=>v.delete())}Kt(r,i){let o;i?o=r:(o={},i=r);const c=this.cursor(o);return this.Bt(c,i)}jt(r){const i=this.cursor({});return new qe((o,c)=>{i.onerror=d=>{const g=Zo(d.target.error);c(g)},i.onsuccess=d=>{const g=d.target.result;g?r(g.primaryKey,g.value).next(v=>{v?g.continue():o()}):o()}})}Bt(r,i){const o=[];return new qe((c,d)=>{r.onerror=g=>{d(g.target.error)},r.onsuccess=g=>{const v=g.target.result;if(!v)return void c();const w=new VC(v),R=i(v.primaryKey,v.value,w);if(R instanceof qe){const F=R.catch(j=>(w.done(),qe.reject(j)));o.push(F)}w.isDone?c():null===w.Ft?v.continue():v.continue(w.Ft)}}).next(()=>qe.waitFor(o))}options(r,i){let o;return void 0!==r&&("string"==typeof r?o=r:i=r),{index:o,range:i}}cursor(r){let i="next";if(r.reverse&&(i="prev"),r.index){const o=this.store.index(r.index);return r.qt?o.openKeyCursor(r.range,i):o.openCursor(r.range,i)}return this.store.openCursor(r.range,i)}}function Xd(s){return new qe((r,i)=>{s.onsuccess=o=>{r(o.target.result)},s.onerror=o=>{const c=Zo(o.target.error);i(c)}})}let R_=!1;function Zo(s){const r=ps.Rt((0,J.z$)());if(r>=12.2&&r<13){const i="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(i)>=0){const o=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return R_||(R_=!0,setTimeout(()=>{throw o},0)),o}}return s}class Af extends LC{constructor(r,i){super(),this.Qt=r,this.currentSequenceNumber=i}}function Un(s,r){const i=ot(s);return ps.St(i.Qt,r)}class kc{constructor(r,i,o,c){this.batchId=r,this.localWriteTime=i,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(r,i){const o=i.mutationResults;for(let c=0;c<this.mutations.length;c++){const d=this.mutations[c];d.key.isEqual(r.key)&&wE(d,r,o[c])}}applyToLocalView(r){for(const i of this.baseMutations)i.key.isEqual(r.key)&&CE(i,r,this.localWriteTime);for(const i of this.mutations)i.key.isEqual(r.key)&&CE(i,r,this.localWriteTime)}applyToLocalDocumentSet(r){this.mutations.forEach(i=>{const o=r.get(i.key),c=o;this.applyToLocalView(c),o.isValidDocument()||c.convertToNoDocument(on.min())})}keys(){return this.mutations.reduce((r,i)=>r.add(i.key),Vn())}isEqual(r){return this.batchId===r.batchId&&Cu(this.mutations,r.mutations,(i,o)=>I_(i,o))&&Cu(this.baseMutations,r.baseMutations,(i,o)=>I_(i,o))}}class Mf{constructor(r,i,o,c){this.batch=r,this.commitVersion=i,this.mutationResults=o,this.docVersions=c}static from(r,i,o){$t(r.mutations.length===o.length);let c=vC();const d=r.mutations;for(let g=0;g<d.length;g++)c=c.insert(d[g].key,o[g].version);return new Mf(r,i,o,c)}}class Ri{constructor(r,i,o,c,d=on.min(),g=on.min(),v=Qi.EMPTY_BYTE_STRING){this.target=r,this.targetId=i,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=v}withSequenceNumber(r){return new Ri(this.target,this.targetId,this.purpose,r,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(r,i){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,r)}withLastLimboFreeSnapshotVersion(r){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,r,this.resumeToken)}}class x_{constructor(r){this.Wt=r}}function Au(s,r){if(r.document)return OE(s.Wt,r.document,!!r.hasCommittedMutations);if(r.noDocument){const i=Ct.fromSegments(r.noDocument.path),o=Pa(r.noDocument.readTime),c=ar.newNoDocument(i,o);return r.hasCommittedMutations?c.setHasCommittedMutations():c}if(r.unknownDocument){const i=Ct.fromSegments(r.unknownDocument.path),o=Pa(r.unknownDocument.version);return ar.newUnknownDocument(i,o)}return wt()}function eh(s,r,i){const o=Mu(i),c=r.key.path.popLast().toArray();if(r.isFoundDocument()){const d={name:Kd(v=s.Wt,(w=r).key),fields:w.data.value.mapValue.fields,updateTime:vg(v,w.version.toTimestamp())};return new Lr(null,null,d,r.hasCommittedMutations,o,c)}var v,w;if(r.isNoDocument()){const d=r.key.path.toArray(),g=Na(r.version),v=r.hasCommittedMutations;return new Lr(null,new PC(d,g),null,v,o,c)}if(r.isUnknownDocument()){const d=r.key.path.toArray(),g=Na(r.version);return new Lr(new kC(d,g),null,null,!0,o,c)}return wt()}function Mu(s){const r=s.toTimestamp();return[r.seconds,r.nanoseconds]}function th(s){const r=new Ai(s[0],s[1]);return on.fromTimestamp(r)}function Na(s){const r=s.toTimestamp();return new zx(r.seconds,r.nanoseconds)}function Pa(s){const r=new Ai(s.seconds,s.nanoseconds);return on.fromTimestamp(r)}function ka(s,r){const i=(r.baseMutations||[]).map(d=>Tf(s.Wt,d));for(let d=0;d<r.mutations.length-1;++d){const g=r.mutations[d];d+1<r.mutations.length&&void 0!==r.mutations[d+1].transform&&(g.updateTransforms=r.mutations[d+1].transform.fieldTransforms,r.mutations.splice(d+1,1),++d)}const o=r.mutations.map(d=>Tf(s.Wt,d)),c=Ai.fromMillis(r.localWriteTimeMs);return new kc(r.batchId,c,i,o)}function Sl(s){const r=Pa(s.readTime),i=void 0!==s.lastLimboFreeSnapshotVersion?Pa(s.lastLimboFreeSnapshotVersion):on.min();let o;var c;return void 0!==s.query.documents?($t(1===(c=s.query).documents.length),o=vo(Ef(DC(c.documents[0])))):o=vo(FE(s.query)),new Ri(o,s.targetId,0,s.lastListenSequenceNumber,r,i,Qi.fromBase64String(s.resumeToken))}function nh(s,r){const i=Na(r.snapshotVersion),o=Na(r.lastLimboFreeSnapshotVersion);let c;c=Oc(r.target)?PE(s.Wt,r.target):kE(s.Wt,r.target);const d=r.resumeToken.toBase64();return new bo(r.targetId,ag(r.target),i,d,r.sequenceNumber,o,c)}function O_(s){const r=FE({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?fA(r,r.limit,"L"):r}class BC{getBundleMetadata(r,i){return VE(r).get(i).next(o=>{if(o)return{id:(c=o).bundleId,createTime:Pa(c.createTime),version:c.version};var c})}saveBundleMetadata(r,i){return VE(r).put({bundleId:(o=i).id,createTime:Na(fi(o.createTime)),version:o.version});var o}getNamedQuery(r,i){return BE(r).get(i).next(o=>{if(o)return{name:(c=o).name,query:O_(c.bundledQuery),readTime:Pa(c.readTime)};var c})}saveNamedQuery(r,i){return BE(r).put({name:(o=i).name,readTime:Na(fi(o.readTime)),bundledQuery:o.bundledQuery});var o}}function VE(s){return Un(s,Sf.store)}function BE(s){return Un(s,Df.store)}class UC{constructor(){this.Gt=new N_}addToCollectionParentIndex(r,i){return this.Gt.add(i),qe.resolve()}getCollectionParents(r,i){return qe.resolve(this.Gt.getEntries(i))}}class N_{constructor(){this.index={}}add(r){const i=r.lastSegment(),o=r.popLast(),c=this.index[i]||new tr(Nn.comparator),d=!c.has(o);return this.index[i]=c.add(o),d}has(r){const i=r.lastSegment(),o=r.popLast(),c=this.index[i];return c&&c.has(o)}getEntries(r){return(this.index[r]||new tr(Nn.comparator)).toArray()}}class jC{constructor(){this.zt=new N_}addToCollectionParentIndex(r,i){if(!this.zt.has(i)){const o=i.lastSegment(),c=i.popLast();r.addOnCommittedListener(()=>{this.zt.add(i)});const d={collectionId:o,parent:Eo(c)};return UE(r).put(d)}return qe.resolve()}getCollectionParents(r,i){const o=[],c=IDBKeyRange.bound([i,""],[iA(i),""],!1,!0);return UE(r).Lt(c).next(d=>{for(const g of d){if(g.collectionId!==i)break;o.push(Il(g.parent))}return o})}}function UE(s){return Un(s,Qd.store)}const jE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ys{constructor(r,i,o){this.cacheSizeCollectionThreshold=r,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=o}static withCacheSize(r){return new Ys(r,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HE(s,r,i){const o=s.store(Mr.store),c=s.store(As.store),d=[],g=IDBKeyRange.only(i.batchId);let v=0;const w=o.Kt({range:g},(F,j,Q)=>(v++,Q.delete()));d.push(w.next(()=>{$t(1===v)}));const R=[];for(const F of i.mutations){const j=As.key(r,F.key.path,i.batchId);d.push(c.delete(j)),R.push(F.key)}return qe.waitFor(d).next(()=>R)}function P_(s){if(!s)return 0;let r;if(s.document)r=s.document;else if(s.unknownDocument)r=s.unknownDocument;else{if(!s.noDocument)throw wt();r=s.noDocument}return JSON.stringify(r).length}Ys.DEFAULT_COLLECTION_PERCENTILE=10,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ys.DEFAULT=new Ys(41943040,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ys.DISABLED=new Ys(-1,0,0);class GE{constructor(r,i,o,c){this.userId=r,this.N=i,this.Ht=o,this.referenceDelegate=c,this.Jt={}}static Yt(r,i,o,c){$t(""!==r.uid);const d=r.isAuthenticated()?r.uid:"";return new GE(d,i,o,c)}checkEmpty(r){let i=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ru(r).Kt({index:Mr.userMutationsIndex,range:o},(c,d,g)=>{i=!1,g.done()}).next(()=>i)}addMutationBatch(r,i,o,c){const d=wg(r),g=Ru(r);return g.add({}).next(v=>{$t("number"==typeof v);const w=new kc(v,i,o,c),R=function(Q,de,ge){const Ne=ge.baseMutations.map(Mt=>M_(Q.Wt,Mt)),$e=ge.mutations.map(Mt=>M_(Q.Wt,Mt));return new Mr(de,ge.batchId,ge.localWriteTime.toMillis(),Ne,$e)}(this.N,this.userId,w),F=[];let j=new tr((Q,de)=>pn(Q.canonicalString(),de.canonicalString()));for(const Q of c){const de=As.key(this.userId,Q.key.path,v);j=j.add(Q.key.path.popLast()),F.push(g.put(R)),F.push(d.put(de,As.PLACEHOLDER))}return j.forEach(Q=>{F.push(this.Ht.addToCollectionParentIndex(r,Q))}),r.addOnCommittedListener(()=>{this.Jt[v]=w.keys()}),qe.waitFor(F).next(()=>w)})}lookupMutationBatch(r,i){return Ru(r).get(i).next(o=>o?($t(o.userId===this.userId),ka(this.N,o)):null)}Xt(r,i){return this.Jt[i]?qe.resolve(this.Jt[i]):this.lookupMutationBatch(r,i).next(o=>{if(o){const c=o.keys();return this.Jt[i]=c,c}return null})}getNextMutationBatchAfterBatchId(r,i){const o=i+1,c=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Ru(r).Kt({index:Mr.userMutationsIndex,range:c},(g,v,w)=>{v.userId===this.userId&&($t(v.batchId>=o),d=ka(this.N,v)),w.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(r){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ru(r).Kt({index:Mr.userMutationsIndex,range:i,reverse:!0},(c,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(r){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ru(r).Lt(Mr.userMutationsIndex,i).next(o=>o.map(c=>ka(this.N,c)))}getAllMutationBatchesAffectingDocumentKey(r,i){const o=As.prefixForPath(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=[];return wg(r).Kt({range:c},(g,v,w)=>{const[R,F,j]=g,Q=Il(F);if(R===this.userId&&i.path.isEqual(Q))return Ru(r).get(j).next(de=>{if(!de)throw wt();$t(de.userId===this.userId),d.push(ka(this.N,de))});w.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(r,i){let o=new tr(pn);const c=[];return i.forEach(d=>{const g=As.prefixForPath(this.userId,d.path),v=IDBKeyRange.lowerBound(g),w=wg(r).Kt({range:v},(R,F,j)=>{const[Q,de,ge]=R,Ne=Il(de);Q===this.userId&&d.path.isEqual(Ne)?o=o.add(ge):j.done()});c.push(w)}),qe.waitFor(c).next(()=>this.Zt(r,o))}getAllMutationBatchesAffectingQuery(r,i){const o=i.path,c=o.length+1,d=As.prefixForPath(this.userId,o),g=IDBKeyRange.lowerBound(d);let v=new tr(pn);return wg(r).Kt({range:g},(w,R,F)=>{const[j,Q,de]=w,ge=Il(Q);j===this.userId&&o.isPrefixOf(ge)?ge.length===c&&(v=v.add(de)):F.done()}).next(()=>this.Zt(r,v))}Zt(r,i){const o=[],c=[];return i.forEach(d=>{c.push(Ru(r).get(d).next(g=>{if(null===g)throw wt();$t(g.userId===this.userId),o.push(ka(this.N,g))}))}),qe.waitFor(c).next(()=>o)}removeMutationBatch(r,i){return HE(r.Qt,this.userId,i).next(o=>(r.addOnCommittedListener(()=>{this.te(i.batchId)}),qe.forEach(o,c=>this.referenceDelegate.markPotentiallyOrphaned(r,c))))}te(r){delete this.Jt[r]}performConsistencyCheck(r){return this.checkEmpty(r).next(i=>{if(!i)return qe.resolve();const o=IDBKeyRange.lowerBound(As.prefixForUser(this.userId)),c=[];return wg(r).Kt({range:o},(d,g,v)=>{if(d[0]===this.userId){const w=Il(d[1]);c.push(w)}else v.done()}).next(()=>{$t(0===c.length)})})}containsKey(r,i){return $E(r,this.userId,i)}ee(r){return HC(r).get(this.userId).next(i=>i||new Yd(this.userId,-1,""))}}function $E(s,r,i){const o=As.prefixForPath(r,i.path),c=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return wg(s).Kt({range:d,qt:!0},(v,w,R)=>{const[F,j,Q]=v;F===r&&j===c&&(g=!0),R.done()}).next(()=>g)}function Ru(s){return Un(s,Mr.store)}function wg(s){return Un(s,As.store)}function HC(s){return Un(s,Yd.store)}class xu{constructor(r){this.ne=r}next(){return this.ne+=2,this.ne}static se(){return new xu(0)}static ie(){return new xu(-1)}}class MA{constructor(r,i){this.referenceDelegate=r,this.N=i}allocateTargetId(r){return this.re(r).next(i=>{const o=new xu(i.highestTargetId);return i.highestTargetId=o.next(),this.oe(r,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(r){return this.re(r).next(i=>on.fromTimestamp(new Ai(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(r){return this.re(r).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(r,i,o){return this.re(r).next(c=>(c.highestListenSequenceNumber=i,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),i>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=i),this.oe(r,c)))}addTargetData(r,i){return this.ae(r,i).next(()=>this.re(r).next(o=>(o.targetCount+=1,this.ce(i,o),this.oe(r,o))))}updateTargetData(r,i){return this.ae(r,i)}removeTargetData(r,i){return this.removeMatchingKeysForTargetId(r,i.targetId).next(()=>rh(r).delete(i.targetId)).next(()=>this.re(r)).next(o=>($t(o.targetCount>0),o.targetCount-=1,this.oe(r,o)))}removeTargets(r,i,o){let c=0;const d=[];return rh(r).Kt((g,v)=>{const w=Sl(v);w.sequenceNumber<=i&&null===o.get(w.targetId)&&(c++,d.push(this.removeTargetData(r,w)))}).next(()=>qe.waitFor(d)).next(()=>c)}forEachTarget(r,i){return rh(r).Kt((o,c)=>{const d=Sl(c);i(d)})}re(r){return GC(r).get(Ms.key).next(i=>($t(null!==i),i))}oe(r,i){return GC(r).put(Ms.key,i)}ae(r,i){return rh(r).put(nh(this.N,i))}ce(r,i){let o=!1;return r.targetId>i.highestTargetId&&(i.highestTargetId=r.targetId,o=!0),r.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r.sequenceNumber,o=!0),o}getTargetCount(r){return this.re(r).next(i=>i.targetCount)}getTargetData(r,i){const o=ag(i),c=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return rh(r).Kt({range:c,index:bo.queryTargetsIndexName},(g,v,w)=>{const R=Sl(v);Tu(i,R.target)&&(d=R,w.done())}).next(()=>d)}addMatchingKeys(r,i,o){const c=[],d=Ou(r);return i.forEach(g=>{const v=Eo(g.path);c.push(d.put(new Bi(o,v))),c.push(this.referenceDelegate.addReference(r,o,g))}),qe.waitFor(c)}removeMatchingKeys(r,i,o){const c=Ou(r);return qe.forEach(i,d=>{const g=Eo(d.path);return qe.waitFor([c.delete([o,g]),this.referenceDelegate.removeReference(r,o,d)])})}removeMatchingKeysForTargetId(r,i){const o=Ou(r),c=IDBKeyRange.bound([i],[i+1],!1,!0);return o.delete(c)}getMatchingKeysForTargetId(r,i){const o=IDBKeyRange.bound([i],[i+1],!1,!0),c=Ou(r);let d=Vn();return c.Kt({range:o,qt:!0},(g,v,w)=>{const R=Il(g[1]),F=new Ct(R);d=d.add(F)}).next(()=>d)}containsKey(r,i){const o=Eo(i.path),c=IDBKeyRange.bound([o],[iA(o)],!1,!0);let d=0;return Ou(r).Kt({index:Bi.documentTargetsIndex,qt:!0,range:c},([g,v],w,R)=>{0!==g&&(d++,R.done())}).next(()=>d>0)}Et(r,i){return rh(r).get(i).next(o=>o?Sl(o):null)}}function rh(s){return Un(s,bo.store)}function GC(s){return Un(s,Ms.store)}function Ou(s){return Un(s,Bi.store)}function Rf(s){return zE.apply(this,arguments)}function zE(){return(zE=(0,He.Z)(function*(s){if(s.code!==Fe.FAILED_PRECONDITION||s.message!==FC)throw s;tt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function WE([s,r],[i,o]){const c=pn(s,i);return 0===c?pn(r,o):c}class Wx{constructor(r){this.ue=r,this.buffer=new tr(WE),this.he=0}le(){return++this.he}fe(r){const i=[r,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(i);else{const o=this.buffer.last();WE(i,o)<0&&(this.buffer=this.buffer.delete(o).add(i))}}get maxValue(){return this.buffer.last()[0]}}class qx{constructor(r,i){this.garbageCollector=r,this.asyncQueue=i,this.de=!1,this.we=null}start(r){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(r)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(r){var i=this;const o=this.de?3e5:6e4;tt("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,He.Z)(function*(){i.we=null,i.de=!0;try{yield r.collectGarbage(i.garbageCollector)}catch(c){Oa(c)?tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield Rf(c)}yield i._e(r)}))}}class Kx{constructor(r,i){this.me=r,this.params=i}calculateTargetCount(r,i){return this.me.ge(r).next(o=>Math.floor(i/100*o))}nthSequenceNumber(r,i){if(0===i)return qe.resolve(Ds.T);const o=new Wx(i);return this.me.forEachTarget(r,c=>o.fe(c.sequenceNumber)).next(()=>this.me.ye(r,c=>o.fe(c))).next(()=>o.maxValue)}removeTargets(r,i,o){return this.me.removeTargets(r,i,o)}removeOrphanedDocuments(r,i){return this.me.removeOrphanedDocuments(r,i)}collect(r,i){return-1===this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(jE)):this.getCacheSize(r).next(o=>o<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jE):this.pe(r,i))}getCacheSize(r){return this.me.getCacheSize(r)}pe(r,i){let o,c,d,g,v,w,R;const F=Date.now();return this.calculateTargetCount(r,this.params.percentileToCollect).next(j=>(j>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${j}`),c=this.params.maximumSequenceNumbersToCollect):c=j,g=Date.now(),this.nthSequenceNumber(r,c))).next(j=>(o=j,v=Date.now(),this.removeTargets(r,o,i))).next(j=>(d=j,w=Date.now(),this.removeOrphanedDocuments(r,o))).next(j=>(R=Date.now(),rE()<=po.in.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-F}ms\n\tDetermined least recently used ${c} in `+(v-g)+`ms\n\tRemoved ${d} targets in `+(w-v)+`ms\n\tRemoved ${j} documents in `+(R-w)+`ms\nTotal Duration: ${R-F}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:d,documentsRemoved:j})))}}class RA{constructor(r,i){this.db=r,this.garbageCollector=new Kx(this,i)}ge(r){const i=this.Ee(r);return this.db.getTargetCache().getTargetCount(r).next(o=>i.next(c=>o+c))}Ee(r){let i=0;return this.ye(r,o=>{i++}).next(()=>i)}forEachTarget(r,i){return this.db.getTargetCache().forEachTarget(r,i)}ye(r,i){return this.Te(r,(o,c)=>i(c))}addReference(r,i,o){return qE(r,o)}removeReference(r,i,o){return qE(r,o)}removeTargets(r,i,o){return this.db.getTargetCache().removeTargets(r,i,o)}markPotentiallyOrphaned(r,i){return qE(r,i)}Ie(r,i){return function(o,c){let d=!1;return HC(o).jt(g=>$E(o,g,c).next(v=>(v&&(d=!0),qe.resolve(!v)))).next(()=>d)}(r,i)}removeOrphanedDocuments(r,i){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let d=0;return this.Te(r,(g,v)=>{if(v<=i){const w=this.Ie(r,g).next(R=>{if(!R)return d++,o.getEntry(r,g).next(()=>(o.removeEntry(g),Ou(r).delete([0,Eo(g.path)])))});c.push(w)}}).next(()=>qe.waitFor(c)).next(()=>o.apply(r)).next(()=>d)}removeTarget(r,i){const o=i.withSequenceNumber(r.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(r,o)}updateLimboDocument(r,i){return qE(r,i)}Te(r,i){const o=Ou(r);let c,d=Ds.T;return o.Kt({index:Bi.documentTargetsIndex},([g,v],{path:w,sequenceNumber:R})=>{0===g?(d!==Ds.T&&i(new Ct(Il(c)),d),d=R,c=w):d=Ds.T}).next(()=>{d!==Ds.T&&i(new Ct(Il(c)),d)})}getCacheSize(r){return this.db.getRemoteDocumentCache().getSize(r)}}function qE(s,r){return Ou(s).put((o=s.currentSequenceNumber,new Bi(0,Eo(r.path),o)));var o}class xf{constructor(r,i){this.mapKeyFn=r,this.equalsFn=i,this.inner={}}get(r){const i=this.mapKeyFn(r),o=this.inner[i];if(void 0!==o)for(const[c,d]of o)if(this.equalsFn(c,r))return d}has(r){return void 0!==this.get(r)}set(r,i){const o=this.mapKeyFn(r),c=this.inner[o];if(void 0!==c){for(let d=0;d<c.length;d++)if(this.equalsFn(c[d][0],r))return void(c[d]=[r,i]);c.push([r,i])}else this.inner[o]=[[r,i]]}delete(r){const i=this.mapKeyFn(r),o=this.inner[i];if(void 0===o)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],r))return 1===o.length?delete this.inner[i]:o.splice(c,1),!0;return!1}forEach(r){bl(this.inner,(i,o)=>{for(const[c,d]of o)r(c,d)})}isEmpty(){return tg(this.inner)}}class $C{constructor(){this.changes=new xf(r=>r.toString(),(r,i)=>r.isEqual(i)),this.changesApplied=!1}getReadTime(r){const i=this.changes.get(r);return i?i.readTime:on.min()}addEntry(r,i){this.assertNotApplied(),this.changes.set(r.key,{document:r,readTime:i})}removeEntry(r,i=null){this.assertNotApplied(),this.changes.set(r,{document:ar.newInvalidDocument(r),readTime:i})}getEntry(r,i){this.assertNotApplied();const o=this.changes.get(i);return void 0!==o?qe.resolve(o.document):this.getFromCache(r,i)}getEntries(r,i){return this.getAllFromCache(r,i)}apply(r){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(r)}assertNotApplied(){}}class KE{constructor(r,i){this.N=r,this.Ht=i}addEntry(r,i,o){return ih(r).put(YE(i),o)}removeEntry(r,i){const o=ih(r),c=YE(i);return o.delete(c)}updateMetadata(r,i){return this.getMetadata(r).next(o=>(o.byteSize+=i,this.Ae(r,o)))}getEntry(r,i){return ih(r).get(YE(i)).next(o=>this.Re(i,o))}Pe(r,i){return ih(r).get(YE(i)).next(o=>({document:this.Re(i,o),size:P_(o)}))}getEntries(r,i){let o=fs();return this.be(r,i,(c,d)=>{const g=this.Re(c,d);o=o.insert(c,g)}).next(()=>o)}ve(r,i){let o=fs(),c=new Mi(Ct.comparator);return this.be(r,i,(d,g)=>{const v=this.Re(d,g);o=o.insert(d,v),c=c.insert(d,P_(g))}).next(()=>({documents:o,Ve:c}))}be(r,i,o){if(i.isEmpty())return qe.resolve();const c=IDBKeyRange.bound(i.first().path.toArray(),i.last().path.toArray()),d=i.getIterator();let g=d.getNext();return ih(r).Kt({range:c},(v,w,R)=>{const F=Ct.fromSegments(v);for(;g&&Ct.comparator(g,F)<0;)o(g,null),g=d.getNext();g&&g.isEqual(F)&&(o(g,w),g=d.hasNext()?d.getNext():null),g?R.Mt(g.path.toArray()):R.done()}).next(()=>{for(;g;)o(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(r,i,o){let c=fs();const d=i.path.length+1,g={};if(o.isEqual(on.min())){const v=i.path.toArray();g.range=IDBKeyRange.lowerBound(v)}else{const v=i.path.toArray(),w=Mu(o);g.range=IDBKeyRange.lowerBound([v,w],!0),g.index=Lr.collectionReadTimeIndex}return ih(r).Kt(g,(v,w,R)=>{if(v.length!==d)return;const F=Au(this.N,w);i.path.isPrefixOf(F.key.path)?dg(i,F)&&(c=c.insert(F.key,F)):R.done()}).next(()=>c)}newChangeBuffer(r){return new ZE(this,!!r&&r.trackRemovals)}getSize(r){return this.getMetadata(r).next(i=>i.byteSize)}getMetadata(r){return zC(r).get(Tl.key).next(i=>($t(!!i),i))}Ae(r,i){return zC(r).put(Tl.key,i)}Re(r,i){if(i){const o=Au(this.N,i);if(!o.isNoDocument()||!o.version.isEqual(on.min()))return o}return ar.newInvalidDocument(r)}}class ZE extends $C{constructor(r,i){super(),this.Se=r,this.trackRemovals=i,this.De=new xf(o=>o.toString(),(o,c)=>o.isEqual(c))}applyChanges(r){const i=[];let o=0,c=new tr((d,g)=>pn(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const v=this.De.get(d);if(g.document.isValidDocument()){const w=eh(this.Se.N,g.document,this.getReadTime(d));c=c.add(d.path.popLast()),o+=P_(w)-v,i.push(this.Se.addEntry(r,d,w))}else if(o-=v,this.trackRemovals){const w=eh(this.Se.N,ar.newNoDocument(d,on.min()),this.getReadTime(d));i.push(this.Se.addEntry(r,d,w))}else i.push(this.Se.removeEntry(r,d))}),c.forEach(d=>{i.push(this.Se.Ht.addToCollectionParentIndex(r,d))}),i.push(this.Se.updateMetadata(r,o)),qe.waitFor(i)}getFromCache(r,i){return this.Se.Pe(r,i).next(o=>(this.De.set(i,o.size),o.document))}getAllFromCache(r,i){return this.Se.ve(r,i).next(({documents:o,Ve:c})=>(c.forEach((d,g)=>{this.De.set(d,g)}),o))}}function zC(s){return Un(s,Tl.store)}function ih(s){return Un(s,Lr.store)}function YE(s){return s.path.toArray()}class Zx{constructor(r){this.N=r}Ct(r,i,o,c){$t(o<c&&o>=0&&c<=11);const d=new Jd("createOrUpgrade",i);var v;o<1&&c>=1&&(r.createObjectStore(Fr.store),(v=r).createObjectStore(Yd.store,{keyPath:Yd.keyPath}),v.createObjectStore(Mr.store,{keyPath:Mr.keyPath,autoIncrement:!0}).createIndex(Mr.userMutationsIndex,Mr.userMutationsKeyPath,{unique:!0}),v.createObjectStore(As.store),WC(r),function(v){v.createObjectStore(Lr.store)}(r));let g=qe.resolve();return o<3&&c>=3&&(0!==o&&(function(v){v.deleteObjectStore(Bi.store),v.deleteObjectStore(bo.store),v.deleteObjectStore(Ms.store)}(r),WC(r)),g=g.next(()=>function(v){const w=v.store(Ms.store),R=new Ms(0,0,on.min().toTimestamp(),0);return w.put(Ms.key,R)}(d))),o<4&&c>=4&&(0!==o&&(g=g.next(()=>function(v,w){return w.store(Mr.store).Lt().next(R=>{v.deleteObjectStore(Mr.store),v.createObjectStore(Mr.store,{keyPath:Mr.keyPath,autoIncrement:!0}).createIndex(Mr.userMutationsIndex,Mr.userMutationsKeyPath,{unique:!0});const F=w.store(Mr.store),j=R.map(Q=>F.put(Q));return qe.waitFor(j)})}(r,d))),g=g.next(()=>{!function(v){v.createObjectStore(xa.store,{keyPath:xa.keyPath})}(r)})),o<5&&c>=5&&(g=g.next(()=>this.Ce(d))),o<6&&c>=6&&(g=g.next(()=>(function(v){v.createObjectStore(Tl.store)}(r),this.Ne(d)))),o<7&&c>=7&&(g=g.next(()=>this.xe(d))),o<8&&c>=8&&(g=g.next(()=>this.ke(r,d))),o<9&&c>=9&&(g=g.next(()=>{(function(v){v.objectStoreNames.contains("remoteDocumentChanges")&&v.deleteObjectStore("remoteDocumentChanges")})(r),function(v){const w=v.objectStore(Lr.store);w.createIndex(Lr.readTimeIndex,Lr.readTimeIndexPath,{unique:!1}),w.createIndex(Lr.collectionReadTimeIndex,Lr.collectionReadTimeIndexPath,{unique:!1})}(i)})),o<10&&c>=10&&(g=g.next(()=>this.$e(d))),o<11&&c>=11&&(g=g.next(()=>{(function(v){v.createObjectStore(Sf.store,{keyPath:Sf.keyPath})})(r),function(v){v.createObjectStore(Df.store,{keyPath:Df.keyPath})}(r)})),g}Ne(r){let i=0;return r.store(Lr.store).Kt((o,c)=>{i+=P_(c)}).next(()=>{const o=new Tl(i);return r.store(Tl.store).put(Tl.key,o)})}Ce(r){const i=r.store(Yd.store),o=r.store(Mr.store);return i.Lt().next(c=>qe.forEach(c,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.Lt(Mr.userMutationsIndex,g).next(v=>qe.forEach(v,w=>{$t(w.userId===d.userId);const R=ka(this.N,w);return HE(r,d.userId,R).next(()=>{})}))}))}xe(r){const i=r.store(Bi.store),o=r.store(Lr.store);return r.store(Ms.store).get(Ms.key).next(c=>{const d=[];return o.Kt((g,v)=>{const w=new Nn(g),R=[0,Eo(w)];d.push(i.get(R).next(F=>F?qe.resolve():i.put(new Bi(0,Eo(w),c.highestListenSequenceNumber))))}).next(()=>qe.waitFor(d))})}ke(r,i){r.createObjectStore(Qd.store,{keyPath:Qd.keyPath});const o=i.store(Qd.store),c=new N_,d=g=>{if(c.add(g)){const v=g.lastSegment(),w=g.popLast();return o.put({collectionId:v,parent:Eo(w)})}};return i.store(Lr.store).Kt({qt:!0},(g,v)=>{const w=new Nn(g);return d(w.popLast())}).next(()=>i.store(As.store).Kt({qt:!0},([g,v,w],R)=>{const F=Il(v);return d(F.popLast())}))}$e(r){const i=r.store(bo.store);return i.Kt((o,c)=>{const d=Sl(c),g=nh(this.N,d);return i.put(g)})}}function WC(s){s.createObjectStore(Bi.store,{keyPath:Bi.keyPath}).createIndex(Bi.documentTargetsIndex,Bi.documentTargetsKeyPath,{unique:!0}),s.createObjectStore(bo.store,{keyPath:bo.keyPath}).createIndex(bo.queryTargetsIndexName,bo.queryTargetsKeyPath,{unique:!0}),s.createObjectStore(Ms.store)}const k_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qC{constructor(r,i,o,c,d,g,v,w,R,F){if(this.allowTabSynchronization=r,this.persistenceKey=i,this.clientId=o,this.Oe=d,this.window=g,this.document=v,this.Fe=R,this.Me=F,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=j=>Promise.resolve(),!qC.Pt())throw new Ze(Fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RA(this,c),this.We=i+"main",this.N=new x_(w),this.Ge=new ps(this.We,11,new Zx(this.N)),this.ze=new MA(this.referenceDelegate,this.N),this.Ht=new jC,this.He=new KE(this.N,this.Ht),this.Je=new BC,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===F&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(Fe.FAILED_PRECONDITION,k_);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",r=>this.ze.getHighestSequenceNumber(r))}).then(r=>{this.Le=new Ds(r,this.Fe)}).then(()=>{this.Be=!0}).catch(r=>(this.Ge&&this.Ge.close(),Promise.reject(r)))}nn(r){var i=this;return this.Qe=function(){var o=(0,He.Z)(function*(c){if(i.started)return r(c)});return function(c){return o.apply(this,arguments)}}(),r(this.isPrimary)}setDatabaseDeletedListener(r){this.Ge.xt(function(){var i=(0,He.Z)(function*(o){null===o.newVersion&&(yield r())});return function(o){return i.apply(this,arguments)}}())}setNetworkEnabled(r){var i=this;this.networkEnabled!==r&&(this.networkEnabled=r,this.Oe.enqueueAndForget((0,He.Z)(function*(){i.started&&(yield i.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",r=>Fc(r).put(new xa(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(r).next(i=>{i||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(r)).next(i=>this.isPrimary&&!i?this.on(r).next(()=>!1):!!i&&this.an(r).next(()=>!0))).catch(r=>{if(Oa(r))return tt("IndexedDbPersistence","Failed to extend owner lease: ",r),this.isPrimary;if(!this.allowTabSynchronization)throw r;return tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(r=>{this.isPrimary!==r&&this.Oe.enqueueRetryable(()=>this.Qe(r)),this.isPrimary=r})}sn(r){return Cg(r).get(Fr.key).next(i=>qe.resolve(this.cn(i)))}un(r){return Fc(r).delete(this.clientId)}hn(){var r=this;return(0,He.Z)(function*(){if(r.isPrimary&&!r.ln(r.je,18e5)){r.je=Date.now();const i=yield r.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const c=Un(o,xa.store);return c.Lt().next(d=>{const g=r.fn(d,18e5),v=d.filter(w=>-1===g.indexOf(w));return qe.forEach(v,w=>c.delete(w.clientId)).next(()=>v)})}).catch(()=>[]);if(r.Ye)for(const o of i)r.Ye.removeItem(r.dn(o.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(r){return!!r&&r.ownerId===this.clientId}rn(r){return this.Me?qe.resolve(!0):Cg(r).get(Fr.key).next(i=>{if(null!==i&&this.ln(i.leaseTimestampMs,5e3)&&!this.wn(i.ownerId)){if(this.cn(i)&&this.networkEnabled)return!0;if(!this.cn(i)){if(!i.allowTabSynchronization)throw new Ze(Fe.FAILED_PRECONDITION,k_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fc(r).Lt().next(o=>void 0===this.fn(o,5e3).find(c=>{if(this.clientId!==c.clientId){const g=!this.inForeground&&c.inForeground,v=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||g&&v)return!0}return!1}))}).next(i=>(this.isPrimary!==i&&tt("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var r=this;return(0,He.Z)(function*(){r.Be=!1,r._n(),r.Ke&&(r.Ke.cancel(),r.Ke=null),r.mn(),r.gn(),yield r.Ge.runTransaction("shutdown","readwrite",[Fr.store,xa.store],i=>{const o=new Af(i,Ds.T);return r.on(o).next(()=>r.un(o))}),r.Ge.close(),r.yn()})()}fn(r,i){return r.filter(o=>this.ln(o.updateTimeMs,i)&&!this.wn(o.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",r=>Fc(r).Lt().next(i=>this.fn(i,18e5).map(o=>o.clientId)))}get started(){return this.Be}getMutationQueue(r){return GE.Yt(r,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(r,i,o){let d;return tt("IndexedDbPersistence","Starting transaction:",r),this.Ge.runTransaction(r,"readonly"===i?"readonly":"readwrite",DA,g=>(d=new Af(g,this.Le?this.Le.next():Ds.T),"readwrite-primary"===i?this.sn(d).next(v=>!!v||this.rn(d)).next(v=>{if(!v)throw Xr(`Failed to obtain primary lease for action '${r}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ze(Fe.FAILED_PRECONDITION,FC);return o(d)}).next(v=>this.an(d).next(()=>v)):this.En(d).next(()=>o(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}En(r){return Cg(r).get(Fr.key).next(i=>{if(null!==i&&this.ln(i.leaseTimestampMs,5e3)&&!this.wn(i.ownerId)&&!this.cn(i)&&!(this.Me||this.allowTabSynchronization&&i.allowTabSynchronization))throw new Ze(Fe.FAILED_PRECONDITION,k_)})}an(r){const i=new Fr(this.clientId,this.allowTabSynchronization,Date.now());return Cg(r).put(Fr.key,i)}static Pt(){return ps.Pt()}on(r){const i=Cg(r);return i.get(Fr.key).next(o=>this.cn(o)?(tt("IndexedDbPersistence","Releasing primary lease."),i.delete(Fr.key)):qe.resolve())}ln(r,i){const o=Date.now();return!(r<o-i||r>o&&(Xr(`Detected an update time that is in the future: ${r} > ${o}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var r;"function"==typeof(null===(r=this.window)||void 0===r?void 0:r.addEventListener)&&(this.Ue=()=>{this._n(),(0,J.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(r){var i;try{const o=null!==(null===(i=this.Ye)||void 0===i?void 0:i.getItem(this.dn(r)));return tt("IndexedDbPersistence",`Client '${r}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Xr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(r){Xr("Failed to set zombie client id.",r)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(r){}}dn(r){return`firestore_zombie_${this.persistenceKey}_${r}`}}function Cg(s){return Un(s,Fr.store)}function Fc(s){return Un(s,xa.store)}function QE(s,r){let i=s.projectId;return s.isDefaultDatabase||(i+="."+s.database),"firestore/"+r+"/"+i+"/"}class KC{constructor(r,i){this.progress=r,this.Tn=i}}class ZC{constructor(r,i,o){this.He=r,this.In=i,this.Ht=o}An(r,i){return this.In.getAllMutationBatchesAffectingDocumentKey(r,i).next(o=>this.Rn(r,i,o))}Rn(r,i,o){return this.He.getEntry(r,i).next(c=>{for(const d of o)d.applyToLocalView(c);return c})}Pn(r,i){r.forEach((o,c)=>{for(const d of i)d.applyToLocalView(c)})}bn(r,i){return this.He.getEntries(r,i).next(o=>this.vn(r,o).next(()=>o))}vn(r,i){return this.In.getAllMutationBatchesAffectingDocumentKeys(r,i).next(o=>this.Pn(i,o))}getDocumentsMatchingQuery(r,i,o){return Ct.isDocumentKey((c=i).path)&&null===c.collectionGroup&&0===c.filters.length?this.Vn(r,i.path):uC(i)?this.Sn(r,i,o):this.Dn(r,i,o);var c}Vn(r,i){return this.An(r,new Ct(i)).next(o=>{let c=_g();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}Sn(r,i,o){const c=i.collectionGroup;let d=_g();return this.Ht.getCollectionParents(r,c).next(g=>qe.forEach(g,v=>{const w=(R=i,F=v.child(c),new Nc(F,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt));var R,F;return this.Dn(r,w,o).next(R=>{R.forEach((F,j)=>{d=d.insert(F,j)})})}).next(()=>d))}Dn(r,i,o){let c,d;return this.He.getDocumentsMatchingQuery(r,i,o).next(g=>(c=g,this.In.getAllMutationBatchesAffectingQuery(r,i))).next(g=>(d=g,this.Cn(r,d,c).next(v=>{c=v;for(const w of d)for(const R of w.mutations){const F=R.key;let j=c.get(F);null==j&&(j=ar.newInvalidDocument(F),c=c.insert(F,j)),CE(R,j,w.localWriteTime),j.isFoundDocument()||(c=c.remove(F))}}))).next(()=>(c.forEach((g,v)=>{dg(i,v)||(c=c.remove(g))}),c))}Cn(r,i,o){let c=Vn();for(const g of i)for(const v of g.mutations)v instanceof Du&&null===o.get(v.key)&&(c=c.add(v.key));let d=o;return this.He.getEntries(r,c).next(g=>(g.forEach((v,w)=>{w.isFoundDocument()&&(d=d.insert(v,w))}),d))}}class F_{constructor(r,i,o,c){this.targetId=r,this.fromCache=i,this.Nn=o,this.xn=c}static kn(r,i){let o=Vn(),c=Vn();for(const d of i.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:c=c.add(d.doc.key)}return new F_(r,i.fromCache,o,c)}}class Ig{$n(r){this.On=r}getDocumentsMatchingQuery(r,i,o,c){return 0===(d=i).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(on.min())?this.Fn(r,i):this.On.bn(r,c).next(d=>{const g=this.Mn(i,d);return(y_(i)||us(i))&&this.Ln(i.limitType,g,c,o)?this.Fn(r,i):(rE()<=po.in.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),E_(i)),this.On.getDocumentsMatchingQuery(r,i,o).next(v=>(g.forEach(w=>{v=v.insert(w.key,w)}),v)))});var d}Mn(r,i){let o=new tr(dC(r));return i.forEach((c,d)=>{dg(r,d)&&(o=o.add(d))}),o}Ln(r,i,o,c){if(o.size!==i.size)return!0;const d="F"===r?i.last():i.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(c)>0)}Fn(r,i){return rE()<=po.in.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",E_(i)),this.On.getDocumentsMatchingQuery(r,i,on.min())}}class xA{constructor(r,i,o,c){this.persistence=r,this.Bn=i,this.N=c,this.Un=new Mi(pn),this.qn=new xf(d=>ag(d),Tu),this.Kn=on.min(),this.In=r.getMutationQueue(o),this.jn=r.getRemoteDocumentCache(),this.ze=r.getTargetCache(),this.Qn=new ZC(this.jn,this.In,this.persistence.getIndexManager()),this.Je=r.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(r){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>r.collect(i,this.Un))}}function JE(s,r,i,o){return new xA(s,r,i,o)}function YC(s,r){return XE.apply(this,arguments)}function XE(){return(XE=(0,He.Z)(function*(s,r){const i=ot(s);let o=i.In,c=i.Qn;const d=yield i.persistence.runTransaction("Handle user change","readonly",g=>{let v;return i.In.getAllMutationBatches(g).next(w=>(v=w,o=i.persistence.getMutationQueue(r),c=new ZC(i.jn,o,i.persistence.getIndexManager()),o.getAllMutationBatches(g))).next(w=>{const R=[],F=[];let j=Vn();for(const Q of v){R.push(Q.batchId);for(const de of Q.mutations)j=j.add(de.key)}for(const Q of w){F.push(Q.batchId);for(const de of Q.mutations)j=j.add(de.key)}return c.bn(g,j).next(Q=>({Wn:Q,removedBatchIds:R,addedBatchIds:F}))})});return i.In=o,i.Qn=c,i.Bn.$n(i.Qn),d})).apply(this,arguments)}function OA(s,r){const i=ot(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const c=r.batch.keys(),d=i.jn.newChangeBuffer({trackRemovals:!0});return function(g,v,w,R){const F=w.batch,j=F.keys();let Q=qe.resolve();return j.forEach(de=>{Q=Q.next(()=>R.getEntry(v,de)).next(ge=>{const Ne=w.docVersions.get(de);$t(null!==Ne),ge.version.compareTo(Ne)<0&&(F.applyToRemoteDocument(ge,w),ge.isValidDocument()&&R.addEntry(ge,w.commitVersion))})}),Q.next(()=>g.In.removeMutationBatch(v,F))}(i,o,r,d).next(()=>d.apply(o)).next(()=>i.In.performConsistencyCheck(o)).next(()=>i.Qn.bn(o,c))})}function QC(s){const r=ot(s);return r.persistence.runTransaction("Get last remote snapshot version","readonly",i=>r.ze.getLastRemoteSnapshotVersion(i))}function NA(s,r){const i=ot(s),o=r.snapshotVersion;let c=i.Un;return i.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=i.jn.newChangeBuffer({trackRemovals:!0});c=i.Un;const v=[];r.targetChanges.forEach((R,F)=>{const j=c.get(F);if(!j)return;v.push(i.ze.removeMatchingKeys(d,R.removedDocuments,F).next(()=>i.ze.addMatchingKeys(d,R.addedDocuments,F)));const Q=R.resumeToken;if(Q.approximateByteSize()>0){const de=j.withResumeToken(Q,o).withSequenceNumber(d.currentSequenceNumber);c=c.insert(F,de),ge=j,$e=R,$t((Ne=de).resumeToken.approximateByteSize()>0),(0===ge.resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-ge.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&v.push(i.ze.updateTargetData(d,de))}var ge,Ne,$e});let w=fs();if(r.documentUpdates.forEach((R,F)=>{r.resolvedLimboDocuments.has(R)&&v.push(i.persistence.referenceDelegate.updateLimboDocument(d,R))}),v.push(eb(d,g,r.documentUpdates,o,void 0).next(R=>{w=R})),!o.isEqual(on.min())){const R=i.ze.getLastRemoteSnapshotVersion(d).next(F=>i.ze.setTargetsMetadata(d,d.currentSequenceNumber,o));v.push(R)}return qe.waitFor(v).next(()=>g.apply(d)).next(()=>i.Qn.vn(d,w)).next(()=>w)}).then(d=>(i.Un=c,d))}function eb(s,r,i,o,c){let d=Vn();return i.forEach(g=>d=d.add(g)),r.getEntries(s,d).next(g=>{let v=fs();return i.forEach((w,R)=>{const F=g.get(w),j=(null==c?void 0:c.get(w))||o;R.isNoDocument()&&R.version.isEqual(on.min())?(r.removeEntry(w,j),v=v.insert(w,R)):!F.isValidDocument()||R.version.compareTo(F.version)>0||0===R.version.compareTo(F.version)&&F.hasPendingWrites?(r.addEntry(R,j),v=v.insert(w,R)):tt("LocalStore","Ignoring outdated watch update for ",w,". Current version:",F.version," Watch version:",R.version)}),v})}function PA(s,r){const i=ot(s);return i.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===r&&(r=-1),i.In.getNextMutationBatchAfterBatchId(o,r)))}function sh(s,r){const i=ot(s);return i.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return i.ze.getTargetData(o,r).next(d=>d?(c=d,qe.resolve(c)):i.ze.allocateTargetId(o).next(g=>(c=new Ri(r,g,0,o.currentSequenceNumber),i.ze.addTargetData(o,c).next(()=>c))))}).then(o=>{const c=i.Un.get(o.targetId);return(null===c||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(i.Un=i.Un.insert(o.targetId,o),i.qn.set(r,o.targetId)),o})}function oh(s,r,i){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,He.Z)(function*(s,r,i){const o=ot(s),c=o.Un.get(r),d=i?"readwrite":"readwrite-primary";try{i||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,c)))}catch(g){if(!Oa(g))throw g;tt("LocalStore",`Failed to update sequence numbers for target ${r}: ${g}`)}o.Un=o.Un.remove(r),o.qn.delete(c.target)})).apply(this,arguments)}function tb(s,r,i){const o=ot(s);let c=on.min(),d=Vn();return o.persistence.runTransaction("Execute query","readonly",g=>function(v,w,R){const F=ot(v),j=F.qn.get(R);return void 0!==j?qe.resolve(F.Un.get(j)):F.ze.getTargetData(w,R)}(o,g,vo(r)).next(v=>{if(v)return c=v.lastLimboFreeSnapshotVersion,o.ze.getMatchingKeysForTargetId(g,v.targetId).next(w=>{d=w})}).next(()=>o.Bn.getDocumentsMatchingQuery(g,r,i?c:on.min(),i?d:Vn())).next(v=>({documents:v,Gn:d})))}function L_(s,r){const i=ot(s),o=ot(i.ze),c=i.Un.get(r);return c?Promise.resolve(c.target):i.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,r).next(g=>g?g.target:null))}function JC(s){const r=ot(s);return r.persistence.runTransaction("Get new document changes","readonly",i=>function(o,c,d){const g=ot(o);let v=fs(),w=Mu(d);const R=ih(c),F=IDBKeyRange.lowerBound(w,!0);return R.Kt({index:Lr.readTimeIndex,range:F},(j,Q)=>{const de=Au(g.N,Q);v=v.insert(de.key,de),w=Q.readTime}).next(()=>({Tn:v,readTime:th(w)}))}(r.jn,i,r.Kn)).then(({Tn:i,readTime:o})=>(r.Kn=o,i))}function ah(){return(ah=(0,He.Z)(function*(s){const r=ot(s);return r.persistence.runTransaction("Synchronize last document change read time","readonly",i=>function(o){const c=ih(o);let d=on.min();return c.Kt({index:Lr.readTimeIndex,reverse:!0},(g,v,w)=>{v.readTime&&(d=th(v.readTime)),w.done()}).next(()=>d)}(i)).then(i=>{r.Kn=i})})).apply(this,arguments)}function Sg(){return(Sg=(0,He.Z)(function*(s,r,i,o){const c=ot(s);let d=Vn(),g=fs(),v=vC();for(const F of i){const j=r.zn(F.metadata.name);F.document&&(d=d.add(j)),g=g.insert(j,r.Hn(F)),v=v.insert(j,r.Jn(F.metadata.readTime))}const w=c.jn.newChangeBuffer({trackRemovals:!0}),R=yield sh(c,(F=o,vo(Ef(Nn.fromString(`__bundle__/docs/${F}`)))));var F;return c.persistence.runTransaction("Apply bundle documents","readwrite",F=>eb(F,w,g,on.min(),v).next(j=>(w.apply(F),j)).next(j=>c.ze.removeMatchingKeysForTargetId(F,R.targetId).next(()=>c.ze.addMatchingKeys(F,d,R.targetId)).next(()=>c.Qn.vn(F,j)).next(()=>j)))})).apply(this,arguments)}function nb(s,r){return rb.apply(this,arguments)}function rb(){return(rb=(0,He.Z)(function*(s,r,i=Vn()){const o=yield sh(s,vo(O_(r.bundledQuery))),c=ot(s);return c.persistence.runTransaction("Save named query","readwrite",d=>{const g=fi(r.readTime);if(o.snapshotVersion.compareTo(g)>=0)return c.Je.saveNamedQuery(d,r);const v=o.withResumeToken(Qi.EMPTY_BYTE_STRING,g);return c.Un=c.Un.insert(v.targetId,v),c.ze.updateTargetData(d,v).next(()=>c.ze.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>c.ze.addMatchingKeys(d,i,o.targetId)).next(()=>c.Je.saveNamedQuery(d,r))})})).apply(this,arguments)}class ib{constructor(r){this.N=r,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(r,i){return qe.resolve(this.Yn.get(i))}saveBundleMetadata(r,i){var o;return this.Yn.set(i.id,{id:(o=i).id,version:o.version,createTime:fi(o.createTime)}),qe.resolve()}getNamedQuery(r,i){return qe.resolve(this.Xn.get(i))}saveNamedQuery(r,i){return this.Xn.set(i.name,{name:(o=i).name,query:O_(o.bundledQuery),readTime:fi(o.readTime)}),qe.resolve();var o}}class Dg{constructor(){this.Zn=new tr(xi.ts),this.es=new tr(xi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(r,i){const o=new xi(r,i);this.Zn=this.Zn.add(o),this.es=this.es.add(o)}ss(r,i){r.forEach(o=>this.addReference(o,i))}removeReference(r,i){this.rs(new xi(r,i))}os(r,i){r.forEach(o=>this.removeReference(o,i))}cs(r){const i=new Ct(new Nn([])),o=new xi(i,r),c=new xi(i,r+1),d=[];return this.es.forEachInRange([o,c],g=>{this.rs(g),d.push(g.key)}),d}us(){this.Zn.forEach(r=>this.rs(r))}rs(r){this.Zn=this.Zn.delete(r),this.es=this.es.delete(r)}hs(r){const i=new Ct(new Nn([])),o=new xi(i,r),c=new xi(i,r+1);let d=Vn();return this.es.forEachInRange([o,c],g=>{d=d.add(g.key)}),d}containsKey(r){const i=new xi(r,0),o=this.Zn.firstAfterOrEqual(i);return null!==o&&r.isEqual(o.key)}}class xi{constructor(r,i){this.key=r,this.ls=i}static ts(r,i){return Ct.comparator(r.key,i.key)||pn(r.ls,i.ls)}static ns(r,i){return pn(r.ls,i.ls)||Ct.comparator(r.key,i.key)}}class Qx{constructor(r,i){this.Ht=r,this.referenceDelegate=i,this.In=[],this.fs=1,this.ds=new tr(xi.ts)}checkEmpty(r){return qe.resolve(0===this.In.length)}addMutationBatch(r,i,o,c){const d=this.fs;this.fs++;const g=new kc(d,i,o,c);this.In.push(g);for(const v of c)this.ds=this.ds.add(new xi(v.key,d)),this.Ht.addToCollectionParentIndex(r,v.key.path.popLast());return qe.resolve(g)}lookupMutationBatch(r,i){return qe.resolve(this.ws(i))}getNextMutationBatchAfterBatchId(r,i){const c=this._s(i+1),d=c<0?0:c;return qe.resolve(this.In.length>d?this.In[d]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(r){return qe.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(r,i){const o=new xi(i,0),c=new xi(i,Number.POSITIVE_INFINITY),d=[];return this.ds.forEachInRange([o,c],g=>{const v=this.ws(g.ls);d.push(v)}),qe.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(r,i){let o=new tr(pn);return i.forEach(c=>{const d=new xi(c,0),g=new xi(c,Number.POSITIVE_INFINITY);this.ds.forEachInRange([d,g],v=>{o=o.add(v.ls)})}),qe.resolve(this.gs(o))}getAllMutationBatchesAffectingQuery(r,i){const o=i.path,c=o.length+1;let d=o;Ct.isDocumentKey(d)||(d=d.child(""));const g=new xi(new Ct(d),0);let v=new tr(pn);return this.ds.forEachWhile(w=>{const R=w.key.path;return!!o.isPrefixOf(R)&&(R.length===c&&(v=v.add(w.ls)),!0)},g),qe.resolve(this.gs(v))}gs(r){const i=[];return r.forEach(o=>{const c=this.ws(o);null!==c&&i.push(c)}),i}removeMutationBatch(r,i){$t(0===this.ys(i.batchId,"removed")),this.In.shift();let o=this.ds;return qe.forEach(i.mutations,c=>{const d=new xi(c.key,i.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(r,c.key)}).next(()=>{this.ds=o})}te(r){}containsKey(r,i){const o=new xi(i,0),c=this.ds.firstAfterOrEqual(o);return qe.resolve(i.isEqual(c&&c.key))}performConsistencyCheck(r){return qe.resolve()}ys(r,i){return this._s(r)}_s(r){return 0===this.In.length?0:r-this.In[0].batchId}ws(r){const i=this._s(r);return i<0||i>=this.In.length?null:this.In[i]}}class FA{constructor(r,i){this.Ht=r,this.ps=i,this.docs=new Mi(Ct.comparator),this.size=0}addEntry(r,i,o){const c=i.key,d=this.docs.get(c),g=d?d.size:0,v=this.ps(i);return this.docs=this.docs.insert(c,{document:i.clone(),size:v,readTime:o}),this.size+=v-g,this.Ht.addToCollectionParentIndex(r,c.path.popLast())}removeEntry(r){const i=this.docs.get(r);i&&(this.docs=this.docs.remove(r),this.size-=i.size)}getEntry(r,i){const o=this.docs.get(i);return qe.resolve(o?o.document.clone():ar.newInvalidDocument(i))}getEntries(r,i){let o=fs();return i.forEach(c=>{const d=this.docs.get(c);o=o.insert(c,d?d.document.clone():ar.newInvalidDocument(c))}),qe.resolve(o)}getDocumentsMatchingQuery(r,i,o){let c=fs();const d=new Ct(i.path.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:v,value:{document:w,readTime:R}}=g.getNext();if(!i.path.isPrefixOf(v.path))break;R.compareTo(o)<=0||dg(i,w)&&(c=c.insert(w.key,w.clone()))}return qe.resolve(c)}Es(r,i){return qe.forEach(this.docs,o=>i(o))}newChangeBuffer(r){return new XC(this)}getSize(r){return qe.resolve(this.size)}}class XC extends $C{constructor(r){super(),this.Se=r}applyChanges(r){const i=[];return this.changes.forEach((o,c)=>{c.document.isValidDocument()?i.push(this.Se.addEntry(r,c.document,this.getReadTime(o))):this.Se.removeEntry(o)}),qe.waitFor(i)}getFromCache(r,i){return this.Se.getEntry(r,i)}getAllFromCache(r,i){return this.Se.getEntries(r,i)}}class eI{constructor(r){this.persistence=r,this.Ts=new xf(i=>ag(i),Tu),this.lastRemoteSnapshotVersion=on.min(),this.highestTargetId=0,this.Is=0,this.As=new Dg,this.targetCount=0,this.Rs=xu.se()}forEachTarget(r,i){return this.Ts.forEach((o,c)=>i(c)),qe.resolve()}getLastRemoteSnapshotVersion(r){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(r){return qe.resolve(this.Is)}allocateTargetId(r){return this.highestTargetId=this.Rs.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(r,i,o){return o&&(this.lastRemoteSnapshotVersion=o),i>this.Is&&(this.Is=i),qe.resolve()}ae(r){this.Ts.set(r.target,r);const i=r.targetId;i>this.highestTargetId&&(this.Rs=new xu(i),this.highestTargetId=i),r.sequenceNumber>this.Is&&(this.Is=r.sequenceNumber)}addTargetData(r,i){return this.ae(i),this.targetCount+=1,qe.resolve()}updateTargetData(r,i){return this.ae(i),qe.resolve()}removeTargetData(r,i){return this.Ts.delete(i.target),this.As.cs(i.targetId),this.targetCount-=1,qe.resolve()}removeTargets(r,i,o){let c=0;const d=[];return this.Ts.forEach((g,v)=>{v.sequenceNumber<=i&&null===o.get(v.targetId)&&(this.Ts.delete(g),d.push(this.removeMatchingKeysForTargetId(r,v.targetId)),c++)}),qe.waitFor(d).next(()=>c)}getTargetCount(r){return qe.resolve(this.targetCount)}getTargetData(r,i){const o=this.Ts.get(i)||null;return qe.resolve(o)}addMatchingKeys(r,i,o){return this.As.ss(i,o),qe.resolve()}removeMatchingKeys(r,i,o){this.As.os(i,o);const c=this.persistence.referenceDelegate,d=[];return c&&i.forEach(g=>{d.push(c.markPotentiallyOrphaned(r,g))}),qe.waitFor(d)}removeMatchingKeysForTargetId(r,i){return this.As.cs(i),qe.resolve()}getMatchingKeysForTargetId(r,i){const o=this.As.hs(i);return qe.resolve(o)}containsKey(r,i){return qe.resolve(this.As.containsKey(i))}}class LA{constructor(r,i){this.Ps={},this.Le=new Ds(0),this.Be=!1,this.Be=!0,this.referenceDelegate=r(this),this.ze=new eI(this),this.Ht=new UC,this.He=new FA(this.Ht,o=>this.referenceDelegate.bs(o)),this.N=new x_(i),this.Je=new ib(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(r){let i=this.Ps[r.toKey()];return i||(i=new Qx(this.Ht,this.referenceDelegate),this.Ps[r.toKey()]=i),i}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(r,i,o){tt("MemoryPersistence","Starting transaction:",r);const c=new tI(this.Le.next());return this.referenceDelegate.vs(),o(c).next(d=>this.referenceDelegate.Vs(c).next(()=>d)).toPromise().then(d=>(c.raiseOnCommittedEvent(),d))}Ss(r,i){return qe.or(Object.values(this.Ps).map(o=>()=>o.containsKey(r,i)))}}class tI extends LC{constructor(r){super(),this.currentSequenceNumber=r}}class Ag{constructor(r){this.persistence=r,this.Ds=new Dg,this.Cs=null}static Ns(r){return new Ag(r)}get xs(){if(this.Cs)return this.Cs;throw wt()}addReference(r,i,o){return this.Ds.addReference(o,i),this.xs.delete(o.toString()),qe.resolve()}removeReference(r,i,o){return this.Ds.removeReference(o,i),this.xs.add(o.toString()),qe.resolve()}markPotentiallyOrphaned(r,i){return this.xs.add(i.toString()),qe.resolve()}removeTarget(r,i){this.Ds.cs(i.targetId).forEach(c=>this.xs.add(c.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(r,i.targetId).next(c=>{c.forEach(d=>this.xs.add(d.toString()))}).next(()=>o.removeTargetData(r,i))}vs(){this.Cs=new Set}Vs(r){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.xs,o=>{const c=Ct.fromPath(o);return this.ks(r,c).next(d=>{d||i.removeEntry(c)})}).next(()=>(this.Cs=null,i.apply(r)))}updateLimboDocument(r,i){return this.ks(r,i).next(o=>{o?this.xs.delete(i.toString()):this.xs.add(i.toString())})}bs(r){return 0}ks(r,i){return qe.or([()=>qe.resolve(this.Ds.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(r,i),()=>this.persistence.Ss(r,i)])}}function sb(s,r){return`firestore_clients_${s}_${r}`}function V_(s,r,i){let o=`firestore_mutations_${s}_${i}`;return r.isAuthenticated()&&(o+=`_${r.uid}`),o}function Mg(s,r){return`firestore_targets_${s}_${r}`}class Of{constructor(r,i,o,c){this.user=r,this.batchId=i,this.state=o,this.error=c}static $s(r,i,o){const c=JSON.parse(o);let d,g="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return g&&c.error&&(g="string"==typeof c.error.message&&"string"==typeof c.error.code,g&&(d=new Ze(c.error.code,c.error.message))),g?new Of(r,i,c.state,d):(Xr("SharedClientState",`Failed to parse mutation state for ID '${i}': ${o}`),null)}Os(){const r={state:this.state,updateTimeMs:Date.now()};return this.error&&(r.error={code:this.error.code,message:this.error.message}),JSON.stringify(r)}}class Rg{constructor(r,i,o){this.targetId=r,this.state=i,this.error=o}static $s(r,i){const o=JSON.parse(i);let c,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(c=new Ze(o.error.code,o.error.message))),d?new Rg(r,o.state,c):(Xr("SharedClientState",`Failed to parse target state for ID '${r}': ${i}`),null)}Os(){const r={state:this.state,updateTimeMs:Date.now()};return this.error&&(r.error={code:this.error.code,message:this.error.message}),JSON.stringify(r)}}class xg{constructor(r,i){this.clientId=r,this.activeTargetIds=i}static $s(r,i){const o=JSON.parse(i);let c="object"==typeof o&&o.activeTargetIds instanceof Array,d=A_();for(let g=0;c&&g<o.activeTargetIds.length;++g)c=lA(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return c?new xg(r,d):(Xr("SharedClientState",`Failed to parse client data for instance '${r}': ${i}`),null)}}class B_{constructor(r,i){this.clientId=r,this.onlineState=i}static $s(r){const i=JSON.parse(r);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new B_(i.clientId,i.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${r}`),null)}}class Og{constructor(){this.activeTargetIds=A_()}Fs(r){this.activeTargetIds=this.activeTargetIds.add(r)}Ms(r){this.activeTargetIds=this.activeTargetIds.delete(r)}Os(){const r={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(r)}}class U_{constructor(r,i,o,c,d){this.window=r,this.Oe=i,this.persistenceKey=o,this.Ls=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Mi(pn),this.started=!1,this.Ks=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.js=sb(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Og),this.Ws=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(v){return`firestore_bundle_loaded_${v}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static Pt(r){return!(!r||!r.localStorage)}start(){var r=this;return(0,He.Z)(function*(){const i=yield r.syncEngine.pn();for(const c of i){if(c===r.Ls)continue;const d=r.getItem(sb(r.persistenceKey,c));if(d){const g=xg.$s(c,d);g&&(r.qs=r.qs.insert(g.clientId,g))}}r.Ys();const o=r.storage.getItem(r.Hs);if(o){const c=r.Xs(o);c&&r.Zs(c)}for(const c of r.Ks)r.Us(c);r.Ks=[],r.window.addEventListener("pagehide",()=>r.shutdown()),r.started=!0})()}writeSequenceNumber(r){this.setItem(this.Qs,JSON.stringify(r))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(r){let i=!1;return this.qs.forEach((o,c)=>{c.activeTargetIds.has(r)&&(i=!0)}),i}addPendingMutation(r){this.ei(r,"pending")}updateMutationState(r,i,o){this.ei(r,i,o),this.ni(r)}addLocalQueryTarget(r){let i="not-current";if(this.isActiveQueryTarget(r)){const o=this.storage.getItem(Mg(this.persistenceKey,r));if(o){const c=Rg.$s(r,o);c&&(i=c.state)}}return this.si.Fs(r),this.Ys(),i}removeLocalQueryTarget(r){this.si.Ms(r),this.Ys()}isLocalQueryTarget(r){return this.si.activeTargetIds.has(r)}clearQueryState(r){this.removeItem(Mg(this.persistenceKey,r))}updateQueryState(r,i,o){this.ii(r,i,o)}handleUserChange(r,i,o){i.forEach(c=>{this.ni(c)}),this.currentUser=r,o.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(r){this.ri(r)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(r){const i=this.storage.getItem(r);return tt("SharedClientState","READ",r,i),i}setItem(r,i){tt("SharedClientState","SET",r,i),this.storage.setItem(r,i)}removeItem(r){tt("SharedClientState","REMOVE",r),this.storage.removeItem(r)}Us(r){var i=this;const o=r;if(o.storageArea===this.storage){if(tt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.js)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,He.Z)(function*(){if(i.started){if(null!==o.key)if(i.Ws.test(o.key)){if(null==o.newValue){const c=i.ai(o.key);return i.ci(c,null)}{const c=i.ui(o.key,o.newValue);if(c)return i.ci(c.clientId,c)}}else if(i.Gs.test(o.key)){if(null!==o.newValue){const c=i.hi(o.key,o.newValue);if(c)return i.li(c)}}else if(i.zs.test(o.key)){if(null!==o.newValue){const c=i.fi(o.key,o.newValue);if(c)return i.di(c)}}else if(o.key===i.Hs){if(null!==o.newValue){const c=i.Xs(o.newValue);if(c)return i.Zs(c)}}else if(o.key===i.Qs){const c=function(d){let g=Ds.T;if(null!=d)try{const v=JSON.parse(d);$t("number"==typeof v),g=v}catch(v){Xr("SharedClientState","Failed to read sequence number from WebStorage",v)}return g}(o.newValue);c!==Ds.T&&i.sequenceNumberHandler(c)}else if(o.key===i.Js)return i.syncEngine.wi()}else i.Ks.push(o)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(r,i,o){const c=new Of(this.currentUser,r,i,o),d=V_(this.persistenceKey,this.currentUser,r);this.setItem(d,c.Os())}ni(r){const i=V_(this.persistenceKey,this.currentUser,r);this.removeItem(i)}ri(r){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:r}))}ii(r,i,o){const c=Mg(this.persistenceKey,r),d=new Rg(r,i,o);this.setItem(c,d.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(r){const i=this.Ws.exec(r);return i?i[1]:null}ui(r,i){const o=this.ai(r);return xg.$s(o,i)}hi(r,i){const o=this.Gs.exec(r),c=Number(o[1]);return Of.$s(new Yi(void 0!==o[2]?o[2]:null),c,i)}fi(r,i){const o=this.zs.exec(r),c=Number(o[1]);return Rg.$s(c,i)}Xs(r){return B_.$s(r)}li(r){var i=this;return(0,He.Z)(function*(){if(r.user.uid===i.currentUser.uid)return i.syncEngine._i(r.batchId,r.state,r.error);tt("SharedClientState",`Ignoring mutation for non-active user ${r.user.uid}`)})()}di(r){return this.syncEngine.mi(r.targetId,r.state,r.error)}ci(r,i){const o=i?this.qs.insert(r,i):this.qs.remove(r),c=this.ti(this.qs),d=this.ti(o),g=[],v=[];return d.forEach(w=>{c.has(w)||g.push(w)}),c.forEach(w=>{d.has(w)||v.push(w)}),this.syncEngine.gi(g,v).then(()=>{this.qs=o})}Zs(r){this.qs.get(r.clientId)&&this.onlineStateHandler(r.onlineState)}ti(r){let i=A_();return r.forEach((o,c)=>{i=i.unionWith(c.activeTargetIds)}),i}}class nI{constructor(){this.yi=new Og,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(r){}updateMutationState(r,i,o){}addLocalQueryTarget(r){return this.yi.Fs(r),this.pi[r]||"not-current"}updateQueryState(r,i,o){this.pi[r]=i}removeLocalQueryTarget(r){this.yi.Ms(r)}isLocalQueryTarget(r){return this.yi.activeTargetIds.has(r)}clearQueryState(r){delete this.pi[r]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(r){return this.yi.activeTargetIds.has(r)}start(){return this.yi=new Og,Promise.resolve()}handleUserChange(r,i,o){}setOnlineState(r){}shutdown(){}writeSequenceNumber(r){}notifyBundleLoaded(){}}class rI{Ei(r){}shutdown(){}}class ob{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.Pi=[],this.bi()}Ei(r){this.Pi.push(r)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}bi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const r of this.Pi)r(0)}Ri(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const r of this.Pi)r(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ab={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lb{constructor(r){this.vi=r.vi,this.Vi=r.Vi}Si(r){this.Di=r}Ci(r){this.Ni=r}onMessage(r){this.xi=r}close(){this.Vi()}send(r){this.vi(r)}ki(){this.Di()}$i(r){this.Ni(r)}Oi(r){this.xi(r)}}class iI extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId,this.Fi=(r.ssl?"https":"http")+"://"+r.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(r,i,o,c){const d=this.Bi(r,i);tt("RestConnection","Sending: ",d,o);const g={};return this.Ui(g,c),this.qi(r,d,g,o).then(v=>(tt("RestConnection","Received: ",v),v),v=>{throw eg("RestConnection",`${r} failed with error: `,v,"url: ",d,"request:",o),v})}Ki(r,i,o,c){return this.Li(r,i,o,c)}Ui(r,i){if(r["X-Goog-Api-Client"]="gl-js/ fire/"+Gd,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),i)for(const o in i.authHeaders)i.authHeaders.hasOwnProperty(o)&&(r[o]=i.authHeaders[o])}Bi(r,i){return`${this.Fi}/v1/${i}:${ab[r]}`}}{constructor(r){super(r),this.forceLongPolling=r.forceLongPolling,this.autoDetectLongPolling=r.autoDetectLongPolling,this.useFetchStreams=r.useFetchStreams}qi(r,i,o,c){return new Promise((d,g)=>{const v=new nE;v.listenOnce(Xv.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case u_.NO_ERROR:const R=v.getResponseJson();tt("Connection","XHR received:",JSON.stringify(R)),d(R);break;case u_.TIMEOUT:tt("Connection",'RPC "'+r+'" timed out'),g(new Ze(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case u_.HTTP_ERROR:const F=v.getStatus();if(tt("Connection",'RPC "'+r+'" failed with status:',F,"response text:",v.getResponseText()),F>0){const j=v.getResponseJson().error;if(j&&j.status&&j.message){const Q=function(de){const ge=de.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(ge)>=0?ge:Fe.UNKNOWN}(j.status);g(new Ze(Q,j.message))}else g(new Ze(Fe.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new Ze(Fe.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{tt("Connection",'RPC "'+r+'" completed.')}});const w=JSON.stringify(c);v.send(i,"POST",w,o,15)})}ji(r,i){const o=[this.Fi,"/","google.firestore.v1.Firestore","/",r,"/channel"],c=new Ud,d=Sd(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new tE({})),this.Ui(g.initMessageHeaders,i),(0,J.uI)()||(0,J.b$)()||(0,J.d)()||(0,J.w1)()||(0,J.Mn)()||(0,J.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");tt("Connection","Creating WebChannel: "+v,g);const w=c.createWebChannel(v,g);let R=!1,F=!1;const j=new lb({vi:de=>{F?tt("Connection","Not sending because WebChannel is closed:",de):(R||(tt("Connection","Opening WebChannel transport."),w.open(),R=!0),tt("Connection","WebChannel sending:",de),w.send(de))},Vi:()=>w.close()}),Q=(de,ge,Ne)=>{de.listen(ge,$e=>{try{Ne($e)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return Q(w,Hd.EventType.OPEN,()=>{F||tt("Connection","WebChannel transport opened.")}),Q(w,Hd.EventType.CLOSE,()=>{F||(F=!0,tt("Connection","WebChannel transport closed"),j.$i())}),Q(w,Hd.EventType.ERROR,de=>{F||(F=!0,eg("Connection","WebChannel transport errored:",de),j.$i(new Ze(Fe.UNAVAILABLE,"The operation could not be completed")))}),Q(w,Hd.EventType.MESSAGE,de=>{var ge;if(!F){const Ne=de.data[0];$t(!!Ne);const $e=Ne,Mt=$e.error||(null===(ge=$e[0])||void 0===ge?void 0:ge.error);if(Mt){tt("Connection","WebChannel received error:",Mt);const qt=Mt.status;let Yt=function(Hi){const Ro=ei[Hi];if(void 0!==Ro)return gg(Ro)}(qt),un=Mt.message;void 0===Yt&&(Yt=Fe.INTERNAL,un="Unknown error status: "+qt+" with message "+Mt.message),F=!0,j.$i(new Ze(Yt,un)),w.close()}else tt("Connection","WebChannel received:",Ne),j.Oi(Ne)}}),Q(d,tC.STAT_EVENT,de=>{de.stat===eE_PROXY?tt("Connection","Detected buffering proxy"):de.stat===eE_NOPROXY&&tt("Connection","Detected no buffering proxy")}),setTimeout(()=>{j.ki()},0),j}}function cb(){return"undefined"!=typeof window?window:null}function Ng(){return"undefined"!=typeof document?document:null}function Nf(s){return new Gx(s,!0)}class j_{constructor(r,i,o=1e3,c=1.5,d=6e4){this.Oe=r,this.timerId=i,this.Qi=o,this.Wi=c,this.Gi=d,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(r){this.cancel();const i=Math.floor(this.zi+this.Zi()),o=Math.max(0,Date.now()-this.Ji),c=Math.max(0,i-o);c>0&&tt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.zi} ms, delay with jitter: ${i} ms, last attempt: ${o} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,c,()=>(this.Ji=Date.now(),r())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class ub{constructor(r,i,o,c,d,g){this.Oe=r,this.er=o,this.nr=c,this.credentialsProvider=d,this.listener=g,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new j_(r,i)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var r=this;return(0,He.Z)(function*(){r.ar()&&(yield r.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(r){this._r(),this.stream.send(r)}dr(){var r=this;return(0,He.Z)(function*(){if(r.cr())return r.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(r,i){var o=this;return(0,He.Z)(function*(){o._r(),o.rr.cancel(),o.sr++,3!==r?o.rr.reset():i&&i.code===Fe.RESOURCE_EXHAUSTED?(Xr(i.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),o.rr.Yi()):i&&i.code===Fe.UNAUTHENTICATED&&o.credentialsProvider.invalidateToken(),null!==o.stream&&(o.mr(),o.stream.close(),o.stream=null),o.state=r,yield o.listener.Ci(i)})()}mr(){}auth(){this.state=1;const r=this.gr(this.sr),i=this.sr;this.credentialsProvider.getToken().then(o=>{this.sr===i&&this.yr(o)},o=>{r(()=>{const c=new Ze(Fe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.pr(c)})})}yr(r){const i=this.gr(this.sr);this.stream=this.Er(r),this.stream.Si(()=>{i(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(o=>{i(()=>this.pr(o))}),this.stream.onMessage(o=>{i(()=>this.onMessage(o))})}ur(){var r=this;this.state=4,this.rr.Xi((0,He.Z)(function*(){r.state=0,r.start()}))}pr(r){return tt("PersistentStream",`close with error: ${r}`),this.stream=null,this.close(3,r)}gr(r){return i=>{this.Oe.enqueueAndForget(()=>this.sr===r?i():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sI extends ub{constructor(r,i,o,c,d){super(r,"listen_stream_connection_backoff","listen_stream_idle",i,o,d),this.N=c}Er(r){return this.nr.ji("Listen",r)}onMessage(r){this.rr.reset();const i=function(s,r){let i;if("targetChange"in r){const o="NO_CHANGE"===(w=r.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:wt(),c=r.targetChange.targetIds||[],d=function(w,R){return w.D?($t(void 0===R||"string"==typeof R),Qi.fromBase64String(R||"")):($t(void 0===R||R instanceof Uint8Array),Qi.fromUint8Array(R||new Uint8Array))}(s,r.targetChange.resumeToken),g=r.targetChange.cause,v=g&&function(w){const R=void 0===w.code?Fe.UNKNOWN:gg(w.code);return new Ze(R,w.message||"")}(g);i=new bC(o,c,d,v||null)}else if("documentChange"in r){const o=r.documentChange,c=Ko(s,o.document.name),d=fi(o.document.updateTime),g=new cs({mapValue:{fields:o.document.fields}}),v=ar.newFoundDocument(c,d,g);i=new Pc(o.targetIds||[],o.removedTargetIds||[],v.key,v)}else if("documentDelete"in r){const o=r.documentDelete,c=Ko(s,o.document),d=o.readTime?fi(o.readTime):on.min(),g=ar.newNoDocument(c,d);i=new Pc([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in r){const o=r.documentRemove,c=Ko(s,o.document);i=new Pc([],o.removedTargetIds||[],c,null)}else{if(!("filter"in r))return wt();{const o=r.filter,d=new _C(o.count||0);i=new AE(o.targetId,d)}}var w;return i}(this.N,r),o=function(c){if(!("targetChange"in c))return on.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?on.min():d.readTime?fi(d.readTime):on.min()}(r);return this.listener.Tr(i,o)}Ir(r){const i={};i.database=Eg(this.N),i.addTarget=function(c,d){let g;const v=d.target;return g=Oc(v)?{documents:PE(c,v)}:{query:kE(c,v)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=ME(c,d.resumeToken):d.snapshotVersion.compareTo(on.min())>0&&(g.readTime=vg(c,d.snapshotVersion.toTimestamp())),g}(this.N,r);const o=function(s,r){const i=function(o,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wt()}}(0,r.purpose);return null==i?null:{"goog-listen-tags":i}}(0,r);o&&(i.labels=o),this.wr(i)}Ar(r){const i={};i.database=Eg(this.N),i.removeTarget=r,this.wr(i)}}class oI extends ub{constructor(r,i,o,c,d){super(r,"write_stream_connection_backoff","write_stream_idle",i,o,d),this.N=c,this.Rr=!1}get Pr(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.br([])}Er(r){return this.nr.ji("Write",r)}onMessage(r){if($t(!!r.streamToken),this.lastStreamToken=r.streamToken,this.Rr){this.rr.reset();const i=function(s,r){return s&&s.length>0?($t(void 0!==r),s.map(i=>function(o,c){let d=fi(o.updateTime?o.updateTime:c);return d.isEqual(on.min())&&(d=fi(c)),new bE(d,o.transformResults||[])}(i,r))):[]}(r.writeResults,r.commitTime),o=fi(r.commitTime);return this.listener.vr(o,i)}return $t(!r.writeResults||0===r.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const r={};r.database=Eg(this.N),this.wr(r)}br(r){const i={streamToken:this.lastStreamToken,writes:r.map(o=>M_(this.N,o))};this.wr(i)}}class Jx extends class{}{constructor(r,i,o){super(),this.credentials=r,this.nr=i,this.N=o,this.Dr=!1}Cr(){if(this.Dr)throw new Ze(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Li(r,i,o){return this.Cr(),this.credentials.getToken().then(c=>this.nr.Li(r,i,o,c)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Fe.UNAUTHENTICATED&&this.credentials.invalidateToken(),c):new Ze(Fe.UNKNOWN,c.toString())})}Ki(r,i,o){return this.Cr(),this.credentials.getToken().then(c=>this.nr.Ki(r,i,o,c)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Fe.UNAUTHENTICATED&&this.credentials.invalidateToken(),c):new Ze(Fe.UNKNOWN,c.toString())})}terminate(){this.Dr=!0}}class VA{constructor(r,i){this.asyncQueue=r,this.onlineStateHandler=i,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(r){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${r.toString()}`),this.Fr("Offline")))}set(r){this.Br(),this.Nr=0,"Online"===r&&(this.$r=!1),this.Fr(r)}Fr(r){r!==this.state&&(this.state=r,this.onlineStateHandler(r))}Mr(r){const i=`Could not reach Cloud Firestore backend. ${r}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Xr(i),this.$r=!1):tt("OnlineStateTracker",i)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class BA{constructor(r,i,o,c,d){var g=this;this.localStore=r,this.datastore=i,this.asyncQueue=o,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=d,this.Qr.Ei(v=>{o.enqueueAndForget((0,He.Z)(function*(){var w;wo(g)&&(tt("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,He.Z)(function*(R){const F=ot(R);F.Kr.add(4),yield Rr(F),F.Wr.set("Unknown"),F.Kr.delete(4),yield Pf(F)}),function(R){return w.apply(this,arguments)})(g))}))}),this.Wr=new VA(o,c)}}function Pf(s){return db.apply(this,arguments)}function db(){return(db=(0,He.Z)(function*(s){if(wo(s))for(const r of s.jr)yield r(!0)})).apply(this,arguments)}function Rr(s){return H_.apply(this,arguments)}function H_(){return(H_=(0,He.Z)(function*(s){for(const r of s.jr)yield r(!1)})).apply(this,arguments)}function G_(s,r){const i=ot(s);i.qr.has(r.targetId)||(i.qr.set(r.targetId,r),W_(i)?z_(i):ch(i).cr()&&$_(i,r))}function Pg(s,r){const i=ot(s),o=ch(i);i.qr.delete(r),o.cr()&&aI(i,r),0===i.qr.size&&(o.cr()?o.lr():wo(i)&&i.Wr.set("Unknown"))}function $_(s,r){s.Gr.Y(r.targetId),ch(s).Ir(r)}function aI(s,r){s.Gr.Y(r),ch(s).Ar(r)}function z_(s){s.Gr=new If({getRemoteKeysForTarget:r=>s.remoteSyncer.getRemoteKeysForTarget(r),Et:r=>s.qr.get(r)||null}),ch(s).start(),s.Wr.Or()}function W_(s){return wo(s)&&!ch(s).ar()&&s.qr.size>0}function wo(s){return 0===ot(s).Kr.size}function lI(s){s.Gr=void 0}function UA(s){return q_.apply(this,arguments)}function q_(){return(q_=(0,He.Z)(function*(s){s.qr.forEach((r,i)=>{$_(s,r)})})).apply(this,arguments)}function jA(s,r){return K_.apply(this,arguments)}function K_(){return(K_=(0,He.Z)(function*(s,r){lI(s),W_(s)?(s.Wr.Lr(r),z_(s)):s.Wr.set("Unknown")})).apply(this,arguments)}function Xx(s,r,i){return kg.apply(this,arguments)}function kg(){return(kg=(0,He.Z)(function*(s,r,i){if(s.Wr.set("Online"),r instanceof bC&&2===r.state&&r.cause)try{yield(o=(0,He.Z)(function*(c,d){const g=d.cause;for(const v of d.targetIds)c.qr.has(v)&&(yield c.remoteSyncer.rejectListen(v,g),c.qr.delete(v),c.Gr.removeTarget(v))}),function(c,d){return o.apply(this,arguments)})(s,r)}catch(o){tt("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),o),yield kf(s,o)}else if(r instanceof Pc?s.Gr.rt(r):r instanceof AE?s.Gr.ft(r):s.Gr.ct(r),!i.isEqual(on.min()))try{const o=yield QC(s.localStore);i.compareTo(o)>=0&&(yield function(c,d){const g=c.Gr._t(d);return g.targetChanges.forEach((v,w)=>{if(v.resumeToken.approximateByteSize()>0){const R=c.qr.get(w);R&&c.qr.set(w,R.withResumeToken(v.resumeToken,d))}}),g.targetMismatches.forEach(v=>{const w=c.qr.get(v);if(!w)return;c.qr.set(v,w.withResumeToken(Qi.EMPTY_BYTE_STRING,w.snapshotVersion)),aI(c,v);const R=new Ri(w.target,v,1,w.sequenceNumber);$_(c,R)}),c.remoteSyncer.applyRemoteEvent(g)}(s,i))}catch(o){tt("RemoteStore","Failed to raise snapshot:",o),yield kf(s,o)}var o})).apply(this,arguments)}function kf(s,r,i){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,He.Z)(function*(s,r,i){if(!Oa(r))throw r;s.Kr.add(1),yield Rr(s),s.Wr.set("Offline"),i||(i=()=>QC(s.localStore)),s.asyncQueue.enqueueRetryable((0,He.Z)(function*(){tt("RemoteStore","Retrying IndexedDB access"),yield i(),s.Kr.delete(1),yield Pf(s)}))})).apply(this,arguments)}function cI(s,r){return r().catch(i=>kf(s,i,r))}function Ff(s){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,He.Z)(function*(s){const r=ot(s),i=Va(r);let o=r.Ur.length>0?r.Ur[r.Ur.length-1].batchId:-1;for(;Fa(r);)try{const c=yield PA(r.localStore,o);if(null===c){0===r.Ur.length&&i.lr();break}o=c.batchId,La(r,c)}catch(c){yield kf(r,c)}hb(r)&&fb(r)})).apply(this,arguments)}function Fa(s){return wo(s)&&s.Ur.length<10}function La(s,r){s.Ur.push(r);const i=Va(s);i.cr()&&i.Pr&&i.br(r.mutations)}function hb(s){return wo(s)&&!Va(s).ar()&&s.Ur.length>0}function fb(s){Va(s).start()}function HA(s){return pb.apply(this,arguments)}function pb(){return(pb=(0,He.Z)(function*(s){Va(s).Sr()})).apply(this,arguments)}function GA(s){return gb.apply(this,arguments)}function gb(){return(gb=(0,He.Z)(function*(s){const r=Va(s);for(const i of s.Ur)r.br(i.mutations)})).apply(this,arguments)}function mb(s,r,i){return lh.apply(this,arguments)}function lh(){return(lh=(0,He.Z)(function*(s,r,i){const o=s.Ur.shift(),c=Mf.from(o,r,i);yield cI(s,()=>s.remoteSyncer.applySuccessfulWrite(c)),yield Ff(s)})).apply(this,arguments)}function $A(s,r){return Z_.apply(this,arguments)}function Z_(){return(Z_=(0,He.Z)(function*(s,r){var i;r&&Va(s).Pr&&(yield(i=(0,He.Z)(function*(o,c){if(wl(d=c.code)&&d!==Fe.ABORTED){const g=o.Ur.shift();Va(o).hr(),yield cI(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,c)),yield Ff(o)}var d}),function(o,c){return i.apply(this,arguments)})(s,r)),hb(s)&&fb(s)})).apply(this,arguments)}function _b(s,r){return Y_.apply(this,arguments)}function Y_(){return(Y_=(0,He.Z)(function*(s,r){const i=ot(s);r?(i.Kr.delete(2),yield Pf(i)):r||(i.Kr.add(2),yield Rr(i),i.Wr.set("Unknown"))})).apply(this,arguments)}function ch(s){return s.zr||(s.zr=function(r,i,o){const c=ot(r);return c.Cr(),new sI(i,c.nr,c.credentials,c.N,o)}(s.datastore,s.asyncQueue,{Si:UA.bind(null,s),Ci:jA.bind(null,s),Tr:Xx.bind(null,s)}),s.jr.push(function(){var r=(0,He.Z)(function*(i){i?(s.zr.hr(),W_(s)?z_(s):s.Wr.set("Unknown")):(yield s.zr.stop(),lI(s))});return function(i){return r.apply(this,arguments)}}())),s.zr}function Va(s){return s.Hr||(s.Hr=function(r,i,o){const c=ot(r);return c.Cr(),new oI(i,c.nr,c.credentials,c.N,o)}(s.datastore,s.asyncQueue,{Si:HA.bind(null,s),Ci:$A.bind(null,s),Vr:GA.bind(null,s),vr:mb.bind(null,s)}),s.jr.push(function(){var r=(0,He.Z)(function*(i){i?(s.Hr.hr(),yield Ff(s)):(yield s.Hr.stop(),s.Ur.length>0&&(tt("RemoteStore",`Stopping write stream with ${s.Ur.length} pending writes`),s.Ur=[]))});return function(i){return r.apply(this,arguments)}}())),s.Hr}class yb{constructor(r,i,o,c,d){this.asyncQueue=r,this.timerId=i,this.targetTimeMs=o,this.op=c,this.removalCallback=d,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(r,i,o,c,d){const g=Date.now()+o,v=new yb(r,i,g,c,d);return v.start(o),v}start(r){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),r)}skipDelay(){return this.handleDelayElapsed()}cancel(r){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ze(Fe.CANCELLED,"Operation cancelled"+(r?": "+r:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(r=>this.deferred.resolve(r))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(s,r){if(Xr("AsyncQueue",`${r}: ${s}`),Oa(s))return new Ze(Fe.UNAVAILABLE,`${r}: ${s}`);throw s}class dh{constructor(r){this.comparator=r?(i,o)=>r(i,o)||Ct.comparator(i.key,o.key):(i,o)=>Ct.comparator(i.key,o.key),this.keyedMap=_g(),this.sortedSet=new Mi(this.comparator)}static emptySet(r){return new dh(r.comparator)}has(r){return null!=this.keyedMap.get(r)}get(r){return this.keyedMap.get(r)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(r){const i=this.keyedMap.get(r);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(r){this.sortedSet.inorderTraversal((i,o)=>(r(i),!1))}add(r){const i=this.delete(r.key);return i.copy(i.keyedMap.insert(r.key,r),i.sortedSet.insert(r,null))}delete(r){const i=this.get(r);return i?this.copy(this.keyedMap.remove(r),this.sortedSet.remove(i)):this}isEqual(r){if(!(r instanceof dh)||this.size!==r.size)return!1;const i=this.sortedSet.getIterator(),o=r.sortedSet.getIterator();for(;i.hasNext();){const c=i.getNext().key,d=o.getNext().key;if(!c.isEqual(d))return!1}return!0}toString(){const r=[];return this.forEach(i=>{r.push(i.toString())}),0===r.length?"DocumentSet ()":"DocumentSet (\n  "+r.join("  \n")+"\n)"}copy(r,i){const o=new dh;return o.comparator=this.comparator,o.keyedMap=r,o.sortedSet=i,o}}class Q_{constructor(){this.Jr=new Mi(Ct.comparator)}track(r){const i=r.doc.key,o=this.Jr.get(i);o?0!==r.type&&3===o.type?this.Jr=this.Jr.insert(i,r):3===r.type&&1!==o.type?this.Jr=this.Jr.insert(i,{type:o.type,doc:r.doc}):2===r.type&&2===o.type?this.Jr=this.Jr.insert(i,{type:2,doc:r.doc}):2===r.type&&0===o.type?this.Jr=this.Jr.insert(i,{type:0,doc:r.doc}):1===r.type&&0===o.type?this.Jr=this.Jr.remove(i):1===r.type&&2===o.type?this.Jr=this.Jr.insert(i,{type:1,doc:o.doc}):0===r.type&&1===o.type?this.Jr=this.Jr.insert(i,{type:2,doc:r.doc}):wt():this.Jr=this.Jr.insert(i,r)}Yr(){const r=[];return this.Jr.inorderTraversal((i,o)=>{r.push(o)}),r}}class Lc{constructor(r,i,o,c,d,g,v,w){this.query=r,this.docs=i,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=v,this.excludesMetadataChanges=w}static fromInitialDocuments(r,i,o,c){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Lc(r,i,dh.emptySet(i),d,o,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(r){if(!(this.fromCache===r.fromCache&&this.syncStateChanged===r.syncStateChanged&&this.mutatedKeys.isEqual(r.mutatedKeys)&&ug(this.query,r.query)&&this.docs.isEqual(r.docs)&&this.oldDocs.isEqual(r.oldDocs)))return!1;const i=this.docChanges,o=r.docChanges;if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++)if(i[c].type!==o[c].type||!i[c].doc.isEqual(o[c].doc))return!1;return!0}}class uI{constructor(){this.Xr=void 0,this.listeners=[]}}class dI{constructor(){this.queries=new xf(r=>v_(r),ug),this.onlineState="Unknown",this.Zr=new Set}}function J_(s,r){return X_.apply(this,arguments)}function X_(){return(X_=(0,He.Z)(function*(s,r){const i=ot(s),o=r.query;let c=!1,d=i.queries.get(o);if(d||(c=!0,d=new uI),c)try{d.Xr=yield i.onListen(o)}catch(g){const v=uh(g,`Initialization of query '${E_(r.query)}' failed`);return void r.onError(v)}i.queries.set(o,d),d.listeners.push(r),r.eo(i.onlineState),d.Xr&&r.no(d.Xr)&&vb(i)})).apply(this,arguments)}function ey(s,r){return ty.apply(this,arguments)}function ty(){return(ty=(0,He.Z)(function*(s,r){const i=ot(s),o=r.query;let c=!1;const d=i.queries.get(o);if(d){const g=d.listeners.indexOf(r);g>=0&&(d.listeners.splice(g,1),c=0===d.listeners.length)}if(c)return i.queries.delete(o),i.onUnlisten(o)})).apply(this,arguments)}function hI(s,r){const i=ot(s);let o=!1;for(const c of r){const g=i.queries.get(c.query);if(g){for(const v of g.listeners)v.no(c)&&(o=!0);g.Xr=c}}o&&vb(i)}function fI(s,r,i){const o=ot(s),c=o.queries.get(r);if(c)for(const d of c.listeners)d.onError(i);o.queries.delete(r)}function vb(s){s.Zr.forEach(r=>{r.next()})}class Eb{constructor(r,i,o){this.query=r,this.so=i,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=o||{}}no(r){if(!this.options.includeMetadataChanges){const o=[];for(const c of r.docChanges)3!==c.type&&o.push(c);r=new Lc(r.query,r.docs,r.oldDocs,o,r.mutatedKeys,r.fromCache,r.syncStateChanged,!0)}let i=!1;return this.io?this.oo(r)&&(this.so.next(r),i=!0):this.ao(r,this.onlineState)&&(this.co(r),i=!0),this.ro=r,i}onError(r){this.so.error(r)}eo(r){this.onlineState=r;let i=!1;return this.ro&&!this.io&&this.ao(this.ro,r)&&(this.co(this.ro),i=!0),i}ao(r,i){return!r.fromCache||!(this.options.uo&&"Offline"!==i||r.docs.isEmpty()&&"Offline"!==i)}oo(r){return r.docChanges.length>0||!!(r.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==r.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(r){r=Lc.fromInitialDocuments(r.query,r.docs,r.mutatedKeys,r.fromCache),this.io=!0,this.so.next(r)}}class zA{constructor(r,i){this.payload=r,this.byteLength=i}ho(){return"metadata"in this.payload}}class pI{constructor(r){this.N=r}zn(r){return Ko(this.N,r)}Hn(r){return r.metadata.exists?OE(this.N,r.document,!1):ar.newNoDocument(this.zn(r.metadata.name),this.Jn(r.metadata.readTime))}Jn(r){return fi(r)}}class WA{constructor(r,i,o){this.lo=r,this.localStore=i,this.N=o,this.queries=[],this.documents=[],this.progress=gI(r)}fo(r){this.progress.bytesLoaded+=r.byteLength;let i=this.progress.documentsLoaded;return r.payload.namedQuery?this.queries.push(r.payload.namedQuery):r.payload.documentMetadata?(this.documents.push({metadata:r.payload.documentMetadata}),r.payload.documentMetadata.exists||++i):r.payload.document&&(this.documents[this.documents.length-1].document=r.payload.document,++i),i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}wo(r){const i=new Map,o=new pI(this.N);for(const c of r)if(c.metadata.queries){const d=o.zn(c.metadata.name);for(const g of c.metadata.queries){const v=(i.get(g)||Vn()).add(d);i.set(g,v)}}return i}complete(){var r=this;return(0,He.Z)(function*(){const i=yield function(s,r,i,o){return Sg.apply(this,arguments)}(r.localStore,new pI(r.N),r.documents,r.lo.id),o=r.wo(r.documents);for(const c of r.queries)yield nb(r.localStore,c,o.get(c.name));return r.progress.taskState="Success",new KC(Object.assign({},r.progress),i)})()}}function gI(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class mI{constructor(r){this.key=r}}class _I{constructor(r){this.key=r}}class yI{constructor(r,i){this.query=r,this._o=i,this.mo=null,this.current=!1,this.yo=Vn(),this.mutatedKeys=Vn(),this.po=dC(r),this.Eo=new dh(this.po)}get To(){return this._o}Io(r,i){const o=i?i.Ao:new Q_,c=i?i.Eo:this.Eo;let d=i?i.mutatedKeys:this.mutatedKeys,g=c,v=!1;const w=y_(this.query)&&c.size===this.query.limit?c.last():null,R=us(this.query)&&c.size===this.query.limit?c.first():null;if(r.inorderTraversal((F,j)=>{const Q=c.get(F),de=dg(this.query,j)?j:null,ge=!!Q&&this.mutatedKeys.has(Q.key),Ne=!!de&&(de.hasLocalMutations||this.mutatedKeys.has(de.key)&&de.hasCommittedMutations);let $e=!1;Q&&de?Q.data.isEqual(de.data)?ge!==Ne&&(o.track({type:3,doc:de}),$e=!0):this.Ro(Q,de)||(o.track({type:2,doc:de}),$e=!0,(w&&this.po(de,w)>0||R&&this.po(de,R)<0)&&(v=!0)):!Q&&de?(o.track({type:0,doc:de}),$e=!0):Q&&!de&&(o.track({type:1,doc:Q}),$e=!0,(w||R)&&(v=!0)),$e&&(de?(g=g.add(de),d=Ne?d.add(F):d.delete(F)):(g=g.delete(F),d=d.delete(F)))}),y_(this.query)||us(this.query))for(;g.size>this.query.limit;){const F=y_(this.query)?g.last():g.first();g=g.delete(F.key),d=d.delete(F.key),o.track({type:1,doc:F})}return{Eo:g,Ao:o,Ln:v,mutatedKeys:d}}Ro(r,i){return r.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(r,i,o){const c=this.Eo;this.Eo=r.Eo,this.mutatedKeys=r.mutatedKeys;const d=r.Ao.Yr();d.sort((R,F)=>function(j,Q){const de=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return de(j)-de(Q)}(R.type,F.type)||this.po(R.doc,F.doc)),this.Po(o);const g=i?this.bo():[],v=0===this.yo.size&&this.current?1:0,w=v!==this.mo;return this.mo=v,0!==d.length||w?{snapshot:new Lc(this.query,r.Eo,c,d,r.mutatedKeys,0===v,w,!1),vo:g}:{vo:g}}eo(r){return this.current&&"Offline"===r?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Q_,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(r){return!this._o.has(r)&&!!this.Eo.has(r)&&!this.Eo.get(r).hasLocalMutations}Po(r){r&&(r.addedDocuments.forEach(i=>this._o=this._o.add(i)),r.modifiedDocuments.forEach(i=>{}),r.removedDocuments.forEach(i=>this._o=this._o.delete(i)),this.current=r.current)}bo(){if(!this.current)return[];const r=this.yo;this.yo=Vn(),this.Eo.forEach(o=>{this.Vo(o.key)&&(this.yo=this.yo.add(o.key))});const i=[];return r.forEach(o=>{this.yo.has(o)||i.push(new _I(o))}),this.yo.forEach(o=>{r.has(o)||i.push(new mI(o))}),i}So(r){this._o=r.Gn,this.yo=Vn();const i=this.Io(r.documents);return this.applyChanges(i,!0)}Do(){return Lc.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class qA{constructor(r,i,o){this.query=r,this.targetId=i,this.view=o}}class KA{constructor(r){this.key=r,this.Co=!1}}class ZA{constructor(r,i,o,c,d,g){this.localStore=r,this.remoteStore=i,this.eventManager=o,this.sharedClientState=c,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.No={},this.xo=new xf(v=>v_(v),ug),this.ko=new Map,this.$o=new Set,this.Oo=new Mi(Ct.comparator),this.Fo=new Map,this.Mo=new Dg,this.Lo={},this.Bo=new Map,this.Uo=xu.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function YA(s,r){return bb.apply(this,arguments)}function bb(){return(bb=(0,He.Z)(function*(s,r){const i=fh(s);let o,c;const d=i.xo.get(r);if(d)o=d.targetId,i.sharedClientState.addLocalQueryTarget(o),c=d.view.Do();else{const g=yield sh(i.localStore,vo(r)),v=i.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,c=yield wb(i,r,o,"current"===v),i.isPrimaryClient&&G_(i.remoteStore,g)}return c})).apply(this,arguments)}function wb(s,r,i,o){return Cb.apply(this,arguments)}function Cb(){return(Cb=(0,He.Z)(function*(s,r,i,o){s.Ko=(F,j,Q)=>{return(de=(0,He.Z)(function*(ge,Ne,$e,Mt){let qt=Ne.view.Io($e);qt.Ln&&(qt=yield tb(ge.localStore,Ne.query,!1).then(({documents:Hi})=>Ne.view.Io(Hi,qt)));const Yt=Mt&&Mt.targetChanges.get(Ne.targetId),un=Ne.view.applyChanges(qt,ge.isPrimaryClient,Yt);return wI(ge,Ne.targetId,un.vo),un.snapshot}),function(ge,Ne,$e,Mt){return de.apply(this,arguments)})(s,F,j,Q);var de};const c=yield tb(s.localStore,r,!0),d=new yI(r,c.Gn),g=d.Io(c.documents),v=Cf.createSynthesizedTargetChangeForCurrentChange(i,o&&"Offline"!==s.onlineState),w=d.applyChanges(g,s.isPrimaryClient,v);wI(s,i,w.vo);const R=new qA(r,i,d);return s.xo.set(r,R),s.ko.has(i)?s.ko.get(i).push(r):s.ko.set(i,[r]),w.snapshot})).apply(this,arguments)}function QA(s,r){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,He.Z)(function*(s,r){const i=ot(s),o=i.xo.get(r),c=i.ko.get(o.targetId);if(c.length>1)return i.ko.set(o.targetId,c.filter(d=>!ug(d,r))),void i.xo.delete(r);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||(yield oh(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),Pg(i.remoteStore,o.targetId),Lg(i,o.targetId)}).catch(Rf))):(Lg(i,o.targetId),yield oh(i.localStore,o.targetId,!0))})).apply(this,arguments)}function ny(){return(ny=(0,He.Z)(function*(s,r,i){const o=kb(s);try{const c=yield function(d,g){const v=ot(d),w=Ai.now(),R=g.reduce((j,Q)=>j.add(Q.key),Vn());let F;return v.persistence.runTransaction("Locally write mutations","readwrite",j=>v.Qn.bn(j,R).next(Q=>{F=Q;const de=[];for(const ge of g){const Ne=IE(ge,F.get(ge.key));null!=Ne&&de.push(new Du(ge.key,Ne,cA(Ne.value.mapValue),hi.exists(!0)))}return v.In.addMutationBatch(j,w,de,g)})).then(j=>(j.applyToLocalDocumentSet(F),{batchId:j.batchId,changes:F}))}(o.localStore,r);o.sharedClientState.addPendingMutation(c.batchId),function(d,g,v){let w=d.Lo[d.currentUser.toKey()];w||(w=new Mi(pn)),w=w.insert(g,v),d.Lo[d.currentUser.toKey()]=w}(o,c.batchId,i),yield Pu(o,c.changes),yield Ff(o.remoteStore)}catch(c){const d=uh(c,"Failed to persist write");i.reject(d)}})).apply(this,arguments)}function Tb(s,r){return ry.apply(this,arguments)}function ry(){return(ry=(0,He.Z)(function*(s,r){const i=ot(s);try{const o=yield NA(i.localStore,r);r.targetChanges.forEach((c,d)=>{const g=i.Fo.get(d);g&&($t(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?g.Co=!0:c.modifiedDocuments.size>0?$t(g.Co):c.removedDocuments.size>0&&($t(g.Co),g.Co=!1))}),yield Pu(i,o,r)}catch(o){yield Rf(o)}})).apply(this,arguments)}function Sb(s,r,i){const o=ot(s);if(o.isPrimaryClient&&0===i||!o.isPrimaryClient&&1===i){const c=[];o.xo.forEach((d,g)=>{const v=g.view.eo(r);v.snapshot&&c.push(v.snapshot)}),function(d,g){const v=ot(d);v.onlineState=g;let w=!1;v.queries.forEach((R,F)=>{for(const j of F.listeners)j.eo(g)&&(w=!0)}),w&&vb(v)}(o.eventManager,r),c.length&&o.No.Tr(c),o.onlineState=r,o.isPrimaryClient&&o.sharedClientState.setOnlineState(r)}}function EI(s,r,i){return iy.apply(this,arguments)}function iy(){return(iy=(0,He.Z)(function*(s,r,i){const o=ot(s);o.sharedClientState.updateQueryState(r,"rejected",i);const c=o.Fo.get(r),d=c&&c.key;if(d){let g=new Mi(Ct.comparator);g=g.insert(d,ar.newNoDocument(d,on.min()));const v=Vn().add(d),w=new yg(on.min(),new Map,new tr(pn),g,v);yield Tb(o,w),o.Oo=o.Oo.remove(d),o.Fo.delete(r),ay(o)}else yield oh(o.localStore,r,!1).then(()=>Lg(o,r,i)).catch(Rf)})).apply(this,arguments)}function bI(s,r){return sy.apply(this,arguments)}function sy(){return(sy=(0,He.Z)(function*(s,r){const i=ot(s),o=r.batch.batchId;try{const c=yield OA(i.localStore,r);Nu(i,o,null),Mb(i,o),i.sharedClientState.updateMutationState(o,"acknowledged"),yield Pu(i,c)}catch(c){yield Rf(c)}})).apply(this,arguments)}function Db(s,r,i){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,He.Z)(function*(s,r,i){const o=ot(s);try{const c=yield function(d,g){const v=ot(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let R;return v.In.lookupMutationBatch(w,g).next(F=>($t(null!==F),R=F.keys(),v.In.removeMutationBatch(w,F))).next(()=>v.In.performConsistencyCheck(w)).next(()=>v.Qn.bn(w,R))})}(o.localStore,r);Nu(o,r,i),Mb(o,r),o.sharedClientState.updateMutationState(r,"rejected",i),yield Pu(o,c)}catch(c){yield Rf(c)}})).apply(this,arguments)}function Ab(){return(Ab=(0,He.Z)(function*(s,r){const i=ot(s);wo(i.remoteStore)||tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=ot(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",v=>g.In.getHighestUnacknowledgedBatchId(v))}(i.localStore);if(-1===o)return void r.resolve();const c=i.Bo.get(o)||[];c.push(r),i.Bo.set(o,c)}catch(o){const c=uh(o,"Initialization of waitForPendingWrites() operation failed");r.reject(c)}})).apply(this,arguments)}function Mb(s,r){(s.Bo.get(r)||[]).forEach(i=>{i.resolve()}),s.Bo.delete(r)}function Nu(s,r,i){const o=ot(s);let c=o.Lo[o.currentUser.toKey()];if(c){const d=c.get(r);d&&(i?d.reject(i):d.resolve(),c=c.remove(r)),o.Lo[o.currentUser.toKey()]=c}}function Lg(s,r,i=null){s.sharedClientState.removeLocalQueryTarget(r);for(const o of s.ko.get(r))s.xo.delete(o),i&&s.No.jo(o,i);s.ko.delete(r),s.isPrimaryClient&&s.Mo.cs(r).forEach(o=>{s.Mo.containsKey(o)||oy(s,o)})}function oy(s,r){s.$o.delete(r.path.canonicalString());const i=s.Oo.get(r);null!==i&&(Pg(s.remoteStore,i),s.Oo=s.Oo.remove(r),s.Fo.delete(i),ay(s))}function wI(s,r,i){for(const o of i)o instanceof mI?(s.Mo.addReference(o.key,r),CI(s,o)):o instanceof _I?(tt("SyncEngine","Document no longer in limbo: "+o.key),s.Mo.removeReference(o.key,r),s.Mo.containsKey(o.key)||oy(s,o.key)):wt()}function CI(s,r){const i=r.key,o=i.path.canonicalString();s.Oo.get(i)||s.$o.has(o)||(tt("SyncEngine","New document in limbo: "+i),s.$o.add(o),ay(s))}function ay(s){for(;s.$o.size>0&&s.Oo.size<s.maxConcurrentLimboResolutions;){const r=s.$o.values().next().value;s.$o.delete(r);const i=new Ct(Nn.fromString(r)),o=s.Uo.next();s.Fo.set(o,new KA(i)),s.Oo=s.Oo.insert(i,o),G_(s.remoteStore,new Ri(vo(Ef(i.path)),o,2,Ds.T))}}function Pu(s,r,i){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,He.Z)(function*(s,r,i){const o=ot(s),c=[],d=[],g=[];var v;o.xo.isEmpty()||(o.xo.forEach((v,w)=>{g.push(o.Ko(w,r,i).then(R=>{if(R){o.isPrimaryClient&&o.sharedClientState.updateQueryState(w.targetId,R.fromCache?"not-current":"current"),c.push(R);const F=F_.kn(w.targetId,R);d.push(F)}}))}),yield Promise.all(g),o.No.Tr(c),yield(v=(0,He.Z)(function*(w,R){const F=ot(w);try{yield F.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>qe.forEach(R,Q=>qe.forEach(Q.Nn,de=>F.persistence.referenceDelegate.addReference(j,Q.targetId,de)).next(()=>qe.forEach(Q.xn,de=>F.persistence.referenceDelegate.removeReference(j,Q.targetId,de)))))}catch(j){if(!Oa(j))throw j;tt("LocalStore","Failed to update sequence numbers: "+j)}for(const j of R){const Q=j.targetId;if(!j.fromCache){const de=F.Un.get(Q),Ne=de.withLastLimboFreeSnapshotVersion(de.snapshotVersion);F.Un=F.Un.insert(Q,Ne)}}}),function(w,R){return v.apply(this,arguments)})(o.localStore,d))})).apply(this,arguments)}function JA(s,r){return Rb.apply(this,arguments)}function Rb(){return(Rb=(0,He.Z)(function*(s,r){const i=ot(s);if(!i.currentUser.isEqual(r)){tt("SyncEngine","User change. New user:",r.toKey());const o=yield YC(i.localStore,r);i.currentUser=r,(c=i).Bo.forEach(g=>{g.forEach(v=>{v.reject(new Ze(Fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Bo.clear(),i.sharedClientState.handleUserChange(r,o.removedBatchIds,o.addedBatchIds),yield Pu(i,o.Wn)}var c})).apply(this,arguments)}function XA(s,r){const i=ot(s),o=i.Fo.get(r);if(o&&o.Co)return Vn().add(o.key);{let c=Vn();const d=i.ko.get(r);if(!d)return c;for(const g of d){const v=i.xo.get(g);c=c.unionWith(v.view.To)}return c}}function ly(s,r){return xb.apply(this,arguments)}function xb(){return(xb=(0,He.Z)(function*(s,r){const i=ot(s),o=yield tb(i.localStore,r.query,!0),c=r.view.So(o);return i.isPrimaryClient&&wI(i,r.targetId,c.vo),c})).apply(this,arguments)}function cy(s){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,He.Z)(function*(s){const r=ot(s);return JC(r.localStore).then(i=>Pu(r,i))})).apply(this,arguments)}function $r(s,r,i,o){return II.apply(this,arguments)}function II(){return(II=(0,He.Z)(function*(s,r,i,o){const c=ot(s),d=yield function(g,v){const w=ot(g),R=ot(w.In);return w.persistence.runTransaction("Lookup mutation documents","readonly",F=>R.Xt(F,v).next(j=>j?w.Qn.bn(F,j):qe.resolve(null)))}(c.localStore,r);var v;null!==d?("pending"===i?yield Ff(c.remoteStore):"acknowledged"===i||"rejected"===i?(Nu(c,r,o||null),Mb(c,r),v=r,ot(ot(c.localStore).In).te(v)):wt(),yield Pu(c,d)):tt("SyncEngine","Cannot apply mutation batch with id: "+r)})).apply(this,arguments)}function Vg(){return(Vg=(0,He.Z)(function*(s,r){const i=ot(s);if(fh(i),kb(i),!0===r&&!0!==i.qo){const o=i.sharedClientState.getAllActiveQueryTargets(),c=yield SI(i,o.toArray());i.qo=!0,yield _b(i.remoteStore,!0);for(const d of c)G_(i.remoteStore,d)}else if(!1===r&&!1!==i.qo){const o=[];let c=Promise.resolve();i.ko.forEach((d,g)=>{i.sharedClientState.isLocalQueryTarget(g)?o.push(g):c=c.then(()=>(Lg(i,g),oh(i.localStore,g,!0))),Pg(i.remoteStore,g)}),yield c,yield SI(i,o),function(d){const g=ot(d);g.Fo.forEach((v,w)=>{Pg(g.remoteStore,w)}),g.Mo.us(),g.Fo=new Map,g.Oo=new Mi(Ct.comparator)}(i),i.qo=!1,yield _b(i.remoteStore,!1)}})).apply(this,arguments)}function SI(s,r,i){return uy.apply(this,arguments)}function uy(){return(uy=(0,He.Z)(function*(s,r,i){const o=ot(s),c=[],d=[];for(const g of r){let v;const w=o.ko.get(g);if(w&&0!==w.length){v=yield sh(o.localStore,vo(w[0]));for(const R of w){const F=o.xo.get(R),j=yield ly(o,F);j.snapshot&&d.push(j.snapshot)}}else{const R=yield L_(o.localStore,g);v=yield sh(o.localStore,R),yield wb(o,Ob(R),g,!1)}c.push(v)}return o.No.Tr(d),c})).apply(this,arguments)}function Ob(s){return pE(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function DI(s){const r=ot(s);return ot(ot(r.localStore).persistence).pn()}function AI(s,r,i,o){return Nb.apply(this,arguments)}function Nb(){return(Nb=(0,He.Z)(function*(s,r,i,o){const c=ot(s);if(c.qo)tt("SyncEngine","Ignoring unexpected query state notification.");else if(c.ko.has(r))switch(i){case"current":case"not-current":{const d=yield JC(c.localStore),g=yg.createSynthesizedRemoteEventForCurrentChange(r,"current"===i);yield Pu(c,d,g);break}case"rejected":yield oh(c.localStore,r,!0),Lg(c,r,o);break;default:wt()}})).apply(this,arguments)}function e1(s,r,i){return Pb.apply(this,arguments)}function Pb(){return(Pb=(0,He.Z)(function*(s,r,i){const o=fh(s);if(o.qo){for(const c of r){if(o.ko.has(c)){tt("SyncEngine","Adding an already active target "+c);continue}const d=yield L_(o.localStore,c),g=yield sh(o.localStore,d);yield wb(o,Ob(d),g.targetId,!1),G_(o.remoteStore,g)}for(const c of i)o.ko.has(c)&&(yield oh(o.localStore,c,!1).then(()=>{Pg(o.remoteStore,c),Lg(o,c)}).catch(Rf))}})).apply(this,arguments)}function fh(s){const r=ot(s);return r.remoteStore.remoteSyncer.applyRemoteEvent=Tb.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=XA.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=EI.bind(null,r),r.No.Tr=hI.bind(null,r.eventManager),r.No.jo=fI.bind(null,r.eventManager),r}function kb(s){const r=ot(s);return r.remoteStore.remoteSyncer.applySuccessfulWrite=bI.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=Db.bind(null,r),r}class MI{constructor(){this.synchronizeTabs=!1}initialize(r){var i=this;return(0,He.Z)(function*(){i.N=Nf(r.databaseInfo.databaseId),i.sharedClientState=i.Wo(r),i.persistence=i.Go(r),yield i.persistence.start(),i.gcScheduler=i.zo(r),i.localStore=i.Ho(r)})()}zo(r){return null}Ho(r){return JE(this.persistence,new Ig,r.initialUser,this.N)}Go(r){return new LA(Ag.Ns,this.N)}Wo(r){return new nI}terminate(){var r=this;return(0,He.Z)(function*(){r.gcScheduler&&r.gcScheduler.stop(),yield r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}class Bg extends MI{constructor(r,i,o){super(),this.Jo=r,this.cacheSizeBytes=i,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(r){var i=()=>super.initialize,o=this;return(0,He.Z)(function*(){yield i().call(o,r),yield function(s){return ah.apply(this,arguments)}(o.localStore),yield o.Jo.initialize(o,r),yield kb(o.Jo.syncEngine),yield Ff(o.Jo.remoteStore),yield o.persistence.nn(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Ho(r){return JE(this.persistence,new Ig,r.initialUser,this.N)}zo(r){return new qx(this.persistence.referenceDelegate.garbageCollector,r.asyncQueue)}Go(r){const i=QE(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ys.withCacheSize(this.cacheSizeBytes):Ys.DEFAULT;return new qC(this.synchronizeTabs,i,r.clientId,o,r.asyncQueue,cb(),Ng(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(r){return new nI}}class RI extends Bg{constructor(r,i){super(r,i,!1),this.Jo=r,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(r){var i=()=>super.initialize,o=this;return(0,He.Z)(function*(){yield i().call(o,r);const c=o.Jo.syncEngine;o.sharedClientState instanceof U_&&(o.sharedClientState.syncEngine={_i:$r.bind(null,c),mi:AI.bind(null,c),gi:e1.bind(null,c),pn:DI.bind(null,c),wi:cy.bind(null,c)},yield o.sharedClientState.start()),yield o.persistence.nn(function(){var d=(0,He.Z)(function*(g){yield function(s,r){return Vg.apply(this,arguments)}(o.Jo.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):g||o.gcScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}Wo(r){const i=cb();if(!U_.Pt(i))throw new Ze(Fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=QE(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey);return new U_(i,r.asyncQueue,o,r.clientId,r.initialUser)}}class dy{initialize(r,i){var o=this;return(0,He.Z)(function*(){o.localStore||(o.localStore=r.localStore,o.sharedClientState=r.sharedClientState,o.datastore=o.createDatastore(i),o.remoteStore=o.createRemoteStore(i),o.eventManager=o.createEventManager(i),o.syncEngine=o.createSyncEngine(i,!r.synchronizeTabs),o.sharedClientState.onlineStateHandler=c=>Sb(o.syncEngine,c,1),o.remoteStore.remoteSyncer.handleCredentialChange=JA.bind(null,o.syncEngine),yield _b(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(r){return new dI}createDatastore(r){const i=Nf(r.databaseInfo.databaseId),o=new iI(r.databaseInfo);return new Jx(r.credentials,o,i)}createRemoteStore(r){return i=this.localStore,o=this.datastore,c=r.asyncQueue,d=v=>Sb(this.syncEngine,v,0),g=ob.Pt()?new ob:new rI,new BA(i,o,c,d,g);var i,o,c,d,g}createSyncEngine(r,i){return function(o,c,d,g,v,w,R){const F=new ZA(o,c,d,g,v,w);return R&&(F.qo=!0),F}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,i)}terminate(){return(r=(0,He.Z)(function*(i){const o=ot(i);tt("RemoteStore","RemoteStore shutting down."),o.Kr.add(5),yield Rr(o),o.Qr.shutdown(),o.Wr.set("Unknown")}),function(i){return r.apply(this,arguments)})(this.remoteStore);var r}}function Fb(s,r=10240){let i=0;return{read:()=>(0,He.Z)(function*(){if(i<s.byteLength){const o={value:s.slice(i,i+r),done:!1};return i+=r,o}return{done:!0}})(),cancel:()=>(0,He.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hy{constructor(r){this.observer=r,this.muted=!1}next(r){this.observer.next&&this.Yo(this.observer.next,r)}error(r){this.observer.error?this.Yo(this.observer.error,r):console.error("Uncaught Error in snapshot listener:",r)}Xo(){this.muted=!0}Yo(r,i){this.muted||setTimeout(()=>{this.muted||r(i)},0)}}class Ug{constructor(r,i){this.Zo=r,this.N=i,this.metadata=new gt,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(o=>{o&&o.ho()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Zo.cancel()}getMetadata(){var r=this;return(0,He.Z)(function*(){return r.metadata.promise})()}Qo(){var r=this;return(0,He.Z)(function*(){return yield r.getMetadata(),r.ea()})()}ea(){var r=this;return(0,He.Z)(function*(){const i=yield r.na();if(null===i)return null;const o=r.ta.decode(i),c=Number(o);isNaN(c)&&r.sa(`length string (${o}) is not valid number`);const d=yield r.ia(c);return new zA(JSON.parse(d),i.length+c)})()}ra(){return this.buffer.findIndex(r=>r==="{".charCodeAt(0))}na(){var r=this;return(0,He.Z)(function*(){for(;r.ra()<0&&!(yield r.oa()););if(0===r.buffer.length)return null;const i=r.ra();i<0&&r.sa("Reached the end of bundle when a length string is expected.");const o=r.buffer.slice(0,i);return r.buffer=r.buffer.slice(i),o})()}ia(r){var i=this;return(0,He.Z)(function*(){for(;i.buffer.length<r;)(yield i.oa())&&i.sa("Reached the end of bundle when more is expected.");const o=i.ta.decode(i.buffer.slice(0,r));return i.buffer=i.buffer.slice(r),o})()}sa(r){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${r}`)}oa(){var r=this;return(0,He.Z)(function*(){const i=yield r.Zo.read();if(!i.done){const o=new Uint8Array(r.buffer.length+i.value.length);o.set(r.buffer),o.set(i.value,r.buffer.length),r.buffer=o}return i.done})()}}class jg{constructor(r){this.datastore=r,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(r){var i=this;return(0,He.Z)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw new Ze(Fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(c=(0,He.Z)(function*(d,g){const v=ot(d),w=Eg(v.N)+"/documents",R={documents:g.map(de=>Kd(v.N,de))},F=yield v.Ki("BatchGetDocuments",w,R),j=new Map;F.forEach(de=>{const ge=function(s,r){return"found"in r?function(i,o){$t(!!o.found);const c=Ko(i,o.found.name),d=fi(o.found.updateTime),g=new cs({mapValue:{fields:o.found.fields}});return ar.newFoundDocument(c,d,g)}(s,r):"missing"in r?function(i,o){$t(!!o.missing),$t(!!o.readTime);const c=Ko(i,o.missing),d=fi(o.readTime);return ar.newNoDocument(c,d)}(s,r):wt()}(v.N,de);j.set(ge.key.toString(),ge)});const Q=[];return g.forEach(de=>{const ge=j.get(de.toString());$t(!!ge),Q.push(ge)}),Q}),function(d,g){return c.apply(this,arguments)})(i.datastore,r);var c;return o.forEach(c=>i.recordVersion(c)),o})()}set(r,i){this.write(i.toMutation(r,this.precondition(r))),this.writtenDocs.add(r.toString())}update(r,i){try{this.write(i.toMutation(r,this.preconditionForUpdate(r)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(r.toString())}delete(r){this.write(new wf(r,this.precondition(r))),this.writtenDocs.add(r.toString())}commit(){var r=this;return(0,He.Z)(function*(){if(r.ensureCommitNotCalled(),r.lastWriteError)throw r.lastWriteError;const i=r.readVersions;var o;r.mutations.forEach(o=>{i.delete(o.key.toString())}),i.forEach((o,c)=>{const d=Ct.fromPath(c);r.mutations.push(new S_(d,r.precondition(d)))}),yield(o=(0,He.Z)(function*(c,d){const g=ot(c),v=Eg(g.N)+"/documents",w={writes:d.map(R=>M_(g.N,R))};yield g.Li("Commit",v,w)}),function(c,d){return o.apply(this,arguments)})(r.datastore,r.mutations),r.committed=!0})()}recordVersion(r){let i;if(r.isFoundDocument())i=r.version;else{if(!r.isNoDocument())throw wt();i=on.min()}const o=this.readVersions.get(r.key.toString());if(o){if(!i.isEqual(o))throw new Ze(Fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(r.key.toString(),i)}precondition(r){const i=this.readVersions.get(r.toString());return!this.writtenDocs.has(r.toString())&&i?hi.updateTime(i):hi.none()}preconditionForUpdate(r){const i=this.readVersions.get(r.toString());if(!this.writtenDocs.has(r.toString())&&i){if(i.isEqual(on.min()))throw new Ze(Fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hi.updateTime(i)}return hi.exists(!0)}write(r){this.ensureCommitNotCalled(),this.mutations.push(r)}ensureCommitNotCalled(){}}class n1{constructor(r,i,o,c){this.asyncQueue=r,this.datastore=i,this.updateFunction=o,this.deferred=c,this.aa=5,this.rr=new j_(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var r=this;this.rr.Xi((0,He.Z)(function*(){const i=new jg(r.datastore),o=r.ua(i);o&&o.then(c=>{r.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{r.deferred.resolve(c)}).catch(d=>{r.ha(d)}))}).catch(c=>{r.ha(c)})}))}ua(r){try{const i=this.updateFunction(r);return!gf(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}ha(r){this.aa>0&&this.la(r)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(r)}la(r){if("FirebaseError"===r.name){const i=r.code;return"aborted"===i||"failed-precondition"===i||!wl(i)}return!1}}class r1{constructor(r,i,o){var c=this;this.credentials=r,this.asyncQueue=i,this.databaseInfo=o,this.user=Yi.UNAUTHENTICATED,this.clientId=h_.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(i,function(){var d=(0,He.Z)(function*(g){tt("FirestoreClient","Received user=",g.uid),yield c.credentialListener(g),c.user=g});return function(g){return d.apply(this,arguments)}}())}getConfiguration(){var r=this;return(0,He.Z)(function*(){return{asyncQueue:r.asyncQueue,databaseInfo:r.databaseInfo,clientId:r.clientId,credentials:r.credentials,initialUser:r.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(r){this.credentialListener=r}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ze(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var r=this;this.asyncQueue.enterRestrictedMode();const i=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,He.Z)(function*(){try{r.onlineComponents&&(yield r.onlineComponents.terminate()),r.offlineComponents&&(yield r.offlineComponents.terminate()),r.credentials.shutdown(),i.resolve()}catch(o){const c=uh(o,"Failed to shutdown persistence");i.reject(c)}})),i.promise}}function xI(s,r){return fy.apply(this,arguments)}function fy(){return(fy=(0,He.Z)(function*(s,r){s.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const i=yield s.getConfiguration();yield r.initialize(i);let o=i.initialUser;s.setCredentialChangeListener(function(){var c=(0,He.Z)(function*(d){o.isEqual(d)||(yield YC(r.localStore,d),o=d)});return function(d){return c.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=r})).apply(this,arguments)}function Lb(s,r){return py.apply(this,arguments)}function py(){return(py=(0,He.Z)(function*(s,r){s.asyncQueue.verifyOperationInProgress();const i=yield Vb(s);tt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield s.getConfiguration();yield r.initialize(i,o),s.setCredentialChangeListener(c=>{return(d=(0,He.Z)(function*(g,v){const w=ot(g);w.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const R=wo(w);w.Kr.add(3),yield Rr(w),R&&w.Wr.set("Unknown"),yield w.remoteSyncer.handleCredentialChange(v),w.Kr.delete(3),yield Pf(w)}),function(g,v){return d.apply(this,arguments)})(r.remoteStore,c);var d}),s.onlineComponents=r})).apply(this,arguments)}function Vb(s){return gy.apply(this,arguments)}function gy(){return(gy=(0,He.Z)(function*(s){return s.offlineComponents||(tt("FirestoreClient","Using default OfflineComponentProvider"),yield xI(s,new MI)),s.offlineComponents})).apply(this,arguments)}function my(s){return Bb.apply(this,arguments)}function Bb(){return(Bb=(0,He.Z)(function*(s){return s.onlineComponents||(tt("FirestoreClient","Using default OnlineComponentProvider"),yield Lb(s,new dy)),s.onlineComponents})).apply(this,arguments)}function i1(s){return Vb(s).then(r=>r.persistence)}function OI(s){return Vb(s).then(r=>r.localStore)}function s1(s){return my(s).then(r=>r.remoteStore)}function NI(s){return my(s).then(r=>r.syncEngine)}function ph(s){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,He.Z)(function*(s){const r=yield my(s),i=r.eventManager;return i.onListen=YA.bind(null,r.syncEngine),i.onUnlisten=QA.bind(null,r.syncEngine),i})).apply(this,arguments)}function Bf(s,r,i={}){const o=new gt;return s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(c,d,g,v,w){const R=new hy({next:j=>{d.enqueueAndForget(()=>ey(c,F));const Q=j.docs.has(g);!Q&&j.fromCache?w.reject(new Ze(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):Q&&j.fromCache&&v&&"server"===v.source?w.reject(new Ze(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(j)},error:j=>w.reject(j)}),F=new Eb(Ef(g.path),R,{includeMetadataChanges:!0,uo:!0});return J_(c,F)}(yield ph(s),s.asyncQueue,r,i,o)})),o.promise}function kI(s,r,i={}){const o=new gt;return s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(c,d,g,v,w){const R=new hy({next:j=>{d.enqueueAndForget(()=>ey(c,F)),j.fromCache&&"server"===v.source?w.reject(new Ze(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(j)},error:j=>w.reject(j)}),F=new Eb(g,R,{includeMetadataChanges:!0,uo:!0});return J_(c,F)}(yield ph(s),s.asyncQueue,r,i,o)})),o.promise}class h1{constructor(r,i,o,c,d,g,v,w){this.databaseId=r,this.appId=i,this.persistenceKey=o,this.host=c,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=v,this.useFetchStreams=w}}class Uf{constructor(r,i){this.projectId=r,this.database=i||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(r){return r instanceof Uf&&r.projectId===this.projectId&&r.database===this.database}}const gh=new Map;function Ub(s,r,i){if(!i)throw new Ze(Fe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${r}.`)}function jb(s,r,i,o){if(!0===r&&!0===o)throw new Ze(Fe.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function LI(s){if(!Ct.isDocumentKey(s))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Hb(s){if(Ct.isDocumentKey(s))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function _y(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const r=function(i){if(i.constructor){const o=/function\s+([^\s(]+)\s*\(/.exec(i.constructor.toString());if(o&&o.length>1)return o[1]}return null}(s);return r?`a custom ${r} object`:"an object"}}return"function"==typeof s?"a function":wt()}function Sn(s,r){if("_delegate"in s&&(s=s._delegate),!(s instanceof r)){if(r.name===s.constructor.name)throw new Ze(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=_y(s);throw new Ze(Fe.INVALID_ARGUMENT,`Expected type '${r.name}', but it was: ${i}`)}}return s}function VI(s,r){if(r<=0)throw new Ze(Fe.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${r}.`)}class yy{constructor(r){var i;if(void 0===r.host){if(void 0!==r.ssl)throw new Ze(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=r.host,this.ssl=null===(i=r.ssl)||void 0===i||i;if(this.credentials=r.credentials,this.ignoreUndefinedProperties=!!r.ignoreUndefinedProperties,void 0===r.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==r.cacheSizeBytes&&r.cacheSizeBytes<1048576)throw new Ze(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=r.cacheSizeBytes}this.experimentalForceLongPolling=!!r.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!r.experimentalAutoDetectLongPolling,this.useFetchStreams=!!r.useFetchStreams,jb("experimentalForceLongPolling",r.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",r.experimentalAutoDetectLongPolling)}isEqual(r){return this.host===r.host&&this.ssl===r.ssl&&this.credentials===r.credentials&&this.cacheSizeBytes===r.cacheSizeBytes&&this.experimentalForceLongPolling===r.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===r.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===r.ignoreUndefinedProperties&&this.useFetchStreams===r.useFetchStreams}}class Hg{constructor(r,i){this._credentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,r instanceof Uf?this._databaseId=r:(this._app=r,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ze(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uf(o.options.projectId)}(r))}get app(){if(!this._app)throw new Ze(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(r){if(this._settingsFrozen)throw new Ze(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(r),void 0!==r.credentials&&(this._credentials=function(i){if(!i)return new rC;switch(i.type){case"gapi":const o=i.client;return $t(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new rA(o,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new Ze(Fe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(r.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=gh.get(r);i&&(tt("ComponentProvider","Removing Datastore"),gh.delete(r),i.terminate())}(this),Promise.resolve()}}class lr{constructor(r,i,o){this.converter=i,this._key=o,this.type="document",this.firestore=r}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dl(this.firestore,this.converter,this._key.path.popLast())}withConverter(r){return new lr(this.firestore,r,this._key)}}class gs{constructor(r,i,o){this.converter=i,this._query=o,this.type="query",this.firestore=r}withConverter(r){return new gs(this.firestore,r,this._query)}}class Dl extends gs{constructor(r,i,o){super(r,i,Ef(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const r=this._path.popLast();return r.isEmpty()?null:new lr(this.firestore,null,new Ct(r))}withConverter(r){return new Dl(this.firestore,r,this._path)}}function UI(s,r,...i){if(s=(0,J.m9)(s),Ub("collection","path",r),s instanceof Hg){const o=Nn.fromString(r,...i);return Hb(o),new Dl(s,null,o)}{if(!(s instanceof lr||s instanceof Dl))throw new Ze(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=Nn.fromString(s.path,...i).child(Nn.fromString(r));return Hb(o),new Dl(s.firestore,null,o)}}function vy(s,r,...i){if(s=(0,J.m9)(s),1===arguments.length&&(r=h_.I()),Ub("doc","path",r),s instanceof Hg){const o=Nn.fromString(r,...i);return LI(o),new lr(s,null,new Ct(o))}{if(!(s instanceof lr||s instanceof Dl))throw new Ze(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(Nn.fromString(r,...i));return LI(o),new lr(s.firestore,s instanceof Dl?s.converter:null,new Ct(o))}}function $b(s,r){return s=(0,J.m9)(s),r=(0,J.m9)(r),(s instanceof lr||s instanceof Dl)&&(r instanceof lr||r instanceof Dl)&&s.firestore===r.firestore&&s.path===r.path&&s.converter===r.converter}function jI(s,r){return s=(0,J.m9)(s),r=(0,J.m9)(r),s instanceof gs&&r instanceof gs&&s.firestore===r.firestore&&ug(s._query,r._query)&&s.converter===r.converter}class f1{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new j_(this,"async_queue_retry"),this.Ea=()=>{const i=Ng();i&&tt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.rr.tr()};const r=Ng();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(r){this.enqueue(r)}enqueueAndForgetEvenWhileRestricted(r){this.Ta(),this.Ia(r)}enterRestrictedMode(r){if(!this.wa){this.wa=!0,this.ya=r||!1;const i=Ng();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Ea)}}enqueue(r){if(this.Ta(),this.wa)return new Promise(()=>{});const i=new gt;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(r().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(r){this.enqueueAndForget(()=>(this.da.push(r),this.Aa()))}Aa(){var r=this;return(0,He.Z)(function*(){if(0!==r.da.length){try{yield r.da[0](),r.da.shift(),r.rr.reset()}catch(i){if(!Oa(i))throw i;tt("AsyncQueue","Operation failed with retryable error: "+i)}r.da.length>0&&r.rr.Xi(()=>r.Aa())}})()}Ia(r){const i=this.fa.then(()=>(this.ga=!0,r().catch(o=>{throw this.ma=o,this.ga=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),d}(o)),o}).then(o=>(this.ga=!1,o))));return this.fa=i,i}enqueueAfterDelay(r,i,o){this.Ta(),this.pa.indexOf(r)>-1&&(i=0);const c=yb.createAndSchedule(this,r,i,o,d=>this.Ra(d));return this._a.push(c),c}Ta(){this.ma&&wt()}verifyOperationInProgress(){}Pa(){var r=this;return(0,He.Z)(function*(){let i;do{i=r.fa,yield i}while(i!==r.fa)})()}ba(r){for(const i of this._a)if(i.timerId===r)return!0;return!1}va(r){return this.Pa().then(()=>{this._a.sort((i,o)=>i.targetTimeMs-o.targetTimeMs);for(const i of this._a)if(i.skipDelay(),"all"!==r&&i.timerId===r)break;return this.Pa()})}Va(r){this.pa.push(r)}Ra(r){const i=this._a.indexOf(r);this._a.splice(i,1)}}function zb(s){return function(r,i){if("object"!=typeof r||null===r)return!1;const o=r;for(const c of["next","error","complete"])if(c in o&&"function"==typeof o[c])return!0;return!1}(s)}class p1{constructor(){this._progressObserver={},this._taskCompletionResolver=new gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(r,i,o){this._progressObserver={next:r,error:i,complete:o}}catch(r){return this._taskCompletionResolver.promise.catch(r)}then(r,i){return this._taskCompletionResolver.promise.then(r,i)}_completeWith(r){this._updateProgress(r),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(r)}_failWith(r){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(r),this._taskCompletionResolver.reject(r)}_updateProgress(r){this._lastProgress=r,this._progressObserver.next&&this._progressObserver.next(r)}}class zr extends Hg{constructor(r,i){super(r,i),this.type="firestore",this._queue=new f1,this._persistenceKey="name"in r?r.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Wb(this),this._firestoreClient.terminate()}}function pi(s){return s._firestoreClient||Wb(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Wb(s){var r;const i=s._freezeSettings(),o=(d=(null===(r=s._app)||void 0===r?void 0:r.options.appId)||"",new h1(s._databaseId,d,s._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));var d,v;s._firestoreClient=new r1(s._credentials,s._queue,o)}function qb(s,r,i){const o=new gt;return s.asyncQueue.enqueue((0,He.Z)(function*(){try{yield xI(s,i),yield Lb(s,r),o.resolve()}catch(c){if(!("FirebaseError"===(d=c).name?d.code===Fe.FAILED_PRECONDITION||d.code===Fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw c;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),o.reject(c)}var d})).then(()=>o.promise)}function $I(s){if(s._initialized||s._terminated)throw new Ze(Fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vc{constructor(...r){for(let i=0;i<r.length;++i)if(0===r[i].length)throw new Ze(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(r)}isEqual(r){return this._internalPath.isEqual(r._internalPath)}}class Al{constructor(r){this._byteString=r}static fromBase64String(r){try{return new Al(Qi.fromBase64String(r))}catch(i){throw new Ze(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(r){return new Al(Qi.fromUint8Array(r))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(r){return this._byteString.isEqual(r._byteString)}}class ku{constructor(r){this._methodName=r}}class Ey{constructor(r,i){if(!isFinite(r)||r<-90||r>90)throw new Ze(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(i)||i<-180||i>180)throw new Ze(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=r,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(r){return this._lat===r._lat&&this._long===r._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(r){return pn(this._lat,r._lat)||pn(this._long,r._long)}}const WI=/^__.*__$/;class qI{constructor(r,i,o){this.data=r,this.fieldMask=i,this.fieldTransforms=o}toMutation(r,i){return null!==this.fieldMask?new Du(r,this.data,this.fieldMask,i,this.fieldTransforms):new pg(r,this.data,i,this.fieldTransforms)}}class Yb{constructor(r,i,o){this.data=r,this.fieldMask=i,this.fieldTransforms=o}toMutation(r,i){return new Du(r,this.data,this.fieldMask,i,this.fieldTransforms)}}function b1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class by{constructor(r,i,o,c,d,g){this.settings=r,this.databaseId=i,this.N=o,this.ignoreUndefinedProperties=c,void 0===d&&this.Sa(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(r){return new by(Object.assign(Object.assign({},this.settings),r),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(r){var i;const o=null===(i=this.path)||void 0===i?void 0:i.child(r),c=this.Ca({path:o,xa:!1});return c.ka(r),c}$a(r){var i;const o=null===(i=this.path)||void 0===i?void 0:i.child(r),c=this.Ca({path:o,xa:!1});return c.Sa(),c}Oa(r){return this.Ca({path:void 0,xa:!0})}Fa(r){return Gf(r,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(r){return void 0!==this.fieldMask.find(i=>r.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>r.isPrefixOf(i.field))}Sa(){if(this.path)for(let r=0;r<this.path.length;r++)this.ka(this.path.get(r))}ka(r){if(0===r.length)throw this.Fa("Document fields must not be empty");if(b1(this.Da)&&WI.test(r))throw this.Fa('Document fields cannot begin and end with "__"')}}class mh{constructor(r,i,o){this.databaseId=r,this.ignoreUndefinedProperties=i,this.N=o||Nf(r)}Ba(r,i,o,c=!1){return new by({Da:r,methodName:i,La:o,path:Vi.emptyPath(),xa:!1,Ma:c},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function jf(s){const r=s._freezeSettings(),i=Nf(s._databaseId);return new mh(s._databaseId,!!r.ignoreUndefinedProperties,i)}function Hf(s,r,i,o,c,d={}){const g=s.Ba(d.merge||d.mergeFields?2:0,r,i,c);QI("Data must be an object, but it was:",g,o);const v=ZI(o,g);let w,R;if(d.merge)w=new ng(g.fieldMask),R=g.fieldTransforms;else if(d.mergeFields){const F=[];for(const j of d.mergeFields){const Q=Qb(r,j,i);if(!g.contains(Q))throw new Ze(Fe.INVALID_ARGUMENT,`Field '${Q}' is specified in your field mask but missing from your input data.`);Xb(F,Q)||F.push(Q)}w=new ng(F),R=g.fieldTransforms.filter(j=>w.covers(j.field))}else w=null,R=g.fieldTransforms;return new qI(new cs(v),w,R)}class Fu extends ku{_toFieldTransform(r){if(2!==r.Da)throw r.Fa(1===r.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return r.fieldMask.push(r.path),null}isEqual(r){return r instanceof Fu}}function KI(s,r,i){return new by({Da:3,La:r.settings.La,methodName:s._methodName,xa:i},r.databaseId,r.N,r.ignoreUndefinedProperties)}class Lu extends ku{_toFieldTransform(r){return new fg(r.path,new bf)}isEqual(r){return r instanceof Lu}}class w1 extends ku{constructor(r,i){super(r),this.Ua=i}_toFieldTransform(r){const i=KI(this,r,!0),o=this.Ua.map(d=>Ml(d,i)),c=new ds(o);return new fg(r.path,c)}isEqual(r){return this===r}}class nO extends ku{constructor(r,i){super(r),this.Ua=i}_toFieldTransform(r){const i=KI(this,r,!0),o=this.Ua.map(d=>Ml(d,i)),c=new Wd(o);return new fg(r.path,c)}isEqual(r){return this===r}}class C1 extends ku{constructor(r,i){super(r),this.qa=i}_toFieldTransform(r){const i=new hg(r.N,yE(r.N,this.qa));return new fg(r.path,i)}isEqual(r){return this===r}}function Jo(s,r,i,o){const c=s.Ba(1,r,i);QI("Data must be an object, but it was:",c,o);const d=[],g=cs.empty();bl(o,(w,R)=>{const F=Jb(r,w,i);R=(0,J.m9)(R);const j=c.$a(F);if(R instanceof Fu)d.push(F);else{const Q=Ml(R,j);null!=Q&&(d.push(F),g.set(F,Q))}});const v=new ng(d);return new Yb(g,v,c.fieldTransforms)}function wy(s,r,i,o,c,d){const g=s.Ba(1,r,i),v=[Qb(r,o,i)],w=[c];if(d.length%2!=0)throw new Ze(Fe.INVALID_ARGUMENT,`Function ${r}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Q=0;Q<d.length;Q+=2)v.push(Qb(r,d[Q])),w.push(d[Q+1]);const R=[],F=cs.empty();for(let Q=v.length-1;Q>=0;--Q)if(!Xb(R,v[Q])){const de=v[Q];let ge=w[Q];ge=(0,J.m9)(ge);const Ne=g.$a(de);if(ge instanceof Fu)R.push(de);else{const $e=Ml(ge,Ne);null!=$e&&(R.push(de),F.set(de,$e))}}const j=new ng(R);return new Yb(F,j,g.fieldTransforms)}function I1(s,r,i,o=!1){return Ml(i,s.Ba(o?4:3,r))}function Ml(s,r){if(YI(s=(0,J.m9)(s)))return QI("Unsupported field value:",r,s),ZI(s,r);if(s instanceof ku)return function(i,o){if(!b1(o.Da))throw o.Fa(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Fa(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,r),null;if(void 0===s&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),s instanceof Array){if(r.settings.xa&&4!==r.Da)throw r.Fa("Nested arrays are not supported");return function(i,o){const c=[];let d=0;for(const g of i){let v=Ml(g,o.Oa(d));null==v&&(v={nullValue:"NULL_VALUE"}),c.push(v),d++}return{arrayValue:{values:c}}}(s,r)}return function(i,o){if(null===(i=(0,J.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return yE(o.N,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const c=Ai.fromDate(i);return{timestampValue:vg(o.N,c)}}if(i instanceof Ai){const c=new Ai(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vg(o.N,c)}}if(i instanceof Ey)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Al)return{bytesValue:ME(o.N,i._byteString)};if(i instanceof lr){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Fa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:TC(i.firestore._databaseId||o.databaseId,i._key.path)}}throw o.Fa(`Unsupported field value: ${_y(i)}`)}(s,r)}function ZI(s,r){const i={};return tg(s)?r.path&&r.path.length>0&&r.fieldMask.push(r.path):bl(s,(o,c)=>{const d=Ml(c,r.Na(o));null!=d&&(i[o]=d)}),{mapValue:{fields:i}}}function YI(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Ai||s instanceof Ey||s instanceof Al||s instanceof lr||s instanceof ku)}function QI(s,r,i){if(!YI(i)||"object"!=typeof(o=i)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=_y(i);throw r.Fa("an object"===o?s+" a custom object":s+" "+o)}var o}function Qb(s,r,i){if((r=(0,J.m9)(r))instanceof Vc)return r._internalPath;if("string"==typeof r)return Jb(s,r);throw Gf("Field path arguments must be of type string or FieldPath.",s,!1,void 0,i)}const T1=new RegExp("[~\\*/\\[\\]]");function Jb(s,r,i){if(r.search(T1)>=0)throw Gf(`Invalid field path (${r}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Vc(...r.split("."))._internalPath}catch(o){throw Gf(`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Gf(s,r,i,o,c){const d=o&&!o.isEmpty(),g=void 0!==c;let v=`Function ${r}() called with invalid data`;i&&(v+=" (via `toFirestore()`)"),v+=". ";let w="";return(d||g)&&(w+=" (found",d&&(w+=` in field ${o}`),g&&(w+=` in document ${c}`),w+=")"),new Ze(Fe.INVALID_ARGUMENT,v+s+w)}function Xb(s,r){return s.some(i=>i.isEqual(r))}class _h{constructor(r,i,o,c,d){this._firestore=r,this._userDataWriter=i,this._key=o,this._document=c,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const r=new JI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(r)}return this._userDataWriter.convertValue(this._document.data.value)}}get(r){if(this._document){const i=this._document.data.field(Cy("DocumentSnapshot.get",r));if(null!==i)return this._userDataWriter.convertValue(i)}}}class JI extends _h{data(){return super.data()}}function Cy(s,r){return"string"==typeof r?Jb(s,r):r instanceof Vc?r._internalPath:r._delegate._internalPath}class $f{constructor(r,i){this.hasPendingWrites=r,this.fromCache=i}isEqual(r){return this.hasPendingWrites===r.hasPendingWrites&&this.fromCache===r.fromCache}}class Bc extends _h{constructor(r,i,o,c,d,g){super(r,i,o,c,g),this._firestore=r,this._firestoreImpl=r,this.metadata=d}exists(){return super.exists()}data(r={}){if(this._document){if(this._converter){const i=new Gg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}}get(r,i={}){if(this._document){const o=this._document.data.field(Cy("DocumentSnapshot.get",r));if(null!==o)return this._userDataWriter.convertValue(o,i.serverTimestamps)}}}class Gg extends Bc{data(r={}){return super.data(r)}}class Vu{constructor(r,i,o,c){this._firestore=r,this._userDataWriter=i,this._snapshot=c,this.metadata=new $f(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){const r=[];return this.forEach(i=>r.push(i)),r}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(r,i){this._snapshot.docs.forEach(o=>{r.call(i,new Gg(this._firestore,this._userDataWriter,o.key,o,new $f(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(r={}){const i=!!r.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Ze(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Gg(o._firestore,o._userDataWriter,g.doc.key,g.doc,new $f(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>c||3!==g.type).map(g=>{const v=new Gg(o._firestore,o._userDataWriter,g.doc.key,g.doc,new $f(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let w=-1,R=-1;return 0!==g.type&&(w=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),R=d.indexOf(g.doc.key)),{type:XI(g.type),doc:v,oldIndex:w,newIndex:R}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function XI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}function ew(s,r){return s instanceof Bc&&r instanceof Bc?s._firestore===r._firestore&&s._key.isEqual(r._key)&&(null===s._document?null===r._document:s._document.isEqual(r._document))&&s._converter===r._converter:s instanceof Vu&&r instanceof Vu&&s._firestore===r._firestore&&jI(s.query,r.query)&&s.metadata.isEqual(r.metadata)&&s._snapshot.isEqual(r._snapshot)}function tw(s){if(us(s)&&0===s.explicitOrderBy.length)throw new Ze(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $g{}function Bu(s,...r){for(const i of r)s=i._apply(s);return s}class eT extends $g{constructor(r,i,o){super(),this.Ka=r,this.ja=i,this.Qa=o,this.type="where"}_apply(r){const i=jf(r.firestore),o=function(c,d,g,v,w,R,F){let j;if(w.isKeyField()){if("array-contains"===R||"array-contains-any"===R)throw new Ze(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${R}' queries on FieldPath.documentId().`);if("in"===R||"not-in"===R){oT(F,R);const de=[];for(const ge of F)de.push(sT(v,c,ge));j={arrayValue:{values:de}}}else j=sT(v,c,F)}else"in"!==R&&"not-in"!==R&&"array-contains-any"!==R||oT(F,R),j=I1(g,"where",F,"in"===R||"not-in"===R);const Q=Ji.create(w,R,j);return function(de,ge){if(ge.v()){const $e=mE(de);if(null!==$e&&!$e.isEqual(ge.field))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${$e.toString()}' and '${ge.field.toString()}'`);const Mt=gE(de);null!==Mt&&aT(0,ge.field,Mt)}const Ne=function($e,Mt){for(const qt of $e.filters)if(Mt.indexOf(qt.op)>=0)return qt.op;return null}(de,function($e){switch($e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ge.op));if(null!==Ne)throw new Ze(Fe.INVALID_ARGUMENT,Ne===ge.op?`Invalid query. You cannot use more than one '${ge.op.toString()}' filter.`:`Invalid query. You cannot use '${ge.op.toString()}' filters with '${Ne.toString()}' filters.`)}(c,Q),Q}(r._query,0,i,r.firestore._databaseId,this.Ka,this.ja,this.Qa);return new gs(r.firestore,r.converter,function(c,d){const g=c.filters.concat([d]);return new Nc(c.path,c.collectionGroup,c.explicitOrderBy.slice(),g,c.limit,c.limitType,c.startAt,c.endAt)}(r._query,o))}}class S1 extends $g{constructor(r,i){super(),this.Ka=r,this.Wa=i,this.type="orderBy"}_apply(r){const i=function(o,c,d){if(null!==o.startAt)throw new Ze(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Ze(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new zd(c,d);return function(v,w){if(null===gE(v)){const R=mE(v);null!==R&&aT(0,R,w.field)}}(o,g),g}(r._query,this.Ka,this.Wa);return new gs(r.firestore,r.converter,function(o,c){const d=o.explicitOrderBy.concat([c]);return new Nc(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(r._query,i))}}class zg extends $g{constructor(r,i,o){super(),this.type=r,this.Ga=i,this.za=o}_apply(r){return new gs(r.firestore,r.converter,fA(r._query,this.Ga,this.za))}}class nT extends $g{constructor(r,i,o){super(),this.type=r,this.Ha=i,this.Ja=o}_apply(r){const i=iT(r,this.type,this.Ha,this.Ja);return new gs(r.firestore,r.converter,(c=i,new Nc((o=r._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)));var o,c}}class rT extends $g{constructor(r,i,o){super(),this.type=r,this.Ha=i,this.Ja=o}_apply(r){const i=iT(r,this.type,this.Ha,this.Ja);return new gs(r.firestore,r.converter,(c=i,new Nc((o=r._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,c)));var o,c}}function iT(s,r,i,o){if(i[0]=(0,J.m9)(i[0]),i[0]instanceof _h)return function(c,d,g,v,w){if(!v)throw new Ze(Fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const R=[];for(const F of cg(c))if(F.field.isKeyField())R.push(sg(d,v.key));else{const j=v.data.field(F.field);if(oC(j))throw new Ze(Fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+F.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===j){const Q=F.field.canonicalString();throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Q}' (used as the orderBy) does not exist.`)}R.push(j)}return new Su(R,w)}(s._query,s.firestore._databaseId,r,i[0]._document,o);{const c=jf(s.firestore);return function(d,g,v,w,R,F){const j=d.explicitOrderBy;if(R.length>j.length)throw new Ze(Fe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Q=[];for(let de=0;de<R.length;de++){const ge=R[de];if(j[de].field.isKeyField()){if("string"!=typeof ge)throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ge}`);if(!uC(d)&&-1!==ge.indexOf("/"))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${w}() must be a plain document ID, but '${ge}' contains a slash.`);const Ne=d.path.child(Nn.fromString(ge));if(!Ct.isDocumentKey(Ne))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const $e=new Ct(Ne);Q.push(sg(g,$e))}else{const Ne=I1(v,w,ge);Q.push(Ne)}}return new Su(Q,F)}(s._query,s.firestore._databaseId,c,r,i,o)}}function sT(s,r,i){if("string"==typeof(i=(0,J.m9)(i))){if(""===i)throw new Ze(Fe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!uC(r)&&-1!==i.indexOf("/"))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const o=r.path.child(Nn.fromString(i));if(!Ct.isDocumentKey(o))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return sg(s,new Ct(o))}if(i instanceof lr)return sg(s,i._key);throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${_y(i)}.`)}function oT(s,r){if(!Array.isArray(s)||0===s.length)throw new Ze(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${r.toString()}' filters.`);if(s.length>10)throw new Ze(Fe.INVALID_ARGUMENT,`Invalid Query. '${r.toString()}' filters support a maximum of 10 elements in the value array.`)}function aT(s,r,i){if(!i.isEqual(r))throw new Ze(Fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${r.toString()}' and so you must also use '${r.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class nw{convertValue(r,i="none"){switch(mf(r)){case 0:return null;case 1:return r.booleanValue;case 2:return di(r.integerValue||r.doubleValue);case 3:return this.convertTimestamp(r.timestampValue);case 4:return this.convertServerTimestamp(r,i);case 5:return r.stringValue;case 6:return this.convertBytes(Iu(r.bytesValue));case 7:return this.convertReference(r.referenceValue);case 8:return this.convertGeoPoint(r.geoPointValue);case 9:return this.convertArray(r.arrayValue,i);case 10:return this.convertObject(r.mapValue,i);default:throw wt()}}convertObject(r,i){const o={};return bl(r.fields,(c,d)=>{o[c]=this.convertValue(d,i)}),o}convertGeoPoint(r){return new Ey(di(r.latitude),di(r.longitude))}convertArray(r,i){return(r.values||[]).map(o=>this.convertValue(o,i))}convertServerTimestamp(r,i){switch(i){case"previous":const o=aA(r);return null==o?null:this.convertValue(o,i);case"estimate":return this.convertTimestamp(f_(r));default:return null}}convertTimestamp(r){const i=Mc(r);return new Ai(i.seconds,i.nanos)}convertDocumentKey(r,i){const o=Nn.fromString(r);$t(TA(o));const c=new Uf(o.get(1),o.get(3)),d=new Ct(o.popFirst(5));return c.isEqual(i)||Xr(`Document ${d} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),d}}function Sy(s,r,i){let o;return o=s?i&&(i.merge||i.mergeFields)?s.toFirestore(r,i):s.toFirestore(r):r,o}class iO extends nw{constructor(r){super(),this.firestore=r}convertBytes(r){return new Al(r)}convertReference(r){const i=this.convertDocumentKey(r,this.firestore._databaseId);return new lr(this.firestore,null,i)}}class lT{constructor(r,i){this._firestore=r,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=jf(r)}set(r,i,o){this._verifyNotCommitted();const c=Xo(r,this._firestore),d=Sy(c.converter,i,o),g=Hf(this._dataReader,"WriteBatch.set",c._key,d,null!==c.converter,o);return this._mutations.push(g.toMutation(c._key,hi.none())),this}update(r,i,o,...c){this._verifyNotCommitted();const d=Xo(r,this._firestore);let g;return g="string"==typeof(i=(0,J.m9)(i))||i instanceof Vc?wy(this._dataReader,"WriteBatch.update",d._key,i,o,c):Jo(this._dataReader,"WriteBatch.update",d._key,i),this._mutations.push(g.toMutation(d._key,hi.exists(!0))),this}delete(r){this._verifyNotCommitted();const i=Xo(r,this._firestore);return this._mutations=this._mutations.concat(new wf(i._key,hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xo(s,r){if((s=(0,J.m9)(s)).firestore!==r)throw new Ze(Fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class yh extends nw{constructor(r){super(),this.firestore=r}convertBytes(r){return new Al(r)}convertReference(r){const i=this.convertDocumentKey(r,this.firestore._databaseId);return new lr(this.firestore,null,i)}}function N1(s,r,i){s=Sn(s,lr);const o=Sn(s.firestore,zr),c=Sy(s.converter,r,i);return Eh(o,[Hf(jf(o),"setDoc",s._key,c,null!==s.converter,i).toMutation(s._key,hi.none())])}function uT(s,r,i,...o){s=Sn(s,lr);const c=Sn(s.firestore,zr),d=jf(c);let g;return g="string"==typeof(r=(0,J.m9)(r))||r instanceof Vc?wy(d,"updateDoc",s._key,r,i,o):Jo(d,"updateDoc",s._key,r),Eh(c,[g.toMutation(s._key,hi.exists(!0))])}function dT(s,...r){var i,o,c;s=(0,J.m9)(s);let d={includeMetadataChanges:!1},g=0;"object"!=typeof r[g]||zb(r[g])||(d=r[g],g++);const v={includeMetadataChanges:d.includeMetadataChanges};if(zb(r[g])){const j=r[g];r[g]=null===(i=j.next)||void 0===i?void 0:i.bind(j),r[g+1]=null===(o=j.error)||void 0===o?void 0:o.bind(j),r[g+2]=null===(c=j.complete)||void 0===c?void 0:c.bind(j)}let w,R,F;if(s instanceof lr)R=Sn(s.firestore,zr),F=Ef(s._key.path),w={next:j=>{r[g]&&r[g](qg(R,s,j))},error:r[g+1],complete:r[g+2]};else{const j=Sn(s,gs);R=Sn(j.firestore,zr),F=j._query;const Q=new yh(R);w={next:de=>{r[g]&&r[g](new Vu(R,Q,j,de))},error:r[g+1],complete:r[g+2]},tw(s._query)}return function(j,Q,de,ge){const Ne=new hy(ge),$e=new Eb(Q,Ne,de);return j.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return J_(yield ph(j),$e)})),()=>{Ne.Xo(),j.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return ey(yield ph(j),$e)}))}}(pi(R),F,v,w)}function Eh(s,r){return function(i,o){const c=new gt;return i.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(s,r,i){return ny.apply(this,arguments)}(yield NI(i),o,c)})),c.promise}(pi(s),r)}function qg(s,r,i){const o=i.docs.get(r._key),c=new yh(s);return new Bc(s,c,r._key,o,new $f(i.hasPendingWrites,i.fromCache),r.converter)}class fT extends class{constructor(r,i){this._firestore=r,this._transaction=i,this._dataReader=jf(r)}get(r){const i=Xo(r,this._firestore),o=new iO(this._firestore);return this._transaction.lookup([i._key]).then(c=>{if(!c||1!==c.length)return wt();const d=c[0];if(d.isFoundDocument())return new _h(this._firestore,o,d.key,d,i.converter);if(d.isNoDocument())return new _h(this._firestore,o,i._key,null,i.converter);throw wt()})}set(r,i,o){const c=Xo(r,this._firestore),d=Sy(c.converter,i,o),g=Hf(this._dataReader,"Transaction.set",c._key,d,null!==c.converter,o);return this._transaction.set(c._key,g),this}update(r,i,o,...c){const d=Xo(r,this._firestore);let g;return g="string"==typeof(i=(0,J.m9)(i))||i instanceof Vc?wy(this._dataReader,"Transaction.update",d._key,i,o,c):Jo(this._dataReader,"Transaction.update",d._key,i),this._transaction.update(d._key,g),this}delete(r){const i=Xo(r,this._firestore);return this._transaction.delete(i._key),this}}{constructor(r,i){super(r,i),this._firestore=r}get(r){const i=Xo(r,this._firestore),o=new yh(this._firestore);return super.get(r).then(c=>new Bc(this._firestore,o,i._key,c._document,new $f(!1,!1),i.converter))}}function Rn(s,r){if(void 0===r)return{merge:!1};if(void 0!==r.mergeFields&&void 0!==r.merge)throw new Ze("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return r}function Uc(){if("undefined"==typeof Uint8Array)throw new Ze("unimplemented","Uint8Arrays are not available in this environment.")}function bh(){if("undefined"==typeof atob)throw new Ze("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(s){Gd=s})(cc.SDK_VERSION),(0,cc._registerComponent)(new ba.wA("firestore",(s,{options:r})=>{const i=s.getProvider("app").getImmediate(),o=new zr(i,new Ma(s.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:!0},r),o._setSettings(r),o},"PUBLIC")),(0,cc.registerVersion)("@firebase/firestore","3.0.1",void 0);class jc{constructor(r){this._delegate=r}static fromBase64String(r){return bh(),new jc(Al.fromBase64String(r))}static fromUint8Array(r){return Uc(),new jc(Al.fromUint8Array(r))}toBase64(){return bh(),this._delegate.toBase64()}toUint8Array(){return Uc(),this._delegate.toUint8Array()}isEqual(r){return this._delegate.isEqual(r._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _T(s){return function(s,r){if("object"!=typeof s||null===s)return!1;const i=s;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(s)}class ea{enableIndexedDbPersistence(r,i){return function(s,r){$I(s=Sn(s,zr));const i=pi(s),o=s._freezeSettings(),c=new dy;return qb(i,c,new Bg(c,o.cacheSizeBytes,null==r?void 0:r.forceOwnership))}(r._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(r){return function(s){$I(s=Sn(s,zr));const r=pi(s),i=s._freezeSettings(),o=new dy;return qb(r,o,new RI(o,i.cacheSizeBytes))}(r._delegate)}clearIndexedDbPersistence(r){return function(s){if(s._initialized&&!s._terminated)throw new Ze(Fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const r=new gt;return s._queue.enqueueAndForgetEvenWhileRestricted((0,He.Z)(function*(){try{yield(i=(0,He.Z)(function*(o){if(!ps.Pt())return Promise.resolve();const c=o+"main";yield ps.delete(c)}),function(o){return i.apply(this,arguments)})(QE(s._databaseId,s._persistenceKey)),r.resolve()}catch(i){r.reject(i)}var i})),r.promise}(r._delegate)}}class Ry{constructor(r,i,o){this._delegate=i,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},r instanceof Uf||(this._appCompat=r)}get _databaseId(){return this._delegate._databaseId}settings(r){const i=this._delegate._getSettings();!r.merge&&i.host!==r.host&&eg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),r.merge&&delete(r=Object.assign(Object.assign({},i),r)).merge,this._delegate._setSettings(r)}useEmulator(r,i,o={}){!function(s,r,i,o={}){var c;const d=(s=Sn(s,Hg))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==r&&eg("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},d),{host:`${r}:${i}`,ssl:!1})),o.mockUserToken){let g,v;if("string"==typeof o.mockUserToken)g=o.mockUserToken,v=Yi.MOCK_USER;else{g=(0,J.Sg)(o.mockUserToken,null===(c=s._app)||void 0===c?void 0:c.options.projectId);const w=o.mockUserToken.sub||o.mockUserToken.user_id;if(!w)throw new Ze(Fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Yi(w)}s._credentials=new d_(new sE(g,v))}}(this._delegate,r,i,o)}enableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,He.Z)(function*(){const r=yield i1(s),i=yield s1(s);return r.setNetworkEnabled(!0),function(o){const c=ot(o);return c.Kr.delete(0),Pf(c)}(i)}))}(pi(s=Sn(s,zr)))}(this._delegate)}disableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,He.Z)(function*(){const r=yield i1(s),i=yield s1(s);return r.setNetworkEnabled(!1),(o=(0,He.Z)(function*(c){const d=ot(c);d.Kr.add(0),yield Rr(d),d.Wr.set("Offline")}),function(c){return o.apply(this,arguments)})(i);var o}))}(pi(s=Sn(s,zr)))}(this._delegate)}enablePersistence(r){let i=!1,o=!1;return r&&(i=!!r.synchronizeTabs,o=!!r.experimentalForceOwningTab,jb("synchronizeTabs",i,"experimentalForceOwningTab",o)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(s){return function(r){const i=new gt;return r.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(s,r){return Ab.apply(this,arguments)}(yield NI(r),i)})),i.promise}(pi(s=Sn(s,zr)))}(this._delegate)}onSnapshotsInSync(r){return function(s,r){return function(s,r){const i=new hy(r);return s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return o=yield ph(s),c=i,ot(o).Zr.add(c),void c.next();var o,c})),()=>{i.Xo(),s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return o=yield ph(s),c=i,void ot(o).Zr.delete(c);var o,c}))}}(pi(s=Sn(s,zr)),zb(r)?r:{next:r})}(this._delegate,r)}get app(){if(!this._appCompat)throw new Ze("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(r){try{return new Ba(this,UI(this._delegate,r))}catch(i){throw xs(i,"collection()","Firestore.collection()")}}doc(r){try{return new ta(this,vy(this._delegate,r))}catch(i){throw xs(i,"doc()","Firestore.doc()")}}collectionGroup(r){try{return new Ns(this,function(s,r){if(s=Sn(s,Hg),Ub("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new Ze(Fe.INVALID_ARGUMENT,`Invalid collection ID '${r}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(s,null,(i=r,new Nc(Nn.emptyPath(),i)));var i}(this._delegate,r))}catch(i){throw xs(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(r){return function(s,r){return function(s,r){const i=new gt;return s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){const o=yield(c=s,my(c).then(d=>d.datastore));var c;new n1(s.asyncQueue,o,r,i).run()})),i.promise}(pi(s),i=>r(new fT(s,i)))}(this._delegate,i=>r(new iw(this,i)))}batch(){return pi(this._delegate),new sw(new lT(this._delegate,r=>Eh(this._delegate,r)))}loadBundle(r){return function(s,r){const i=pi(s=Sn(s,zr)),o=new p1;return function(s,r,i,o){const c=function(d,g){let v;return v="string"==typeof d?(new TextEncoder).encode(d):d,w=function(w,R){if(w instanceof Uint8Array)return Fb(w,R);if(w instanceof ArrayBuffer)return Fb(new Uint8Array(w),R);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(v),new Ug(w,g);var w}(i,Nf(r));s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){!function(s,r,i){const o=ot(s);var c;(c=(0,He.Z)(function*(d,g,v){try{const w=yield g.getMetadata();if(yield function(Q,de){const ge=ot(Q),Ne=fi(de.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",$e=>ge.Je.getBundleMetadata($e,de.id)).then($e=>!!$e&&$e.createTime.compareTo(Ne)>=0)}(d.localStore,w))return yield g.close(),void v._completeWith((Q=w,{taskState:"Success",documentsLoaded:Q.totalDocuments,bytesLoaded:Q.totalBytes,totalDocuments:Q.totalDocuments,totalBytes:Q.totalBytes}));v._updateProgress(gI(w));const R=new WA(w,d.localStore,g.N);let F=yield g.Qo();for(;F;){const Q=yield R.fo(F);Q&&v._updateProgress(Q),F=yield g.Qo()}const j=yield R.complete();yield Pu(d,j.Tn,void 0),yield function(Q,de){const ge=ot(Q);return ge.persistence.runTransaction("Save bundle","readwrite",Ne=>ge.Je.saveBundleMetadata(Ne,de))}(d.localStore,w),v._completeWith(j.progress)}catch(w){eg("SyncEngine",`Loading bundle failed with ${w}`),v._failWith(w)}var Q}),function(d,g,v){return c.apply(this,arguments)})(o,r,i).then(()=>{o.sharedClientState.notifyBundleLoaded()})}(yield NI(s),c,o)}))}(i,s._databaseId,r,o),o}(this._delegate,r)}namedQuery(r){return function(s,r){return function(s,r){return s.asyncQueue.enqueue((0,He.Z)(function*(){return function(i,o){const c=ot(i);return c.persistence.runTransaction("Get named query","readonly",d=>c.Je.getNamedQuery(d,o))}(yield OI(s),r)}))}(pi(s=Sn(s,zr)),r).then(i=>i?new gs(s,null,i.query):null)}(this._delegate,r).then(i=>i?new Ns(this,i):null)}}class Rl extends nw{constructor(r){super(),this.firestore=r}convertBytes(r){return new jc(new Al(r))}convertReference(r){const i=this.convertDocumentKey(r,this.firestore._databaseId);return ta.forKey(i,this.firestore,null)}}class iw{constructor(r,i){this._firestore=r,this._delegate=i,this._userDataWriter=new Rl(r)}get(r){const i=Ua(r);return this._delegate.get(i).then(o=>new Os(this._firestore,new Bc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,i.converter)))}set(r,i,o){const c=Ua(r);return o?(Rn("Transaction.set",o),this._delegate.set(c,i,o)):this._delegate.set(c,i),this}update(r,i,o,...c){const d=Ua(r);return 2===arguments.length?this._delegate.update(d,i):this._delegate.update(d,i,o,...c),this}delete(r){const i=Ua(r);return this._delegate.delete(i),this}}class sw{constructor(r){this._delegate=r}set(r,i,o){const c=Ua(r);return o?(Rn("WriteBatch.set",o),this._delegate.set(c,i,o)):this._delegate.set(c,i),this}update(r,i,o,...c){const d=Ua(r);return 2===arguments.length?this._delegate.update(d,i):this._delegate.update(d,i,o,...c),this}delete(r){const i=Ua(r);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}}class zf{constructor(r,i,o){this._firestore=r,this._userDataWriter=i,this._delegate=o}fromFirestore(r,i){const o=new Gg(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,null);return this._delegate.fromFirestore(new Wf(this._firestore,o),null!=i?i:{})}toFirestore(r,i){return i?this._delegate.toFirestore(r,i):this._delegate.toFirestore(r)}static getInstance(r,i){const o=zf.INSTANCES;let c=o.get(r);c||(c=new WeakMap,o.set(r,c));let d=c.get(i);return d||(d=new zf(r,new Rl(r),i),c.set(i,d)),d}}zf.INSTANCES=new WeakMap;class ta{constructor(r,i){this.firestore=r,this._delegate=i,this._userDataWriter=new Rl(r)}static forPath(r,i,o){if(r.length%2!=0)throw new Ze("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${r.canonicalString()} has ${r.length}`);return new ta(i,new lr(i._delegate,o,new Ct(r)))}static forKey(r,i,o){return new ta(i,new lr(i._delegate,o,r))}get id(){return this._delegate.id}get parent(){return new Ba(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(r){try{return new Ba(this.firestore,UI(this._delegate,r))}catch(i){throw xs(i,"collection()","DocumentReference.collection()")}}isEqual(r){return(r=(0,J.m9)(r))instanceof lr&&$b(this._delegate,r)}set(r,i){i=Rn("DocumentReference.set",i);try{return i?N1(this._delegate,r,i):N1(this._delegate,r)}catch(o){throw xs(o,"setDoc()","DocumentReference.set()")}}update(r,i,...o){try{return 1===arguments.length?uT(this._delegate,r):uT(this._delegate,r,i,...o)}catch(c){throw xs(c,"updateDoc()","DocumentReference.update()")}}delete(){return function(s){return Eh(Sn(s.firestore,zr),[new wf(s._key,hi.none())])}(this._delegate)}onSnapshot(...r){const i=Co(r),o=xr(r,c=>new Os(this.firestore,new Bc(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return dT(this._delegate,i,o)}get(r){let i;return i="cache"===(null==r?void 0:r.source)?function(s){s=Sn(s,lr);const r=Sn(s.firestore,zr),i=pi(r),o=new yh(r);return function(s,r){const i=new gt;return s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return(o=(0,He.Z)(function*(c,d,g){try{const v=yield function(w,R){const F=ot(w);return F.persistence.runTransaction("read document","readonly",j=>F.Qn.An(j,R))}(c,d);v.isFoundDocument()?g.resolve(v):v.isNoDocument()?g.resolve(null):g.reject(new Ze(Fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(v){const w=uh(v,`Failed to get document '${d} from cache`);g.reject(w)}}),function(c,d,g){return o.apply(this,arguments)})(yield OI(s),r,i);var o})),i.promise}(i,s._key).then(c=>new Bc(r,o,s._key,c,new $f(null!==c&&c.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==r?void 0:r.source)?function(s){s=Sn(s,lr);const r=Sn(s.firestore,zr);return Bf(pi(r),s._key,{source:"server"}).then(i=>qg(r,s,i))}(this._delegate):function(s){s=Sn(s,lr);const r=Sn(s.firestore,zr);return Bf(pi(r),s._key).then(i=>qg(r,s,i))}(this._delegate),i.then(o=>new Os(this.firestore,new Bc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(r){return new ta(this.firestore,this._delegate.withConverter(r?zf.getInstance(this.firestore,r):null))}}function xs(s,r,i){return s.message=s.message.replace(r,i),s}function Co(s){for(const r of s)if("object"==typeof r&&!_T(r))return r;return{}}function xr(s,r){var i,o;let c;return c=_T(s[0])?s[0]:_T(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:d=>{c.next&&c.next(r(d))},error:null===(i=c.error)||void 0===i?void 0:i.bind(c),complete:null===(o=c.complete)||void 0===o?void 0:o.bind(c)}}class Os{constructor(r,i){this._firestore=r,this._delegate=i}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(r){return this._delegate.data(r)}get(r,i){return this._delegate.get(r,i)}isEqual(r){return ew(this._delegate,r._delegate)}}class Wf extends Os{data(r){const i=this._delegate.data(r);return function(s,r){s||wt()}(void 0!==i),i}}class Ns{constructor(r,i){this.firestore=r,this._delegate=i,this._userDataWriter=new Rl(r)}where(r,i,o){try{return new Ns(this.firestore,Bu(this._delegate,function(s,r,i){const o=r,c=Cy("where",s);return new eT(c,o,i)}(r,i,o)))}catch(c){throw xs(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(r,i){try{return new Ns(this.firestore,Bu(this._delegate,function(s,r="asc"){const i=r,o=Cy("orderBy",s);return new S1(o,i)}(r,i)))}catch(o){throw xs(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(r){try{return new Ns(this.firestore,Bu(this._delegate,function(s){return VI("limit",s),new zg("limit",s,"F")}(r)))}catch(i){throw xs(i,"limit()","Query.limit()")}}limitToLast(r){try{return new Ns(this.firestore,Bu(this._delegate,function(s){return VI("limitToLast",s),new zg("limitToLast",s,"L")}(r)))}catch(i){throw xs(i,"limitToLast()","Query.limitToLast()")}}startAt(...r){try{return new Ns(this.firestore,Bu(this._delegate,function(...s){return new nT("startAt",s,!0)}(...r)))}catch(i){throw xs(i,"startAt()","Query.startAt()")}}startAfter(...r){try{return new Ns(this.firestore,Bu(this._delegate,function(...s){return new nT("startAfter",s,!1)}(...r)))}catch(i){throw xs(i,"startAfter()","Query.startAfter()")}}endBefore(...r){try{return new Ns(this.firestore,Bu(this._delegate,function(...s){return new rT("endBefore",s,!0)}(...r)))}catch(i){throw xs(i,"endBefore()","Query.endBefore()")}}endAt(...r){try{return new Ns(this.firestore,Bu(this._delegate,function(...s){return new rT("endAt",s,!1)}(...r)))}catch(i){throw xs(i,"endAt()","Query.endAt()")}}isEqual(r){return jI(this._delegate,r._delegate)}get(r){let i;return i="cache"===(null==r?void 0:r.source)?function(s){s=Sn(s,gs);const r=Sn(s.firestore,zr),i=pi(r),o=new yh(r);return function(s,r){const i=new gt;return s.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return(o=(0,He.Z)(function*(c,d,g){try{const v=yield tb(c,d,!0),w=new yI(d,v.Gn),R=w.Io(v.documents),F=w.applyChanges(R,!1);g.resolve(F.snapshot)}catch(v){const w=uh(v,`Failed to execute query '${d} against cache`);g.reject(w)}}),function(c,d,g){return o.apply(this,arguments)})(yield OI(s),r,i);var o})),i.promise}(i,s._query).then(c=>new Vu(r,o,s,c))}(this._delegate):"server"===(null==r?void 0:r.source)?function(s){s=Sn(s,gs);const r=Sn(s.firestore,zr),i=pi(r),o=new yh(r);return kI(i,s._query,{source:"server"}).then(c=>new Vu(r,o,s,c))}(this._delegate):function(s){s=Sn(s,gs);const r=Sn(s.firestore,zr),i=pi(r),o=new yh(r);return tw(s._query),kI(i,s._query).then(c=>new Vu(r,o,s,c))}(this._delegate),i.then(o=>new Zg(this.firestore,new Vu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...r){const i=Co(r),o=xr(r,c=>new Zg(this.firestore,new Vu(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return dT(this._delegate,i,o)}withConverter(r){return new Ns(this.firestore,this._delegate.withConverter(r?zf.getInstance(this.firestore,r):null))}}class yT{constructor(r,i){this._firestore=r,this._delegate=i}get type(){return this._delegate.type}get doc(){return new Wf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zg{constructor(r,i){this._firestore=r,this._delegate=i}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(r=>new Wf(this._firestore,r))}docChanges(r){return this._delegate.docChanges(r).map(i=>new yT(this._firestore,i))}forEach(r,i){this._delegate.forEach(o=>{r.call(i,new Wf(this._firestore,o))})}isEqual(r){return ew(this._delegate,r._delegate)}}class Ba extends Ns{constructor(r,i){super(r,i),this.firestore=r,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const r=this._delegate.parent;return r?new ta(this.firestore,r):null}doc(r){try{return new ta(this.firestore,void 0===r?vy(this._delegate):vy(this._delegate,r))}catch(i){throw xs(i,"doc()","CollectionReference.doc()")}}add(r){return function(s,r){const i=Sn(s.firestore,zr),o=vy(s),c=Sy(s.converter,r);return Eh(i,[Hf(jf(s.firestore),"addDoc",o._key,c,null!==s.converter,{}).toMutation(o._key,hi.exists(!1))]).then(()=>o)}(this._delegate,r).then(i=>new ta(this.firestore,i))}isEqual(r){return $b(this._delegate,r._delegate)}withConverter(r){return new Ba(this.firestore,this._delegate.withConverter(r?zf.getInstance(this.firestore,r):null))}}function Ua(s){return Sn(s,lr)}class ow{constructor(...r){this._delegate=new Vc(...r)}static documentId(){return new ow(Vi.keyField().canonicalString())}isEqual(r){return(r=(0,J.m9)(r))instanceof Vc&&this._delegate._internalPath.isEqual(r._internalPath)}}class Io{constructor(r){this._delegate=r}static serverTimestamp(){const r=new Lu("serverTimestamp");return r._methodName="FieldValue.serverTimestamp",new Io(r)}static delete(){const r=new Fu("deleteField");return r._methodName="FieldValue.delete",new Io(r)}static arrayUnion(...r){const i=function(...s){return new w1("arrayUnion",s)}(...r);return i._methodName="FieldValue.arrayUnion",new Io(i)}static arrayRemove(...r){const i=function(...s){return new nO("arrayRemove",s)}(...r);return i._methodName="FieldValue.arrayRemove",new Io(i)}static increment(r){const i=function(s){return new C1("increment",s)}(r);return i._methodName="FieldValue.increment",new Io(i)}isEqual(r){return this._delegate.isEqual(r._delegate)}}const V1={Firestore:Ry,GeoPoint:Ey,Timestamp:Ai,Blob:jc,Transaction:iw,WriteBatch:sw,DocumentReference:ta,DocumentSnapshot:Os,Query:Ns,QueryDocumentSnapshot:Wf,QuerySnapshot:Zg,CollectionReference:Ba,FieldPath:ow,FieldValue:Io,setLogLevel:function(s){!function(s){wu.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};function xy(s,r){return function(s,r=$h.z){return new sr.y(i=>{let o;return null!=r?r.schedule(()=>{o=s.onSnapshot({includeMetadataChanges:!0},i)}):o=s.onSnapshot({includeMetadataChanges:!0},i),()=>{null!=o&&o()}})}(s,r)}function Uu(s,r){return xy(s,r).pipe((0,bn.U)(i=>({payload:i,type:"query"})))}function Oy(s,r){return Uu(s,r).pipe((0,fd.O)(void 0),zh(),(0,bn.U)(([i,o])=>{const c=o.payload.docChanges(),d=c.map(g=>({type:g.type,payload:g}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,v)=>{const w=c.find(F=>F.doc.ref.isEqual(g.ref)),R=null==i?void 0:i.payload.docs.find(F=>F.ref.isEqual(g.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(g.metadata)||!w&&R&&JSON.stringify(R.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:v,newIndex:v,type:"modified",doc:g}})}),d}))}function Qg(s,r,i){return Oy(s,i).pipe((0,pd.R)((o,c)=>function(s,r,i){return r.forEach(o=>{i.indexOf(o.type)>-1&&(s=function(s,r){switch(r.type){case"added":if(!s[r.newIndex]||!s[r.newIndex].doc.ref.isEqual(r.doc.ref))return Ny(s,r.newIndex,0,r);break;case"modified":if(null==s[r.oldIndex]||s[r.oldIndex].doc.ref.isEqual(r.doc.ref)){if(r.oldIndex!==r.newIndex){const i=s.slice();return i.splice(r.oldIndex,1),i.splice(r.newIndex,0,r),i}return Ny(s,r.newIndex,1,r)}break;case"removed":if(s[r.oldIndex]&&s[r.oldIndex].doc.ref.isEqual(r.doc.ref))return Ny(s,r.oldIndex,1)}return s}(s,o))}),s}(o,c.map(d=>d.payload),r),[]),lc(),(0,bn.U)(o=>o.map(c=>({type:c.type,payload:c}))))}function Ny(s,r,i,...o){const c=s.slice();return c.splice(r,i,...o),c}function Jg(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}!function(s){(function(s,r){s.INTERNAL.registerComponent(new ba.wA("firestore-compat",i=>((r,i)=>new Ry(r,i,new ea))(i.getProvider("app-compat").getImmediate(),i.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},V1)))})(s),s.registerVersion("@firebase/firestore-compat","0.1.1")}(Tp.Z);class CT{constructor(r,i,o){this.ref=r,this.query=i,this.afs=o}stateChanges(r){let i=Oy(this.query,this.afs.schedulers.outsideAngular);return r&&r.length>0&&(i=i.pipe((0,bn.U)(o=>o.filter(c=>r.indexOf(c.type)>-1)))),i.pipe((0,fd.O)(void 0),zh(),(0,An.h)(([o,c])=>c.length>0||!o),(0,bn.U)(([o,c])=>c),Et.iC)}auditTrail(r){return this.stateChanges(r).pipe((0,pd.R)((i,o)=>[...i,...o],[]))}snapshotChanges(r){const i=Jg(r);return Qg(this.query,i,this.afs.schedulers.outsideAngular).pipe(Et.iC)}valueChanges(r={}){return Uu(this.query,this.afs.schedulers.outsideAngular).pipe((0,bn.U)(i=>i.payload.docs.map(o=>r.idField?Object.assign(Object.assign({},o.data()),{[r.idField]:o.id}):o.data())),Et.iC)}get(r){return(0,Ur.D)(this.query.get(r)).pipe(Et.f6)}add(r){return this.ref.add(r)}doc(r){return new Py(this.ref.doc(r),this.afs)}}class Py{constructor(r,i){this.ref=r,this.afs=i}set(r,i){return this.ref.set(r,i)}update(r){return this.ref.update(r)}delete(){return this.ref.delete()}collection(r,i){const o=this.ref.collection(r),{ref:c,query:d}=qf(o,i);return new CT(c,d,this.afs)}snapshotChanges(){return function(s,r){return xy(s,r).pipe((0,fd.O)(void 0),zh(),(0,bn.U)(([i,o])=>o.exists?(null==i?void 0:i.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Et.iC)}valueChanges(r={}){return this.snapshotChanges().pipe((0,bn.U)(({payload:i})=>r.idField?Object.assign(Object.assign({},i.data()),{[r.idField]:i.id}):i.data()))}get(r){return(0,Ur.D)(this.ref.get(r)).pipe((0,ho.QV)(this.afs.schedulers.insideAngular))}}class lw{constructor(r,i){this.query=r,this.afs=i}stateChanges(r){return r&&0!==r.length?Oy(this.query,this.afs.schedulers.outsideAngular).pipe((0,bn.U)(i=>i.filter(o=>r.indexOf(o.type)>-1)),(0,An.h)(i=>i.length>0),Et.iC):Oy(this.query,this.afs.schedulers.outsideAngular).pipe(Et.iC)}auditTrail(r){return this.stateChanges(r).pipe((0,pd.R)((i,o)=>[...i,...o],[]))}snapshotChanges(r){const i=Jg(r);return Qg(this.query,i,this.afs.schedulers.outsideAngular).pipe(Et.iC)}valueChanges(r={}){return Uu(this.query,this.afs.schedulers.outsideAngular).pipe((0,bn.U)(o=>o.payload.docs.map(c=>r.idField?Object.assign({[r.idField]:c.id},c.data()):c.data())),Et.iC)}get(r){return(0,Ur.D)(this.query.get(r)).pipe(Et.f6)}}const aO=new m.OlP("angularfire2.enableFirestorePersistence"),lO=new m.OlP("angularfire2.firestore.persistenceSettings"),Zt=new m.OlP("angularfire2.firestore.settings"),cO=new m.OlP("angularfire2.firestore.use-emulator");function qf(s,r=(i=>i)){return{query:r(s),ref:s}}let B1=(()=>{class s{constructor(i,o,c,d,g,v,w,R,F,j,Q,de,ge,Ne,$e,Mt){this.schedulers=w;const qt=(0,pr.on)(i,v,o),Yt=F;j&&Ea(qt,v,Q,ge,Ne,$e,de,Mt),[this.firestore,this.persistenceEnabled$]=(0,Et.cc)(`${qt.name}.firestore`,"AngularFirestore",qt.name,()=>{const un=v.runOutsideAngular(()=>qt.firestore());if(d&&un.settings(d),Yt&&un.useEmulator(...Yt),c&&!(0,O.PM)(g)){const Hi=()=>{try{return(0,Ur.D)(un.enablePersistence(R||void 0).then(()=>!0,()=>!1))}catch(Ro){return"undefined"!=typeof console&&console.warn(Ro),(0,wi.of)(!1)}};return[un,v.runOutsideAngular(Hi)]}return[un,(0,wi.of)(!1)]},[d,Yt,c])}collection(i,o){let c;c="string"==typeof i?this.firestore.collection(i):i;const{ref:d,query:g}=qf(c,o),v=this.schedulers.ngZone.run(()=>d);return new CT(v,g,this)}collectionGroup(i,o){const c=o||(g=>g),d=this.firestore.collectionGroup(i);return new lw(c(d),this)}doc(i){let o;o="string"==typeof i?this.firestore.doc(i):i;const c=this.schedulers.ngZone.run(()=>o);return new Py(c,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(pr.Dh),m.LFG(pr.xv,8),m.LFG(aO,8),m.LFG(Zt,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Et.HU),m.LFG(lO,8),m.LFG(cO,8),m.LFG(oc,8),m.LFG(qi,8),m.LFG(fo,8),m.LFG(Ki,8),m.LFG(Ii,8),m.LFG(Ws,8),m.LFG(ll,8))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),IT=(()=>{class s{constructor(i,o){this.af=i,this.router=o}addItem(i){this.af.collection("usuarios").add(i).then(()=>this.router.navigate(["home"]))}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(B1),m.LFG(bi.F0))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),cw=(()=>{class s{constructor(i,o,c){this.auth=i,this.router=o,this.firestore=c,this.isLoggedIn=!1,this.auth.authState.subscribe(d=>{this.isLoggedIn=d,console.log(null==d?void 0:d.email)})}login(i,o){return this.auth.signInWithEmailAndPassword(i,o)}register(i,o){return this.auth.createUserWithEmailAndPassword(i,o)}logOut(){this.auth.signOut()}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(oc),m.LFG(bi.F0),m.LFG(IT))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ja(s){return null!=s&&"false"!=`${s}`}function ky(s){return Array.isArray(s)?s:[s]}function gi(s){return null==s?"":"string"==typeof s?s:`${s}px`}function Hc(s){return s instanceof m.SBq?s.nativeElement:s}var U1=H(9105);function uw(s,r,i,o){return(0,U1.m)(i)&&(o=i,i=void 0),o?uw(s,r,i).pipe((0,bn.U)(c=>(0,to.k)(c)?o(...c):o(c))):new sr.y(c=>{TT(s,r,function(g){c.next(arguments.length>1?Array.prototype.slice.call(arguments):g)},c,i)})}function TT(s,r,i,o,c){let d;if(function(s){return s&&"function"==typeof s.addEventListener&&"function"==typeof s.removeEventListener}(s)){const g=s;s.addEventListener(r,i,c),d=()=>g.removeEventListener(r,i,c)}else if(function(s){return s&&"function"==typeof s.on&&"function"==typeof s.off}(s)){const g=s;s.on(r,i),d=()=>g.off(r,i)}else if(function(s){return s&&"function"==typeof s.addListener&&"function"==typeof s.removeListener}(s)){const g=s;s.addListener(r,i),d=()=>g.removeListener(r,i)}else{if(!s||!s.length)throw new TypeError("Invalid event target");for(let g=0,v=s.length;g<v;g++)TT(s[g],r,i,o,c)}o.add(d)}var G1=H(6465),hw=H(6102);new class extends hw.v{flush(r){this.active=!0,this.scheduled=void 0;const{actions:i}=this;let o,c=-1,d=i.length;r=r||i.shift();do{if(o=r.execute(r.state,r.delay))break}while(++c<d&&(r=i.shift()));if(this.active=!1,o){for(;++c<d&&(r=i.shift());)r.unsubscribe();throw o}}}(class extends G1.o{constructor(r,i){super(r,i),this.scheduler=r,this.work=i}requestAsyncId(r,i,o=0){return null!==o&&o>0?super.requestAsyncId(r,i,o):(r.actions.push(this),r.scheduled||(r.scheduled=requestAnimationFrame(()=>r.flush(null))))}recycleAsyncId(r,i,o=0){if(null!==o&&o>0||null===o&&this.delay>0)return super.recycleAsyncId(r,i,o);0===r.actions.length&&(cancelAnimationFrame(i),r.scheduled=void 0)}});H(4581);var Kf=H(5345);class q1{constructor(r){this.durationSelector=r}call(r,i){return i.subscribe(new em(r,this.durationSelector))}}class em extends Kf.Ds{constructor(r,i){super(r),this.durationSelector=i,this.hasValue=!1}_next(r){if(this.value=r,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:c}=this;i=c(r)}catch(c){return this.destination.error(c)}const o=(0,Kf.ft)(i,new Kf.IY(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}}clearThrottle(){const{value:r,hasValue:i,throttled:o}=this;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(r))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var AT=H(6561),MT=H(4869);function tm(s){const{index:r,period:i,subscriber:o}=s;if(o.next(r),!o.closed){if(-1===i)return o.complete();s.index=r+1,this.schedule(s,i)}}function xT(s,r=$h.P){return function(s){return function(i){return i.lift(new q1(s))}}(()=>function(s=0,r,i){let o=-1;return(0,AT.k)(r)?o=Number(r)<1?1:Number(r):(0,MT.K)(r)&&(i=r),(0,MT.K)(i)||(i=$h.P),new sr.y(c=>{const d=(0,AT.k)(s)?s:+s-i.now();return i.schedule(tm,d,{index:0,period:o,subscriber:c})})}(s,r))}function ju(s){return r=>r.lift(new K1(s))}class K1{constructor(r){this.notifier=r}call(r,i){const o=new Z1(r),c=(0,Kf.ft)(this.notifier,new Kf.IY(o));return c&&!o.seenValue?(o.add(c),i.subscribe(o)):o}}class Z1 extends Kf.Ds{constructor(r){super(r),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let fw;try{fw="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(s){fw=!1}let Ly,Ch,pw,Vr=(()=>{class s{constructor(i){this._platformId=i,this.isBrowser=this._platformId?(0,O.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fw)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(m.Lbi))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(m.Lbi))},token:s,providedIn:"root"}),s})(),Fy=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({}),s})();function NT(s){return function(){if(null==Ly&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ly=!0}))}finally{Ly=Ly||!1}return Ly}()?s:!!s.capture}function PT(){if(null==Ch){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ch=!1,Ch;if("scrollBehavior"in document.documentElement.style)Ch=!0;else{const s=Element.prototype.scrollTo;Ch=!!s&&!/\{\s*\[native code\]\s*\}/.test(s.toString())}}return Ch}function Hu(s){return s.composedPath?s.composedPath()[0]:s.target}const FT=new m.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,m.f3M)(O.K0)}});let mi=(()=>{class s{constructor(i){if(this.value="ltr",this.change=new m.vpe,i){const c=i.documentElement?i.documentElement.dir:null,d=(i.body?i.body.dir:null)||c;this.value="ltr"===d||"rtl"===d?d:"ltr"}}ngOnDestroy(){this.change.complete()}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(FT,8))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(FT,8))},token:s,providedIn:"root"}),s})(),Ps=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({}),s})(),Vy=(()=>{class s{constructor(i,o,c){this._ngZone=i,this._platform=o,this._scrolled=new fn.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=c}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const o=this.scrollContainers.get(i);o&&(o.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new sr.y(o=>{this._globalSubscription||this._addGlobalListener();const c=i>0?this._scrolled.pipe(xT(i)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{c.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,wi.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(i,o){const c=this.getAncestorScrollContainers(i);return this.scrolled(o).pipe((0,An.h)(d=>!d||c.indexOf(d)>-1))}getAncestorScrollContainers(i){const o=[];return this.scrollContainers.forEach((c,d)=>{this._scrollableContainsElement(d,i)&&o.push(d)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,o){let c=Hc(o),d=i.getElementRef().nativeElement;do{if(c==d)return!0}while(c=c.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>uw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(m.R0b),m.LFG(Vr),m.LFG(O.K0,8))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(m.R0b),m.LFG(Vr),m.LFG(O.K0,8))},token:s,providedIn:"root"}),s})(),rm=(()=>{class s{constructor(i,o,c){this._platform=i,this._change=new fn.xQ,this._changeListener=d=>{this._change.next(d)},this._document=c,o.runOutsideAngular(()=>{if(i.isBrowser){const d=this._getWindow();d.addEventListener("resize",this._changeListener),d.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:o,height:c}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+c,right:i.left+o,height:c,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,o=this._getWindow(),c=i.documentElement,d=c.getBoundingClientRect();return{top:-d.top||i.body.scrollTop||o.scrollY||c.scrollTop||0,left:-d.left||i.body.scrollLeft||o.scrollX||c.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(xT(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(Vr),m.LFG(m.R0b),m.LFG(O.K0,8))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(Vr),m.LFG(m.R0b),m.LFG(O.K0,8))},token:s,providedIn:"root"}),s})(),$T=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({}),s})(),zT=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[Ps,Fy,$T],Ps,$T]}),s})();class Uy{attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;null!=r&&(this._attachedHost=null,r.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(r){this._attachedHost=r}}class jy extends Uy{constructor(r,i,o,c){super(),this.component=r,this.viewContainerRef=i,this.injector=o,this.componentFactoryResolver=c}}class im extends Uy{constructor(r,i,o){super(),this.templateRef=r,this.viewContainerRef=i,this.context=o}get origin(){return this.templateRef.elementRef}attach(r,i=this.context){return this.context=i,super.attach(r)}detach(){return this.context=void 0,super.detach()}}class WT extends Uy{constructor(r){super(),this.element=r instanceof m.SBq?r.nativeElement:r}}class Hy{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(r){return r instanceof jy?(this._attachedPortal=r,this.attachComponentPortal(r)):r instanceof im?(this._attachedPortal=r,this.attachTemplatePortal(r)):this.attachDomPortal&&r instanceof WT?(this._attachedPortal=r,this.attachDomPortal(r)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class qT extends Hy{constructor(r,i,o,c,d){super(),this.outletElement=r,this._componentFactoryResolver=i,this._appRef=o,this._defaultInjector=c,this.attachDomPortal=g=>{const v=g.element,w=this._document.createComment("dom-portal");v.parentNode.insertBefore(w,v),this.outletElement.appendChild(v),this._attachedPortal=g,super.setDisposeFn(()=>{w.parentNode&&w.parentNode.replaceChild(v,w)})},this._document=d}attachComponentPortal(r){const o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component);let c;return r.viewContainerRef?(c=r.viewContainerRef.createComponent(o,r.viewContainerRef.length,r.injector||r.viewContainerRef.injector),this.setDisposeFn(()=>c.destroy())):(c=o.create(r.injector||this._defaultInjector),this._appRef.attachView(c.hostView),this.setDisposeFn(()=>{this._appRef.detachView(c.hostView),c.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(c)),this._attachedPortal=r,c}attachTemplatePortal(r){let i=r.viewContainerRef,o=i.createEmbeddedView(r.templateRef,r.context);return o.rootNodes.forEach(c=>this.outletElement.appendChild(c)),o.detectChanges(),this.setDisposeFn(()=>{let c=i.indexOf(o);-1!==c&&i.remove(c)}),this._attachedPortal=r,o}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(r){return r.hostView.rootNodes[0]}}let Gy=(()=>{class s extends Hy{constructor(i,o,c){super(),this._componentFactoryResolver=i,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new m.vpe,this.attachDomPortal=d=>{const g=d.element,v=this._document.createComment("dom-portal");d.setAttachedHost(this),g.parentNode.insertBefore(v,g),this._getRootNode().appendChild(g),this._attachedPortal=d,super.setDisposeFn(()=>{v.parentNode&&v.parentNode.replaceChild(g,v)})},this._document=c}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(i){i.setAttachedHost(this);const o=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,d=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),g=o.createComponent(d,o.length,i.injector||o.injector);return o!==this._viewContainerRef&&this._getRootNode().appendChild(g.hostView.rootNodes[0]),super.setDisposeFn(()=>g.destroy()),this._attachedPortal=i,this._attachedRef=g,this.attached.emit(g),g}attachTemplatePortal(i){i.setAttachedHost(this);const o=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=o,this.attached.emit(o),o}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(m._Vd),m.Y36(m.s_b),m.Y36(O.K0))},s.\u0275dir=m.lG2({type:s,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[m.qOj]}),s})(),Jf=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({}),s})();var Xf=H(5257);const oS=PT();class dN{constructor(r,i){this._viewportRuler=r,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){const r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=gi(-this._previousScrollPosition.left),r.style.top=gi(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const r=this._document.documentElement,o=r.style,c=this._document.body.style,d=o.scrollBehavior||"",g=c.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),oS&&(o.scrollBehavior=c.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),oS&&(o.scrollBehavior=d,c.scrollBehavior=g)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const i=this._document.body,o=this._viewportRuler.getViewportSize();return i.scrollHeight>o.height||i.scrollWidth>o.width}}class UM{constructor(r,i,o,c){this._scrollDispatcher=r,this._ngZone=i,this._viewportRuler=o,this._config=c,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(r){this._overlayRef=r}enable(){if(this._scrollSubscription)return;const r=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{const i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class jM{enable(){}disable(){}attach(){}}function aS(s,r){return r.some(i=>s.bottom<i.top||s.top>i.bottom||s.right<i.left||s.left>i.right)}function qy(s,r){return r.some(i=>s.top<i.top||s.bottom>i.bottom||s.left<i.left||s.right>i.right)}class HM{constructor(r,i,o,c){this._scrollDispatcher=r,this._viewportRuler=i,this._ngZone=o,this._config=c,this._scrollSubscription=null}attach(r){this._overlayRef=r}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:c}=this._viewportRuler.getViewportSize();aS(i,[{width:o,height:c,bottom:c,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let hN=(()=>{class s{constructor(i,o,c,d){this._scrollDispatcher=i,this._viewportRuler=o,this._ngZone=c,this.noop=()=>new jM,this.close=g=>new UM(this._scrollDispatcher,this._ngZone,this._viewportRuler,g),this.block=()=>new dN(this._viewportRuler,this._document),this.reposition=g=>new HM(this._scrollDispatcher,this._viewportRuler,this._ngZone,g),this._document=d}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(Vy),m.LFG(rm),m.LFG(m.R0b),m.LFG(O.K0))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(Vy),m.LFG(rm),m.LFG(m.R0b),m.LFG(O.K0))},token:s,providedIn:"root"}),s})();class lS{constructor(r){if(this.scrollStrategy=new jM,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,r){const i=Object.keys(r);for(const o of i)void 0!==r[o]&&(this[o]=r[o])}}}class GM{constructor(r,i,o,c,d){this.offsetX=o,this.offsetY=c,this.panelClass=d,this.originX=r.originX,this.originY=r.originY,this.overlayX=i.overlayX,this.overlayY=i.overlayY}}class cS{constructor(r,i){this.connectionPair=r,this.scrollableViewProperties=i}}let $M=(()=>{class s{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const o=this._attachedOverlays.indexOf(i);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(O.K0))},token:s,providedIn:"root"}),s})(),zM=(()=>{class s extends $M{constructor(i){super(i),this._keydownListener=o=>{const c=this._attachedOverlays;for(let d=c.length-1;d>-1;d--)if(c[d]._keydownEvents.observers.length>0){c[d]._keydownEvents.next(o);break}}}add(i){super.add(i),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(O.K0))},token:s,providedIn:"root"}),s})(),am=(()=>{class s extends $M{constructor(i,o){super(i),this._platform=o,this._cursorStyleIsSet=!1,this._clickListener=c=>{const d=Hu(c),g=this._attachedOverlays.slice();for(let v=g.length-1;v>-1;v--){const w=g[v];if(!(w._outsidePointerEvents.observers.length<1)&&w.hasAttached()){if(w.overlayElement.contains(d))break;w._outsidePointerEvents.next(c)}}}}add(i){if(super.add(i),!this._isAttached){const o=this._document.body;o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0),m.LFG(Vr))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(O.K0),m.LFG(Vr))},token:s,providedIn:"root"}),s})();const Gu="undefined"!=typeof window?window:{},uS=void 0!==Gu.__karma__&&!!Gu.__karma__||void 0!==Gu.jasmine&&!!Gu.jasmine||void 0!==Gu.jest&&!!Gu.jest||void 0!==Gu.Mocha&&!!Gu.Mocha;let Tw=(()=>{class s{constructor(i,o){this._platform=o,this._document=i}ngOnDestroy(){const i=this._containerElement;i&&i.parentNode&&i.parentNode.removeChild(i)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||uS){const c=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let d=0;d<c.length;d++)c[d].parentNode.removeChild(c[d])}const o=this._document.createElement("div");o.classList.add(i),uS?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0),m.LFG(Vr))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(O.K0),m.LFG(Vr))},token:s,providedIn:"root"}),s})();class Sw{constructor(r,i,o,c,d,g,v,w,R){this._portalOutlet=r,this._host=i,this._pane=o,this._config=c,this._ngZone=d,this._keyboardDispatcher=g,this._document=v,this._location=w,this._outsideClickDispatcher=R,this._backdropElement=null,this._backdropClick=new fn.xQ,this._attachments=new fn.xQ,this._detachments=new fn.xQ,this._locationChanges=T.w.EMPTY,this._backdropClickHandler=F=>this._backdropClick.next(F),this._keydownEvents=new fn.xQ,this._outsidePointerEvents=new fn.xQ,c.scrollStrategy&&(this._scrollStrategy=c.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=c.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(r){let i=this._portalOutlet.attach(r);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Xf.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const r=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){const r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,r&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=Object.assign(Object.assign({},this._config),r),this._updateElementSize()}setDirection(r){this._config=Object.assign(Object.assign({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){const r=this._config.direction;return r?"string"==typeof r?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const r=this._pane.style;r.width=gi(this._config.width),r.height=gi(this._config.height),r.minWidth=gi(this._config.minWidth),r.minHeight=gi(this._config.minHeight),r.maxWidth=gi(this._config.maxWidth),r.maxHeight=gi(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){const r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let r=this._backdropElement;if(!r)return;let i,o=()=>{r&&(r.removeEventListener("click",this._backdropClickHandler),r.removeEventListener("transitionend",o),r.parentNode&&r.parentNode.removeChild(r)),this._backdropElement==r&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(r,this._config.backdropClass,!1),clearTimeout(i)};r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{r.addEventListener("transitionend",o)}),r.style.pointerEvents="none",i=this._ngZone.runOutsideAngular(()=>setTimeout(o,500))}_toggleClasses(r,i,o){const c=r.classList;ky(i).forEach(d=>{d&&(o?c.add(d):c.remove(d))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const r=this._ngZone.onStable.pipe(ju((0,$o.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),r.unsubscribe())})})}_disposeScrollStrategy(){const r=this._scrollStrategy;r&&(r.disable(),r.detach&&r.detach())}}const dS="cdk-overlay-connected-position-bounding-box",To=/([A-Za-z%]+)$/;class hS{constructor(r,i,o,c,d){this._viewportRuler=i,this._document=o,this._platform=c,this._overlayContainer=d,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new fn.xQ,this._resizeSubscription=T.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(r)}get positions(){return this._preferredPositions}attach(r){this._validatePositions(),r.hostElement.classList.add(dS),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const r=this._originRect,i=this._overlayRect,o=this._viewportRect,c=[];let d;for(let g of this._preferredPositions){let v=this._getOriginPoint(r,g),w=this._getOverlayPoint(v,i,g),R=this._getOverlayFit(w,i,o,g);if(R.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(g,v);this._canFitWithFlexibleDimensions(R,w,o)?c.push({position:g,origin:v,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(v,g)}):(!d||d.overlayFit.visibleArea<R.visibleArea)&&(d={overlayFit:R,overlayPoint:w,originPoint:v,position:g,overlayRect:i})}if(c.length){let g=null,v=-1;for(const w of c){const R=w.boundingBoxRect.width*w.boundingBoxRect.height*(w.position.weight||1);R>v&&(v=R,g=w)}return this._isPushed=!1,void this._applyPosition(g.position,g.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Gc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(dS),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const r=this._lastPosition||this._preferredPositions[0],i=this._getOriginPoint(this._originRect,r);this._applyPosition(r,i)}}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,-1===r.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,i){let o,c;if("center"==i.originX)o=r.left+r.width/2;else{const d=this._isRtl()?r.right:r.left,g=this._isRtl()?r.left:r.right;o="start"==i.originX?d:g}return c="center"==i.originY?r.top+r.height/2:"top"==i.originY?r.top:r.bottom,{x:o,y:c}}_getOverlayPoint(r,i,o){let c,d;return c="center"==o.overlayX?-i.width/2:"start"===o.overlayX?this._isRtl()?-i.width:0:this._isRtl()?0:-i.width,d="center"==o.overlayY?-i.height/2:"top"==o.overlayY?0:-i.height,{x:r.x+c,y:r.y+d}}_getOverlayFit(r,i,o,c){const d=pS(i);let{x:g,y:v}=r,w=this._getOffset(c,"x"),R=this._getOffset(c,"y");w&&(g+=w),R&&(v+=R);let Q=0-v,de=v+d.height-o.height,ge=this._subtractOverflows(d.width,0-g,g+d.width-o.width),Ne=this._subtractOverflows(d.height,Q,de),$e=ge*Ne;return{visibleArea:$e,isCompletelyWithinViewport:d.width*d.height===$e,fitsInViewportVertically:Ne===d.height,fitsInViewportHorizontally:ge==d.width}}_canFitWithFlexibleDimensions(r,i,o){if(this._hasFlexibleDimensions){const c=o.bottom-i.y,d=o.right-i.x,g=fS(this._overlayRef.getConfig().minHeight),v=fS(this._overlayRef.getConfig().minWidth),R=r.fitsInViewportHorizontally||null!=v&&v<=d;return(r.fitsInViewportVertically||null!=g&&g<=c)&&R}return!1}_pushOverlayOnScreen(r,i,o){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};const c=pS(i),d=this._viewportRect,g=Math.max(r.x+c.width-d.width,0),v=Math.max(r.y+c.height-d.height,0),w=Math.max(d.top-o.top-r.y,0),R=Math.max(d.left-o.left-r.x,0);let F=0,j=0;return F=c.width<=d.width?R||-g:r.x<this._viewportMargin?d.left-o.left-r.x:0,j=c.height<=d.height?w||-v:r.y<this._viewportMargin?d.top-o.top-r.y:0,this._previousPushAmount={x:F,y:j},{x:r.x+F,y:r.y+j}}_applyPosition(r,i){if(this._setTransformOrigin(r),this._setOverlayElementStyles(i,r),this._setBoundingBoxStyles(i,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._lastPosition=r,this._positionChanges.observers.length){const o=this._getScrollVisibility(),c=new cS(r,o);this._positionChanges.next(c)}this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;const i=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,c=r.overlayY;o="center"===r.overlayX?"center":this._isRtl()?"start"===r.overlayX?"right":"left":"start"===r.overlayX?"left":"right";for(let d=0;d<i.length;d++)i[d].style.transformOrigin=`${o} ${c}`}_calculateBoundingBoxRect(r,i){const o=this._viewportRect,c=this._isRtl();let d,g,v,F,j,Q;if("top"===i.overlayY)g=r.y,d=o.height-g+this._viewportMargin;else if("bottom"===i.overlayY)v=o.height-r.y+2*this._viewportMargin,d=o.height-v+this._viewportMargin;else{const de=Math.min(o.bottom-r.y+o.top,r.y),ge=this._lastBoundingBoxSize.height;d=2*de,g=r.y-de,d>ge&&!this._isInitialRender&&!this._growAfterOpen&&(g=r.y-ge/2)}if("end"===i.overlayX&&!c||"start"===i.overlayX&&c)Q=o.width-r.x+this._viewportMargin,F=r.x-this._viewportMargin;else if("start"===i.overlayX&&!c||"end"===i.overlayX&&c)j=r.x,F=o.right-r.x;else{const de=Math.min(o.right-r.x+o.left,r.x),ge=this._lastBoundingBoxSize.width;F=2*de,j=r.x-de,F>ge&&!this._isInitialRender&&!this._growAfterOpen&&(j=r.x-ge/2)}return{top:g,left:j,bottom:v,right:Q,width:F,height:d}}_setBoundingBoxStyles(r,i){const o=this._calculateBoundingBoxRect(r,i);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const c={};if(this._hasExactPosition())c.top=c.left="0",c.bottom=c.right=c.maxHeight=c.maxWidth="",c.width=c.height="100%";else{const d=this._overlayRef.getConfig().maxHeight,g=this._overlayRef.getConfig().maxWidth;c.height=gi(o.height),c.top=gi(o.top),c.bottom=gi(o.bottom),c.width=gi(o.width),c.left=gi(o.left),c.right=gi(o.right),c.alignItems="center"===i.overlayX?"center":"end"===i.overlayX?"flex-end":"flex-start",c.justifyContent="center"===i.overlayY?"center":"bottom"===i.overlayY?"flex-end":"flex-start",d&&(c.maxHeight=gi(d)),g&&(c.maxWidth=gi(g))}this._lastBoundingBoxSize=o,Gc(this._boundingBox.style,c)}_resetBoundingBoxStyles(){Gc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Gc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,i){const o={},c=this._hasExactPosition(),d=this._hasFlexibleDimensions,g=this._overlayRef.getConfig();if(c){const F=this._viewportRuler.getViewportScrollPosition();Gc(o,this._getExactOverlayY(i,r,F)),Gc(o,this._getExactOverlayX(i,r,F))}else o.position="static";let v="",w=this._getOffset(i,"x"),R=this._getOffset(i,"y");w&&(v+=`translateX(${w}px) `),R&&(v+=`translateY(${R}px)`),o.transform=v.trim(),g.maxHeight&&(c?o.maxHeight=gi(g.maxHeight):d&&(o.maxHeight="")),g.maxWidth&&(c?o.maxWidth=gi(g.maxWidth):d&&(o.maxWidth="")),Gc(this._pane.style,o)}_getExactOverlayY(r,i,o){let c={top:"",bottom:""},d=this._getOverlayPoint(i,this._overlayRect,r);this._isPushed&&(d=this._pushOverlayOnScreen(d,this._overlayRect,o));let g=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return d.y-=g,"bottom"===r.overlayY?c.bottom=this._document.documentElement.clientHeight-(d.y+this._overlayRect.height)+"px":c.top=gi(d.y),c}_getExactOverlayX(r,i,o){let g,c={left:"",right:""},d=this._getOverlayPoint(i,this._overlayRect,r);return this._isPushed&&(d=this._pushOverlayOnScreen(d,this._overlayRect,o)),g=this._isRtl()?"end"===r.overlayX?"left":"right":"end"===r.overlayX?"right":"left","right"===g?c.right=this._document.documentElement.clientWidth-(d.x+this._overlayRect.width)+"px":c.left=gi(d.x),c}_getScrollVisibility(){const r=this._getOriginRect(),i=this._pane.getBoundingClientRect(),o=this._scrollables.map(c=>c.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:qy(r,o),isOriginOutsideView:aS(r,o),isOverlayClipped:qy(i,o),isOverlayOutsideView:aS(i,o)}}_subtractOverflows(r,...i){return i.reduce((o,c)=>o-Math.max(c,0),r)}_getNarrowedViewportRect(){const r=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+r-this._viewportMargin,bottom:o.top+i-this._viewportMargin,width:r-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,i){return"x"===i?null==r.offsetX?this._offsetX:r.offsetX:null==r.offsetY?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&ky(r).forEach(i=>{""!==i&&-1===this._appliedPanelClasses.indexOf(i)&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){const r=this._origin;if(r instanceof m.SBq)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();const i=r.width||0,o=r.height||0;return{top:r.y,bottom:r.y+o,left:r.x,right:r.x+i,height:o,width:i}}}function Gc(s,r){for(let i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s}function fS(s){if("number"!=typeof s&&null!=s){const[r,i]=s.split(To);return i&&"px"!==i?null:parseFloat(r)}return s||null}function pS(s){return{top:Math.floor(s.top),right:Math.floor(s.right),bottom:Math.floor(s.bottom),left:Math.floor(s.left),width:Math.floor(s.width),height:Math.floor(s.height)}}class Dw{constructor(r,i,o,c,d,g,v){this._preferredPositions=[],this._positionStrategy=new hS(o,c,d,g,v).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(r,i),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(r){this._overlayRef=r,this._positionStrategy.attach(r),this._direction&&(r.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(r){this._positionStrategy.withScrollableContainers(r)}withFallbackPosition(r,i,o,c){const d=new GM(r,i,o,c);return this._preferredPositions.push(d),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(r){return this._overlayRef?this._overlayRef.setDirection(r):this._direction=r,this}withOffsetX(r){return this._positionStrategy.withDefaultOffsetX(r),this}withOffsetY(r){return this._positionStrategy.withDefaultOffsetY(r),this}withLockedPosition(r){return this._positionStrategy.withLockedPosition(r),this}withPositions(r){return this._preferredPositions=r.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(r){return this._positionStrategy.setOrigin(r),this}}const Aw="cdk-global-overlay-wrapper";class gS{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(r){const i=r.getConfig();this._overlayRef=r,this._width&&!i.width&&r.updateSize({width:this._width}),this._height&&!i.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(Aw),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._rightOffset="",this._leftOffset=r,this._justifyContent="flex-start",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._leftOffset="",this._rightOffset=r,this._justifyContent="flex-end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._justifyContent="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const r=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:c,height:d,maxWidth:g,maxHeight:v}=o,w=!("100%"!==c&&"100vw"!==c||g&&"100%"!==g&&"100vw"!==g),R=!("100%"!==d&&"100vh"!==d||v&&"100%"!==v&&"100vh"!==v);r.position=this._cssPosition,r.marginLeft=w?"0":this._leftOffset,r.marginTop=R?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=this._rightOffset,w?i.justifyContent="flex-start":"center"===this._justifyContent?i.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?i.justifyContent="flex-end":"flex-end"===this._justifyContent&&(i.justifyContent="flex-start"):i.justifyContent=this._justifyContent,i.alignItems=R?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const r=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,o=i.style;i.classList.remove(Aw),o.justifyContent=o.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}}let WM=(()=>{class s{constructor(i,o,c,d){this._viewportRuler=i,this._document=o,this._platform=c,this._overlayContainer=d}global(){return new gS}connectedTo(i,o,c){return new Dw(o,c,i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(i){return new hS(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(rm),m.LFG(O.K0),m.LFG(Vr),m.LFG(Tw))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(rm),m.LFG(O.K0),m.LFG(Vr),m.LFG(Tw))},token:s,providedIn:"root"}),s})(),mS=0,ep=(()=>{class s{constructor(i,o,c,d,g,v,w,R,F,j,Q){this.scrollStrategies=i,this._overlayContainer=o,this._componentFactoryResolver=c,this._positionBuilder=d,this._keyboardDispatcher=g,this._injector=v,this._ngZone=w,this._document=R,this._directionality=F,this._location=j,this._outsideClickDispatcher=Q}create(i){const o=this._createHostElement(),c=this._createPaneElement(o),d=this._createPortalOutlet(c),g=new lS(i);return g.direction=g.direction||this._directionality.value,new Sw(d,o,c,g,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(i){const o=this._document.createElement("div");return o.id="cdk-overlay-"+mS++,o.classList.add("cdk-overlay-pane"),i.appendChild(o),o}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(m.z2F)),new qT(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(hN),m.LFG(Tw),m.LFG(m._Vd),m.LFG(WM),m.LFG(zM),m.LFG(m.zs3),m.LFG(m.R0b),m.LFG(O.K0),m.LFG(mi),m.LFG(O.Ye),m.LFG(am))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();const Mw={provide:new m.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ep],useFactory:function(s){return()=>s.scrollStrategies.reposition()}};let ZM=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({providers:[ep,Mw],imports:[[Ps,Jf,zT],zT]}),s})();var YM=H(6215);function QM(s){return r=>r.lift(new JM(s))}class JM{constructor(r){this.total=r}call(r,i){return i.subscribe(new pN(r,this.total))}}class pN extends au.L{constructor(r,i){super(r),this.total=i,this.count=0}_next(r){++this.count>this.total&&this.destination.next(r)}}class XM{constructor(r,i){this.dueTime=r,this.scheduler=i}call(r,i){return i.subscribe(new eR(r,this.dueTime,this.scheduler))}}class eR extends au.L{constructor(r,i,o){super(r),this.dueTime=i,this.scheduler=o,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(r){this.clearDebounce(),this.lastValue=r,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(gN,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:r}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(r)}}clearDebounce(){const r=this.debouncedSubscription;null!==r&&(this.remove(r),r.unsubscribe(),this.debouncedSubscription=null)}}function gN(s){s.debouncedNext()}function RS(s){return 0===s.offsetX&&0===s.offsetY}function Yy(s){const r=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!(!r||-1!==r.identifier||null!=r.radiusX&&1!==r.radiusX||null!=r.radiusY&&1!==r.radiusY)}"undefined"!=typeof Element&&Element;const Vw=new m.OlP("cdk-input-modality-detector-options"),ji={ignoreKeys:[18,17,224,91,16]},tp=NT({passive:!0,capture:!0});let xS=(()=>{class s{constructor(i,o,c,d){this._platform=i,this._mostRecentTarget=null,this._modality=new YM.X(null),this._lastTouchMs=0,this._onKeydown=g=>{var v,w;(null===(w=null===(v=this._options)||void 0===v?void 0:v.ignoreKeys)||void 0===w?void 0:w.some(R=>R===g.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Hu(g))},this._onMousedown=g=>{Date.now()-this._lastTouchMs<650||(this._modality.next(RS(g)?"keyboard":"mouse"),this._mostRecentTarget=Hu(g))},this._onTouchstart=g=>{Yy(g)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hu(g))},this._options=Object.assign(Object.assign({},ji),d),this.modalityDetected=this._modality.pipe(QM(1)),this.modalityChanged=this.modalityDetected.pipe(lc()),i.isBrowser&&o.runOutsideAngular(()=>{c.addEventListener("keydown",this._onKeydown,tp),c.addEventListener("mousedown",this._onMousedown,tp),c.addEventListener("touchstart",this._onTouchstart,tp)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,tp),document.removeEventListener("mousedown",this._onMousedown,tp),document.removeEventListener("touchstart",this._onTouchstart,tp))}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(Vr),m.LFG(m.R0b),m.LFG(O.K0),m.LFG(Vw,8))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(Vr),m.LFG(m.R0b),m.LFG(O.K0),m.LFG(Vw,8))},token:s,providedIn:"root"}),s})();const hR=new m.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),OS=new m.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let NS=(()=>{class s{constructor(i,o,c,d){this._ngZone=o,this._defaultOptions=d,this._document=c,this._liveElement=i||this._createLiveElement()}announce(i,...o){const c=this._defaultOptions;let d,g;return 1===o.length&&"number"==typeof o[0]?g=o[0]:[d,g]=o,this.clear(),clearTimeout(this._previousTimeout),d||(d=c&&c.politeness?c.politeness:"polite"),null==g&&c&&(g=c.duration),this._liveElement.setAttribute("aria-live",d),this._ngZone.runOutsideAngular(()=>new Promise(v=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,v(),"number"==typeof g&&(this._previousTimeout=setTimeout(()=>this.clear(),g))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const i="cdk-live-announcer-element",o=this._document.getElementsByClassName(i),c=this._document.createElement("div");for(let d=0;d<o.length;d++)o[d].parentNode.removeChild(o[d]);return c.classList.add(i),c.classList.add("cdk-visually-hidden"),c.setAttribute("aria-atomic","true"),c.setAttribute("aria-live","polite"),this._document.body.appendChild(c),c}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(hR,8),m.LFG(m.R0b),m.LFG(O.K0),m.LFG(OS,8))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(hR,8),m.LFG(m.R0b),m.LFG(O.K0),m.LFG(OS,8))},token:s,providedIn:"root"}),s})();const fR=new m.OlP("cdk-focus-monitor-default-options"),Jy=NT({passive:!0,capture:!0});let Bw=(()=>{class s{constructor(i,o,c,d,g){this._ngZone=i,this._platform=o,this._inputModalityDetector=c,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new fn.xQ,this._rootNodeFocusAndBlurListener=v=>{const w=Hu(v),R="focus"===v.type?this._onFocus:this._onBlur;for(let F=w;F;F=F.parentElement)R.call(this,v,F)},this._document=d,this._detectionMode=(null==g?void 0:g.detectionMode)||0}monitor(i,o=!1){const c=Hc(i);if(!this._platform.isBrowser||1!==c.nodeType)return(0,wi.of)(null);const d=function(s){if(function(){if(null==pw){const s="undefined"!=typeof document?document.head:null;pw=!(!s||!s.createShadowRoot&&!s.attachShadow)}return pw}()){const r=s.getRootNode?s.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}(c)||this._getDocument(),g=this._elementInfo.get(c);if(g)return o&&(g.checkChildren=!0),g.subject;const v={checkChildren:o,subject:new fn.xQ,rootNode:d};return this._elementInfo.set(c,v),this._registerGlobalListeners(v),v.subject}stopMonitoring(i){const o=Hc(i),c=this._elementInfo.get(o);c&&(c.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(c))}focusVia(i,o,c){const d=Hc(i);d===this._getDocument().activeElement?this._getClosestElementsInfo(d).forEach(([v,w])=>this._originChanged(v,o,w)):(this._setOrigin(o),"function"==typeof d.focus&&d.focus(c))}ngOnDestroy(){this._elementInfo.forEach((i,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(i,o,c){c?i.classList.add(o):i.classList.remove(o)}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!(null==i?void 0:i.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(i,o){this._toggleClass(i,"cdk-focused",!!o),this._toggleClass(i,"cdk-touch-focused","touch"===o),this._toggleClass(i,"cdk-keyboard-focused","keyboard"===o),this._toggleClass(i,"cdk-mouse-focused","mouse"===o),this._toggleClass(i,"cdk-program-focused","program"===o)}_setOrigin(i,o=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&o,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,o){const c=this._elementInfo.get(o),d=Hu(i);!c||!c.checkChildren&&o!==d||this._originChanged(o,this._getFocusOrigin(d),c)}_onBlur(i,o){const c=this._elementInfo.get(o);!c||c.checkChildren&&i.relatedTarget instanceof Node&&o.contains(i.relatedTarget)||(this._setClasses(o),this._emitOrigin(c.subject,null))}_emitOrigin(i,o){this._ngZone.run(()=>i.next(o))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const o=i.rootNode,c=this._rootNodeFocusListenerCount.get(o)||0;c||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,Jy),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,Jy)}),this._rootNodeFocusListenerCount.set(o,c+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ju(this._stopInputModalityDetector)).subscribe(d=>{this._setOrigin(d,!0)}))}_removeGlobalListeners(i){const o=i.rootNode;if(this._rootNodeFocusListenerCount.has(o)){const c=this._rootNodeFocusListenerCount.get(o);c>1?this._rootNodeFocusListenerCount.set(o,c-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Jy),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Jy),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,o,c){this._setClasses(i,o),this._emitOrigin(c.subject,o),this._lastFocusOrigin=o}_getClosestElementsInfo(i){const o=[];return this._elementInfo.forEach((c,d)=>{(d===i||c.checkChildren&&d.contains(i))&&o.push([d,c])}),o}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(m.R0b),m.LFG(Vr),m.LFG(xS),m.LFG(O.K0,8),m.LFG(fR,8))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(m.R0b),m.LFG(Vr),m.LFG(xS),m.LFG(O.K0,8),m.LFG(fR,8))},token:s,providedIn:"root"}),s})();const PS="cdk-high-contrast-black-on-white",kS="cdk-high-contrast-white-on-black",FS="cdk-high-contrast-active";let LS=(()=>{class s{constructor(i,o){this._platform=i,this._document=o}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);const o=this._document.defaultView||window,c=o&&o.getComputedStyle?o.getComputedStyle(i):null,d=(c&&c.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(i),d){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const i=this._document.body.classList;i.remove(FS),i.remove(PS),i.remove(kS),this._hasCheckedHighContrastMode=!0;const o=this.getHighContrastMode();1===o?(i.add(FS),i.add(PS)):2===o&&(i.add(FS),i.add(kS))}}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(Vr),m.LFG(O.K0))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(Vr),m.LFG(O.K0))},token:s,providedIn:"root"}),s})();const VS=new m.GfV("12.2.4");class pR{}const $c="*";function gR(s,r){return{type:7,name:s,definitions:r,options:{}}}function BS(s,r=null){return{type:4,styles:r,timings:s}}function US(s,r=null){return{type:2,steps:s,options:r}}function ks(s){return{type:6,styles:s,offset:null}}function jS(s,r,i){return{type:0,name:s,styles:r,options:i}}function HS(s,r,i=null){return{type:1,expr:s,animation:r,options:i}}function np(s){Promise.resolve(null).then(s)}class Th{constructor(r=0,i=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=r+i}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}onStart(r){this._onStartFns.push(r)}onDone(r){this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){np(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(r=>r()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(r){this._position=this.totalTime?r*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(r){const i="start"==r?this._onStartFns:this._onDoneFns;i.forEach(o=>o()),i.length=0}}class mR{constructor(r){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=r;let i=0,o=0,c=0;const d=this.players.length;0==d?np(()=>this._onFinish()):this.players.forEach(g=>{g.onDone(()=>{++i==d&&this._onFinish()}),g.onDestroy(()=>{++o==d&&this._onDestroy()}),g.onStart(()=>{++c==d&&this._onStart()})}),this.totalTime=this.players.reduce((g,v)=>Math.max(g,v.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this.players.forEach(r=>r.init())}onStart(r){this._onStartFns.push(r)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(r=>r()),this._onStartFns=[])}onDone(r){this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(r=>r.play())}pause(){this.players.forEach(r=>r.pause())}restart(){this.players.forEach(r=>r.restart())}finish(){this._onFinish(),this.players.forEach(r=>r.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(r=>r.destroy()),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this.players.forEach(r=>r.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(r){const i=r*this.totalTime;this.players.forEach(o=>{const c=o.totalTime?Math.min(1,i/o.totalTime):1;o.setPosition(c)})}getPosition(){const r=this.players.reduce((i,o)=>null===i||o.totalTime>i.totalTime?o:i,null);return null!=r?r.getPosition():0}beforeDestroy(){this.players.forEach(r=>{r.beforeDestroy&&r.beforeDestroy()})}triggerCallback(r){const i="start"==r?this._onStartFns:this._onDoneFns;i.forEach(o=>o()),i.length=0}}function _R(){return"undefined"!=typeof window&&void 0!==window.document}function GS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Sh(s){switch(s.length){case 0:return new Th;case 1:return s[0];default:return new mR(s)}}function Xy(s,r,i,o,c={},d={}){const g=[],v=[];let w=-1,R=null;if(o.forEach(F=>{const j=F.offset,Q=j==w,de=Q&&R||{};Object.keys(F).forEach(ge=>{let Ne=ge,$e=F[ge];if("offset"!==ge)switch(Ne=r.normalizePropertyName(Ne,g),$e){case"!":$e=c[ge];break;case $c:$e=d[ge];break;default:$e=r.normalizeStyleValue(ge,Ne,$e,g)}de[Ne]=$e}),Q||v.push(de),R=de,w=j}),g.length){const F="\n - ";throw new Error(`Unable to animate due to the following errors:${F}${g.join(F)}`)}return v}function jw(s,r,i,o){switch(r){case"start":s.onStart(()=>o(i&&Hw(i,"start",s)));break;case"done":s.onDone(()=>o(i&&Hw(i,"done",s)));break;case"destroy":s.onDestroy(()=>o(i&&Hw(i,"destroy",s)))}}function Hw(s,r,i){const o=i.totalTime,d=Gw(s.element,s.triggerName,s.fromState,s.toState,r||s.phaseName,null==o?s.totalTime:o,!!i.disabled),g=s._data;return null!=g&&(d._data=g),d}function Gw(s,r,i,o,c="",d=0,g){return{element:s,triggerName:r,fromState:i,toState:o,phaseName:c,totalTime:d,disabled:!!g}}function na(s,r,i){let o;return s instanceof Map?(o=s.get(r),o||s.set(r,o=i)):(o=s[r],o||(o=s[r]=i)),o}function $S(s){const r=s.indexOf(":");return[s.substring(1,r),s.substr(r+1)]}let $w=(s,r)=>!1,So=(s,r)=>!1,zw=(s,r,i)=>[];const Ww=GS();(Ww||"undefined"!=typeof Element)&&($w=_R()?(s,r)=>{for(;r&&r!==document.documentElement;){if(r===s)return!0;r=r.parentNode||r.host}return!1}:(s,r)=>s.contains(r),So=(()=>{if(Ww||Element.prototype.matches)return(s,r)=>s.matches(r);{const s=Element.prototype,r=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector;return r?(i,o)=>r.apply(i,[o]):So}})(),zw=(s,r,i)=>{let o=[];if(i){const c=s.querySelectorAll(r);for(let d=0;d<c.length;d++)o.push(c[d])}else{const c=s.querySelector(r);c&&o.push(c)}return o});let $u=null,ev=!1;function lm(s){$u||($u=("undefined"!=typeof document?document.body:null)||{},ev=!!$u.style&&"WebkitAppearance"in $u.style);let r=!0;return $u.style&&!function(s){return"ebkit"==s.substring(1,6)}(s)&&(r=s in $u.style,!r&&ev&&(r="Webkit"+s.charAt(0).toUpperCase()+s.substr(1)in $u.style)),r}const rp=So,ip=$w,tv=zw;function Kw(s){const r={};return Object.keys(s).forEach(i=>{const o=i.replace(/([a-z])([A-Z])/g,"$1-$2");r[o]=s[i]}),r}let WS=(()=>{class s{validateStyleProperty(i){return lm(i)}matchesElement(i,o){return rp(i,o)}containsElement(i,o){return ip(i,o)}query(i,o,c){return tv(i,o,c)}computeStyle(i,o,c){return c||""}animate(i,o,c,d,g,v=[],w){return new Th(c,d)}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();class nv{}nv.NOOP=new WS;const Zw="ng-enter",sp="ng-leave",zu="ng-trigger",Dh=".ng-trigger",Yw="ng-animating",op=".ng-animating";function zc(s){if("number"==typeof s)return s;const r=s.match(/^(-?[\.\d]+)(m?s)/);return!r||r.length<2?0:rv(parseFloat(r[1]),r[2])}function rv(s,r){switch(r){case"s":return 1e3*s;default:return s}}function Ah(s,r,i){return s.hasOwnProperty("duration")?s:function(s,r,i){let c,d=0,g="";if("string"==typeof s){const v=s.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===v)return r.push(`The provided timing value "${s}" is invalid.`),{duration:0,delay:0,easing:""};c=rv(parseFloat(v[1]),v[2]);const w=v[3];null!=w&&(d=rv(parseFloat(w),v[4]));const R=v[5];R&&(g=R)}else c=s;if(!i){let v=!1,w=r.length;c<0&&(r.push("Duration values below 0 are not allowed for this animation step."),v=!0),d<0&&(r.push("Delay values below 0 are not allowed for this animation step."),v=!0),v&&r.splice(w,0,`The provided timing value "${s}" is invalid.`)}return{duration:c,delay:d,easing:g}}(s,r,i)}function ap(s,r={}){return Object.keys(s).forEach(i=>{r[i]=s[i]}),r}function Wu(s,r,i={}){if(r)for(let o in s)i[o]=s[o];else ap(s,i);return i}function Qw(s,r,i){return i?r+":"+i+";":""}function YS(s){let r="";for(let i=0;i<s.style.length;i++){const o=s.style.item(i);r+=Qw(0,o,s.style.getPropertyValue(o))}for(const i in s.style)s.style.hasOwnProperty(i)&&!i.startsWith("_")&&(r+=Qw(0,JS(i),s.style[i]));s.setAttribute("style",r)}function Nl(s,r,i){s.style&&(Object.keys(r).forEach(o=>{const c=Xw(o);i&&!i.hasOwnProperty(o)&&(i[o]=s.style[c]),s.style[c]=r[o]}),GS()&&YS(s))}function Mh(s,r){s.style&&(Object.keys(r).forEach(i=>{const o=Xw(i);s.style[o]=""}),GS()&&YS(s))}function ra(s){return Array.isArray(s)?1==s.length?s[0]:US(s):s}const um=new RegExp("{{\\s*(.+?)\\s*}}","g");function QS(s){let r=[];if("string"==typeof s){let i;for(;i=um.exec(s);)r.push(i[1]);um.lastIndex=0}return r}function iv(s,r,i){const o=s.toString(),c=o.replace(um,(d,g)=>{let v=r[g];return r.hasOwnProperty(g)||(i.push(`Please provide a value for the animation param ${g}`),v=""),v.toString()});return c==o?s:c}function sv(s){const r=[];let i=s.next();for(;!i.done;)r.push(i.value),i=s.next();return r}const Jw=/-+([a-z0-9])/g;function Xw(s){return s.replace(Jw,(...r)=>r[1].toUpperCase())}function JS(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function e0(s,r){return 0===s||0===r}function XS(s,r,i){const o=Object.keys(i);if(o.length&&r.length){let d=r[0],g=[];if(o.forEach(v=>{d.hasOwnProperty(v)||g.push(v),d[v]=i[v]}),g.length)for(var c=1;c<r.length;c++){let v=r[c];g.forEach(function(w){v[w]=t0(s,w)})}}return r}function Do(s,r,i){switch(r.type){case 7:return s.visitTrigger(r,i);case 0:return s.visitState(r,i);case 1:return s.visitTransition(r,i);case 2:return s.visitSequence(r,i);case 3:return s.visitGroup(r,i);case 4:return s.visitAnimate(r,i);case 5:return s.visitKeyframes(r,i);case 6:return s.visitStyle(r,i);case 8:return s.visitReference(r,i);case 9:return s.visitAnimateChild(r,i);case 10:return s.visitAnimateRef(r,i);case 11:return s.visitQuery(r,i);case 12:return s.visitStagger(r,i);default:throw new Error(`Unable to resolve animation metadata node #${r.type}`)}}function t0(s,r){return window.getComputedStyle(s)[r]}function dm(s,r){const i=[];return"string"==typeof s?s.split(/\s*,\s*/).forEach(o=>function(s,r,i){if(":"==s[0]){const w=function(s,r){switch(s){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,o)=>parseFloat(o)>parseFloat(i);case":decrement":return(i,o)=>parseFloat(o)<parseFloat(i);default:return r.push(`The transition alias value "${s}" is not supported`),"* => *"}}(s,i);if("function"==typeof w)return void r.push(w);s=w}const o=s.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return i.push(`The provided transition expression "${s}" is not supported`),r;const c=o[1],d=o[2],g=o[3];r.push(eD(c,g));"<"==d[0]&&!("*"==c&&"*"==g)&&r.push(eD(g,c))}(o,i,r)):i.push(s),i}const Wc=new Set(["true","1"]),av=new Set(["false","0"]);function eD(s,r){const i=Wc.has(s)||av.has(s),o=Wc.has(r)||av.has(r);return(c,d)=>{let g="*"==s||s==c,v="*"==r||r==d;return!g&&i&&"boolean"==typeof c&&(g=c?Wc.has(s):av.has(s)),!v&&o&&"boolean"==typeof d&&(v=d?Wc.has(r):av.has(r)),g&&v}}const nD=new RegExp("s*:selfs*,?","g");function lv(s,r,i){return new rD(s).build(r,i)}class rD{constructor(r){this._driver=r}build(r,i){const o=new bR(i);return this._resetContextStyleTimingState(o),Do(this,ra(r),o)}_resetContextStyleTimingState(r){r.currentQuerySelector="",r.collectedStyles={},r.collectedStyles[""]={},r.currentTime=0}visitTrigger(r,i){let o=i.queryCount=0,c=i.depCount=0;const d=[],g=[];return"@"==r.name.charAt(0)&&i.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),r.definitions.forEach(v=>{if(this._resetContextStyleTimingState(i),0==v.type){const w=v,R=w.name;R.toString().split(/\s*,\s*/).forEach(F=>{w.name=F,d.push(this.visitState(w,i))}),w.name=R}else if(1==v.type){const w=this.visitTransition(v,i);o+=w.queryCount,c+=w.depCount,g.push(w)}else i.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:r.name,states:d,transitions:g,queryCount:o,depCount:c,options:null}}visitState(r,i){const o=this.visitStyle(r.styles,i),c=r.options&&r.options.params||null;if(o.containsDynamicStyles){const d=new Set,g=c||{};if(o.styles.forEach(v=>{if(Pl(v)){const w=v;Object.keys(w).forEach(R=>{QS(w[R]).forEach(F=>{g.hasOwnProperty(F)||d.add(F)})})}}),d.size){const v=sv(d.values());i.errors.push(`state("${r.name}", ...) must define default values for all the following style substitutions: ${v.join(", ")}`)}}return{type:0,name:r.name,style:o,options:c?{params:c}:null}}visitTransition(r,i){i.queryCount=0,i.depCount=0;const o=Do(this,ra(r.animation),i);return{type:1,matchers:dm(r.expr,i.errors),animation:o,queryCount:i.queryCount,depCount:i.depCount,options:Rh(r.options)}}visitSequence(r,i){return{type:2,steps:r.steps.map(o=>Do(this,o,i)),options:Rh(r.options)}}visitGroup(r,i){const o=i.currentTime;let c=0;const d=r.steps.map(g=>{i.currentTime=o;const v=Do(this,g,i);return c=Math.max(c,i.currentTime),v});return i.currentTime=c,{type:3,steps:d,options:Rh(r.options)}}visitAnimate(r,i){const o=function(s,r){let i=null;if(s.hasOwnProperty("duration"))i=s;else if("number"==typeof s)return o0(Ah(s,r).duration,0,"");const o=s;if(o.split(/\s+/).some(d=>"{"==d.charAt(0)&&"{"==d.charAt(1))){const d=o0(0,0,"");return d.dynamic=!0,d.strValue=o,d}return i=i||Ah(o,r),o0(i.duration,i.delay,i.easing)}(r.timings,i.errors);i.currentAnimateTimings=o;let c,d=r.styles?r.styles:ks({});if(5==d.type)c=this.visitKeyframes(d,i);else{let g=r.styles,v=!1;if(!g){v=!0;const R={};o.easing&&(R.easing=o.easing),g=ks(R)}i.currentTime+=o.duration+o.delay;const w=this.visitStyle(g,i);w.isEmptyStep=v,c=w}return i.currentAnimateTimings=null,{type:4,timings:o,style:c,options:null}}visitStyle(r,i){const o=this._makeStyleAst(r,i);return this._validateStyleAst(o,i),o}_makeStyleAst(r,i){const o=[];Array.isArray(r.styles)?r.styles.forEach(g=>{"string"==typeof g?g==$c?o.push(g):i.errors.push(`The provided style string value ${g} is not allowed.`):o.push(g)}):o.push(r.styles);let c=!1,d=null;return o.forEach(g=>{if(Pl(g)){const v=g,w=v.easing;if(w&&(d=w,delete v.easing),!c)for(let R in v)if(v[R].toString().indexOf("{{")>=0){c=!0;break}}}),{type:6,styles:o,easing:d,offset:r.offset,containsDynamicStyles:c,options:null}}_validateStyleAst(r,i){const o=i.currentAnimateTimings;let c=i.currentTime,d=i.currentTime;o&&d>0&&(d-=o.duration+o.delay),r.styles.forEach(g=>{"string"!=typeof g&&Object.keys(g).forEach(v=>{if(!this._driver.validateStyleProperty(v))return void i.errors.push(`The provided animation property "${v}" is not a supported CSS property for animations`);const w=i.collectedStyles[i.currentQuerySelector],R=w[v];let F=!0;R&&(d!=c&&d>=R.startTime&&c<=R.endTime&&(i.errors.push(`The CSS property "${v}" that exists between the times of "${R.startTime}ms" and "${R.endTime}ms" is also being animated in a parallel animation between the times of "${d}ms" and "${c}ms"`),F=!1),d=R.startTime),F&&(w[v]={startTime:d,endTime:c}),i.options&&function(s,r,i){const o=r.params||{},c=QS(s);c.length&&c.forEach(d=>{o.hasOwnProperty(d)||i.push(`Unable to resolve the local animation param ${d} in the given list of values`)})}(g[v],i.options,i.errors)})})}visitKeyframes(r,i){const o={type:5,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push("keyframes() must be placed inside of a call to animate()"),o;let d=0;const g=[];let v=!1,w=!1,R=0;const F=r.steps.map(Mt=>{const qt=this._makeStyleAst(Mt,i);let Yt=null!=qt.offset?qt.offset:function(s){if("string"==typeof s)return null;let r=null;if(Array.isArray(s))s.forEach(i=>{if(Pl(i)&&i.hasOwnProperty("offset")){const o=i;r=parseFloat(o.offset),delete o.offset}});else if(Pl(s)&&s.hasOwnProperty("offset")){const i=s;r=parseFloat(i.offset),delete i.offset}return r}(qt.styles),un=0;return null!=Yt&&(d++,un=qt.offset=Yt),w=w||un<0||un>1,v=v||un<R,R=un,g.push(un),qt});w&&i.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),v&&i.errors.push("Please ensure that all keyframe offsets are in order");const j=r.steps.length;let Q=0;d>0&&d<j?i.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==d&&(Q=1/(j-1));const de=j-1,ge=i.currentTime,Ne=i.currentAnimateTimings,$e=Ne.duration;return F.forEach((Mt,qt)=>{const Yt=Q>0?qt==de?1:Q*qt:g[qt],un=Yt*$e;i.currentTime=ge+Ne.delay+un,Ne.duration=un,this._validateStyleAst(Mt,i),Mt.offset=Yt,o.styles.push(Mt)}),o}visitReference(r,i){return{type:8,animation:Do(this,ra(r.animation),i),options:Rh(r.options)}}visitAnimateChild(r,i){return i.depCount++,{type:9,options:Rh(r.options)}}visitAnimateRef(r,i){return{type:10,animation:this.visitReference(r.animation,i),options:Rh(r.options)}}visitQuery(r,i){const o=i.currentQuerySelector,c=r.options||{};i.queryCount++,i.currentQuery=r;const[d,g]=function(s){const r=!!s.split(/\s*,\s*/).find(i=>":self"==i);return r&&(s=s.replace(nD,"")),[s=s.replace(/@\*/g,Dh).replace(/@\w+/g,i=>Dh+"-"+i.substr(1)).replace(/:animating/g,op),r]}(r.selector);i.currentQuerySelector=o.length?o+" "+d:d,na(i.collectedStyles,i.currentQuerySelector,{});const v=Do(this,ra(r.animation),i);return i.currentQuery=null,i.currentQuerySelector=o,{type:11,selector:d,limit:c.limit||0,optional:!!c.optional,includeSelf:g,animation:v,originalSelector:r.selector,options:Rh(r.options)}}visitStagger(r,i){i.currentQuery||i.errors.push("stagger() can only be used inside of query()");const o="full"===r.timings?{duration:0,delay:0,easing:"full"}:Ah(r.timings,i.errors,!0);return{type:12,animation:Do(this,ra(r.animation),i),timings:o,options:null}}}class bR{constructor(r){this.errors=r,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Pl(s){return!Array.isArray(s)&&"object"==typeof s}function Rh(s){return s?(s=ap(s)).params&&(s.params=function(s){return s?ap(s):null}(s.params)):s={},s}function o0(s,r,i){return{duration:s,delay:r,easing:i}}function sD(s,r,i,o,c,d,g=null,v=!1){return{type:1,element:s,keyframes:r,preStyleProps:i,postStyleProps:o,duration:c,delay:d,totalTime:c+d,easing:g,subTimeline:v}}class a0{constructor(){this._map=new Map}consume(r){let i=this._map.get(r);return i?this._map.delete(r):i=[],i}append(r,i){let o=this._map.get(r);o||this._map.set(r,o=[]),o.push(...i)}has(r){return this._map.has(r)}clear(){this._map.clear()}}const wR=new RegExp(":enter","g"),jN=new RegExp(":leave","g");function oD(s,r,i,o,c,d={},g={},v,w,R=[]){return(new HN).buildKeyframes(s,r,i,o,c,d,g,v,w,R)}class HN{buildKeyframes(r,i,o,c,d,g,v,w,R,F=[]){R=R||new a0;const j=new c0(r,i,R,c,d,F,[]);j.options=w,j.currentTimeline.setStyles([g],null,j.errors,w),Do(this,o,j);const Q=j.timelines.filter(de=>de.containsAnimation());if(Q.length&&Object.keys(v).length){const de=Q[Q.length-1];de.allowOnlyTimelineStyles()||de.setStyles([v],null,j.errors,w)}return Q.length?Q.map(de=>de.buildKeyframes()):[sD(i,[],[],[],0,0,"",!1)]}visitTrigger(r,i){}visitState(r,i){}visitTransition(r,i){}visitAnimateChild(r,i){const o=i.subInstructions.consume(i.element);if(o){const c=i.createSubContext(r.options),d=i.currentTimeline.currentTime,g=this._visitSubInstructions(o,c,c.options);d!=g&&i.transformIntoNewTimeline(g)}i.previousNode=r}visitAnimateRef(r,i){const o=i.createSubContext(r.options);o.transformIntoNewTimeline(),this.visitReference(r.animation,o),i.transformIntoNewTimeline(o.currentTimeline.currentTime),i.previousNode=r}_visitSubInstructions(r,i,o){let d=i.currentTimeline.currentTime;const g=null!=o.duration?zc(o.duration):null,v=null!=o.delay?zc(o.delay):null;return 0!==g&&r.forEach(w=>{const R=i.appendInstructionToTimeline(w,g,v);d=Math.max(d,R.duration+R.delay)}),d}visitReference(r,i){i.updateOptions(r.options,!0),Do(this,r.animation,i),i.previousNode=r}visitSequence(r,i){const o=i.subContextCount;let c=i;const d=r.options;if(d&&(d.params||d.delay)&&(c=i.createSubContext(d),c.transformIntoNewTimeline(),null!=d.delay)){6==c.previousNode.type&&(c.currentTimeline.snapshotCurrentStyles(),c.previousNode=l0);const g=zc(d.delay);c.delayNextStep(g)}r.steps.length&&(r.steps.forEach(g=>Do(this,g,c)),c.currentTimeline.applyStylesToKeyframe(),c.subContextCount>o&&c.transformIntoNewTimeline()),i.previousNode=r}visitGroup(r,i){const o=[];let c=i.currentTimeline.currentTime;const d=r.options&&r.options.delay?zc(r.options.delay):0;r.steps.forEach(g=>{const v=i.createSubContext(r.options);d&&v.delayNextStep(d),Do(this,g,v),c=Math.max(c,v.currentTimeline.currentTime),o.push(v.currentTimeline)}),o.forEach(g=>i.currentTimeline.mergeTimelineCollectedStyles(g)),i.transformIntoNewTimeline(c),i.previousNode=r}_visitTiming(r,i){if(r.dynamic){const o=r.strValue;return Ah(i.params?iv(o,i.params,i.errors):o,i.errors)}return{duration:r.duration,delay:r.delay,easing:r.easing}}visitAnimate(r,i){const o=i.currentAnimateTimings=this._visitTiming(r.timings,i),c=i.currentTimeline;o.delay&&(i.incrementTime(o.delay),c.snapshotCurrentStyles());const d=r.style;5==d.type?this.visitKeyframes(d,i):(i.incrementTime(o.duration),this.visitStyle(d,i),c.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=r}visitStyle(r,i){const o=i.currentTimeline,c=i.currentAnimateTimings;!c&&o.getCurrentStyleProperties().length&&o.forwardFrame();const d=c&&c.easing||r.easing;r.isEmptyStep?o.applyEmptyStep(d):o.setStyles(r.styles,d,i.errors,i.options),i.previousNode=r}visitKeyframes(r,i){const o=i.currentAnimateTimings,c=i.currentTimeline.duration,d=o.duration,v=i.createSubContext().currentTimeline;v.easing=o.easing,r.styles.forEach(w=>{v.forwardTime((w.offset||0)*d),v.setStyles(w.styles,w.easing,i.errors,i.options),v.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(v),i.transformIntoNewTimeline(c+d),i.previousNode=r}visitQuery(r,i){const o=i.currentTimeline.currentTime,c=r.options||{},d=c.delay?zc(c.delay):0;d&&(6===i.previousNode.type||0==o&&i.currentTimeline.getCurrentStyleProperties().length)&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=l0);let g=o;const v=i.invokeQuery(r.selector,r.originalSelector,r.limit,r.includeSelf,!!c.optional,i.errors);i.currentQueryTotal=v.length;let w=null;v.forEach((R,F)=>{i.currentQueryIndex=F;const j=i.createSubContext(r.options,R);d&&j.delayNextStep(d),R===i.element&&(w=j.currentTimeline),Do(this,r.animation,j),j.currentTimeline.applyStylesToKeyframe(),g=Math.max(g,j.currentTimeline.currentTime)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(g),w&&(i.currentTimeline.mergeTimelineCollectedStyles(w),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=r}visitStagger(r,i){const o=i.parentContext,c=i.currentTimeline,d=r.timings,g=Math.abs(d.duration),v=g*(i.currentQueryTotal-1);let w=g*i.currentQueryIndex;switch(d.duration<0?"reverse":d.easing){case"reverse":w=v-w;break;case"full":w=o.currentStaggerTime}const F=i.currentTimeline;w&&F.delayNextStep(w);const j=F.currentTime;Do(this,r.animation,i),i.previousNode=r,o.currentStaggerTime=c.currentTime-j+(c.startTime-o.currentTimeline.startTime)}}const l0={};class c0{constructor(r,i,o,c,d,g,v,w){this._driver=r,this.element=i,this.subInstructions=o,this._enterClassName=c,this._leaveClassName=d,this.errors=g,this.timelines=v,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=l0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=w||new u0(this._driver,i,0),v.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(r,i){if(!r)return;const o=r;let c=this.options;null!=o.duration&&(c.duration=zc(o.duration)),null!=o.delay&&(c.delay=zc(o.delay));const d=o.params;if(d){let g=c.params;g||(g=this.options.params={}),Object.keys(d).forEach(v=>{(!i||!g.hasOwnProperty(v))&&(g[v]=iv(d[v],g,this.errors))})}}_copyOptions(){const r={};if(this.options){const i=this.options.params;if(i){const o=r.params={};Object.keys(i).forEach(c=>{o[c]=i[c]})}}return r}createSubContext(r=null,i,o){const c=i||this.element,d=new c0(this._driver,c,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(c,o||0));return d.previousNode=this.previousNode,d.currentAnimateTimings=this.currentAnimateTimings,d.options=this._copyOptions(),d.updateOptions(r),d.currentQueryIndex=this.currentQueryIndex,d.currentQueryTotal=this.currentQueryTotal,d.parentContext=this,this.subContextCount++,d}transformIntoNewTimeline(r){return this.previousNode=l0,this.currentTimeline=this.currentTimeline.fork(this.element,r),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(r,i,o){const c={duration:null!=i?i:r.duration,delay:this.currentTimeline.currentTime+(null!=o?o:0)+r.delay,easing:""},d=new GN(this._driver,r.element,r.keyframes,r.preStyleProps,r.postStyleProps,c,r.stretchStartingKeyframe);return this.timelines.push(d),c}incrementTime(r){this.currentTimeline.forwardTime(this.currentTimeline.duration+r)}delayNextStep(r){r>0&&this.currentTimeline.delayNextStep(r)}invokeQuery(r,i,o,c,d,g){let v=[];if(c&&v.push(this.element),r.length>0){r=(r=r.replace(wR,"."+this._enterClassName)).replace(jN,"."+this._leaveClassName);let R=this._driver.query(this.element,r,1!=o);0!==o&&(R=o<0?R.slice(R.length+o,R.length):R.slice(0,o)),v.push(...R)}return!d&&0==v.length&&g.push(`\`query("${i}")\` returned zero elements. (Use \`query("${i}", { optional: true })\` if you wish to allow this.)`),v}}class u0{constructor(r,i,o,c){this._driver=r,this.element=i,this.startTime=o,this._elementTimelineStylesLookup=c,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(r){const i=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||i?(this.forwardTime(this.currentTime+r),i&&this.snapshotCurrentStyles()):this.startTime+=r}fork(r,i){return this.applyStylesToKeyframe(),new u0(this._driver,r,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(r){this.applyStylesToKeyframe(),this.duration=r,this._loadKeyframe()}_updateStyle(r,i){this._localTimelineStyles[r]=i,this._globalTimelineStyles[r]=i,this._styleSummary[r]={time:this.currentTime,value:i}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(r){r&&(this._previousKeyframe.easing=r),Object.keys(this._globalTimelineStyles).forEach(i=>{this._backFill[i]=this._globalTimelineStyles[i]||$c,this._currentKeyframe[i]=$c}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(r,i,o,c){i&&(this._previousKeyframe.easing=i);const d=c&&c.params||{},g=function(s,r){const i={};let o;return s.forEach(c=>{"*"===c?(o=o||Object.keys(r),o.forEach(d=>{i[d]=$c})):Wu(c,!1,i)}),i}(r,this._globalTimelineStyles);Object.keys(g).forEach(v=>{const w=iv(g[v],d,o);this._pendingStyles[v]=w,this._localTimelineStyles.hasOwnProperty(v)||(this._backFill[v]=this._globalTimelineStyles.hasOwnProperty(v)?this._globalTimelineStyles[v]:$c),this._updateStyle(v,w)})}applyStylesToKeyframe(){const r=this._pendingStyles,i=Object.keys(r);0!=i.length&&(this._pendingStyles={},i.forEach(o=>{this._currentKeyframe[o]=r[o]}),Object.keys(this._localTimelineStyles).forEach(o=>{this._currentKeyframe.hasOwnProperty(o)||(this._currentKeyframe[o]=this._localTimelineStyles[o])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(r=>{const i=this._localTimelineStyles[r];this._pendingStyles[r]=i,this._updateStyle(r,i)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const r=[];for(let i in this._currentKeyframe)r.push(i);return r}mergeTimelineCollectedStyles(r){Object.keys(r._styleSummary).forEach(i=>{const o=this._styleSummary[i],c=r._styleSummary[i];(!o||c.time>o.time)&&this._updateStyle(i,c.value)})}buildKeyframes(){this.applyStylesToKeyframe();const r=new Set,i=new Set,o=1===this._keyframes.size&&0===this.duration;let c=[];this._keyframes.forEach((v,w)=>{const R=Wu(v,!0);Object.keys(R).forEach(F=>{const j=R[F];"!"==j?r.add(F):j==$c&&i.add(F)}),o||(R.offset=w/this.duration),c.push(R)});const d=r.size?sv(r.values()):[],g=i.size?sv(i.values()):[];if(o){const v=c[0],w=ap(v);v.offset=0,w.offset=1,c=[v,w]}return sD(this.element,c,d,g,this.duration,this.startTime,this.easing,!1)}}class GN extends u0{constructor(r,i,o,c,d,g,v=!1){super(r,i,g.delay),this.keyframes=o,this.preStyleProps=c,this.postStyleProps=d,this._stretchStartingKeyframe=v,this.timings={duration:g.duration,delay:g.delay,easing:g.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let r=this.keyframes,{delay:i,duration:o,easing:c}=this.timings;if(this._stretchStartingKeyframe&&i){const d=[],g=o+i,v=i/g,w=Wu(r[0],!1);w.offset=0,d.push(w);const R=Wu(r[0],!1);R.offset=IR(v),d.push(R);const F=r.length-1;for(let j=1;j<=F;j++){let Q=Wu(r[j],!1);Q.offset=IR((i+Q.offset*o)/g),d.push(Q)}o=g,i=0,c="",r=d}return sD(this.element,r,this.preStyleProps,this.postStyleProps,o,i,c,!0)}}function IR(s,r=3){const i=Math.pow(10,r-1);return Math.round(s*i)/i}class l{}class h extends l{normalizePropertyName(r,i){return Xw(r)}normalizeStyleValue(r,i,o,c){let d="";const g=o.toString().trim();if(_[i]&&0!==o&&"0"!==o)if("number"==typeof o)d="px";else{const v=o.match(/^[+-]?[\d\.]+([a-z]*)$/);v&&0==v[1].length&&c.push(`Please provide a CSS unit value for ${r}:${o}`)}return g+d}}const _=(()=>function(s){const r={};return s.forEach(i=>r[i]=!0),r}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function C(s,r,i,o,c,d,g,v,w,R,F,j,Q){return{type:0,element:s,triggerName:r,isRemovalTransition:c,fromState:i,fromStyles:d,toState:o,toStyles:g,timelines:v,queriedElements:w,preStyleProps:R,postStyleProps:F,totalTime:j,errors:Q}}const D={};class N{constructor(r,i,o){this._triggerName=r,this.ast=i,this._stateStyles=o}match(r,i,o,c){return function(s,r,i,o,c){return s.some(d=>d(r,i,o,c))}(this.ast.matchers,r,i,o,c)}buildStyles(r,i,o){const c=this._stateStyles["*"],d=this._stateStyles[r],g=c?c.buildStyles(i,o):{};return d?d.buildStyles(i,o):g}build(r,i,o,c,d,g,v,w,R,F){const j=[],Q=this.ast.options&&this.ast.options.params||D,ge=this.buildStyles(o,v&&v.params||D,j),Ne=w&&w.params||D,$e=this.buildStyles(c,Ne,j),Mt=new Set,qt=new Map,Yt=new Map,un="void"===c,Hi={params:Object.assign(Object.assign({},Q),Ne)},Ro=F?[]:oD(r,i,this.ast.animation,d,g,ge,$e,Hi,R,j);let xo=0;if(Ro.forEach(Fh=>{xo=Math.max(Fh.duration+Fh.delay,xo)}),j.length)return C(i,this._triggerName,o,c,un,ge,$e,[],[],qt,Yt,xo,j);Ro.forEach(Fh=>{const Lh=Fh.element,JF=na(qt,Lh,{});Fh.preStyleProps.forEach(Sm=>JF[Sm]=!0);const G0=na(Yt,Lh,{});Fh.postStyleProps.forEach(Sm=>G0[Sm]=!0),Lh!==i&&Mt.add(Lh)});const kh=sv(Mt.values());return C(i,this._triggerName,o,c,un,ge,$e,Ro,kh,qt,Yt,xo)}}class z{constructor(r,i,o){this.styles=r,this.defaultParams=i,this.normalizer=o}buildStyles(r,i){const o={},c=ap(this.defaultParams);return Object.keys(r).forEach(d=>{const g=r[d];null!=g&&(c[d]=g)}),this.styles.styles.forEach(d=>{if("string"!=typeof d){const g=d;Object.keys(g).forEach(v=>{let w=g[v];w.length>1&&(w=iv(w,c,i));const R=this.normalizer.normalizePropertyName(v,i);w=this.normalizer.normalizeStyleValue(v,R,w,i),o[R]=w})}}),o}}class ce{constructor(r,i,o){this.name=r,this.ast=i,this._normalizer=o,this.transitionFactories=[],this.states={},i.states.forEach(c=>{this.states[c.name]=new z(c.style,c.options&&c.options.params||{},o)}),Re(this.states,"true","1"),Re(this.states,"false","0"),i.transitions.forEach(c=>{this.transitionFactories.push(new N(r,c,this.states))}),this.fallbackTransition=function(s,r,i){return new N(s,{type:1,animation:{type:2,steps:[],options:null},matchers:[(g,v)=>!0],options:null,queryCount:0,depCount:0},r)}(r,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(r,i,o,c){return this.transitionFactories.find(g=>g.match(r,i,o,c))||null}matchStyles(r,i,o){return this.fallbackTransition.buildStyles(r,i,o)}}function Re(s,r,i){s.hasOwnProperty(r)?s.hasOwnProperty(i)||(s[i]=s[r]):s.hasOwnProperty(i)&&(s[r]=s[i])}const Ce=new a0;class Ye{constructor(r,i,o){this.bodyNode=r,this._driver=i,this._normalizer=o,this._animations={},this._playersById={},this.players=[]}register(r,i){const o=[],c=lv(this._driver,i,o);if(o.length)throw new Error(`Unable to build the animation due to the following errors: ${o.join("\n")}`);this._animations[r]=c}_buildPlayer(r,i,o){const c=r.element,d=Xy(0,this._normalizer,0,r.keyframes,i,o);return this._driver.animate(c,d,r.duration,r.delay,r.easing,[],!0)}create(r,i,o={}){const c=[],d=this._animations[r];let g;const v=new Map;if(d?(g=oD(this._driver,i,d,Zw,sp,{},{},o,Ce,c),g.forEach(F=>{const j=na(v,F.element,{});F.postStyleProps.forEach(Q=>j[Q]=null)})):(c.push("The requested animation doesn't exist or has already been destroyed"),g=[]),c.length)throw new Error(`Unable to create the animation due to the following errors: ${c.join("\n")}`);v.forEach((F,j)=>{Object.keys(F).forEach(Q=>{F[Q]=this._driver.computeStyle(j,Q,$c)})});const R=Sh(g.map(F=>{const j=v.get(F.element);return this._buildPlayer(F,{},j)}));return this._playersById[r]=R,R.onDestroy(()=>this.destroy(r)),this.players.push(R),R}destroy(r){const i=this._getPlayer(r);i.destroy(),delete this._playersById[r];const o=this.players.indexOf(i);o>=0&&this.players.splice(o,1)}_getPlayer(r){const i=this._playersById[r];if(!i)throw new Error(`Unable to find the timeline player referenced by ${r}`);return i}listen(r,i,o,c){const d=Gw(i,"","","");return jw(this._getPlayer(r),o,d,c),()=>{}}command(r,i,o,c){if("register"==o)return void this.register(r,c[0]);if("create"==o)return void this.create(r,i,c[0]||{});const d=this._getPlayer(r);switch(o){case"play":d.play();break;case"pause":d.pause();break;case"reset":d.reset();break;case"restart":d.restart();break;case"finish":d.finish();break;case"init":d.init();break;case"setPosition":d.setPosition(parseFloat(c[0]));break;case"destroy":this.destroy(r)}}}const je="ng-animate-queued",Ut="ng-animate-disabled",hn=".ng-animate-disabled",hm=[],xh={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cp={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xi="__ng_removed";class fm{constructor(r,i=""){this.namespaceId=i;const o=r&&r.hasOwnProperty("value");if(this.value=function(s){return null!=s?s:null}(o?r.value:r),o){const d=ap(r);delete d.value,this.options=d}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(r){const i=r.params;if(i){const o=this.options.params;Object.keys(i).forEach(c=>{null==o[c]&&(o[c]=i[c])})}}}const Oh="void",pm=new fm(Oh);class d0{constructor(r,i,o){this.id=r,this.hostElement=i,this._engine=o,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+r,kl(i,this._hostClassName)}listen(r,i,o,c){if(!this._triggers.hasOwnProperty(i))throw new Error(`Unable to listen on the animation trigger event "${o}" because the animation trigger "${i}" doesn't exist!`);if(null==o||0==o.length)throw new Error(`Unable to listen on the animation trigger "${i}" because the provided event is undefined!`);if(!function(s){return"start"==s||"done"==s}(o))throw new Error(`The provided animation trigger event "${o}" for the animation trigger "${i}" is not supported!`);const d=na(this._elementListeners,r,[]),g={name:i,phase:o,callback:c};d.push(g);const v=na(this._engine.statesByElement,r,{});return v.hasOwnProperty(i)||(kl(r,zu),kl(r,zu+"-"+i),v[i]=pm),()=>{this._engine.afterFlush(()=>{const w=d.indexOf(g);w>=0&&d.splice(w,1),this._triggers[i]||delete v[i]})}}register(r,i){return!this._triggers[r]&&(this._triggers[r]=i,!0)}_getTrigger(r){const i=this._triggers[r];if(!i)throw new Error(`The provided animation trigger "${r}" has not been registered!`);return i}trigger(r,i,o,c=!0){const d=this._getTrigger(i),g=new TR(this.id,i,r);let v=this._engine.statesByElement.get(r);v||(kl(r,zu),kl(r,zu+"-"+i),this._engine.statesByElement.set(r,v={}));let w=v[i];const R=new fm(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&w&&R.absorbOptions(w.options),v[i]=R,w||(w=pm),R.value!==Oh&&w.value===R.value){if(!function(s,r){const i=Object.keys(s),o=Object.keys(r);if(i.length!=o.length)return!1;for(let c=0;c<i.length;c++){const d=i[c];if(!r.hasOwnProperty(d)||s[d]!==r[d])return!1}return!0}(w.params,R.params)){const Ne=[],$e=d.matchStyles(w.value,w.params,Ne),Mt=d.matchStyles(R.value,R.params,Ne);Ne.length?this._engine.reportError(Ne):this._engine.afterFlush(()=>{Mh(r,$e),Nl(r,Mt)})}return}const Q=na(this._engine.playersByElement,r,[]);Q.forEach(Ne=>{Ne.namespaceId==this.id&&Ne.triggerName==i&&Ne.queued&&Ne.destroy()});let de=d.matchTransition(w.value,R.value,r,R.params),ge=!1;if(!de){if(!c)return;de=d.fallbackTransition,ge=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:i,transition:de,fromState:w,toState:R,player:g,isFallbackTransition:ge}),ge||(kl(r,je),g.onStart(()=>{cv(r,je)})),g.onDone(()=>{let Ne=this.players.indexOf(g);Ne>=0&&this.players.splice(Ne,1);const $e=this._engine.playersByElement.get(r);if($e){let Mt=$e.indexOf(g);Mt>=0&&$e.splice(Mt,1)}}),this.players.push(g),Q.push(g),g}deregister(r){delete this._triggers[r],this._engine.statesByElement.forEach((i,o)=>{delete i[r]}),this._elementListeners.forEach((i,o)=>{this._elementListeners.set(o,i.filter(c=>c.name!=r))})}clearElementCache(r){this._engine.statesByElement.delete(r),this._elementListeners.delete(r);const i=this._engine.playersByElement.get(r);i&&(i.forEach(o=>o.destroy()),this._engine.playersByElement.delete(r))}_signalRemovalForInnerTriggers(r,i){const o=this._engine.driver.query(r,Dh,!0);o.forEach(c=>{if(c[Xi])return;const d=this._engine.fetchNamespacesByElement(c);d.size?d.forEach(g=>g.triggerLeaveAnimation(c,i,!1,!0)):this.clearElementCache(c)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(c=>this.clearElementCache(c)))}triggerLeaveAnimation(r,i,o,c){const d=this._engine.statesByElement.get(r);if(d){const g=[];if(Object.keys(d).forEach(v=>{if(this._triggers[v]){const w=this.trigger(r,v,Oh,c);w&&g.push(w)}}),g.length)return this._engine.markElementAsRemoved(this.id,r,!0,i),o&&Sh(g).onDone(()=>this._engine.processLeaveNode(r)),!0}return!1}prepareLeaveAnimationListeners(r){const i=this._elementListeners.get(r),o=this._engine.statesByElement.get(r);if(i&&o){const c=new Set;i.forEach(d=>{const g=d.name;if(c.has(g))return;c.add(g);const w=this._triggers[g].fallbackTransition,R=o[g]||pm,F=new fm(Oh),j=new TR(this.id,g,r);this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:g,transition:w,fromState:R,toState:F,player:j,isFallbackTransition:!0})})}}removeNode(r,i){const o=this._engine;if(r.childElementCount&&this._signalRemovalForInnerTriggers(r,i),this.triggerLeaveAnimation(r,i,!0))return;let c=!1;if(o.totalAnimations){const d=o.players.length?o.playersByQueriedElement.get(r):[];if(d&&d.length)c=!0;else{let g=r;for(;g=g.parentNode;)if(o.statesByElement.get(g)){c=!0;break}}}if(this.prepareLeaveAnimationListeners(r),c)o.markElementAsRemoved(this.id,r,!1,i);else{const d=r[Xi];(!d||d===xh)&&(o.afterFlush(()=>this.clearElementCache(r)),o.destroyInnerAnimations(r),o._onRemovalComplete(r,i))}}insertNode(r,i){kl(r,this._hostClassName)}drainQueuedTransitions(r){const i=[];return this._queue.forEach(o=>{const c=o.player;if(c.destroyed)return;const d=o.element,g=this._elementListeners.get(d);g&&g.forEach(v=>{if(v.name==o.triggerName){const w=Gw(d,o.triggerName,o.fromState.value,o.toState.value);w._data=r,jw(o.player,v.phase,w,v.callback)}}),c.markedForDestroy?this._engine.afterFlush(()=>{c.destroy()}):i.push(o)}),this._queue=[],i.sort((o,c)=>{const d=o.transition.ast.depCount,g=c.transition.ast.depCount;return 0==d||0==g?d-g:this._engine.driver.containsElement(o.element,c.element)?1:-1})}destroy(r){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,r)}elementContainsData(r){let i=!1;return this._elementListeners.has(r)&&(i=!0),i=!!this._queue.find(o=>o.element===r)||i,i}}class h0{constructor(r,i,o){this.bodyNode=r,this.driver=i,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(c,d)=>{}}_onRemovalComplete(r,i){this.onRemovalComplete(r,i)}get queuedPlayers(){const r=[];return this._namespaceList.forEach(i=>{i.players.forEach(o=>{o.queued&&r.push(o)})}),r}createNamespace(r,i){const o=new d0(r,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(o,i):(this.newHostElements.set(i,o),this.collectEnterElement(i)),this._namespaceLookup[r]=o}_balanceNamespaceList(r,i){const o=this._namespaceList.length-1;if(o>=0){let c=!1;for(let d=o;d>=0;d--)if(this.driver.containsElement(this._namespaceList[d].hostElement,i)){this._namespaceList.splice(d+1,0,r),c=!0;break}c||this._namespaceList.splice(0,0,r)}else this._namespaceList.push(r);return this.namespacesByHostElement.set(i,r),r}register(r,i){let o=this._namespaceLookup[r];return o||(o=this.createNamespace(r,i)),o}registerTrigger(r,i,o){let c=this._namespaceLookup[r];c&&c.register(i,o)&&this.totalAnimations++}destroy(r,i){if(!r)return;const o=this._fetchNamespace(r);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[r];const c=this._namespaceList.indexOf(o);c>=0&&this._namespaceList.splice(c,1)}),this.afterFlushAnimationsDone(()=>o.destroy(i))}_fetchNamespace(r){return this._namespaceLookup[r]}fetchNamespacesByElement(r){const i=new Set,o=this.statesByElement.get(r);if(o){const c=Object.keys(o);for(let d=0;d<c.length;d++){const g=o[c[d]].namespaceId;if(g){const v=this._fetchNamespace(g);v&&i.add(v)}}}return i}trigger(r,i,o,c){if(aD(i)){const d=this._fetchNamespace(r);if(d)return d.trigger(i,o,c),!0}return!1}insertNode(r,i,o,c){if(!aD(i))return;const d=i[Xi];if(d&&d.setForRemoval){d.setForRemoval=!1,d.setForMove=!0;const g=this.collectedLeaveElements.indexOf(i);g>=0&&this.collectedLeaveElements.splice(g,1)}if(r){const g=this._fetchNamespace(r);g&&g.insertNode(i,o)}c&&this.collectEnterElement(i)}collectEnterElement(r){this.collectedEnterElements.push(r)}markElementAsDisabled(r,i){i?this.disabledNodes.has(r)||(this.disabledNodes.add(r),kl(r,Ut)):this.disabledNodes.has(r)&&(this.disabledNodes.delete(r),cv(r,Ut))}removeNode(r,i,o,c){if(aD(i)){const d=r?this._fetchNamespace(r):null;if(d?d.removeNode(i,c):this.markElementAsRemoved(r,i,!1,c),o){const g=this.namespacesByHostElement.get(i);g&&g.id!==r&&g.removeNode(i,c)}}else this._onRemovalComplete(i,c)}markElementAsRemoved(r,i,o,c){this.collectedLeaveElements.push(i),i[Xi]={namespaceId:r,setForRemoval:c,hasAnimation:o,removedBeforeQueried:!1}}listen(r,i,o,c,d){return aD(i)?this._fetchNamespace(r).listen(i,o,c,d):()=>{}}_buildInstruction(r,i,o,c,d){return r.transition.build(this.driver,r.element,r.fromState.value,r.toState.value,o,c,r.fromState.options,r.toState.options,i,d)}destroyInnerAnimations(r){let i=this.driver.query(r,Dh,!0);i.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(i=this.driver.query(r,op,!0),i.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(r){const i=this.playersByElement.get(r);i&&i.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(r){const i=this.playersByQueriedElement.get(r);i&&i.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(r=>{if(this.players.length)return Sh(this.players).onDone(()=>r());r()})}processLeaveNode(r){const i=r[Xi];if(i&&i.setForRemoval){if(r[Xi]=xh,i.namespaceId){this.destroyInnerAnimations(r);const o=this._fetchNamespace(i.namespaceId);o&&o.clearElementCache(r)}this._onRemovalComplete(r,i.setForRemoval)}this.driver.matchesElement(r,hn)&&this.markElementAsDisabled(r,!1),this.driver.query(r,hn,!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(r=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,c)=>this._balanceNamespaceList(o,c)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)kl(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{i=this._flushAnimations(o,r)}finally{for(let c=0;c<o.length;c++)o[c]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],i.length?Sh(i).onDone(()=>{o.forEach(c=>c())}):o.forEach(c=>c())}}reportError(r){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${r.join("\n")}`)}_flushAnimations(r,i){const o=new a0,c=[],d=new Map,g=[],v=new Map,w=new Map,R=new Map,F=new Set;this.disabledNodes.forEach(_t=>{F.add(_t);const Lt=this.driver.query(_t,".ng-animate-queued",!0);for(let nn=0;nn<Lt.length;nn++)F.add(Lt[nn])});const j=this.bodyNode,Q=Array.from(this.statesByElement.keys()),de=qN(Q,this.collectedEnterElements),ge=new Map;let Ne=0;de.forEach((_t,Lt)=>{const nn=Zw+Ne++;ge.set(Lt,nn),_t.forEach(Pn=>kl(Pn,nn))});const $e=[],Mt=new Set,qt=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const Lt=this.collectedLeaveElements[_t],nn=Lt[Xi];nn&&nn.setForRemoval&&($e.push(Lt),Mt.add(Lt),nn.hasAnimation?this.driver.query(Lt,".ng-star-inserted",!0).forEach(Pn=>Mt.add(Pn)):qt.add(Lt))}const Yt=new Map,un=qN(Q,Array.from(Mt));un.forEach((_t,Lt)=>{const nn=sp+Ne++;Yt.set(Lt,nn),_t.forEach(Pn=>kl(Pn,nn))}),r.push(()=>{de.forEach((_t,Lt)=>{const nn=ge.get(Lt);_t.forEach(Pn=>cv(Pn,nn))}),un.forEach((_t,Lt)=>{const nn=Yt.get(Lt);_t.forEach(Pn=>cv(Pn,nn))}),$e.forEach(_t=>{this.processLeaveNode(_t)})});const Hi=[],Ro=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(i).forEach(nn=>{const Pn=nn.player,vs=nn.element;if(Hi.push(Pn),this.collectedEnterElements.length){const Xu=vs[Xi];if(Xu&&Xu.setForMove)return void Pn.destroy()}const Ju=!j||!this.driver.containsElement(j,vs),Ga=Yt.get(vs),vp=ge.get(vs),_i=this._buildInstruction(nn,o,vp,Ga,Ju);if(_i.errors&&_i.errors.length)Ro.push(_i);else{if(Ju)return Pn.onStart(()=>Mh(vs,_i.fromStyles)),Pn.onDestroy(()=>Nl(vs,_i.toStyles)),void c.push(Pn);if(nn.isFallbackTransition)return Pn.onStart(()=>Mh(vs,_i.fromStyles)),Pn.onDestroy(()=>Nl(vs,_i.toStyles)),void c.push(Pn);_i.timelines.forEach(Xu=>Xu.stretchStartingKeyframe=!0),o.append(vs,_i.timelines),g.push({instruction:_i,player:Pn,element:vs}),_i.queriedElements.forEach(Xu=>na(v,Xu,[]).push(Pn)),_i.preStyleProps.forEach((Xu,$0)=>{const QD=Object.keys(Xu);if(QD.length){let Dm=w.get($0);Dm||w.set($0,Dm=new Set),QD.forEach(jx=>Dm.add(jx))}}),_i.postStyleProps.forEach((Xu,$0)=>{const QD=Object.keys(Xu);let Dm=R.get($0);Dm||R.set($0,Dm=new Set),QD.forEach(jx=>Dm.add(jx))})}});if(Ro.length){const _t=[];Ro.forEach(Lt=>{_t.push(`@${Lt.triggerName} has failed due to:\n`),Lt.errors.forEach(nn=>_t.push(`- ${nn}\n`))}),Hi.forEach(Lt=>Lt.destroy()),this.reportError(_t)}const xo=new Map,kh=new Map;g.forEach(_t=>{const Lt=_t.element;o.has(Lt)&&(kh.set(Lt,Lt),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,xo))}),c.forEach(_t=>{const Lt=_t.element;this._getPreviousPlayers(Lt,!1,_t.namespaceId,_t.triggerName,null).forEach(Pn=>{na(xo,Lt,[]).push(Pn),Pn.destroy()})});const Fh=$e.filter(_t=>ZN(_t,w,R)),Lh=new Map;WN(Lh,this.driver,qt,R,$c).forEach(_t=>{ZN(_t,w,R)&&Fh.push(_t)});const G0=new Map;de.forEach((_t,Lt)=>{WN(G0,this.driver,new Set(_t),w,"!")}),Fh.forEach(_t=>{const Lt=Lh.get(_t),nn=G0.get(_t);Lh.set(_t,Object.assign(Object.assign({},Lt),nn))});const Sm=[],XF=[],eL={};g.forEach(_t=>{const{element:Lt,player:nn,instruction:Pn}=_t;if(o.has(Lt)){if(F.has(Lt))return nn.onDestroy(()=>Nl(Lt,Pn.toStyles)),nn.disabled=!0,nn.overrideTotalTime(Pn.totalTime),void c.push(nn);let vs=eL;if(kh.size>1){let Ga=Lt;const vp=[];for(;Ga=Ga.parentNode;){const _i=kh.get(Ga);if(_i){vs=_i;break}vp.push(Ga)}vp.forEach(_i=>kh.set(_i,vs))}const Ju=this._buildAnimation(nn.namespaceId,Pn,xo,d,G0,Lh);if(nn.setRealPlayer(Ju),vs===eL)Sm.push(nn);else{const Ga=this.playersByElement.get(vs);Ga&&Ga.length&&(nn.parentPlayer=Sh(Ga)),c.push(nn)}}else Mh(Lt,Pn.fromStyles),nn.onDestroy(()=>Nl(Lt,Pn.toStyles)),XF.push(nn),F.has(Lt)&&c.push(nn)}),XF.forEach(_t=>{const Lt=d.get(_t.element);if(Lt&&Lt.length){const nn=Sh(Lt);_t.setRealPlayer(nn)}}),c.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<$e.length;_t++){const Lt=$e[_t],nn=Lt[Xi];if(cv(Lt,sp),nn&&nn.hasAnimation)continue;let Pn=[];if(v.size){let Ju=v.get(Lt);Ju&&Ju.length&&Pn.push(...Ju);let Ga=this.driver.query(Lt,op,!0);for(let vp=0;vp<Ga.length;vp++){let _i=v.get(Ga[vp]);_i&&_i.length&&Pn.push(..._i)}}const vs=Pn.filter(Ju=>!Ju.destroyed);vs.length?WL(this,Lt,vs):this.processLeaveNode(Lt)}return $e.length=0,Sm.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const Lt=this.players.indexOf(_t);this.players.splice(Lt,1)}),_t.play()}),Sm}elementContainsData(r,i){let o=!1;const c=i[Xi];return c&&c.setForRemoval&&(o=!0),this.playersByElement.has(i)&&(o=!0),this.playersByQueriedElement.has(i)&&(o=!0),this.statesByElement.has(i)&&(o=!0),this._fetchNamespace(r).elementContainsData(i)||o}afterFlush(r){this._flushFns.push(r)}afterFlushAnimationsDone(r){this._whenQuietFns.push(r)}_getPreviousPlayers(r,i,o,c,d){let g=[];if(i){const v=this.playersByQueriedElement.get(r);v&&(g=v)}else{const v=this.playersByElement.get(r);if(v){const w=!d||d==Oh;v.forEach(R=>{R.queued||!w&&R.triggerName!=c||g.push(R)})}}return(o||c)&&(g=g.filter(v=>!(o&&o!=v.namespaceId||c&&c!=v.triggerName))),g}_beforeAnimationBuild(r,i,o){const d=i.element,g=i.isRemovalTransition?void 0:r,v=i.isRemovalTransition?void 0:i.triggerName;for(const w of i.timelines){const R=w.element,F=R!==d,j=na(o,R,[]);this._getPreviousPlayers(R,F,g,v,i.toState).forEach(de=>{const ge=de.getRealPlayer();ge.beforeDestroy&&ge.beforeDestroy(),de.destroy(),j.push(de)})}Mh(d,i.fromStyles)}_buildAnimation(r,i,o,c,d,g){const v=i.triggerName,w=i.element,R=[],F=new Set,j=new Set,Q=i.timelines.map(ge=>{const Ne=ge.element;F.add(Ne);const $e=Ne[Xi];if($e&&$e.removedBeforeQueried)return new Th(ge.duration,ge.delay);const Mt=Ne!==w,qt=function(s){const r=[];return KN(s,r),r}((o.get(Ne)||hm).map(xo=>xo.getRealPlayer())).filter(xo=>!!xo.element&&xo.element===Ne),Yt=d.get(Ne),un=g.get(Ne),Hi=Xy(0,this._normalizer,0,ge.keyframes,Yt,un),Ro=this._buildPlayer(ge,Hi,qt);if(ge.subTimeline&&c&&j.add(Ne),Mt){const xo=new TR(r,v,Ne);xo.setRealPlayer(Ro),R.push(xo)}return Ro});R.forEach(ge=>{na(this.playersByQueriedElement,ge.element,[]).push(ge),ge.onDone(()=>function(s,r,i){let o;if(s instanceof Map){if(o=s.get(r),o){if(o.length){const c=o.indexOf(i);o.splice(c,1)}0==o.length&&s.delete(r)}}else if(o=s[r],o){if(o.length){const c=o.indexOf(i);o.splice(c,1)}0==o.length&&delete s[r]}return o}(this.playersByQueriedElement,ge.element,ge))}),F.forEach(ge=>kl(ge,Yw));const de=Sh(Q);return de.onDestroy(()=>{F.forEach(ge=>cv(ge,Yw)),Nl(w,i.toStyles)}),j.forEach(ge=>{na(c,ge,[]).push(de)}),de}_buildPlayer(r,i,o){return i.length>0?this.driver.animate(r.element,i,r.duration,r.delay,r.easing,o):new Th(r.duration,r.delay)}}class TR{constructor(r,i,o){this.namespaceId=r,this.triggerName=i,this.element=o,this._player=new Th,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(r){this._containsRealPlayer||(this._player=r,Object.keys(this._queuedCallbacks).forEach(i=>{this._queuedCallbacks[i].forEach(o=>jw(r,i,void 0,o))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(r.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(r){this.totalTime=r}syncPlayerEvents(r){const i=this._player;i.triggerCallback&&r.onStart(()=>i.triggerCallback("start")),r.onDone(()=>this.finish()),r.onDestroy(()=>this.destroy())}_queueEvent(r,i){na(this._queuedCallbacks,r,[]).push(i)}onDone(r){this.queued&&this._queueEvent("done",r),this._player.onDone(r)}onStart(r){this.queued&&this._queueEvent("start",r),this._player.onStart(r)}onDestroy(r){this.queued&&this._queueEvent("destroy",r),this._player.onDestroy(r)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(r){this.queued||this._player.setPosition(r)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(r){const i=this._player;i.triggerCallback&&i.triggerCallback(r)}}function aD(s){return s&&1===s.nodeType}function zN(s,r){const i=s.style.display;return s.style.display=null!=r?r:"none",i}function WN(s,r,i,o,c){const d=[];i.forEach(w=>d.push(zN(w)));const g=[];o.forEach((w,R)=>{const F={};w.forEach(j=>{const Q=F[j]=r.computeStyle(R,j,c);(!Q||0==Q.length)&&(R[Xi]=cp,g.push(R))}),s.set(R,F)});let v=0;return i.forEach(w=>zN(w,d[v++])),g}function qN(s,r){const i=new Map;if(s.forEach(v=>i.set(v,[])),0==r.length)return i;const c=new Set(r),d=new Map;function g(v){if(!v)return 1;let w=d.get(v);if(w)return w;const R=v.parentNode;return w=i.has(R)?R:c.has(R)?1:g(R),d.set(v,w),w}return r.forEach(v=>{const w=g(v);1!==w&&i.get(w).push(v)}),i}const lD="$$classes";function kl(s,r){if(s.classList)s.classList.add(r);else{let i=s[lD];i||(i=s[lD]={}),i[r]=!0}}function cv(s,r){if(s.classList)s.classList.remove(r);else{let i=s[lD];i&&delete i[r]}}function WL(s,r,i){Sh(i).onDone(()=>s.processLeaveNode(r))}function KN(s,r){for(let i=0;i<s.length;i++){const o=s[i];o instanceof mR?KN(o.players,r):r.push(o)}}function ZN(s,r,i){const o=i.get(s);if(!o)return!1;let c=r.get(s);return c?o.forEach(d=>c.add(d)):r.set(s,o),i.delete(s),!0}class cD{constructor(r,i,o){this.bodyNode=r,this._driver=i,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(c,d)=>{},this._transitionEngine=new h0(r,i,o),this._timelineEngine=new Ye(r,i,o),this._transitionEngine.onRemovalComplete=(c,d)=>this.onRemovalComplete(c,d)}registerTrigger(r,i,o,c,d){const g=r+"-"+c;let v=this._triggerCache[g];if(!v){const w=[],R=lv(this._driver,d,w);if(w.length)throw new Error(`The animation trigger "${c}" has failed to build due to the following errors:\n - ${w.join("\n - ")}`);v=function(s,r,i){return new ce(s,r,i)}(c,R,this._normalizer),this._triggerCache[g]=v}this._transitionEngine.registerTrigger(i,c,v)}register(r,i){this._transitionEngine.register(r,i)}destroy(r,i){this._transitionEngine.destroy(r,i)}onInsert(r,i,o,c){this._transitionEngine.insertNode(r,i,o,c)}onRemove(r,i,o,c){this._transitionEngine.removeNode(r,i,c||!1,o)}disableAnimations(r,i){this._transitionEngine.markElementAsDisabled(r,i)}process(r,i,o,c){if("@"==o.charAt(0)){const[d,g]=$S(o);this._timelineEngine.command(d,i,g,c)}else this._transitionEngine.trigger(r,i,o,c)}listen(r,i,o,c,d){if("@"==o.charAt(0)){const[g,v]=$S(o);return this._timelineEngine.listen(g,i,v,d)}return this._transitionEngine.listen(r,i,o,c,d)}flush(r=-1){this._transitionEngine.flush(r)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function YN(s,r){let i=null,o=null;return Array.isArray(r)&&r.length?(i=SR(r[0]),r.length>1&&(o=SR(r[r.length-1]))):r&&(i=SR(r)),i||o?new uv(s,i,o):null}class uv{constructor(r,i,o){this._element=r,this._startStyles=i,this._endStyles=o,this._state=0;let c=uv.initialStylesByElement.get(r);c||uv.initialStylesByElement.set(r,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&Nl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nl(this._element,this._initialStyles),this._endStyles&&(Nl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(uv.initialStylesByElement.delete(this._element),this._startStyles&&(Mh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mh(this._element,this._endStyles),this._endStyles=null),Nl(this._element,this._initialStyles),this._state=3)}}function SR(s){let r=null;const i=Object.keys(s);for(let o=0;o<i.length;o++){const c=i[o];ZL(c)&&(r=r||{},r[c]=s[c])}return r}function ZL(s){return"display"===s||"position"===s}uv.initialStylesByElement=new WeakMap;const QN="animation",JN="animationend";class JL{constructor(r,i,o,c,d,g,v){this._element=r,this._name=i,this._duration=o,this._delay=c,this._easing=d,this._fillMode=g,this._onDoneFn=v,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=w=>this._handleCallback(w)}apply(){(function(s,r){const i=AR(s,"").trim();let o=0;i.length&&(function(s,r){let i=0;for(let o=0;o<s.length;o++)","===s.charAt(o)&&i++;return i}(i)+1,r=`${i}, ${r}`),uD(s,"",r)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),tP(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){XN(this._element,this._name,"paused")}resume(){XN(this._element,this._name,"running")}setPosition(r){const i=eP(this._element,this._name);this._position=r*this._duration,uD(this._element,"Delay",`-${this._position}ms`,i)}getPosition(){return this._position}_handleCallback(r){const i=r._ngTestManualTimestamp||Date.now(),o=1e3*parseFloat(r.elapsedTime.toFixed(3));r.animationName==this._name&&Math.max(i-this._startTime,0)>=this._delay&&o>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),tP(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(s,r){const o=AR(s,"").split(","),c=DR(o,r);c>=0&&(o.splice(c,1),uD(s,"",o.join(",")))}(this._element,this._name))}}function XN(s,r,i){uD(s,"PlayState",i,eP(s,r))}function eP(s,r){const i=AR(s,"");return i.indexOf(",")>0?DR(i.split(","),r):DR([i],r)}function DR(s,r){for(let i=0;i<s.length;i++)if(s[i].indexOf(r)>=0)return i;return-1}function tP(s,r,i){i?s.removeEventListener(JN,r):s.addEventListener(JN,r)}function uD(s,r,i,o){const c=QN+r;if(null!=o){const d=s.style[c];if(d.length){const g=d.split(",");g[o]=i,i=g.join(",")}}s.style[c]=i}function AR(s,r){return s.style[QN+r]||""}class nP{constructor(r,i,o,c,d,g,v,w){this.element=r,this.keyframes=i,this.animationName=o,this._duration=c,this._delay=d,this._finalStyles=v,this._specialStyles=w,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=g||"linear",this.totalTime=c+d,this._buildStyler()}onStart(r){this._onStartFns.push(r)}onDone(r){this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(r=>r()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(r=>r()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(r){this._styler.setPosition(r)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new JL(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(r){const i="start"==r?this._onStartFns:this._onDoneFns;i.forEach(o=>o()),i.length=0}beforeDestroy(){this.init();const r={};if(this.hasStarted()){const i=this._state>=3;Object.keys(this._finalStyles).forEach(o=>{"offset"!=o&&(r[o]=i?this._finalStyles[o]:t0(this.element,o))})}this.currentSnapshot=r}}class s2 extends Th{constructor(r,i){super(),this.element=r,this._startingStyles={},this.__initialized=!1,this._styles=Kw(i)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(r=>{this._startingStyles[r]=this.element.style[r]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(r=>this.element.style.setProperty(r,this._styles[r])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(r=>{const i=this._startingStyles[r];i?this.element.style.setProperty(r,i):this.element.style.removeProperty(r)}),this._startingStyles=null,super.destroy())}}class iP{constructor(){this._count=0}validateStyleProperty(r){return lm(r)}matchesElement(r,i){return rp(r,i)}containsElement(r,i){return ip(r,i)}query(r,i,o){return tv(r,i,o)}computeStyle(r,i,o){return window.getComputedStyle(r)[i]}buildKeyframeElement(r,i,o){o=o.map(v=>Kw(v));let c=`@keyframes ${i} {\n`,d="";o.forEach(v=>{d=" ";const w=parseFloat(v.offset);c+=`${d}${100*w}% {\n`,d+=" ",Object.keys(v).forEach(R=>{const F=v[R];switch(R){case"offset":return;case"easing":return void(F&&(c+=`${d}animation-timing-function: ${F};\n`));default:return void(c+=`${d}${R}: ${F};\n`)}}),c+=`${d}}\n`}),c+="}\n";const g=document.createElement("style");return g.textContent=c,g}animate(r,i,o,c,d,g=[],v){const w=g.filter($e=>$e instanceof nP),R={};e0(o,c)&&w.forEach($e=>{let Mt=$e.currentSnapshot;Object.keys(Mt).forEach(qt=>R[qt]=Mt[qt])});const F=function(s){let r={};return s&&(Array.isArray(s)?s:[s]).forEach(o=>{Object.keys(o).forEach(c=>{"offset"==c||"easing"==c||(r[c]=o[c])})}),r}(i=XS(r,i,R));if(0==o)return new s2(r,F);const j="gen_css_kf_"+this._count++,Q=this.buildKeyframeElement(r,j,i);(function(s){var r;const i=null===(r=s.getRootNode)||void 0===r?void 0:r.call(s);return"undefined"!=typeof ShadowRoot&&i instanceof ShadowRoot?i:document.head})(r).appendChild(Q);const ge=YN(r,i),Ne=new nP(r,i,j,o,c,d,F,ge);return Ne.onDestroy(()=>function(s){s.parentNode.removeChild(s)}(Q)),Ne}}class oP{constructor(r,i,o,c){this.element=r,this.keyframes=i,this.options=o,this._specialStyles=c,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(r,i,o){return r.animate(i,o)}onStart(r){this._onStartFns.push(r)}onDone(r){this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(r=>r()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}setPosition(r){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=r*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const r={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(i=>{"offset"!=i&&(r[i]=this._finished?this._finalKeyframe[i]:t0(this.element,i))}),this.currentSnapshot=r}triggerCallback(r){const i="start"==r?this._onStartFns:this._onDoneFns;i.forEach(o=>o()),i.length=0}}class u2{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(aP().toString()),this._cssKeyframesDriver=new iP}validateStyleProperty(r){return lm(r)}matchesElement(r,i){return rp(r,i)}containsElement(r,i){return ip(r,i)}query(r,i,o){return tv(r,i,o)}computeStyle(r,i,o){return window.getComputedStyle(r)[i]}overrideWebAnimationsSupport(r){this._isNativeImpl=r}animate(r,i,o,c,d,g=[],v){if(!v&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(r,i,o,c,d,g);const F={duration:o,delay:c,fill:0==c?"both":"forwards"};d&&(F.easing=d);const j={},Q=g.filter(ge=>ge instanceof oP);e0(o,c)&&Q.forEach(ge=>{let Ne=ge.currentSnapshot;Object.keys(Ne).forEach($e=>j[$e]=Ne[$e])});const de=YN(r,i=XS(r,i=i.map(ge=>Wu(ge,!1)),j));return new oP(r,i,F,de)}}function aP(){return _R()&&Element.prototype.animate||{}}let h2=(()=>{class s extends pR{constructor(i,o){super(),this._nextAnimationId=0,this._renderer=i.createRenderer(o.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(i){const o=this._nextAnimationId.toString();this._nextAnimationId++;const c=Array.isArray(i)?US(i):i;return lP(this._renderer,null,o,"register",[c]),new f2(o,this._renderer)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(m.FYo),m.LFG(O.K0))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();class f2 extends class{}{constructor(r,i){super(),this._id=r,this._renderer=i}create(r,i){return new p2(this._id,r,i||{},this._renderer)}}class p2{constructor(r,i,o,c){this.id=r,this.element=i,this._renderer=c,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(r,i){return this._renderer.listen(this.element,`@@${this.id}:${r}`,i)}_command(r,...i){return lP(this._renderer,this.element,this.id,r,i)}onDone(r){this._listen("done",r)}onStart(r){this._listen("start",r)}onDestroy(r){this._listen("destroy",r)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(r){this._command("setPosition",r)}getPosition(){var r,i;return null!==(i=null===(r=this._renderer.engine.players[+this.id])||void 0===r?void 0:r.getPosition())&&void 0!==i?i:0}}function lP(s,r,i,o,c){return s.setProperty(r,`@@${i}:${o}`,c)}const cP="@.disabled";let g2=(()=>{class s{constructor(i,o,c){this.delegate=i,this.engine=o,this._zone=c,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(d,g)=>{g&&g.parentNode(d)&&g.removeChild(d.parentNode,d)}}createRenderer(i,o){const d=this.delegate.createRenderer(i,o);if(!(i&&o&&o.data&&o.data.animation)){let F=this._rendererCache.get(d);return F||(F=new uP("",d,this.engine),this._rendererCache.set(d,F)),F}const g=o.id,v=o.id+"-"+this._currentId;this._currentId++,this.engine.register(v,i);const w=F=>{Array.isArray(F)?F.forEach(w):this.engine.registerTrigger(g,v,i,F.name,F)};return o.data.animation.forEach(w),new m2(this,v,d,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(i,o,c){i>=0&&i<this._microtaskId?this._zone.run(()=>o(c)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(d=>{const[g,v]=d;g(v)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,c]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(m.FYo),m.LFG(cD),m.LFG(m.R0b))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();class uP{constructor(r,i,o){this.namespaceId=r,this.delegate=i,this.engine=o,this.destroyNode=this.delegate.destroyNode?c=>i.destroyNode(c):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(r,i){return this.delegate.createElement(r,i)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}appendChild(r,i){this.delegate.appendChild(r,i),this.engine.onInsert(this.namespaceId,i,r,!1)}insertBefore(r,i,o,c=!0){this.delegate.insertBefore(r,i,o),this.engine.onInsert(this.namespaceId,i,r,c)}removeChild(r,i,o){this.engine.onRemove(this.namespaceId,i,this.delegate,o)}selectRootElement(r,i){return this.delegate.selectRootElement(r,i)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,i,o,c){this.delegate.setAttribute(r,i,o,c)}removeAttribute(r,i,o){this.delegate.removeAttribute(r,i,o)}addClass(r,i){this.delegate.addClass(r,i)}removeClass(r,i){this.delegate.removeClass(r,i)}setStyle(r,i,o,c){this.delegate.setStyle(r,i,o,c)}removeStyle(r,i,o){this.delegate.removeStyle(r,i,o)}setProperty(r,i,o){"@"==i.charAt(0)&&i==cP?this.disableAnimations(r,!!o):this.delegate.setProperty(r,i,o)}setValue(r,i){this.delegate.setValue(r,i)}listen(r,i,o){return this.delegate.listen(r,i,o)}disableAnimations(r,i){this.engine.disableAnimations(r,i)}}class m2 extends uP{constructor(r,i,o,c){super(i,o,c),this.factory=r,this.namespaceId=i}setProperty(r,i,o){"@"==i.charAt(0)?"."==i.charAt(1)&&i==cP?this.disableAnimations(r,o=void 0===o||!!o):this.engine.process(this.namespaceId,r,i.substr(1),o):this.delegate.setProperty(r,i,o)}listen(r,i,o){if("@"==i.charAt(0)){const c=function(s){switch(s){case"body":return document.body;case"document":return document;case"window":return window;default:return s}}(r);let d=i.substr(1),g="";return"@"!=d.charAt(0)&&([d,g]=function(s){const r=s.indexOf(".");return[s.substring(0,r),s.substr(r+1)]}(d)),this.engine.listen(this.namespaceId,c,d,g,v=>{this.factory.scheduleListenerCallback(v._data||-1,o,v)})}return this.delegate.listen(r,i,o)}}let v2=(()=>{class s extends cD{constructor(i,o,c){super(i.body,o,c)}ngOnDestroy(){this.flush()}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(O.K0),m.LFG(nv),m.LFG(l))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac}),s})();const dv=new m.OlP("AnimationModuleType"),dP=[{provide:pR,useClass:h2},{provide:l,useFactory:function(){return new h}},{provide:cD,useClass:v2},{provide:m.FYo,useFactory:function(s,r,i){return new g2(s,r,i)},deps:[Wn,cD,m.R0b]}],hP=[{provide:nv,useFactory:function(){return"function"==typeof aP()?new u2:new iP}},{provide:dv,useValue:"BrowserAnimations"},...dP],fP=[{provide:nv,useClass:WS},{provide:dv,useValue:"NoopAnimations"},...dP];let C2=(()=>{class s{static withConfig(i){return{ngModule:s,providers:i.disableAnimations?fP:hP}}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({providers:hP,imports:[Pi]}),s})();const pP=new m.GfV("12.2.4"),R2=new m.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let gm,qu=(()=>{class s{constructor(i,o,c){this._hasDoneGlobalChecks=!1,this._document=c,i._applyBodyHighContrastModeCssClasses(),this._sanityChecks=o,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const i=this._document.defaultView||window;return"object"==typeof i&&i?i:null}_checkIsEnabled(i){return!(!(0,m.X6Q)()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[i])}_isTestEnv(){const i=this._getWindow();return i&&(i.__karma__||i.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const i=this._document.createElement("div");i.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(i);const o=getComputedStyle(i);o&&"none"!==o.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(i)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&pP.full!==VS.full&&console.warn("The Angular Material version ("+pP.full+") does not match the Angular CDK version ("+VS.full+").\nPlease ensure the versions of these two packages exactly match.")}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(LS),m.LFG(R2,8),m.LFG(O.K0))},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[Ps],Ps]}),s})();function gP(s){return class extends s{constructor(...r){super(...r),this._disabled=!1}get disabled(){return this._disabled}set disabled(r){this._disabled=ja(r)}}}function x2(s,r){return class extends s{constructor(...i){super(...i),this.defaultColor=r,this.color=r}get color(){return this._color}set color(i){const o=i||this.defaultColor;o!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),o&&this._elementRef.nativeElement.classList.add(`mat-${o}`),this._color=o)}}}function O2(s){return class extends s{constructor(...r){super(...r),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=ja(r)}}}try{gm="undefined"!=typeof Intl}catch(s){gm=!1}class $2{constructor(r,i,o){this._renderer=r,this.element=i,this.config=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const _P={enterDuration:225,exitDuration:150},MR=NT({passive:!0}),yP=["mousedown","touchstart"],vP=["mouseup","mouseleave","touchend","touchcancel"];class W2{constructor(r,i,o,c){this._target=r,this._ngZone=i,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,c.isBrowser&&(this._containerElement=Hc(o))}fadeInRipple(r,i,o={}){const c=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),d=Object.assign(Object.assign({},_P),o.animation);o.centered&&(r=c.left+c.width/2,i=c.top+c.height/2);const g=o.radius||function(s,r,i){const o=Math.max(Math.abs(s-i.left),Math.abs(s-i.right)),c=Math.max(Math.abs(r-i.top),Math.abs(r-i.bottom));return Math.sqrt(o*o+c*c)}(r,i,c),v=r-c.left,w=i-c.top,R=d.enterDuration,F=document.createElement("div");F.classList.add("mat-ripple-element"),F.style.left=v-g+"px",F.style.top=w-g+"px",F.style.height=2*g+"px",F.style.width=2*g+"px",null!=o.color&&(F.style.backgroundColor=o.color),F.style.transitionDuration=`${R}ms`,this._containerElement.appendChild(F),function(s){window.getComputedStyle(s).getPropertyValue("opacity")}(F),F.style.transform="scale(1)";const j=new $2(this,F,o);return j.state=0,this._activeRipples.add(j),o.persistent||(this._mostRecentTransientRipple=j),this._runTimeoutOutsideZone(()=>{const Q=j===this._mostRecentTransientRipple;j.state=1,!o.persistent&&(!Q||!this._isPointerDown)&&j.fadeOut()},R),j}fadeOutRipple(r){const i=this._activeRipples.delete(r);if(r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!i)return;const o=r.element,c=Object.assign(Object.assign({},_P),r.config.animation);o.style.transitionDuration=`${c.exitDuration}ms`,o.style.opacity="0",r.state=2,this._runTimeoutOutsideZone(()=>{r.state=3,o.parentNode.removeChild(o)},c.exitDuration)}fadeOutAll(){this._activeRipples.forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){const i=Hc(r);!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,this._registerEvents(yP))}handleEvent(r){"mousedown"===r.type?this._onMousedown(r):"touchstart"===r.type?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(vP),this._pointerUpEventsRegistered=!0)}_onMousedown(r){const i=RS(r),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!i&&!o&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!Yy(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const i=r.changedTouches;for(let o=0;o<i.length;o++)this.fadeInRipple(i[o].clientX,i[o].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(r=>{!r.config.persistent&&(1===r.state||r.config.terminateOnPointerUp&&0===r.state)&&r.fadeOut()}))}_runTimeoutOutsideZone(r,i=0){this._ngZone.runOutsideAngular(()=>setTimeout(r,i))}_registerEvents(r){this._ngZone.runOutsideAngular(()=>{r.forEach(i=>{this._triggerElement.addEventListener(i,this,MR)})})}_removeTriggerEvents(){this._triggerElement&&(yP.forEach(r=>{this._triggerElement.removeEventListener(r,this,MR)}),this._pointerUpEventsRegistered&&vP.forEach(r=>{this._triggerElement.removeEventListener(r,this,MR)}))}}const Z2=new m.OlP("mat-ripple-global-options");let fD=(()=>{class s{constructor(i,o,c,d,g){this._elementRef=i,this._animationMode=g,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=d||{},this._rippleRenderer=new W2(this,o,i,c)}get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,o=0,c){return"number"==typeof i?this._rippleRenderer.fadeInRipple(i,o,Object.assign(Object.assign({},this.rippleConfig),c)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),i))}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(Vr),m.Y36(Z2,8),m.Y36(dv,8))},s.\u0275dir=m.lG2({type:s,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,o){2&i&&m.ekj("mat-ripple-unbounded",o.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),s})(),EP=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[qu,Fy],qu]}),s})();const IP=["mat-button",""],TP=["*"],iV=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],sV=x2(gP(O2(class{constructor(s){this._elementRef=s}})));let DP=(()=>{class s extends sV{constructor(i,o,c){super(i),this._focusMonitor=o,this._animationMode=c,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const d of iV)this._hasHostAttributes(d)&&this._getHostElement().classList.add(d);i.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(i,o){i?this._focusMonitor.focusVia(this._getHostElement(),i,o):this._getHostElement().focus(o)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...i){return i.some(o=>this._getHostElement().hasAttribute(o))}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(m.SBq),m.Y36(Bw),m.Y36(dv,8))},s.\u0275cmp=m.Xpm({type:s,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(i,o){if(1&i&&m.Gf(fD,5),2&i){let c;m.iGM(c=m.CRH())&&(o.ripple=c.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(i,o){2&i&&(m.uIk("disabled",o.disabled||null),m.ekj("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[m.qOj],attrs:IP,ngContentSelectors:TP,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(i,o){1&i&&(m.F$t(),m.TgZ(0,"span",0),m.Hsn(1),m.qZA(),m._UZ(2,"span",1),m._UZ(3,"span",2)),2&i&&(m.xp6(2),m.ekj("mat-button-ripple-round",o.isRoundButton||o.isIconButton),m.Q6J("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},directives:[fD],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),s})(),oV=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[EP,qu],qu]}),s})();var aV=H(9112),lV=H(8071);const AP=new Set;let hv,MP=(()=>{class s{constructor(i){this._platform=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):uV}matchMedia(i){return this._platform.WEBKIT&&function(s){if(!AP.has(s))try{hv||(hv=document.createElement("style"),hv.setAttribute("type","text/css"),document.head.appendChild(hv)),hv.sheet&&(hv.sheet.insertRule(`@media ${s} {.fx-query-test{ }}`,0),AP.add(s))}catch(r){console.error(r)}}(i),this._matchMedia(i)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(Vr))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(Vr))},token:s,providedIn:"root"}),s})();function uV(s){return{matches:"all"===s||""===s,media:s,addListener:()=>{},removeListener:()=>{}}}let RP=(()=>{class s{constructor(i,o){this._mediaMatcher=i,this._zone=o,this._queries=new Map,this._destroySubject=new fn.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return xP(ky(i)).some(c=>this._registerQuery(c).mql.matches)}observe(i){const c=xP(ky(i)).map(g=>this._registerQuery(g).observable);let d=(0,aV.aj)(c);return d=(0,lV.z)(d.pipe((0,Xf.q)(1)),d.pipe(QM(1),function(s,r=$h.P){return i=>i.lift(new XM(s,r))}(0))),d.pipe((0,bn.U)(g=>{const v={matches:!1,breakpoints:{}};return g.forEach(({matches:w,query:R})=>{v.matches=v.matches||w,v.breakpoints[R]=w}),v}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);const o=this._mediaMatcher.matchMedia(i),d={observable:new sr.y(g=>{const v=w=>this._zone.run(()=>g.next(w));return o.addListener(v),()=>{o.removeListener(v)}}).pipe((0,fd.O)(o),(0,bn.U)(({matches:g})=>({query:i,matches:g})),ju(this._destroySubject)),mql:o};return this._queries.set(i,d),d}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(MP),m.LFG(m.R0b))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(MP),m.LFG(m.R0b))},token:s,providedIn:"root"}),s})();function xP(s){return s.map(r=>r.split(",")).reduce((r,i)=>r.concat(i)).map(r=>r.trim())}function hV(s,r){if(1&s){const i=m.EpF();m.TgZ(0,"div",1),m.TgZ(1,"button",2),m.NdJ("click",function(){return m.CHM(i),m.oxw().action()}),m._uU(2),m.qZA(),m.qZA()}if(2&s){const i=m.oxw();m.xp6(2),m.Oqu(i.data.action)}}function fV(s,r){}const OP=new m.OlP("MatSnackBarData");class pD{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const pV=Math.pow(2,31)-1;class RR{constructor(r,i){this._overlayRef=i,this._afterDismissed=new fn.xQ,this._afterOpened=new fn.xQ,this._onAction=new fn.xQ,this._dismissedByAction=!1,this.containerInstance=r,this.onAction().subscribe(()=>this.dismiss()),r._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(r){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(r,pV))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let gV=(()=>{class s{constructor(i,o){this.snackBarRef=i,this.data=o}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(RR),m.Y36(OP))},s.\u0275cmp=m.Xpm({type:s,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(i,o){1&i&&(m.TgZ(0,"span"),m._uU(1),m.qZA(),m.YNc(2,hV,3,1,"div",0)),2&i&&(m.xp6(1),m.Oqu(o.data.message),m.xp6(1),m.Q6J("ngIf",o.hasAction))},directives:[O.O5,DP],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),s})();const mV={snackBarState:gR("state",[jS("void, hidden",ks({transform:"scale(0.8)",opacity:0})),jS("visible",ks({transform:"scale(1)",opacity:1})),HS("* => visible",BS("150ms cubic-bezier(0, 0, 0.2, 1)")),HS("* => void, * => hidden",BS("75ms cubic-bezier(0.4, 0.0, 1, 1)",ks({opacity:0})))])};let _V=(()=>{class s extends Hy{constructor(i,o,c,d,g){super(),this._ngZone=i,this._elementRef=o,this._changeDetectorRef=c,this._platform=d,this.snackBarConfig=g,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new fn.xQ,this._onExit=new fn.xQ,this._onEnter=new fn.xQ,this._animationState="void",this.attachDomPortal=v=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(v)),this._live="assertive"!==g.politeness||g.announcementMessage?"off"===g.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(i){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(i)}attachTemplatePortal(i){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(i)}onAnimationEnd(i){const{fromState:o,toState:c}=i;if(("void"===c&&"void"!==o||"hidden"===c)&&this._completeExit(),"visible"===c){const d=this._onEnter;this._ngZone.run(()=>{d.next(),d.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Xf.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const i=this._elementRef.nativeElement,o=this.snackBarConfig.panelClass;o&&(Array.isArray(o)?o.forEach(c=>i.classList.add(c)):i.classList.add(o)),"center"===this.snackBarConfig.horizontalPosition&&i.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&i.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),o=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&o){let c=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(c=document.activeElement),i.removeAttribute("aria-hidden"),o.appendChild(i),null==c||c.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(m.R0b),m.Y36(m.SBq),m.Y36(m.sBO),m.Y36(Vr),m.Y36(pD))},s.\u0275cmp=m.Xpm({type:s,selectors:[["snack-bar-container"]],viewQuery:function(i,o){if(1&i&&m.Gf(Gy,7),2&i){let c;m.iGM(c=m.CRH())&&(o._portalOutlet=c.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(i,o){1&i&&m.WFA("@state.done",function(d){return o.onAnimationEnd(d)}),2&i&&m.d8E("@state",o._animationState)},features:[m.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,o){1&i&&(m.TgZ(0,"div",0),m.YNc(1,fV,0,0,"ng-template",1),m.qZA(),m._UZ(2,"div")),2&i&&(m.xp6(2),m.uIk("aria-live",o._live)("role",o._role))},directives:[Gy],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[mV.snackBarState]}}),s})(),NP=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[ZM,Jf,O.ez,oV,qu],qu]}),s})();const PP=new m.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new pD}});let vV=(()=>{class s{constructor(i,o,c,d,g,v){this._overlay=i,this._live=o,this._injector=c,this._breakpointObserver=d,this._parentSnackBar=g,this._defaultConfig=v,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=gV,this.snackBarContainerComponent=_V,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}openFromComponent(i,o){return this._attach(i,o)}openFromTemplate(i,o){return this._attach(i,o)}open(i,o="",c){const d=Object.assign(Object.assign({},this._defaultConfig),c);return d.data={message:i,action:o},d.announcementMessage===i&&(d.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,d)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,o){const d=m.zs3.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:pD,useValue:o}]}),g=new jy(this.snackBarContainerComponent,o.viewContainerRef,d),v=i.attach(g);return v.instance.snackBarConfig=o,v.instance}_attach(i,o){const c=Object.assign(Object.assign(Object.assign({},new pD),this._defaultConfig),o),d=this._createOverlay(c),g=this._attachSnackBarContainer(d,c),v=new RR(g,d);if(i instanceof m.Rgc){const w=new im(i,null,{$implicit:c.data,snackBarRef:v});v.instance=g.attachTemplatePortal(w)}else{const w=this._createInjector(c,v),R=new jy(i,void 0,w),F=g.attachComponentPortal(R);v.instance=F.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(ju(d.detachments())).subscribe(w=>{const R=d.overlayElement.classList;w.matches?R.add(this.handsetCssClass):R.remove(this.handsetCssClass)}),c.announcementMessage&&g._onAnnounce.subscribe(()=>{this._live.announce(c.announcementMessage,c.politeness)}),this._animateSnackBar(v,c),this._openedSnackBarRef=v,this._openedSnackBarRef}_animateSnackBar(i,o){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),o.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),o.duration&&o.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(o.duration))}_createOverlay(i){const o=new lS;o.direction=i.direction;let c=this._overlay.position().global();const d="rtl"===i.direction,g="left"===i.horizontalPosition||"start"===i.horizontalPosition&&!d||"end"===i.horizontalPosition&&d,v=!g&&"center"!==i.horizontalPosition;return g?c.left("0"):v?c.right("0"):c.centerHorizontally(),"top"===i.verticalPosition?c.top("0"):c.bottom("0"),o.positionStrategy=c,this._overlay.create(o)}_createInjector(i,o){return m.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:RR,useValue:o},{provide:OP,useValue:i.data}]})}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(ep),m.LFG(NS),m.LFG(m.zs3),m.LFG(RP),m.LFG(s,12),m.LFG(PP))},s.\u0275prov=m.Yz7({factory:function(){return new s(m.LFG(ep),m.LFG(NS),m.LFG(m.gxx),m.LFG(RP),m.LFG(s,12),m.LFG(PP))},token:s,providedIn:NP}),s})();function EV(s,r){if(1&s){const i=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"h2"),m._uU(2,"Bienvenido"),m.qZA(),m.TgZ(3,"p"),m._uU(4,"Crea tu cuenta"),m.qZA(),m.TgZ(5,"a",13),m.NdJ("click",function(){return m.CHM(i),m.oxw().log=!1}),m._uU(6,"Registrarse"),m.qZA(),m.qZA()}}function bV(s,r){if(1&s){const i=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"p"),m._uU(2,"Ya tenes una cuenta?"),m._UZ(3,"br"),m._uU(4," Inicia sesion"),m.qZA(),m.TgZ(5,"a",13),m.NdJ("click",function(){return m.CHM(i),m.oxw().log=!0}),m._uU(6,"Iniciar sesion"),m.qZA(),m.qZA()}}function wV(s,r){if(1&s){const i=m.EpF();m.TgZ(0,"input",14),m.NdJ("click",function(){return m.CHM(i),m.oxw().login()}),m.qZA()}}function CV(s,r){if(1&s){const i=m.EpF();m.TgZ(0,"input",15),m.NdJ("click",function(){return m.CHM(i),m.oxw().register()}),m.qZA()}}function IV(s,r){if(1&s){const i=m.EpF();m.TgZ(0,"input",16),m.NdJ("click",function(){return m.CHM(i),m.oxw().loginRapido()}),m.qZA()}}let TV=(()=>{class s{constructor(i,o,c,d){this.auth=i,this.router=o,this.firestore=c,this.snackbar=d,this.alert=!1,this.alertError="",this.email="",this.password="",this.mensaje="",this.log=!0,this.snackBar=d}ngOnInit(){}loginRapido(){this.email="invitado@gmail.com",this.password="invitado"}login(){""!==this.email&&""!==this.password&&this.auth.login(this.email,this.password).then(i=>{console.log(i);let o={email:i.user.email,uid:i.user.uid,loginDate:Date.now()};console.log(o),this.firestore.addItem(o)}).catch(i=>{("auth/invalid-email"===i.code||"auth/user-not-found"===i.code||"auth/wrong-password"===i.code)&&(this.alertError="La contrase\xf1a o el mail son invalidos")})}register(){""!==this.email&&""!==this.password&&this.auth.register(this.email,this.password).then(i=>{console.log(i);let o={email:i.user.email,uid:i.user.uid,loginDate:Date.now()};this.firestore.addItem(o)}).catch(i=>{"auth/invalid-email"===i.code?this.alertError="Formato de mail invalido":"auth/weak-password"===i.code?this.alertError="La contrase\xf1a debe tener 6 o m\xe1s caracteres":"auth/email-already-in-use"===i.code&&(this.alertError="Ya hay un usuario registrado con ese mail")})}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(cw),m.Y36(bi.F0),m.Y36(IT),m.Y36(vV))},s.\u0275cmp=m.Xpm({type:s,selectors:[["app-login"]],decls:29,vars:10,consts:[[1,"wrapper"],[1,"container"],[1,"col-left"],[1,"login-text"],[4,"ngIf"],[1,"col-right"],[1,"login-form"],["type","text","name","email","placeholder","Email","required","",3,"ngModel","value","ngModelChange"],["type","password","name","password","placeholder","contrase\xf1a","required","",3,"ngModel","value","ngModelChange"],["type","button","class","btn btn-primary","value","Iniciar sesi\xf3n",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","value","Registrarse",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","value","Iniciar sesi\xf3n rapido",3,"click",4,"ngIf"],[1,"text-danger"],[1,"btn",3,"click"],["type","button","value","Iniciar sesi\xf3n",1,"btn","btn-primary",3,"click"],["type","button","value","Registrarse",1,"btn","btn-primary",3,"click"],["type","button","value","Iniciar sesi\xf3n rapido",1,"btn","btn-primary",3,"click"]],template:function(i,o){1&i&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.YNc(4,EV,7,0,"div",4),m.YNc(5,bV,7,0,"div",4),m.qZA(),m.qZA(),m.TgZ(6,"div",5),m.TgZ(7,"div",6),m.TgZ(8,"h2"),m._uU(9,"Login"),m.qZA(),m.TgZ(10,"form"),m.TgZ(11,"p"),m.TgZ(12,"label"),m._uU(13,"Email"),m.TgZ(14,"span"),m._uU(15,"*"),m.qZA(),m.qZA(),m.TgZ(16,"input",7),m.NdJ("ngModelChange",function(d){return o.email=d}),m.qZA(),m.qZA(),m.TgZ(17,"p"),m.TgZ(18,"label"),m._uU(19,"Contrase\xf1a"),m.TgZ(20,"span"),m._uU(21,"*"),m.qZA(),m.qZA(),m.TgZ(22,"input",8),m.NdJ("ngModelChange",function(d){return o.password=d}),m.qZA(),m.qZA(),m.TgZ(23,"p"),m.YNc(24,wV,1,0,"input",9),m.YNc(25,CV,1,0,"input",10),m.YNc(26,IV,1,0,"input",11),m.qZA(),m.TgZ(27,"div",12),m._uU(28),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&i&&(m.xp6(4),m.Q6J("ngIf",o.log),m.xp6(1),m.Q6J("ngIf",!o.log),m.xp6(11),m.s9C("value",o.email),m.Q6J("ngModel",o.email),m.xp6(6),m.s9C("value",o.password),m.Q6J("ngModel",o.password),m.xp6(2),m.Q6J("ngIf",o.log),m.xp6(1),m.Q6J("ngIf",!o.log),m.xp6(1),m.Q6J("ngIf",o.log),m.xp6(2),m.Oqu(o.alertError))},directives:[O.O5,jr,io,tc,ri,sc,Kr,Uo],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Arial,Helvetica,sans-serif;font-size:16px;font-weight:400;color:#666;background:#eaeff4}.wrapper[_ngcontent-%COMP%]{margin:0 auto;width:100%;max-width:1140px;min-height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column}.container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:600px;height:auto;display:flex;background:#ffffff;box-shadow:0 0 5px #999;background-size:cover;background-image:url(login.a1bef78d90f74ff31ab7.jpeg)}.credit[_ngcontent-%COMP%]{position:relative;margin:25px auto 0;width:100%;text-align:center;color:#666;font-size:16px;font-weight:400}.col-left[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{padding:30px;display:flex}.col-left[_ngcontent-%COMP%]{width:60%;-webkit-clip-path:polygon(0 0,0% 100%,100% 0);clip-path:polygon(0 0,0% 100%,100% 0)}.col-right[_ngcontent-%COMP%]{padding:60px 30px;width:50%;margin-left:-10%}@media (max-width: 575.98px){.container[_ngcontent-%COMP%]{flex-direction:column;box-shadow:none}.col-left[_ngcontent-%COMP%], .col-right[_ngcontent-%COMP%]{width:100%;margin:0;-webkit-clip-path:none;clip-path:none}.col-right[_ngcontent-%COMP%]{padding:30px}}.login-text[_ngcontent-%COMP%]{position:relative;width:100%;color:#fff}.login-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 15px;font-size:30px;font-weight:700}.login-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:16px;font-weight:500;line-height:22px}label[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:#fff}.login-text[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-block;padding:7px 20px;font-size:16px;letter-spacing:1px;text-decoration:none;border-radius:30px;color:#fff;outline:none;border:1px solid #ffffff;box-shadow:inset 0 0 #fff;transition:.3s;-webkit-transition:.3s}.login-text[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{color:#44c7f5;box-shadow:inset 150px 0 #fff}.login-form[_ngcontent-%COMP%]{position:relative;width:100%}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 15px;font-size:22px;font-weight:700}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;text-align:left;color:#666;font-size:15px}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin:0;padding-top:3px}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#44c7f5;font-size:14px;text-decoration:none}.login-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:2px;letter-spacing:.5px}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child   label[_ngcontent-%COMP%]{width:60%;float:left}.login-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff574e;padding-left:2px}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;height:35px;padding:0 10px;outline:none;border:1px solid #cccccc;border-radius:30px}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#ff574e}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{display:inline-block;width:100%;margin-top:5px;color:#44c7f5;font-size:16px;letter-spacing:1px;cursor:pointer;background:transparent;border:1px solid #44c7f5;border-radius:30px;box-shadow:inset 0 0 #44c7f5;transition:.3s;-webkit-transition:.3s}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .login-form[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;box-shadow:inset 250px 0 #44c7f5}"]}),s})(),SV=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=m.Xpm({type:s,selectors:[["app-quien-soy"]],decls:2,vars:0,template:function(i,o){1&i&&(m.TgZ(0,"p"),m._uU(1,"quien-soy works!"),m.qZA())},styles:[""]}),s})(),DV=(()=>{class s{constructor(i,o){this.auth=i,this.router=o}canActivate(i,o){return!!this.auth.isLoggedIn||(this.router.navigate(["login"]),!1)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(cw),m.LFG(bi.F0))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const AV=function(){return[""]};let MV=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=m.Xpm({type:s,selectors:[["app-error"]],decls:41,vars:2,consts:[[1,"fondo"],[1,"notfound-copy"],["aria-labelledby","404","alt","404 Page not found",1,"not-found"],["id","svgtitle1"],[1,"404-text"],["opacity",".5","fill","#3B3D3D"],["d","M320.1 209.5c0 7.2-6 12.5-13.7 12.5s-13.7-5.4-13.7-12.5v-16.3h-43.8c-8.4 0-14.1-6.4-14.1-13.5 0-.8.8-4.4 2-7L275 84.5c2-4.8 7.2-7.8 12.3-7.8 6.8 0 13.7 6 13.7 12.9 0 1.2 0 2.6-.8 4.4-11.5 26.7-20.9 47.6-32.4 74.2h24.9v-30.4c0-7.2 6-12.5 13.7-12.5 7.4 0 13.7 5.4 13.7 12.5v30.4h2.6c7.6 0 13.3 5.8 13.3 12.3 0 7-5.8 12.5-13.3 12.5h-2.6v16.5zM436.9 123.9v54.7c0 24.3-16.3 43.6-46 43.6s-46-19.3-46-43.6v-54.7c0-26.3 13.9-47.4 46-47.4 32.1.1 46 21.2 46 47.4zm-64.3-1.4v56.1c0 11.3 6.4 19.1 18.3 19.1s18.3-7.8 18.3-19.1v-56.1c0-12.7-5.2-21.7-18.3-21.7s-18.3 9-18.3 21.7zM535 209.5c0 7.2-6 12.5-13.7 12.5s-13.7-5.4-13.7-12.5v-16.3h-43.8c-8.4 0-14.1-6.4-14.1-13.5 0-.8.8-4.4 2-7l38.2-88.2c2-4.8 7.2-7.8 12.3-7.8 6.8 0 13.7 6 13.7 12.9 0 1.2 0 2.6-.8 4.4-11.5 26.7-20.9 47.6-32.4 74.2h24.9v-30.4c0-7.2 6-12.5 13.7-12.5 7.4 0 13.7 5.4 13.7 12.5v30.4h2.6c7.6 0 13.3 5.8 13.3 12.3 0 7-5.8 12.5-13.3 12.5H535v16.5z"],["fill","#FFF"],["d","M326.4 197.5c0 7.2-6 12.5-13.7 12.5s-13.7-5.4-13.7-12.5v-16.3h-43.8c-8.4 0-14.1-6.4-14.1-13.5 0-.8.8-4.4 2-7l38.2-88.2c2-4.8 7.2-7.8 12.3-7.8 6.8 0 13.7 6 13.7 12.9 0 1.2 0 2.6-.8 4.4-11.5 26.7-20.9 47.6-32.4 74.2H299v-30.4c0-7.2 6-12.5 13.7-12.5 7.4 0 13.7 5.4 13.7 12.5v30.4h2.6c7.6 0 13.3 5.8 13.3 12.3 0 7-5.8 12.5-13.3 12.5h-2.6v16.5zM443.2 111.9v54.7c0 24.3-16.3 43.6-46 43.6s-46-19.3-46-43.6v-54.7c0-26.3 13.9-47.4 46-47.4 32.1.1 46 21.2 46 47.4zm-64.2-1.4v56.1c0 11.3 6.4 19.1 18.3 19.1s18.3-7.8 18.3-19.1v-56.1c0-12.7-5.2-21.7-18.3-21.7s-18.3 9-18.3 21.7zM541.4 197.5c0 7.2-6 12.5-13.7 12.5-7.8 0-13.7-5.4-13.7-12.5v-16.3h-43.8c-8.4 0-14.1-6.4-14.1-13.5 0-.8.8-4.4 2-7l38.2-88.2c2-4.8 7.2-7.8 12.3-7.8 6.8 0 13.7 6 13.7 12.9 0 1.2 0 2.6-.8 4.4-11.5 26.7-20.9 47.6-32.4 74.2H514v-30.4c0-7.2 6-12.5 13.7-12.5 7.4 0 13.7 5.4 13.7 12.5v30.4h2.6c7.6 0 13.3 5.8 13.3 12.3 0 7-5.8 12.5-13.3 12.5h-2.6v16.5z"],[3,"routerLink"],["aria-labelledby","Starry sky","alt","Starry sky",1,"starry-sky"],["id","svgtitle2"],["fill","#F6F5BC",1,"all-stars"],["d","M148.9 151.5c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM93.6 ",1,"stars-one"],["d","M148.9 540.6c-4.9-1.6-6.2-6.2-6.2-6.2-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.8-.4-1zM526.3 551.7c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM617.4 291.9c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.6-6.2-6.2-6.2-6.2zM681.9 42.7c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM51.1 83.9c-.3-.3-.6-.4-1-.4s-.7.1-1 .4C47.5 88.8 43 90 43 90c-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5.1-1.6-6.3-6.1-6.3-6.1z",1,"stars-two"],["d","M148.9 151.5c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM93.6 318.5c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM132.3 169c-.2-.2-.4-.3-.6-.3s-.4.1-.6.3c-1 3.1-3.8 3.8-3.8 3.8-.2.2-.3.4-.3.6 0 .2.1.4.3.6 3.1 1 3.8 3.8 3.8 3.8.2.2.4.3.6.3s.4-.1.6-.3c1-3.1 3.8-3.8 3.8-3.8.2-.2.3-.4.3-.6 0-.2-.1-.4-.3-.6-3-.9-3.8-3.8-3.8-3.8zM585.9 269.5c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM723.4 540.6c-4.9-1.6-6.2-6.2-6.2-6.2-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.8-.4-1zM526.3 551.7c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM617.4 291.9c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.6-6.2-6.2-6.2-6.2zM681.9 42.7c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-1.6 4.9-6.2 6.2-6.2 6.2-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5-1.7-6.2-6.2-6.2-6.2zM51.1 83.9c-.3-.3-.6-.4-1-.4s-.7.1-1 .4C47.5 88.8 43 90 43 90c-.3.3-.4.6-.4 1s.1.7.4 1c4.9 1.6 6.2 6.2 6.2 6.2.3.3.6.4 1 .4s.7-.1 1-.4c1.6-4.9 6.2-6.2 6.2-6.2.3-.3.4-.6.4-1s-.1-.7-.4-1c-5.1-1.6-6.3-6.1-6.3-6.1z",1,"all-stars"],[1,"moon"],["opacity",".5","fill","#3B3D3D","d","M122.7 373.9L-237.1 744l283.8 269.4 279.9-492.8z"],["fill","#D1D5D6"],["d","M209 340.6c-70.9 0-128.4 57.5-128.4 128.4S138.1 597.4 209 597.4 337.4 539.9 337.4 469 279.9 340.6 209 340.6zm-41.9 176.1c0 10.9-8.9 19.8-19.8 19.8s-19.8-8.9-19.8-19.8c0-1.4.1-2.7.4-4-18.3-1.7-32.6-17-32.6-35.7 0-19.8 16.1-35.9 35.9-35.9 19.8 0 35.9 16.1 35.9 35.9 0 8.9-3.3 17.1-8.6 23.3 5.1 3.7 8.6 9.7 8.6 16.4zm20.2 3.9c0-8.8 7.1-16 16-16 8.8 0 16 7.1 16 16 0 8.8-7.1 16-16 16-8.9-.1-16-7.2-16-16zm5.8-43.5c0-13.3 10.7-24 24-24s24 10.7 24 24-10.7 24-24 24-24-10.8-24-24zm72.7 86.4c-4.2 0-8.2-.7-11.9-2-.5 12.8-11 23.1-24 23.1-13.3 0-24-10.7-24-24s10.7-24 24-24h1.1c-.7-2.9-1.1-5.8-1.1-8.9 0-19.8 16.1-35.9 35.9-35.9 19.8 0 35.9 16.1 35.9 35.9s-16.1 35.8-35.9 35.8zm10.9-91.1c0 2.6-2.1 4.6-4.6 4.6-2.6 0-4.6-2.1-4.6-4.6 0-2.6 2.1-4.6 4.6-4.6 2.5 0 4.6 2.1 4.6 4.6zm27.7 13.1c-2.1 2-4.9 3.2-8.1 3.2-6.5 0-11.7-5.2-11.7-11.7 0-6.5 5.2-11.7 11.7-11.7.5 0 1.1 0 1.6.1-1.5-3.6-3.2-7.1-5.1-10.5 2.5-4 3.9-8.7 3.9-13.8 0-14.6-11.8-26.4-26.4-26.4-3.6 0-7 .7-10.2 2-4.9-3.8-10.2-7.2-15.7-10.2.1 1 .2 2 .2 3.1 0 17.4-14.1 31.5-31.5 31.5-16.7 0-30.4-13-31.4-29.5 0-.7-.1-1.3-.1-2 0-3.4.5-6.6 1.5-9.6.9-2.8 2.2-5.5 3.8-7.9-2.2 0-4.3.1-6.5.2-3.8-6.7-11-11.2-19.2-11.2-11.8 0-21.5 9.3-22.1 21-17.1 7.5-32.1 18.8-43.9 32.8 14.3-50.3 60.6-87.2 115.6-87.2 66.3 0 120.1 53.8 120.1 120.1 0 29.5-10.6 56.4-28.2 77.3 3-10.5 4.6-21.5 4.6-32.9.1-9.1-.9-18.1-2.9-26.7z"],["cx","256.3","cy","384.3","r","14.1"],["cx","217.1","cy","477.1","r","24"],["d","M265.8 491.7c-19.8 0-35.9 16.1-35.9 35.9 0 3.1.4 6.1 1.1 8.9h-1.1c-13.3 0-24 10.7-24 24s10.7 24 24 24c12.9 0 23.5-10.2 24-23.1 3.7 1.3 7.7 2 11.9 2 19.8 0 35.9-16.1 35.9-35.9s-16.1-35.8-35.9-35.8zM131.2 441.2c-19.8 0-35.9 16.1-35.9 35.9 0 18.7 14.3 34.1 32.6 35.7-.3 1.3-.4 2.6-.4 4 0 10.9 8.9 19.8 19.8 19.8s19.8-8.9 19.8-19.8c0-6.8-3.4-12.8-8.6-16.3 5.4-6.3 8.6-14.4 8.6-23.3 0-20-16.1-36-35.9-36z"],["d","M331 467.9c0-66.3-53.8-120.1-120.1-120.1-54.9 0-101.3 36.9-115.6 87.2 11.8-14.1 26.9-25.4 43.9-32.8.6-11.7 10.2-21 22.1-21 8.2 0 15.4 4.5 19.2 11.2 2.2-.1 4.3-.2 6.5-.2-1.6 2.4-2.9 5.1-3.8 7.9-1 3-1.5 6.3-1.5 9.6 0 .7 0 1.3.1 2 1 16.5 14.7 29.5 31.4 29.5 17.4 0 31.5-14.1 31.5-31.5 0-1-.1-2.1-.2-3.1 5.5 3 10.7 6.4 15.7 10.2 3.1-1.3 6.6-2 10.2-2 14.6 0 26.4 11.8 26.4 26.4 0 5-1.4 9.8-3.9 13.8 1.9 3.4 3.6 6.9 5.1 10.5-.5-.1-1.1-.1-1.6-.1-6.5 0-11.7 5.2-11.7 11.7 0 6.5 5.2 11.7 11.7 11.7 3.1 0 6-1.2 8.1-3.2 2 8.6 3 17.6 3 26.8 0 11.4-1.6 22.5-4.6 32.9 17.5-21 28.1-48 28.1-77.4z"],["cx","203.2","cy","520.6","r","16"],["cx","272.1","cy","472.4","r","4.6"],["opacity",".1","fill-rule","evenodd","clip-rule","evenodd","fill","#3B3D3D","d","M201.2 368.2l-.4-.8c-.4-.7-1.4-1-2.1-.6l-80.5 46.8c-.7.4-1 1.4-.6 2.1l.4.8c.3.5.8.8 1.4.8.3 0 .5-.1.8-.2l1-.6c0 .1.1.3.2.4l24.2 41.7c.2.4.7.7 1.2.7.2 0 .5-.1.7-.2l34.1-19.8c.3-.2.5-.5.6-.8.1-.4 0-.7-.1-1l-24.2-41.7-.3-.3 43.2-25.1c.4-.2.6-.5.7-1-.1-.4-.1-.8-.3-1.2z"],["fill","#acacac","stroke","#B5B5B6","stroke-miterlimit","10","d","M200.8 369.5c-.2.6-.8 1-1.4.8l-.9-.2c-.6-.2-1-.8-.8-1.4l25.5-89.5c.2-.6.8-1 1.4-.8l.9.2c.6.2 1 .8.8 1.4l-25.5 89.5z"],["fill-rule","evenodd","clip-rule","evenodd","fill","#263563","stroke","#B5B5B6","stroke-miterlimit","10","d","M262.9 334c-.1.5-.7.8-1.2.7l-46.4-13.2c-.5-.1-.8-.7-.7-1.2l10.8-38c.1-.5.7-.8 1.2-.7l46.4 13.2c.5.1.8.7.7 1.2l-10.8 38z"],["fill-rule","evenodd","clip-rule","evenodd","fill","#263563"],["d","M249 311.1c.4.6.8 1.1 1.2 1.6.4.5.9.9.3 1.6.8.2 1.6.3 2.3.5-.1.4-.2.6-.2.9 0 .1.1.2.1.3.1-.1.2-.1.2-.2l.3-.9c.7.3 1.4.5 2.1.7.1-.8.1-.8 1-1.2.7-.3 1.3-.5 2-.8-.5-.7-.5-.7 0-1.3.1-.2.2-.4.4-.5-.5-.5-1.6.1-1.6-1.1-.4.3-.7.5-1 .7-.2.1-.4.1-.6.2 0-.2 0-.4.1-.6l.9-1.8c-.3.1-.6.1-.8.2-.2-.7-.3-1.3-.5-2-.5.5-1 .9-1.5 1.4l-.6-.6c-.1.8-.1 1.5-.2 2.3 0 .1-.1.3-.2.4-.1-.1-.3-.2-.3-.3-.2-.4-.3-.8-.5-1.2-.6.5-.6.5-1.3.2-.2-.1-.4-.1-.6-.2-.4.5.4 1.5-1 1.7z"],["d","M260.2 298.6c-.6 1.1-1.2 2.2-1.8 3.4-.6 1.3-1.3 2.5-1.9 3.8-.4.8-.5.9-1.4.4.2-.8.4-1.6.5-2.4.1-.5.1-1 .2-1.5.1-1.8-1.4-3.7-3.2-3.9-.1 0-.4.2-.5.3-.9 1.6-1.7 3.3-2.5 5 0 .1-.1.2-.1.2-.2.2-.1.6-.6.4-.4-.2-.1-.4-.1-.7.2-.9.4-1.8.5-2.8 0-.7-.1-1.4-.3-2.1-.1-.4-.3-.5-.8-.4-1.8.7-3.3 1.7-4.5 3.1-2.5 2.6-4.3 5.6-5.2 9.1-.5 1.9-.5 3.8.3 5.6.8 1.7 1.2 1.8 2.8.8.7-.4 1.3-.9 2-1.4.3-.2.6-.3 1 0-1.2 1-2.4 2-3.7 2.9.7.6 1.6.8 2.6 1 2.5.4 4.6-.7 6.4-2.3.7-.6 1.2-.5 1.9-.2v.1c-2 2.2-4.2 4.1-7.3 4.3-2.3.2-4.4-.4-6.4-1.8-.2-.2-.5-.3-.8-.3-5.5.1-9.3-3.9-9-9.4 0-.7.1-1.4.2-2 .2-.6.4-1.3.5-1.9.1-.2.2-.3.3-.5.6-1.2 1.1-2.5 1.9-3.6 2.5-3.8 5.9-6.4 10.5-7.2 1.9-.3 3.9-.3 5.6.6 1.1.6 2.1.7 3.3.7.6 0 1.2.1 1.8.1.5.1.9.3 1.4.4.2.1.5.3.7.4.8.6 1.6 1.1 2.4 1.7.4.3.8.4 1.2.1.4-.2.7-.5 1.1-.7.3.5.7.6 1 .7zm-13.4-2c-.7-.5-2.1-.7-3.4-.6-2.1.2-3.8 1.2-5.3 2.4-2.4 2-4.2 4.6-5.5 7.5-.8 1.7-1.3 3.5-1.3 5.4 0 2.5.8 4.6 3.1 5.9.6.3 1.2.5 1.9.8 0-.1.1-.1.1-.2s-.1-.2-.1-.2c-1-1.5-1.4-3.1-1.4-4.9-.1-2.3.5-4.5 1.5-6.6 1.6-3.3 3.9-6.1 7.1-8 .9-.5 2.1-.9 3.3-1.5z"],["d","M249 311.1c1.4-.1.5-1.1.8-1.8.2.1.4.1.6.2.7.3.7.3 1.3-.2.2.4.3.8.5 1.2l.3.3c.1-.1.2-.3.2-.4.1-.7.1-1.5.2-2.3l.6.6c.5-.4 1-.9 1.5-1.4.2.7.4 1.3.5 2 .3-.1.5-.1.8-.2-.3.7-.6 1.2-.9 1.8-.1.2-.1.4-.1.6.2-.1.4-.1.6-.2.3-.2.6-.4 1-.7 0 1.2 1.1.7 1.6 1.1-.1.2-.2.3-.4.5-.5.7-.5.7 0 1.3-.7.3-1.3.5-2 .8-.8.3-.8.3-1 1.2-.7-.2-1.3-.5-2.1-.7l-.3.9c0 .1-.2.2-.2.2 0-.1-.1-.2-.1-.3 0-.3.1-.5.2-.9-.7-.2-1.5-.3-2.3-.5.6-.7.1-1.2-.3-1.6-.1-.5-.5-1-1-1.5z"]],template:function(i,o){1&i&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.O4$(),m.TgZ(2,"svg",2),m.TgZ(3,"title",3),m._uU(4,"404 Page not found"),m.qZA(),m.TgZ(5,"g",4),m.TgZ(6,"g",5),m._UZ(7,"path",6),m.qZA(),m.TgZ(8,"g",7),m._UZ(9,"path",8),m.qZA(),m.qZA(),m.qZA(),m.kcU(),m.TgZ(10,"h1"),m._uU(11,"page not found"),m.qZA(),m.TgZ(12,"p"),m.TgZ(13,"a",9),m._uU(14,"Home"),m.qZA(),m.qZA(),m.qZA(),m.O4$(),m.TgZ(15,"svg",10),m.TgZ(16,"title",11),m._uU(17,"Starry sky"),m.qZA(),m.TgZ(18,"g",12),m._UZ(19,"path",13),m._UZ(20,"path",14),m._UZ(21,"path",15),m.qZA(),m.TgZ(22,"g",16),m._UZ(23,"path",17),m.TgZ(24,"g",18),m._UZ(25,"path",19),m._UZ(26,"circle",20),m.qZA(),m.TgZ(27,"g",7),m._UZ(28,"circle",21),m._UZ(29,"path",22),m._UZ(30,"path",23),m._UZ(31,"circle",24),m._UZ(32,"circle",25),m.qZA(),m._UZ(33,"path",26),m.TgZ(34,"g"),m._UZ(35,"path",27),m._UZ(36,"path",28),m.TgZ(37,"g",29),m._UZ(38,"path",30),m._UZ(39,"path",31),m._UZ(40,"path",32),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&i&&(m.xp6(13),m.Q6J("routerLink",m.DdM(1,AV)))},directives:[bi.yS],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;background-color:#0a1821;height:100vh;width:100vw;font-family:Roboto,Arial,sans-serif;color:#fff;text-align:center}.not-found[_ngcontent-%COMP%]{width:560px;height:225px;margin-right:-10px}.starry-sky[_ngcontent-%COMP%]{display:block;width:100vw;height:100vh;object-fit:cover}.search-icon[_ngcontent-%COMP%]{display:inline-block}.notfound-copy[_ngcontent-%COMP%]{color:#fff;position:fixed;top:25px;right:10%;text-align:right}h1[_ngcontent-%COMP%]{font-weight:700;font-size:40px}a[_ngcontent-%COMP%]{font-weight:300;color:#fff;border-bottom:1.5px solid #5581d4;text-decoration:none}a[_ngcontent-%COMP%]:hover{font-weight:300;color:#fff;border-bottom:2px solid #fff;text-decoration:none}.all-stars[_ngcontent-%COMP%]{animation:blinkblink 7s linear infinite}@keyframes blinkblink{50%{opacity:.1}}input[type=text][_ngcontent-%COMP%]{color:#fff;background-color:#0a1821;padding:5px;border:none;border-bottom:2px solid #ccc;font-size:18px}input[type=text][_ngcontent-%COMP%]:focus{border-color:none;border-bottom:2px solid #ccc}.fondo[_ngcontent-%COMP%]{background-color:#0a1821}"]}),s})();var RV=H(8819),xV=H(5197),OV=H(509);class PV{constructor(r,i){this.observables=r,this.project=i}call(r,i){return i.subscribe(new kV(r,this.observables,this.project))}}class kV extends xV.L{constructor(r,i,o){super(r),this.observables=i,this.project=o,this.toRespond=[];const c=i.length;this.values=new Array(c);for(let d=0;d<c;d++)this.toRespond.push(d);for(let d=0;d<c;d++)this.add((0,OV.D)(this,i[d],void 0,d))}notifyNext(r,i,o){this.values[o]=i;const c=this.toRespond;if(c.length>0){const d=c.indexOf(o);-1!==d&&c.splice(d,1)}}notifyComplete(){}_next(r){if(0===this.toRespond.length){const i=[r,...this.values];this.project?this._tryProject(i):this.destination.next(i)}}_tryProject(r){let i;try{i=this.project.apply(this,r)}catch(o){return void this.destination.error(o)}this.destination.next(i)}}class LV{constructor(r){this.predicate=r}call(r,i){return i.subscribe(new VV(r,this.predicate))}}class VV extends au.L{constructor(r,i){super(r),this.predicate=i,this.skipping=!0,this.index=0}_next(r){const i=this.destination;this.skipping&&this.tryCallPredicate(r),this.skipping||i.next(r)}tryCallPredicate(r){try{const i=this.predicate(r,this.index++);this.skipping=Boolean(i)}catch(i){this.destination.error(i)}}}let xR="";function kP(s){xR=s}class jV{constructor(r){this.domStorage_=r,this.prefix_="firebase:"}set(r,i){null==i?this.domStorage_.removeItem(this.prefixedName_(r)):this.domStorage_.setItem(this.prefixedName_(r),(0,J.Pz)(i))}get(r){const i=this.domStorage_.getItem(this.prefixedName_(r));return null==i?null:(0,J.cI)(i)}remove(r){this.domStorage_.removeItem(this.prefixedName_(r))}prefixedName_(r){return this.prefix_+r}toString(){return this.domStorage_.toString()}}class HV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(r,i){null==i?delete this.cache_[r]:this.cache_[r]=i}get(r){return(0,J.r3)(this.cache_,r)?this.cache_[r]:null}remove(r){delete this.cache_[r]}}const FP=function(s){try{if("undefined"!=typeof window&&void 0!==window[s]){const r=window[s];return r.setItem("firebase:sentinel","cache"),r.removeItem("firebase:sentinel"),new jV(r)}}catch(r){}return new HV},mm=FP("localStorage"),OR=FP("sessionStorage"),fv=new po.Yd("@firebase/database"),LP=function(){let s=1;return function(){return s++}}(),VP=function(s){const r=(0,J.dS)(s),i=new J.gQ;i.update(r);const o=i.digest();return J.US.encodeByteArray(o)},p0=function(...s){let r="";for(let i=0;i<s.length;i++){const o=s[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=p0.apply(null,o):r+="object"==typeof o?(0,J.Pz)(o):o,r+=" "}return r};let _m=null,BP=!0;const UP=function(s,r){(0,J.hu)(!r||!0===s||!1===s,"Can't turn on custom loggers persistently."),!0===s?(fv.logLevel=po.in.VERBOSE,_m=fv.log.bind(fv),r&&OR.set("logging_enabled",!0)):"function"==typeof s?_m=s:(_m=null,OR.remove("logging_enabled"))},_s=function(...s){if(!0===BP&&(BP=!1,null===_m&&!0===OR.get("logging_enabled")&&UP(!0)),_m){const r=p0.apply(null,s);_m(r)}},g0=function(s){return function(...r){_s(s,...r)}},NR=function(...s){const r="FIREBASE INTERNAL ERROR: "+p0(...s);fv.error(r)},Ku=function(...s){const r=`FIREBASE FATAL ERROR: ${p0(...s)}`;throw fv.error(r),new Error(r)},Ao=function(...s){const r="FIREBASE WARNING: "+p0(...s);fv.warn(r)},gD=function(s){return"number"==typeof s&&(s!=s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},Nh="[MIN_NAME]",Zu="[MAX_NAME]",ym=function(s,r){if(s===r)return 0;if(s===Nh||r===Zu)return-1;if(r===Nh||s===Zu)return 1;{const i=mD(s),o=mD(r);return null!==i?null!==o?i-o==0?s.length-r.length:i-o:-1:null!==o?1:s<r?-1:1}},zV=function(s,r){return s===r?0:s<r?-1:1},m0=function(s,r){if(r&&s in r)return r[s];throw new Error("Missing required key ("+s+") in object: "+(0,J.Pz)(r))},PR=function(s){if("object"!=typeof s||null===s)return(0,J.Pz)(s);const r=[];for(const o in s)r.push(o);r.sort();let i="{";for(let o=0;o<r.length;o++)0!==o&&(i+=","),i+=(0,J.Pz)(r[o]),i+=":",i+=PR(s[r[o]]);return i+="}",i},jP=function(s,r){const i=s.length;if(i<=r)return[s];const o=[];for(let c=0;c<i;c+=r)o.push(s.substring(c,c+r>i?i:c+r));return o};function ys(s,r){for(const i in s)s.hasOwnProperty(i)&&r(i,s[i])}const HP=function(s){(0,J.hu)(!gD(s),"Invalid JSON number");const o=1023;let c,d,g,v,w;0===s?(d=0,g=0,c=1/s==-1/0?1:0):(c=s<0,(s=Math.abs(s))>=Math.pow(2,1-o)?(v=Math.min(Math.floor(Math.log(s)/Math.LN2),o),d=v+o,g=Math.round(s*Math.pow(2,52-v)-Math.pow(2,52))):(d=0,g=Math.round(s/Math.pow(2,-1074))));const R=[];for(w=52;w;w-=1)R.push(g%2?1:0),g=Math.floor(g/2);for(w=11;w;w-=1)R.push(d%2?1:0),d=Math.floor(d/2);R.push(c?1:0),R.reverse();const F=R.join("");let j="";for(w=0;w<64;w+=8){let Q=parseInt(F.substr(w,8),2).toString(16);1===Q.length&&(Q="0"+Q),j+=Q}return j.toLowerCase()},ZV=new RegExp("^-?(0*)\\d{1,10}$"),GP=-2147483648,kR=2147483647,mD=function(s){if(ZV.test(s)){const r=Number(s);if(r>=GP&&r<=kR)return r}return null},pv=function(s){try{s()}catch(r){setTimeout(()=>{throw Ao("Exception was thrown by user callback.",r.stack||""),r},Math.floor(0))}},_0=function(s,r){const i=setTimeout(s,r);return"object"==typeof i&&i.unref&&i.unref(),i};class QV{constructor(r,i){this.appName_=r,this.appCheckProvider=i,this.appCheck=null==i?void 0:i.getImmediate({optional:!0}),this.appCheck||null==i||i.get().then(o=>this.appCheck=o)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((i,o)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(i,o):i(null)},0)})}addTokenChangeListener(r){var i;null===(i=this.appCheckProvider)||void 0===i||i.get().then(o=>o.addTokenListener(r))}notifyForInvalidToken(){Ao(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class JV{constructor(r,i,o){this.appName_=r,this.firebaseOptions_=i,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(c=>this.auth_=c)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(i=>i&&"auth/token-not-initialized"===i.code?(_s("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,o)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(i,o):i(null)},0)})}addTokenChangeListener(r){this.auth_?this.auth_.addAuthTokenListener(r):this.authProvider_.get().then(i=>i.addAuthTokenListener(r))}removeTokenChangeListener(r){this.authProvider_.get().then(i=>i.removeAuthTokenListener(r))}notifyForInvalidToken(){let r='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';r+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ao(r)}}let y0=(()=>{class s{constructor(i){this.accessToken=i}getToken(i){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(i){i(this.accessToken)}removeTokenChangeListener(i){}notifyForInvalidToken(){}}return s.OWNER="owner",s})();const KP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YP="websocket",QP="long_polling";class JP{constructor(r,i,o,c,d=!1,g="",v=!1){this.secure=i,this.namespace=o,this.webSocketOnly=c,this.nodeAdmin=d,this.persistenceKey=g,this.includeNamespaceInQueryParams=v,this._host=r.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mm.get("host:"+r)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(r){r!==this.internalHost&&(this.internalHost=r,this.isCacheableHost()&&mm.set("host:"+this._host,this.internalHost))}toString(){let r=this.toURLString();return this.persistenceKey&&(r+="<"+this.persistenceKey+">"),r}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function XP(s,r,i){let o;if((0,J.hu)("string"==typeof r,"typeof type must == string"),(0,J.hu)("object"==typeof i,"typeof params must == object"),r===YP)o=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else{if(r!==QP)throw new Error("Unknown connection type: "+r);o=(s.secure?"https://":"http://")+s.internalHost+"/.lp?"}(function(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams})(s)&&(i.ns=s.namespace);const c=[];return ys(i,(d,g)=>{c.push(d+"="+g)}),o+c.join("&")}class tB{constructor(){this.counters_={}}incrementCounter(r,i=1){(0,J.r3)(this.counters_,r)||(this.counters_[r]=0),this.counters_[r]+=i}get(){return(0,J.p$)(this.counters_)}}const LR={},VR={};function BR(s){const r=s.toString();return LR[r]||(LR[r]=new tB),LR[r]}class rB{constructor(r){this.onMessage_=r,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(r,i){this.closeAfterResponse=r,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(r,i){for(this.pendingResponses[r]=i;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let c=0;c<o.length;++c)o[c]&&pv(()=>{this.onMessage_(o[c])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class gv{constructor(r,i,o,c,d,g,v){this.connId=r,this.repoInfo=i,this.applicationId=o,this.appCheckToken=c,this.authToken=d,this.transportSessionId=g,this.lastSessionId=v,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=g0(r),this.stats_=BR(i),this.urlFn=w=>(this.appCheckToken&&(w.ac=this.appCheckToken),XP(i,QP,w))}open(r,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new rB(r),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(s){if((0,J.Yr)()||"complete"===document.readyState)s();else{let r=!1;const i=function(){document.body?r||(r=!0,s()):setTimeout(i,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&i()}),window.attachEvent("onload",i))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new UR((...d)=>{const[g,v,w,R,F]=d;if(this.incrementIncomingBytes_(d),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===g)this.id=v,this.password=w;else{if("close"!==g)throw new Error("Unrecognized command received: "+g);v?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(v,()=>{this.onClosed_()})):this.onClosed_()}},(...d)=>{const[g,v]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(g,v)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&KP.test(location.hostname)&&(o.r="f");const c=this.urlFn(o);this.log_("Connecting via long-poll to "+c),this.scriptTagHolder.addTag(c,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gv.forceAllow_=!0}static forceDisallow(){gv.forceDisallow_=!0}static isAvailable(){return!((0,J.Yr)()||!gv.forceAllow_&&(gv.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(r){const i=(0,J.Pz)(r);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const o=(0,J.h$)(i),c=jP(o,1840);for(let d=0;d<c.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,c.length,c[d]),this.curSegmentNum++}addDisconnectPingFrame(r,i){if((0,J.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=r,o.pw=i,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(r){const i=(0,J.Pz)(r).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class UR{constructor(r,i,o,c){if(this.onDisconnect=o,this.urlFn=c,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=r,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=LP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=r,window["pRTLPCB"+this.uniqueCallbackIdentifier]=i,this.myIFrame=UR.createIFrame_();let d="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(d='<script>document.domain="'+document.domain+'";<\/script>');const g="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(g),this.myIFrame.doc.close()}catch(v){_s("frame writing exception"),v.stack&&_s(v.stack),_s(v)}}}static createIFrame_(){const r=document.createElement("iframe");if(r.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(r);try{r.contentWindow.document||_s("No IE domain setting required")}catch(i){const o=document.domain;r.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return r.contentDocument?r.doc=r.contentDocument:r.contentWindow?r.doc=r.contentWindow.document:r.document&&(r.doc=r.document),r}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const r=this.onDisconnect;r&&(this.onDisconnect=null,r())}startLongPoll(r,i){for(this.myID=r,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const r={};r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial;let i=this.urlFn(r),o="",c=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const g=this.pendingSegs.shift();o=o+"&seg"+c+"="+g.seg+"&ts"+c+"="+g.ts+"&d"+c+"="+g.d,c++}return i+=o,this.addLongPollTag_(i,this.currentSerial),!0}return!1}enqueueSegment(r,i,o){this.pendingSegs.push({seg:r,ts:i,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(r,i){this.outstandingRequests.add(i);const o=()=>{this.outstandingRequests.delete(i),this.newRequest_()},c=setTimeout(o,Math.floor(25e3));this.addTag(r,()=>{clearTimeout(c),o()})}addTag(r,i){(0,J.Yr)()?this.doNodeLongPoll(r,i):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=r,o.onload=o.onreadystatechange=function(){const c=o.readyState;(!c||"loaded"===c||"complete"===c)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),i())},o.onerror=()=>{_s("Long-poll script failed to load: "+r),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch(o){}},Math.floor(1))}}let v0=null;"undefined"!=typeof MozWebSocket?v0=MozWebSocket:"undefined"!=typeof WebSocket&&(v0=WebSocket);let E0=(()=>{class s{constructor(i,o,c,d,g,v,w){this.connId=i,this.applicationId=c,this.appCheckToken=d,this.authToken=g,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=g0(this.connId),this.stats_=BR(o),this.connURL=s.connectionURL_(o,v,w,d),this.nodeAdmin=o.nodeAdmin}static connectionURL_(i,o,c,d){const g={v:"5"};return!(0,J.Yr)()&&"undefined"!=typeof location&&location.hostname&&KP.test(location.hostname)&&(g.r="f"),o&&(g.s=o),c&&(g.ls=c),d&&(g.ac=d),XP(i,YP,g)}open(i,o){this.onDisconnect=o,this.onMessage=i,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mm.set("previous_websocket_failure",!0);try{if((0,J.Yr)()){const d={headers:{"User-Agent":`Firebase/5/${xR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const g=process.env,v=0===this.connURL.indexOf("wss://")?g.HTTPS_PROXY||g.https_proxy:g.HTTP_PROXY||g.http_proxy;v&&(d.proxy={origin:v}),this.mySock=new v0(this.connURL,[],d)}else this.mySock=new v0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");const d=c.message||c.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=c=>{this.handleIncomingFrame(c)},this.mySock.onerror=c=>{this.log_("WebSocket error.  Closing connection.");const d=c.message||c.data;d&&this.log_(d),this.onClosed_()}}start(){}static forceDisallow(){s.forceDisallow_=!0}static isAvailable(){let i=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const c=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);c&&c.length>1&&parseFloat(c[1])<4.4&&(i=!0)}return!i&&null!==v0&&!s.forceDisallow_}static previouslyFailed(){return mm.isInMemoryStorage||!0===mm.get("previous_websocket_failure")}markConnectionHealthy(){mm.remove("previous_websocket_failure")}appendFrame_(i){if(this.frames.push(i),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const c=(0,J.cI)(o);this.onMessage(c)}}handleNewFrameCount_(i){this.totalFrames=i,this.frames=[]}extractFrameCount_(i){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),i.length<=6){const o=Number(i);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),i}handleIncomingFrame(i){if(null===this.mySock)return;const o=i.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const c=this.extractFrameCount_(o);null!==c&&this.appendFrame_(c)}}send(i){this.resetKeepAlive();const o=(0,J.Pz)(i);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const c=jP(o,16384);c.length>1&&this.sendString_(String(c.length));for(let d=0;d<c.length;d++)this.sendString_(c[d])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(i){try{this.mySock.send(i)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return s.responsesRequiredToBeHealthy=2,s.healthyTimeout=3e4,s})();class jR{constructor(r){this.initTransports_(r)}static get ALL_TRANSPORTS(){return[gv,E0]}initTransports_(r){const i=E0&&E0.isAvailable();let o=i&&!E0.previouslyFailed();if(r.webSocketOnly&&(i||Ao("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[E0];else{const c=this.transports_=[];for(const d of jR.ALL_TRANSPORTS)d&&d.isAvailable()&&c.push(d)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class IB{constructor(r,i,o,c,d,g,v,w,R,F){this.id=r,this.repoInfo_=i,this.applicationId_=o,this.appCheckToken_=c,this.authToken_=d,this.onMessage_=g,this.onReady_=v,this.onDisconnect_=w,this.onKill_=R,this.lastSessionId=F,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=g0("c:"+this.id+":"),this.transportManager_=new jR(i),this.log_("Connection created"),this.start_()}start_(){const r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,o)},Math.floor(0));const c=r.healthyTimeout||0;c>0&&(this.healthyTimeout_=_0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(c)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(r){return i=>{r===this.conn_?this.onConnectionLost_(i):r===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(r){return i=>{2!==this.state_&&(r===this.rx_?this.onPrimaryMessageReceived_(i):r===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(r){this.sendData_({t:"d",d:r})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(r){if("t"in r){const i=r.t;"a"===i?this.upgradeIfSecondaryHealthy_():"r"===i?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===i&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(r){const i=m0("t",r),o=m0("d",r);if("c"===i)this.onSecondaryControl_(o);else{if("d"!==i)throw new Error("Unknown protocol layer: "+i);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(r){const i=m0("t",r),o=m0("d",r);"c"===i?this.onControl_(o):"d"===i&&this.onDataMessage_(o)}onDataMessage_(r){this.onPrimaryResponse_(),this.onMessage_(r)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(r){const i=m0("t",r);if("d"in r){const o=r.d;if("h"===i)this.onHandshake_(o);else if("n"===i){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let c=0;c<this.pendingDataMessages.length;++c)this.onDataMessage_(this.pendingDataMessages[c]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===i?this.onConnectionShutdown_(o):"r"===i?this.onReset_(o):"e"===i?NR("Server Error: "+o):"o"===i?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):NR("Unknown control packet command: "+i)}}onHandshake_(r){const i=r.ts,o=r.v,c=r.h;this.sessionId=r.s,this.repoInfo_.host=c,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),"5"!==o&&Ao("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const r=this.transportManager_.upgradeTransport();r&&this.startUpgrade_(r)}startUpgrade_(r){this.secondaryConn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,o),_0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(r){this.log_("Reset packet received.  New host: "+r),this.repoInfo_.host=r,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(r,i){this.log_("Realtime connection established."),this.conn_=r,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const r=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===r||this.rx_===r)&&this.close()}onConnectionLost_(r){this.conn_=null,r||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(r){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(r),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(r){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(r)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class hk{put(r,i,o,c){}merge(r,i,o,c){}refreshAuthToken(r){}refreshAppCheckToken(r){}onDisconnectPut(r,i,o){}onDisconnectMerge(r,i,o){}onDisconnectCancel(r,i){}reportStats(r){}}class fk{constructor(r){this.allowedEvents_=r,this.listeners_={},(0,J.hu)(Array.isArray(r)&&r.length>0,"Requires a non-empty array")}trigger(r,...i){if(Array.isArray(this.listeners_[r])){const o=[...this.listeners_[r]];for(let c=0;c<o.length;c++)o[c].callback.apply(o[c].context,i)}}on(r,i,o){this.validateEventType_(r),this.listeners_[r]=this.listeners_[r]||[],this.listeners_[r].push({callback:i,context:o});const c=this.getInitialEvent(r);c&&i.apply(o,c)}off(r,i,o){this.validateEventType_(r);const c=this.listeners_[r]||[];for(let d=0;d<c.length;d++)if(c[d].callback===i&&(!o||o===c[d].context))return void c.splice(d,1)}validateEventType_(r){(0,J.hu)(this.allowedEvents_.find(i=>i===r),"Unknown event: "+r)}}class yD extends fk{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,J.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yD}getInitialEvent(r){return(0,J.hu)("online"===r,"Unknown event type: "+r),[this.online_]}currentlyOnline(){return this.online_}}class $n{constructor(r,i){if(void 0===i){this.pieces_=r.split("/");let o=0;for(let c=0;c<this.pieces_.length;c++)this.pieces_[c].length>0&&(this.pieces_[o]=this.pieces_[c],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=r,this.pieceNum_=i}toString(){let r="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)""!==this.pieces_[i]&&(r+="/"+this.pieces_[i]);return r||"/"}}function Fn(){return new $n("")}function gn(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function up(s){return s.pieces_.length-s.pieceNum_}function _r(s){let r=s.pieceNum_;return r<s.pieces_.length&&r++,new $n(s.pieces_,r)}function GR(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function b0(s,r=0){return s.pieces_.slice(s.pieceNum_+r)}function mk(s){if(s.pieceNum_>=s.pieces_.length)return null;const r=[];for(let i=s.pieceNum_;i<s.pieces_.length-1;i++)r.push(s.pieces_[i]);return new $n(r,0)}function Wr(s,r){const i=[];for(let o=s.pieceNum_;o<s.pieces_.length;o++)i.push(s.pieces_[o]);if(r instanceof $n)for(let o=r.pieceNum_;o<r.pieces_.length;o++)i.push(r.pieces_[o]);else{const o=r.split("/");for(let c=0;c<o.length;c++)o[c].length>0&&i.push(o[c])}return new $n(i,0)}function mn(s){return s.pieceNum_>=s.pieces_.length}function Mo(s,r){const i=gn(s),o=gn(r);if(null===i)return r;if(i===o)return Mo(_r(s),_r(r));throw new Error("INTERNAL ERROR: innerPath ("+r+") is not within outerPath ("+s+")")}function SB(s,r){const i=b0(s,0),o=b0(r,0);for(let c=0;c<i.length&&c<o.length;c++){const d=ym(i[c],o[c]);if(0!==d)return d}return i.length===o.length?0:i.length<o.length?-1:1}function $R(s,r){if(up(s)!==up(r))return!1;for(let i=s.pieceNum_,o=r.pieceNum_;i<=s.pieces_.length;i++,o++)if(s.pieces_[i]!==r.pieces_[o])return!1;return!0}function Fl(s,r){let i=s.pieceNum_,o=r.pieceNum_;if(up(s)>up(r))return!1;for(;i<s.pieces_.length;){if(s.pieces_[i]!==r.pieces_[o])return!1;++i,++o}return!0}class DB{constructor(r,i){this.errorPrefix_=i,this.parts_=b0(r,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,J.ug)(this.parts_[o]);_k(this)}}function _k(s){if(s.byteLength_>768)throw new Error(s.errorPrefix_+"has a key path longer than 768 bytes ("+s.byteLength_+").");if(s.parts_.length>32)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vm(s))}function vm(s){return 0===s.parts_.length?"":"in property '"+s.parts_.join(".")+"'"}class zR extends fk{constructor(){let r,i;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(i="visibilitychange",r="hidden"):void 0!==document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):void 0!==document.msHidden?(i="msvisibilitychange",r="msHidden"):void 0!==document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const o=!document[r];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new zR}getInitialEvent(r){return(0,J.hu)("visible"===r,"Unknown event type: "+r),[this.visible_]}}const w0=1e3;let ED,mv=(()=>{class s extends hk{constructor(i,o,c,d,g,v,w,R){if(super(),this.repoInfo_=i,this.applicationId_=o,this.onDataUpdate_=c,this.onConnectStatus_=d,this.onServerInfoUpdate_=g,this.authTokenProvider_=v,this.appCheckTokenProvider_=w,this.authOverride_=R,this.id=s.nextPersistentConnectionId_++,this.log_=g0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=w0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,R&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zR.getInstance().on("visible",this.onVisible_,this),-1===i.host.indexOf("fblocal")&&yD.getInstance().on("online",this.onOnline_,this)}sendRequest(i,o,c){const d=++this.requestNumber_,g={r:d,a:i,b:o};this.log_((0,J.Pz)(g)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(g),c&&(this.requestCBHash_[d]=c)}get(i){this.initConnection_();const o=new J.BH,c={p:i._path.toString(),q:i._queryObject},d={action:"g",request:c,onComplete:v=>{const w=v.d;"ok"===v.s?(this.onDataUpdate_(c.p,w,!1,null),o.resolve(w)):o.reject(w)}};this.outstandingGets_.push(d),this.outstandingGetCount_++;const g=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const v=this.outstandingGets_[g];void 0===v||d!==v||(delete this.outstandingGets_[g],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+g+" timed out on connection"),o.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(g),o.promise}listen(i,o,c,d){this.initConnection_();const g=i._queryIdentifier,v=i._path.toString();this.log_("Listen called for "+v+" "+g),this.listens.has(v)||this.listens.set(v,new Map),(0,J.hu)(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(v).has(g),"listen() called twice for same path/queryId.");const w={onComplete:d,hashFn:o,query:i,tag:c};this.listens.get(v).set(g,w),this.connected_&&this.sendListen_(w)}sendGet_(i){const o=this.outstandingGets_[i];this.sendRequest("g",o.request,c=>{delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(c)})}sendListen_(i){const o=i.query,c=o._path.toString(),d=o._queryIdentifier;this.log_("Listen on "+c+" for "+d);const g={p:c};i.tag&&(g.q=o._queryObject,g.t=i.tag),g.h=i.hashFn(),this.sendRequest("q",g,w=>{const R=w.d,F=w.s;s.warnOnListenWarnings_(R,o),(this.listens.get(c)&&this.listens.get(c).get(d))===i&&(this.log_("listen response",w),"ok"!==F&&this.removeListen_(c,d),i.onComplete&&i.onComplete(F,R))})}static warnOnListenWarnings_(i,o){if(i&&"object"==typeof i&&(0,J.r3)(i,"w")){const c=(0,J.DV)(i,"w");if(Array.isArray(c)&&~c.indexOf("no_index")){const d='".indexOn": "'+o._queryParams.getIndex().toString()+'"',g=o._path.toString();Ao(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${d} at ${g} to your security rules for better performance.`)}}}refreshAuthToken(i){this.authToken_=i,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(i)}reduceReconnectDelayIfAdminCredential_(i){(i&&40===i.length||(0,J.GJ)(i))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(i){this.appCheckToken_=i,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const i=this.authToken_,o=(0,J.w9)(i)?"auth":"gauth",c={cred:i};null===this.authOverride_?c.noauth=!0:"object"==typeof this.authOverride_&&(c.authvar=this.authOverride_),this.sendRequest(o,c,d=>{const g=d.s,v=d.d||"error";this.authToken_===i&&("ok"===g?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(g,v))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},i=>{const o=i.s,c=i.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,c)})}unlisten(i,o){const c=i._path.toString(),d=i._queryIdentifier;this.log_("Unlisten called for "+c+" "+d),(0,J.hu)(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(c,d)&&this.connected_&&this.sendUnlisten_(c,d,i._queryObject,o)}sendUnlisten_(i,o,c,d){this.log_("Unlisten on "+i+" for "+o);const g={p:i};d&&(g.q=c,g.t=d),this.sendRequest("n",g)}onDisconnectPut(i,o,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",i,o,c):this.onDisconnectRequestQueue_.push({pathString:i,action:"o",data:o,onComplete:c})}onDisconnectMerge(i,o,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",i,o,c):this.onDisconnectRequestQueue_.push({pathString:i,action:"om",data:o,onComplete:c})}onDisconnectCancel(i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",i,null,o):this.onDisconnectRequestQueue_.push({pathString:i,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(i,o,c,d){const g={p:o,d:c};this.log_("onDisconnect "+i,g),this.sendRequest(i,g,v=>{d&&setTimeout(()=>{d(v.s,v.d)},Math.floor(0))})}put(i,o,c,d){this.putInternal("p",i,o,c,d)}merge(i,o,c,d){this.putInternal("m",i,o,c,d)}putInternal(i,o,c,d,g){this.initConnection_();const v={p:o,d:c};void 0!==g&&(v.h=g),this.outstandingPuts_.push({action:i,request:v,onComplete:d}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(i){const o=this.outstandingPuts_[i].action,c=this.outstandingPuts_[i].request,d=this.outstandingPuts_[i].onComplete;this.outstandingPuts_[i].queued=this.connected_,this.sendRequest(o,c,g=>{this.log_(o+" response",g),delete this.outstandingPuts_[i],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),d&&d(g.s,g.d)})}reportStats(i){if(this.connected_){const o={c:i};this.log_("reportStats",o),this.sendRequest("s",o,c=>{"ok"!==c.s&&this.log_("reportStats","Error sending stats: "+c.d)})}}onDataMessage_(i){if("r"in i){this.log_("from server: "+(0,J.Pz)(i));const o=i.r,c=this.requestCBHash_[o];c&&(delete this.requestCBHash_[o],c(i.b))}else{if("error"in i)throw"A server-side error has occurred: "+i.error;"a"in i&&this.onDataPush_(i.a,i.b)}}onDataPush_(i,o){this.log_("handleServerMessage",i,o),"d"===i?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===i?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===i?this.onListenRevoked_(o.p,o.q):"ac"===i?this.onAuthRevoked_(o.s,o.d):"apc"===i?this.onAppCheckRevoked_(o.s,o.d):"sd"===i?this.onSecurityDebugPacket_(o):NR("Unrecognized action received from server: "+(0,J.Pz)(i)+"\nAre you using the latest client?")}onReady_(i,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(i),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(i){(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(i))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(i){i&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=w0,this.realtime_||this.scheduleConnect_(0)),this.visible_=i}onOnline_(i){i?(this.log_("Browser went online."),this.reconnectDelay_=w0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=w0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const i=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-i);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var i=this;return(0,He.Z)(function*(){if(i.shouldReconnect_()){i.log_("Making a connection attempt"),i.lastConnectionAttemptTime_=(new Date).getTime(),i.lastConnectionEstablishedTime_=null;const o=i.onDataMessage_.bind(i),c=i.onReady_.bind(i),d=i.onRealtimeDisconnect_.bind(i),g=i.id+":"+s.nextConnectionId_++,v=i.lastSessionId;let w=!1,R=null;const F=function(){R?R.close():(w=!0,d())};i.realtime_={close:F,sendRequest:function(de){(0,J.hu)(R,"sendRequest call when we're not connected not allowed."),R.sendRequest(de)}};const Q=i.forceTokenRefresh_;i.forceTokenRefresh_=!1;try{const[de,ge]=yield Promise.all([i.authTokenProvider_.getToken(Q),i.appCheckTokenProvider_.getToken(Q)]);w?_s("getToken() completed but was canceled"):(_s("getToken() completed. Creating connection."),i.authToken_=de&&de.accessToken,i.appCheckToken_=ge&&ge.token,R=new IB(g,i.repoInfo_,i.applicationId_,i.appCheckToken_,i.authToken_,o,c,d,Ne=>{Ao(Ne+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")},v))}catch(de){i.log_("Failed to get token: "+de),w||(i.repoInfo_.nodeAdmin&&Ao(de),F())}}})()}interrupt(i){_s("Interrupting connection for reason: "+i),this.interruptReasons_[i]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(i){_s("Resuming connection for reason: "+i),delete this.interruptReasons_[i],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=w0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(i){const o=i-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){const o=this.outstandingPuts_[i];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(i,o){let c;c=o?o.map(g=>PR(g)).join("$"):"default";const d=this.removeListen_(i,c);d&&d.onComplete&&d.onComplete("permission_denied")}removeListen_(i,o){const c=new $n(i).toString();let d;if(this.listens.has(c)){const g=this.listens.get(c);d=g.get(o),g.delete(o),0===g.size&&this.listens.delete(c)}else d=void 0;return d}onAuthRevoked_(i,o){_s("Auth token revoked: "+i+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===i||"permission_denied"===i)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(i,o){_s("App check token revoked: "+i+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===i||"permission_denied"===i)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(i){this.securityDebugCallback_?this.securityDebugCallback_(i):"msg"in i&&console.log("FIREBASE: "+i.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const i of this.listens.values())for(const o of i.values())this.sendListen_(o);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){const i=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(i.action,i.pathString,i.data,i.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){const i={};let o="js";(0,J.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),i["sdk."+o+"."+xR.replace(/\./g,"-")]=1,(0,J.uI)()?i["framework.cordova"]=1:(0,J.b$)()&&(i["framework.reactnative"]=1),this.reportStats(i)}shouldReconnect_(){const i=yD.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&i}}return s.nextPersistentConnectionId_=0,s.nextConnectionId_=0,s})();class vn{constructor(r,i){this.name=r,this.node=i}static Wrap(r,i){return new vn(r,i)}}class vD{getCompare(){return this.compare.bind(this)}indexedValueChanged(r,i){const o=new vn(Nh,r),c=new vn(Nh,i);return 0!==this.compare(o,c)}minPost(){return vn.MIN}}class Ek extends vD{static get __EMPTY_NODE(){return ED}static set __EMPTY_NODE(r){ED=r}compare(r,i){return ym(r.name,i.name)}isDefinedOn(r){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(r,i){return!1}minPost(){return vn.MIN}maxPost(){return new vn(Zu,ED)}makePost(r,i){return(0,J.hu)("string"==typeof r,"KeyIndex indexValue must always be a string."),new vn(r,ED)}toString(){return".key"}}const Yu=new Ek;class bD{constructor(r,i,o,c,d=null){this.isReverse_=c,this.resultGenerator_=d,this.nodeStack_=[];let g=1;for(;!r.isEmpty();)if(r=r,g=i?o(r.key,i):1,c&&(g*=-1),g<0)r=this.isReverse_?r.left:r.right;else{if(0===g){this.nodeStack_.push(r);break}this.nodeStack_.push(r),r=this.isReverse_?r.right:r.left}}getNext(){if(0===this.nodeStack_.length)return null;let i,r=this.nodeStack_.pop();if(i=this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value},this.isReverse_)for(r=r.left;!r.isEmpty();)this.nodeStack_.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack_.push(r),r=r.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const r=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value}}}let qR,qc=(()=>{class s{constructor(i,o,c,d,g){this.key=i,this.value=o,this.color=null!=c?c:s.RED,this.left=null!=d?d:oa.EMPTY_NODE,this.right=null!=g?g:oa.EMPTY_NODE}copy(i,o,c,d,g){return new s(null!=i?i:this.key,null!=o?o:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=g?g:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||!!i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,o,c){let d=this;const g=c(i,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(i,o,c),null):0===g?d.copy(null,o,null,null,null):d.copy(null,null,null,null,d.right.insert(i,o,c)),d.fixUp_()}removeMin_(){if(this.left.isEmpty())return oa.EMPTY_NODE;let i=this;return!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.removeMin_(),null),i.fixUp_()}remove(i,o){let c,d;if(c=this,o(i,c.key)<0)!c.left.isEmpty()&&!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.remove(i,o),null);else{if(c.left.isRed_()&&(c=c.rotateRight_()),!c.right.isEmpty()&&!c.right.isRed_()&&!c.right.left.isRed_()&&(c=c.moveRedRight_()),0===o(i,c.key)){if(c.right.isEmpty())return oa.EMPTY_NODE;d=c.right.min_(),c=c.copy(d.key,d.value,null,null,c.right.removeMin_())}c=c.copy(null,null,null,null,c.right.remove(i,o))}return c.fixUp_()}isRed_(){return this.color}fixUp_(){let i=this;return i.right.isRed_()&&!i.left.isRed_()&&(i=i.rotateLeft_()),i.left.isRed_()&&i.left.left.isRed_()&&(i=i.rotateRight_()),i.left.isRed_()&&i.right.isRed_()&&(i=i.colorFlip_()),i}moveRedLeft_(){let i=this.colorFlip_();return i.right.left.isRed_()&&(i=i.copy(null,null,null,null,i.right.rotateRight_()),i=i.rotateLeft_(),i=i.colorFlip_()),i}moveRedRight_(){let i=this.colorFlip_();return i.left.left.isRed_()&&(i=i.rotateRight_(),i=i.colorFlip_()),i}rotateLeft_(){const i=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight_(){const i=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip_(){const i=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,o)}checkMaxDepth_(){const i=this.check_();return Math.pow(2,i)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const i=this.left.check_();if(i!==this.right.check_())throw new Error("Black depths differ");return i+(this.isRed_()?0:1)}}return s.RED=!0,s.BLACK=!1,s})();class oa{constructor(r,i=oa.EMPTY_NODE){this.comparator_=r,this.root_=i}insert(r,i){return new oa(this.comparator_,this.root_.insert(r,i,this.comparator_).copy(null,null,qc.BLACK,null,null))}remove(r){return new oa(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,qc.BLACK,null,null))}get(r){let i,o=this.root_;for(;!o.isEmpty();){if(i=this.comparator_(r,o.key),0===i)return o.value;i<0?o=o.left:i>0&&(o=o.right)}return null}getPredecessorKey(r){let i,o=this.root_,c=null;for(;!o.isEmpty();){if(i=this.comparator_(r,o.key),0===i){if(o.left.isEmpty())return c?c.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}i<0?o=o.left:i>0&&(c=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(r){return this.root_.inorderTraversal(r)}reverseTraversal(r){return this.root_.reverseTraversal(r)}getIterator(r){return new bD(this.root_,null,this.comparator_,!1,r)}getIteratorFrom(r,i){return new bD(this.root_,r,this.comparator_,!1,i)}getReverseIteratorFrom(r,i){return new bD(this.root_,r,this.comparator_,!0,i)}getReverseIterator(r){return new bD(this.root_,null,this.comparator_,!0,r)}}function FB(s,r){return ym(s.name,r.name)}function WR(s,r){return ym(s,r)}oa.EMPTY_NODE=new class{copy(r,i,o,c,d){return this}insert(r,i,o){return new qc(r,i,null)}remove(r,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const bk=function(s){return"number"==typeof s?"number:"+HP(s):"string:"+s},wk=function(s){if(s.isLeafNode()){const r=s.val();(0,J.hu)("string"==typeof r||"number"==typeof r||"object"==typeof r&&(0,J.r3)(r,".sv"),"Priority must be a string or number.")}else(0,J.hu)(s===qR||s.isEmpty(),"priority of unexpected type.");(0,J.hu)(s===qR||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ck,Ik,Tk,_v=(()=>{class s{constructor(i,o=s.__childrenNodeConstructor.EMPTY_NODE){this.value_=i,this.priorityNode_=o,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wk(this.priorityNode_)}static set __childrenNodeConstructor(i){Ck=i}static get __childrenNodeConstructor(){return Ck}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(i){return new s(this.value_,i)}getImmediateChild(i){return".priority"===i?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}getChild(i){return mn(i)?this:".priority"===gn(i)?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(i,o){return null}updateImmediateChild(i,o){return".priority"===i?this.updatePriority(o):o.isEmpty()&&".priority"!==i?this:s.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(i,o).updatePriority(this.priorityNode_)}updateChild(i,o){const c=gn(i);return null===c?o:o.isEmpty()&&".priority"!==c?this:((0,J.hu)(".priority"!==c||1===up(i),".priority must be the last token in a path"),this.updateImmediateChild(c,s.__childrenNodeConstructor.EMPTY_NODE.updateChild(_r(i),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(i,o){return!1}val(i){return i&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let i="";this.priorityNode_.isEmpty()||(i+="priority:"+bk(this.priorityNode_.val())+":");const o=typeof this.value_;i+=o+":",i+="number"===o?HP(this.value_):this.value_,this.lazyHash_=VP(i)}return this.lazyHash_}getValue(){return this.value_}compareTo(i){return i===s.__childrenNodeConstructor.EMPTY_NODE?1:i instanceof s.__childrenNodeConstructor?-1:((0,J.hu)(i.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(i))}compareToLeafNode_(i){const o=typeof i.value_,c=typeof this.value_,d=s.VALUE_TYPE_ORDER.indexOf(o),g=s.VALUE_TYPE_ORDER.indexOf(c);return(0,J.hu)(d>=0,"Unknown leaf type: "+o),(0,J.hu)(g>=0,"Unknown leaf type: "+c),d===g?"object"===c?0:this.value_<i.value_?-1:this.value_===i.value_?0:1:g-d}withIndex(){return this}isIndexed(){return!0}equals(i){if(i===this)return!0;if(i.isLeafNode()){const o=i;return this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_)}return!1}}return s.VALUE_TYPE_ORDER=["object","boolean","number","string"],s})();const Or=new class extends vD{compare(r,i){const o=r.node.getPriority(),c=i.node.getPriority(),d=o.compareTo(c);return 0===d?ym(r.name,i.name):d}isDefinedOn(r){return!r.getPriority().isEmpty()}indexedValueChanged(r,i){return!r.getPriority().equals(i.getPriority())}minPost(){return vn.MIN}maxPost(){return new vn(Zu,new _v("[PRIORITY-POST]",Tk))}makePost(r,i){const o=Ik(r);return new vn(i,new _v("[PRIORITY-POST]",o))}toString(){return".priority"}},jB=Math.log(2);class HB{constructor(r){this.count=parseInt(Math.log(r+1)/jB,10),this.current_=this.count-1;const c=(d=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=r+1&c}nextBitIsOne(){const r=!(this.bits_&1<<this.current_);return this.current_--,r}}const wD=function(s,r,i,o){s.sort(r);const c=function(w,R){const F=R-w;let j,Q;if(0===F)return null;if(1===F)return j=s[w],Q=i?i(j):j,new qc(Q,j.node,qc.BLACK,null,null);{const de=parseInt(F/2,10)+w,ge=c(w,de),Ne=c(de+1,R);return j=s[de],Q=i?i(j):j,new qc(Q,j.node,qc.BLACK,ge,Ne)}},v=function(w){let R=null,F=null,j=s.length;const Q=function(ge,Ne){const $e=j-ge,Mt=j;j-=ge;const qt=c($e+1,Mt),Yt=s[$e],un=i?i(Yt):Yt;de(new qc(un,Yt.node,Ne,null,qt))},de=function(ge){R?(R.left=ge,R=ge):(F=ge,R=ge)};for(let ge=0;ge<w.count;++ge){const Ne=w.nextBitIsOne(),$e=Math.pow(2,w.count-(ge+1));Ne?Q($e,qc.BLACK):(Q($e,qc.BLACK),Q($e,qc.RED))}return F}(new HB(s.length));return new oa(o||r,v)};let KR;const yv={};class Ph{constructor(r,i){this.indexes_=r,this.indexSet_=i}static get Default(){return(0,J.hu)(yv&&Or,"ChildrenNode.ts has not been loaded"),KR=KR||new Ph({".priority":yv},{".priority":Or}),KR}get(r){const i=(0,J.DV)(this.indexes_,r);if(!i)throw new Error("No index defined for "+r);return i instanceof oa?i:null}hasIndex(r){return(0,J.r3)(this.indexSet_,r.toString())}addIndex(r,i){(0,J.hu)(r!==Yu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let c=!1;const d=i.getIterator(vn.Wrap);let v,g=d.getNext();for(;g;)c=c||r.isDefinedOn(g.node),o.push(g),g=d.getNext();v=c?wD(o,r.getCompare()):yv;const w=r.toString(),R=Object.assign({},this.indexSet_);R[w]=r;const F=Object.assign({},this.indexes_);return F[w]=v,new Ph(F,R)}addToIndexes(r,i){const o=(0,J.UI)(this.indexes_,(c,d)=>{const g=(0,J.DV)(this.indexSet_,d);if((0,J.hu)(g,"Missing index implementation for "+d),c===yv){if(g.isDefinedOn(r.node)){const v=[],w=i.getIterator(vn.Wrap);let R=w.getNext();for(;R;)R.name!==r.name&&v.push(R),R=w.getNext();return v.push(r),wD(v,g.getCompare())}return yv}{const v=i.get(r.name);let w=c;return v&&(w=w.remove(new vn(r.name,v))),w.insert(r,r.node)}});return new Ph(o,this.indexSet_)}removeFromIndexes(r,i){const o=(0,J.UI)(this.indexes_,c=>{if(c===yv)return c;{const d=i.get(r.name);return d?c.remove(new vn(r.name,d)):c}});return new Ph(o,this.indexSet_)}}let C0,an=(()=>{class s{constructor(i,o,c){this.children_=i,this.priorityNode_=o,this.indexMap_=c,this.lazyHash_=null,this.priorityNode_&&wk(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return C0||(C0=new s(new oa(WR),null,Ph.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||C0}updatePriority(i){return this.children_.isEmpty()?this:new s(this.children_,i,this.indexMap_)}getImmediateChild(i){if(".priority"===i)return this.getPriority();{const o=this.children_.get(i);return null===o?C0:o}}getChild(i){const o=gn(i);return null===o?this:this.getImmediateChild(o).getChild(_r(i))}hasChild(i){return null!==this.children_.get(i)}updateImmediateChild(i,o){if((0,J.hu)(o,"We should always be passing snapshot nodes"),".priority"===i)return this.updatePriority(o);{const c=new vn(i,o);let d,g;o.isEmpty()?(d=this.children_.remove(i),g=this.indexMap_.removeFromIndexes(c,this.children_)):(d=this.children_.insert(i,o),g=this.indexMap_.addToIndexes(c,this.children_));const v=d.isEmpty()?C0:this.priorityNode_;return new s(d,v,g)}}updateChild(i,o){const c=gn(i);if(null===c)return o;{(0,J.hu)(".priority"!==gn(i)||1===up(i),".priority must be the last token in a path");const d=this.getImmediateChild(c).updateChild(_r(i),o);return this.updateImmediateChild(c,d)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(i){if(this.isEmpty())return null;const o={};let c=0,d=0,g=!0;if(this.forEachChild(Or,(v,w)=>{o[v]=w.val(i),c++,g&&s.INTEGER_REGEXP_.test(v)?d=Math.max(d,Number(v)):g=!1}),!i&&g&&d<2*c){const v=[];for(const w in o)v[w]=o[w];return v}return i&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let i="";this.getPriority().isEmpty()||(i+="priority:"+bk(this.getPriority().val())+":"),this.forEachChild(Or,(o,c)=>{const d=c.hash();""!==d&&(i+=":"+o+":"+d)}),this.lazyHash_=""===i?"":VP(i)}return this.lazyHash_}getPredecessorChildName(i,o,c){const d=this.resolveIndex_(c);if(d){const g=d.getPredecessorKey(new vn(i,o));return g?g.name:null}return this.children_.getPredecessorKey(i)}getFirstChildName(i){const o=this.resolveIndex_(i);if(o){const c=o.minKey();return c&&c.name}return this.children_.minKey()}getFirstChild(i){const o=this.getFirstChildName(i);return o?new vn(o,this.children_.get(o)):null}getLastChildName(i){const o=this.resolveIndex_(i);if(o){const c=o.maxKey();return c&&c.name}return this.children_.maxKey()}getLastChild(i){const o=this.getLastChildName(i);return o?new vn(o,this.children_.get(o)):null}forEachChild(i,o){const c=this.resolveIndex_(i);return c?c.inorderTraversal(d=>o(d.name,d.node)):this.children_.inorderTraversal(o)}getIterator(i){return this.getIteratorFrom(i.minPost(),i)}getIteratorFrom(i,o){const c=this.resolveIndex_(o);if(c)return c.getIteratorFrom(i,d=>d);{const d=this.children_.getIteratorFrom(i.name,vn.Wrap);let g=d.peek();for(;null!=g&&o.compare(g,i)<0;)d.getNext(),g=d.peek();return d}}getReverseIterator(i){return this.getReverseIteratorFrom(i.maxPost(),i)}getReverseIteratorFrom(i,o){const c=this.resolveIndex_(o);if(c)return c.getReverseIteratorFrom(i,d=>d);{const d=this.children_.getReverseIteratorFrom(i.name,vn.Wrap);let g=d.peek();for(;null!=g&&o.compare(g,i)>0;)d.getNext(),g=d.peek();return d}}compareTo(i){return this.isEmpty()?i.isEmpty()?0:-1:i.isLeafNode()||i.isEmpty()?1:i===I0?-1:0}withIndex(i){if(i===Yu||this.indexMap_.hasIndex(i))return this;{const o=this.indexMap_.addIndex(i,this.children_);return new s(this.children_,this.priorityNode_,o)}}isIndexed(i){return i===Yu||this.indexMap_.hasIndex(i)}equals(i){if(i===this)return!0;if(i.isLeafNode())return!1;{const o=i;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const c=this.getIterator(Or),d=o.getIterator(Or);let g=c.getNext(),v=d.getNext();for(;g&&v;){if(g.name!==v.name||!g.node.equals(v.node))return!1;g=c.getNext(),v=d.getNext()}return null===g&&null===v}return!1}return!1}}resolveIndex_(i){return i===Yu?null:this.indexMap_.get(i.toString())}}return s.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,s})();const I0=new class extends an{constructor(){super(new oa(WR),an.EMPTY_NODE,Ph.Default)}compareTo(r){return r===this?0:1}equals(r){return r===this}getPriority(){return this}getImmediateChild(r){return an.EMPTY_NODE}isEmpty(){return!1}};function ti(s,r=null){if(null===s)return an.EMPTY_NODE;if("object"==typeof s&&".priority"in s&&(r=s[".priority"]),(0,J.hu)(null===r||"string"==typeof r||"number"==typeof r||"object"==typeof r&&".sv"in r,"Invalid priority type found: "+typeof r),"object"==typeof s&&".value"in s&&null!==s[".value"]&&(s=s[".value"]),"object"!=typeof s||".sv"in s)return new _v(s,ti(r));if(s instanceof Array){let i=an.EMPTY_NODE;return ys(s,(o,c)=>{if((0,J.r3)(s,o)&&"."!==o.substring(0,1)){const d=ti(c);(d.isLeafNode()||!d.isEmpty())&&(i=i.updateImmediateChild(o,d))}}),i.updatePriority(ti(r))}{const i=[];let o=!1;if(ys(s,(g,v)=>{if("."!==g.substring(0,1)){const w=ti(v);w.isEmpty()||(o=o||!w.getPriority().isEmpty(),i.push(new vn(g,w)))}}),0===i.length)return an.EMPTY_NODE;const d=wD(i,FB,g=>g.name,WR);if(o){const g=wD(i,Or.getCompare());return new an(d,ti(r),new Ph({".priority":g},{".priority":Or}))}return new an(d,ti(r),Ph.Default)}}Object.defineProperties(vn,{MIN:{value:new vn(Nh,an.EMPTY_NODE)},MAX:{value:new vn(Zu,I0)}}),Ek.__EMPTY_NODE=an.EMPTY_NODE,_v.__childrenNodeConstructor=an,function(s){qR=s}(I0),function(s){Tk=s}(I0),function(s){Ik=s}(ti);class ZR extends vD{constructor(r){super(),this.indexPath_=r,(0,J.hu)(!mn(r)&&".priority"!==gn(r),"Can't create PathIndex with empty path or .priority key")}extractChild(r){return r.getChild(this.indexPath_)}isDefinedOn(r){return!r.getChild(this.indexPath_).isEmpty()}compare(r,i){const o=this.extractChild(r.node),c=this.extractChild(i.node),d=o.compareTo(c);return 0===d?ym(r.name,i.name):d}makePost(r,i){const o=ti(r),c=an.EMPTY_NODE.updateChild(this.indexPath_,o);return new vn(i,c)}maxPost(){const r=an.EMPTY_NODE.updateChild(this.indexPath_,I0);return new vn(Zu,r)}toString(){return b0(this.indexPath_,0).join("/")}}const YR=new class extends vD{compare(r,i){const o=r.node.compareTo(i.node);return 0===o?ym(r.name,i.name):o}isDefinedOn(r){return!0}indexedValueChanged(r,i){return!r.equals(i)}minPost(){return vn.MIN}maxPost(){return vn.MAX}makePost(r,i){const o=ti(r);return new vn(i,o)}toString(){return".value"}},vv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",WB=function(){let s=0;const r=[];return function(i){const o=i===s;let c;s=i;const d=new Array(8);for(c=7;c>=0;c--)d[c]=vv.charAt(i%64),i=Math.floor(i/64);(0,J.hu)(0===i,"Cannot push at time == 0");let g=d.join("");if(o){for(c=11;c>=0&&63===r[c];c--)r[c]=0;r[c]++}else for(c=0;c<12;c++)r[c]=Math.floor(64*Math.random());for(c=0;c<12;c++)g+=vv.charAt(r[c]);return(0,J.hu)(20===g.length,"nextPushId: Length should be 20."),g}}(),Ak=function(s){if(s===""+kR)return"-";const r=mD(s);if(null!=r)return""+(r+1);const i=new Array(s.length);for(let g=0;g<i.length;g++)i[g]=s.charAt(g);if(i.length<786)return i.push("-"),i.join("");let o=i.length-1;for(;o>=0&&"z"===i[o];)o--;if(-1===o)return Zu;const d=vv.charAt(vv.indexOf(i[o])+1);return i[o]=d,i.slice(0,o+1).join("")},Mk=function(s){if(s===""+GP)return Nh;const r=mD(s);if(null!=r)return""+(r-1);const i=new Array(s.length);for(let o=0;o<i.length;o++)i[o]=s.charAt(o);return"-"===i[i.length-1]?1===i.length?""+kR:(delete i[i.length-1],i.join("")):(i[i.length-1]=vv.charAt(vv.indexOf(i[i.length-1])-1),i.join("")+"z".repeat(786-i.length))};function Rk(s){return{type:"value",snapshotNode:s}}function Ev(s,r){return{type:"child_added",snapshotNode:r,childName:s}}function T0(s,r){return{type:"child_removed",snapshotNode:r,childName:s}}function S0(s,r,i){return{type:"child_changed",snapshotNode:r,childName:s,oldSnap:i}}class JR{constructor(r){this.index_=r}updateChild(r,i,o,c,d,g){(0,J.hu)(r.isIndexed(this.index_),"A node must be indexed if only a child is updated");const v=r.getImmediateChild(i);return v.getChild(c).equals(o.getChild(c))&&v.isEmpty()===o.isEmpty()||(null!=g&&(o.isEmpty()?r.hasChild(i)?g.trackChildChange(T0(i,v)):(0,J.hu)(r.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):v.isEmpty()?g.trackChildChange(Ev(i,o)):g.trackChildChange(S0(i,o,v))),r.isLeafNode()&&o.isEmpty())?r:r.updateImmediateChild(i,o).withIndex(this.index_)}updateFullNode(r,i,o){return null!=o&&(r.isLeafNode()||r.forEachChild(Or,(c,d)=>{i.hasChild(c)||o.trackChildChange(T0(c,d))}),i.isLeafNode()||i.forEachChild(Or,(c,d)=>{if(r.hasChild(c)){const g=r.getImmediateChild(c);g.equals(d)||o.trackChildChange(S0(c,d,g))}else o.trackChildChange(Ev(c,d))})),i.withIndex(this.index_)}updatePriority(r,i){return r.isEmpty()?an.EMPTY_NODE:r.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class D0{constructor(r){this.indexedFilter_=new JR(r.getIndex()),this.index_=r.getIndex(),this.startPost_=D0.getStartPost_(r),this.endPost_=D0.getEndPost_(r)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(r){return this.index_.compare(this.getStartPost(),r)<=0&&this.index_.compare(r,this.getEndPost())<=0}updateChild(r,i,o,c,d,g){return this.matches(new vn(i,o))||(o=an.EMPTY_NODE),this.indexedFilter_.updateChild(r,i,o,c,d,g)}updateFullNode(r,i,o){i.isLeafNode()&&(i=an.EMPTY_NODE);let c=i.withIndex(this.index_);c=c.updatePriority(an.EMPTY_NODE);const d=this;return i.forEachChild(Or,(g,v)=>{d.matches(new vn(g,v))||(c=c.updateImmediateChild(g,an.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(r,c,o)}updatePriority(r,i){return r}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(r){if(r.hasStart()){const i=r.getIndexStartName();return r.getIndex().makePost(r.getIndexStartValue(),i)}return r.getIndex().minPost()}static getEndPost_(r){if(r.hasEnd()){const i=r.getIndexEndName();return r.getIndex().makePost(r.getIndexEndValue(),i)}return r.getIndex().maxPost()}}class KB{constructor(r){this.rangedFilter_=new D0(r),this.index_=r.getIndex(),this.limit_=r.getLimit(),this.reverse_=!r.isViewFromLeft()}updateChild(r,i,o,c,d,g){return this.rangedFilter_.matches(new vn(i,o))||(o=an.EMPTY_NODE),r.getImmediateChild(i).equals(o)?r:r.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(r,i,o,c,d,g):this.fullLimitUpdateChild_(r,i,o,d,g)}updateFullNode(r,i,o){let c;if(i.isLeafNode()||i.isEmpty())c=an.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<i.numChildren()&&i.isIndexed(this.index_)){let d;c=an.EMPTY_NODE.withIndex(this.index_),d=this.reverse_?i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let g=0;for(;d.hasNext()&&g<this.limit_;){const v=d.getNext();let w;if(w=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),v)<=0:this.index_.compare(v,this.rangedFilter_.getEndPost())<=0,!w)break;c=c.updateImmediateChild(v.name,v.node),g++}}else{let d,g,v,w;if(c=i.withIndex(this.index_),c=c.updatePriority(an.EMPTY_NODE),this.reverse_){w=c.getReverseIterator(this.index_),d=this.rangedFilter_.getEndPost(),g=this.rangedFilter_.getStartPost();const j=this.index_.getCompare();v=(Q,de)=>j(de,Q)}else w=c.getIterator(this.index_),d=this.rangedFilter_.getStartPost(),g=this.rangedFilter_.getEndPost(),v=this.index_.getCompare();let R=0,F=!1;for(;w.hasNext();){const j=w.getNext();!F&&v(d,j)<=0&&(F=!0),F&&R<this.limit_&&v(j,g)<=0?R++:c=c.updateImmediateChild(j.name,an.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(r,c,o)}updatePriority(r,i){return r}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(r,i,o,c,d){let g;if(this.reverse_){const j=this.index_.getCompare();g=(Q,de)=>j(de,Q)}else g=this.index_.getCompare();const v=r;(0,J.hu)(v.numChildren()===this.limit_,"");const w=new vn(i,o),R=this.reverse_?v.getFirstChild(this.index_):v.getLastChild(this.index_),F=this.rangedFilter_.matches(w);if(v.hasChild(i)){const j=v.getImmediateChild(i);let Q=c.getChildAfterChild(this.index_,R,this.reverse_);for(;null!=Q&&(Q.name===i||v.hasChild(Q.name));)Q=c.getChildAfterChild(this.index_,Q,this.reverse_);const de=null==Q?1:g(Q,w);if(F&&!o.isEmpty()&&de>=0)return null!=d&&d.trackChildChange(S0(i,o,j)),v.updateImmediateChild(i,o);{null!=d&&d.trackChildChange(T0(i,j));const Ne=v.updateImmediateChild(i,an.EMPTY_NODE);return null!=Q&&this.rangedFilter_.matches(Q)?(null!=d&&d.trackChildChange(Ev(Q.name,Q.node)),Ne.updateImmediateChild(Q.name,Q.node)):Ne}}return o.isEmpty()?r:F&&g(R,w)>=0?(null!=d&&(d.trackChildChange(T0(R.name,R.node)),d.trackChildChange(Ev(i,o))),v.updateImmediateChild(i,o).updateImmediateChild(R.name,an.EMPTY_NODE)):r}}class CD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Or}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Or}copy(){const r=new CD;return r.limitSet_=this.limitSet_,r.limit_=this.limit_,r.startSet_=this.startSet_,r.indexStartValue_=this.indexStartValue_,r.startNameSet_=this.startNameSet_,r.indexStartName_=this.indexStartName_,r.endSet_=this.endSet_,r.indexEndValue_=this.indexEndValue_,r.endNameSet_=this.endNameSet_,r.indexEndName_=this.indexEndName_,r.index_=this.index_,r.viewFrom_=this.viewFrom_,r}}function XR(s,r,i){const o=s.copy();return o.startSet_=!0,void 0===r&&(r=null),o.indexStartValue_=r,null!=i?(o.startNameSet_=!0,o.indexStartName_=i):(o.startNameSet_=!1,o.indexStartName_=""),o}function ex(s,r,i){const o=s.copy();return o.endSet_=!0,void 0===r&&(r=null),o.indexEndValue_=r,void 0!==i?(o.endNameSet_=!0,o.indexEndName_=i):(o.endNameSet_=!1,o.indexEndName_=""),o}function ID(s,r){const i=s.copy();return i.index_=r,i}function xk(s){const r={};if(s.isDefault())return r;let i;return s.index_===Or?i="$priority":s.index_===YR?i="$value":s.index_===Yu?i="$key":((0,J.hu)(s.index_ instanceof ZR,"Unrecognized index type!"),i=s.index_.toString()),r.orderBy=(0,J.Pz)(i),s.startSet_&&(r.startAt=(0,J.Pz)(s.indexStartValue_),s.startNameSet_&&(r.startAt+=","+(0,J.Pz)(s.indexStartName_))),s.endSet_&&(r.endAt=(0,J.Pz)(s.indexEndValue_),s.endNameSet_&&(r.endAt+=","+(0,J.Pz)(s.indexEndName_))),s.limitSet_&&(s.isViewFromLeft()?r.limitToFirst=s.limit_:r.limitToLast=s.limit_),r}function Ok(s){const r={};if(s.startSet_&&(r.sp=s.indexStartValue_,s.startNameSet_&&(r.sn=s.indexStartName_)),s.endSet_&&(r.ep=s.indexEndValue_,s.endNameSet_&&(r.en=s.indexEndName_)),s.limitSet_){r.l=s.limit_;let i=s.viewFrom_;""===i&&(i=s.isViewFromLeft()?"l":"r"),r.vf=i}return s.index_!==Or&&(r.i=s.index_.toString()),r}class TD extends hk{constructor(r,i,o,c){super(),this.repoInfo_=r,this.onDataUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.log_=g0("p:rest:"),this.listens_={}}reportStats(r){throw new Error("Method not implemented.")}static getListenId_(r,i){return void 0!==i?"tag$"+i:((0,J.hu)(r._queryParams.isDefault(),"should have a tag if it's not a default query."),r._path.toString())}listen(r,i,o,c){const d=r._path.toString();this.log_("Listen called for "+d+" "+r._queryIdentifier);const g=TD.getListenId_(r,o),v={};this.listens_[g]=v;const w=xk(r._queryParams);this.restRequest_(d+".json",w,(R,F)=>{let j=F;if(404===R&&(j=null,R=null),null===R&&this.onDataUpdate_(d,j,!1,o),(0,J.DV)(this.listens_,g)===v){let Q;Q=R?401===R?"permission_denied":"rest_error:"+R:"ok",c(Q,null)}})}unlisten(r,i){const o=TD.getListenId_(r,i);delete this.listens_[o]}get(r){const i=xk(r._queryParams),o=r._path.toString(),c=new J.BH;return this.restRequest_(o+".json",i,(d,g)=>{let v=g;404===d&&(v=null,d=null),null===d?(this.onDataUpdate_(o,v,!1,null),c.resolve(v)):c.reject(new Error(v))}),c.promise}refreshAuthToken(r){}restRequest_(r,i={},o){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([c,d])=>{c&&c.accessToken&&(i.auth=c.accessToken),d&&d.token&&(i.ac=d.token);const g=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+r+"?ns="+this.repoInfo_.namespace+(0,J.xO)(i);this.log_("Sending REST request for "+g);const v=new XMLHttpRequest;v.onreadystatechange=()=>{if(o&&4===v.readyState){this.log_("REST Response for "+g+" received. status:",v.status,"response:",v.responseText);let w=null;if(v.status>=200&&v.status<300){try{w=(0,J.cI)(v.responseText)}catch(R){Ao("Failed to parse JSON response for "+g+": "+v.responseText)}o(null,w)}else 401!==v.status&&404!==v.status&&Ao("Got unsuccessful REST response for "+g+" Status: "+v.status),o(v.status);o=null}},v.open("GET",g,!0),v.send()})}}class eU{constructor(){this.rootNode_=an.EMPTY_NODE}getNode(r){return this.rootNode_.getChild(r)}updateSnapshot(r,i){this.rootNode_=this.rootNode_.updateChild(r,i)}}function SD(){return{value:null,children:new Map}}function bv(s,r,i){if(mn(r))s.value=i,s.children.clear();else if(null!==s.value)s.value=s.value.updateChild(r,i);else{const o=gn(r);s.children.has(o)||s.children.set(o,SD()),bv(s.children.get(o),r=_r(r),i)}}function tx(s,r){if(mn(r))return s.value=null,s.children.clear(),!0;if(null!==s.value){if(s.value.isLeafNode())return!1;{const i=s.value;return s.value=null,i.forEachChild(Or,(o,c)=>{bv(s,new $n(o),c)}),tx(s,r)}}if(s.children.size>0){const i=gn(r);return r=_r(r),s.children.has(i)&&tx(s.children.get(i),r)&&s.children.delete(i),0===s.children.size}return!0}function nx(s,r,i){null!==s.value?i(r,s.value):function(s,r){s.children.forEach((i,o)=>{r(o,i)})}(s,(o,c)=>{nx(c,new $n(r.toString()+"/"+o),i)})}class nU{constructor(r){this.collection_=r,this.last_=null}get(){const r=this.collection_.get(),i=Object.assign({},r);return this.last_&&ys(this.last_,(o,c)=>{i[o]=i[o]-c}),this.last_=r,i}}class sU{constructor(r,i){this.server_=i,this.statsToReport_={},this.statsListener_=new nU(r);const o=1e4+2e4*Math.random();_0(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const r=this.statsListener_.get(),i={};let o=!1;ys(r,(c,d)=>{d>0&&(0,J.r3)(this.statsToReport_,c)&&(i[c]=d,o=!0)}),o&&this.server_.reportStats(i),_0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ll=(()=>(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ll||(Ll={})),Ll))();function sx(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}class DD{constructor(r,i,o){this.path=r,this.affectedTree=i,this.revert=o,this.type=Ll.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(r){if(mn(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new $n(r));return new DD(Fn(),i,this.revert)}}return(0,J.hu)(gn(this.path)===r,"operationForChild called for unrelated child."),new DD(_r(this.path),this.affectedTree,this.revert)}}class A0{constructor(r,i){this.source=r,this.path=i,this.type=Ll.LISTEN_COMPLETE}operationForChild(r){return mn(this.path)?new A0(this.source,Fn()):new A0(this.source,_r(this.path))}}class Em{constructor(r,i,o){this.source=r,this.path=i,this.snap=o,this.type=Ll.OVERWRITE}operationForChild(r){return mn(this.path)?new Em(this.source,Fn(),this.snap.getImmediateChild(r)):new Em(this.source,_r(this.path),this.snap)}}class wv{constructor(r,i,o){this.source=r,this.path=i,this.children=o,this.type=Ll.MERGE}operationForChild(r){if(mn(this.path)){const i=this.children.subtree(new $n(r));return i.isEmpty()?null:i.value?new Em(this.source,Fn(),i.value):new wv(this.source,Fn(),i)}return(0,J.hu)(gn(this.path)===r,"Can't get a merge for a child not on the path of the operation"),new wv(this.source,_r(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dp{constructor(r,i,o){this.node_=r,this.fullyInitialized_=i,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(r){if(mn(r))return this.isFullyInitialized()&&!this.filtered_;const i=gn(r);return this.isCompleteForChild(i)}isCompleteForChild(r){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(r)}getNode(){return this.node_}}class oU{constructor(r){this.query_=r,this.index_=this.query_._queryParams.getIndex()}}function M0(s,r,i,o,c,d){const g=o.filter(v=>v.type===i);g.sort((v,w)=>function(s,r,i){if(null==r.childName||null==i.childName)throw(0,J.g5)("Should only compare child_ events.");const o=new vn(r.childName,r.snapshotNode),c=new vn(i.childName,i.snapshotNode);return s.index_.compare(o,c)}(s,v,w)),g.forEach(v=>{const w=function(s,r,i){return"value"===r.type||"child_removed"===r.type||(r.prevName=i.getPredecessorChildName(r.childName,r.snapshotNode,s.index_)),r}(s,v,d);c.forEach(R=>{R.respondsTo(v.type)&&r.push(R.createEvent(w,s.query_))})})}function AD(s,r){return{eventCache:s,serverCache:r}}function R0(s,r,i,o){return AD(new dp(r,i,o),s.serverCache)}function Pk(s,r,i,o){return AD(s.eventCache,new dp(r,i,o))}function MD(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function bm(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}let ox;class Nr{constructor(r,i=(()=>(ox||(ox=new oa(zV)),ox))()){this.value=r,this.children=i}static fromObject(r){let i=new Nr(null);return ys(r,(o,c)=>{i=i.set(new $n(o),c)}),i}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(r,i){if(null!=this.value&&i(this.value))return{path:Fn(),value:this.value};if(mn(r))return null;{const o=gn(r),c=this.children.get(o);if(null!==c){const d=c.findRootMostMatchingPathAndValue(_r(r),i);return null!=d?{path:Wr(new $n(o),d.path),value:d.value}:null}return null}}findRootMostValueAndPath(r){return this.findRootMostMatchingPathAndValue(r,()=>!0)}subtree(r){if(mn(r))return this;{const i=gn(r),o=this.children.get(i);return null!==o?o.subtree(_r(r)):new Nr(null)}}set(r,i){if(mn(r))return new Nr(i,this.children);{const o=gn(r),d=(this.children.get(o)||new Nr(null)).set(_r(r),i),g=this.children.insert(o,d);return new Nr(this.value,g)}}remove(r){if(mn(r))return this.children.isEmpty()?new Nr(null):new Nr(null,this.children);{const i=gn(r),o=this.children.get(i);if(o){const c=o.remove(_r(r));let d;return d=c.isEmpty()?this.children.remove(i):this.children.insert(i,c),null===this.value&&d.isEmpty()?new Nr(null):new Nr(this.value,d)}return this}}get(r){if(mn(r))return this.value;{const i=gn(r),o=this.children.get(i);return o?o.get(_r(r)):null}}setTree(r,i){if(mn(r))return i;{const o=gn(r),d=(this.children.get(o)||new Nr(null)).setTree(_r(r),i);let g;return g=d.isEmpty()?this.children.remove(o):this.children.insert(o,d),new Nr(this.value,g)}}fold(r){return this.fold_(Fn(),r)}fold_(r,i){const o={};return this.children.inorderTraversal((c,d)=>{o[c]=d.fold_(Wr(r,c),i)}),i(r,this.value,o)}findOnPath(r,i){return this.findOnPath_(r,Fn(),i)}findOnPath_(r,i,o){const c=!!this.value&&o(i,this.value);if(c)return c;if(mn(r))return null;{const d=gn(r),g=this.children.get(d);return g?g.findOnPath_(_r(r),Wr(i,d),o):null}}foreachOnPath(r,i){return this.foreachOnPath_(r,Fn(),i)}foreachOnPath_(r,i,o){if(mn(r))return this;{this.value&&o(i,this.value);const c=gn(r),d=this.children.get(c);return d?d.foreachOnPath_(_r(r),Wr(i,c),o):new Nr(null)}}foreach(r){this.foreach_(Fn(),r)}foreach_(r,i){this.children.inorderTraversal((o,c)=>{c.foreach_(Wr(r,o),i)}),this.value&&i(r,this.value)}foreachChild(r){this.children.inorderTraversal((i,o)=>{o.value&&r(i,o.value)})}}class Kc{constructor(r){this.writeTree_=r}static empty(){return new Kc(new Nr(null))}}function x0(s,r,i){if(mn(r))return new Kc(new Nr(i));{const o=s.writeTree_.findRootMostValueAndPath(r);if(null!=o){const c=o.path;let d=o.value;const g=Mo(c,r);return d=d.updateChild(g,i),new Kc(s.writeTree_.set(c,d))}{const c=new Nr(i),d=s.writeTree_.setTree(r,c);return new Kc(d)}}}function ax(s,r,i){let o=s;return ys(i,(c,d)=>{o=x0(o,Wr(r,c),d)}),o}function kk(s,r){if(mn(r))return Kc.empty();{const i=s.writeTree_.setTree(r,new Nr(null));return new Kc(i)}}function lx(s,r){return null!=wm(s,r)}function wm(s,r){const i=s.writeTree_.findRootMostValueAndPath(r);return null!=i?s.writeTree_.get(i.path).getChild(Mo(i.path,r)):null}function Fk(s){const r=[],i=s.writeTree_.value;return null!=i?i.isLeafNode()||i.forEachChild(Or,(o,c)=>{r.push(new vn(o,c))}):s.writeTree_.children.inorderTraversal((o,c)=>{null!=c.value&&r.push(new vn(o,c.value))}),r}function hp(s,r){if(mn(r))return s;{const i=wm(s,r);return new Kc(null!=i?new Nr(i):s.writeTree_.subtree(r))}}function cx(s){return s.writeTree_.isEmpty()}function Cv(s,r){return Lk(Fn(),s.writeTree_,r)}function Lk(s,r,i){if(null!=r.value)return i.updateChild(s,r.value);{let o=null;return r.children.inorderTraversal((c,d)=>{".priority"===c?((0,J.hu)(null!==d.value,"Priority writes must always be leaf nodes"),o=d.value):i=Lk(Wr(s,c),d,i)}),!i.getChild(s).isEmpty()&&null!==o&&(i=i.updateChild(Wr(s,".priority"),o)),i}}function RD(s,r){return Hk(r,s)}function gU(s,r){if(s.snap)return Fl(s.path,r);for(const i in s.children)if(s.children.hasOwnProperty(i)&&Fl(Wr(s.path,i),r))return!0;return!1}function _U(s){return s.visible}function Vk(s,r,i){let o=Kc.empty();for(let c=0;c<s.length;++c){const d=s[c];if(r(d)){const g=d.path;let v;if(d.snap)Fl(i,g)?(v=Mo(i,g),o=x0(o,v,d.snap)):Fl(g,i)&&(v=Mo(g,i),o=x0(o,Fn(),d.snap.getChild(v)));else{if(!d.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(Fl(i,g))v=Mo(i,g),o=ax(o,v,d.children);else if(Fl(g,i))if(v=Mo(g,i),mn(v))o=ax(o,Fn(),d.children);else{const w=(0,J.DV)(d.children,gn(v));if(w){const R=w.getChild(_r(v));o=x0(o,Fn(),R)}}}}}return o}function Bk(s,r,i,o,c){if(o||c){const d=hp(s.visibleWrites,r);return!c&&cx(d)?i:c||null!=i||lx(d,Fn())?Cv(Vk(s.allWrites,function(R){return(R.visible||c)&&(!o||!~o.indexOf(R.writeId))&&(Fl(R.path,r)||Fl(r,R.path))},r),i||an.EMPTY_NODE):null}{const d=wm(s.visibleWrites,r);if(null!=d)return d;{const g=hp(s.visibleWrites,r);return cx(g)?i:null!=i||lx(g,Fn())?Cv(g,i||an.EMPTY_NODE):null}}}function xD(s,r,i,o){return Bk(s.writeTree,s.treePath,r,i,o)}function ux(s,r){return function(s,r,i){let o=an.EMPTY_NODE;const c=wm(s.visibleWrites,r);if(c)return c.isLeafNode()||c.forEachChild(Or,(d,g)=>{o=o.updateImmediateChild(d,g)}),o;if(i){const d=hp(s.visibleWrites,r);return i.forEachChild(Or,(g,v)=>{const w=Cv(hp(d,new $n(g)),v);o=o.updateImmediateChild(g,w)}),Fk(d).forEach(g=>{o=o.updateImmediateChild(g.name,g.node)}),o}return Fk(hp(s.visibleWrites,r)).forEach(g=>{o=o.updateImmediateChild(g.name,g.node)}),o}(s.writeTree,s.treePath,r)}function Uk(s,r,i,o){return function(s,r,i,o,c){(0,J.hu)(o||c,"Either existingEventSnap or existingServerSnap must exist");const d=Wr(r,i);if(lx(s.visibleWrites,d))return null;{const g=hp(s.visibleWrites,d);return cx(g)?c.getChild(i):Cv(g,c.getChild(i))}}(s.writeTree,s.treePath,r,i,o)}function OD(s,r){return function(s,r){return wm(s.visibleWrites,r)}(s.writeTree,Wr(s.treePath,r))}function dx(s,r,i){return function(s,r,i,o){const c=Wr(r,i),d=wm(s.visibleWrites,c);return null!=d?d:o.isCompleteForChild(i)?Cv(hp(s.visibleWrites,c),o.getNode().getImmediateChild(i)):null}(s.writeTree,s.treePath,r,i)}function jk(s,r){return Hk(Wr(s.treePath,r),s.writeTree)}function Hk(s,r){return{treePath:s,writeTree:r}}class TU{constructor(){this.changeMap=new Map}trackChildChange(r){const i=r.type,o=r.childName;(0,J.hu)("child_added"===i||"child_changed"===i||"child_removed"===i,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const c=this.changeMap.get(o);if(c){const d=c.type;if("child_added"===i&&"child_removed"===d)this.changeMap.set(o,S0(o,r.snapshotNode,c.snapshotNode));else if("child_removed"===i&&"child_added"===d)this.changeMap.delete(o);else if("child_removed"===i&&"child_changed"===d)this.changeMap.set(o,T0(o,c.oldSnap));else if("child_changed"===i&&"child_added"===d)this.changeMap.set(o,Ev(o,r.snapshotNode));else{if("child_changed"!==i||"child_changed"!==d)throw(0,J.g5)("Illegal combination of changes: "+r+" occurred after "+c);this.changeMap.set(o,S0(o,r.snapshotNode,c.oldSnap))}}else this.changeMap.set(o,r)}getChanges(){return Array.from(this.changeMap.values())}}const Gk=new class{getCompleteChild(r){return null}getChildAfterChild(r,i,o){return null}};class hx{constructor(r,i,o=null){this.writes_=r,this.viewCache_=i,this.optCompleteServerCache_=o}getCompleteChild(r){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(r))return i.getNode().getImmediateChild(r);{const o=null!=this.optCompleteServerCache_?new dp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dx(this.writes_,r,o)}}getChildAfterChild(r,i,o){const c=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bm(this.viewCache_),d=function(s,r,i,o,c,d){return function(s,r,i,o,c,d,g){let v;const w=hp(s.visibleWrites,r),R=wm(w,Fn());if(null!=R)v=R;else{if(null==i)return[];v=Cv(w,i)}if(v=v.withIndex(g),v.isEmpty()||v.isLeafNode())return[];{const F=[],j=g.getCompare(),Q=d?v.getReverseIteratorFrom(o,g):v.getIteratorFrom(o,g);let de=Q.getNext();for(;de&&F.length<c;)0!==j(de,o)&&F.push(de),de=Q.getNext();return F}}(s.writeTree,s.treePath,r,i,o,c,d)}(this.writes_,c,i,1,o,r);return 0===d.length?null:d[0]}}function $k(s,r,i,o,c,d){const g=r.eventCache;if(null!=OD(o,i))return r;{let v,w;if(mn(i))if((0,J.hu)(r.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),r.serverCache.isFiltered()){const R=bm(r),j=ux(o,R instanceof an?R:an.EMPTY_NODE);v=s.filter.updateFullNode(r.eventCache.getNode(),j,d)}else{const R=xD(o,bm(r));v=s.filter.updateFullNode(r.eventCache.getNode(),R,d)}else{const R=gn(i);if(".priority"===R){(0,J.hu)(1===up(i),"Can't have a priority with additional path components");const F=g.getNode();w=r.serverCache.getNode();const j=Uk(o,i,F,w);v=null!=j?s.filter.updatePriority(F,j):g.getNode()}else{const F=_r(i);let j;if(g.isCompleteForChild(R)){w=r.serverCache.getNode();const Q=Uk(o,i,g.getNode(),w);j=null!=Q?g.getNode().getImmediateChild(R).updateChild(F,Q):g.getNode().getImmediateChild(R)}else j=dx(o,R,r.serverCache);v=null!=j?s.filter.updateChild(g.getNode(),R,j,F,c,d):g.getNode()}}return R0(r,v,g.isFullyInitialized()||mn(i),s.filter.filtersNodes())}}function ND(s,r,i,o,c,d,g,v){const w=r.serverCache;let R;const F=g?s.filter:s.filter.getIndexedFilter();if(mn(i))R=F.updateFullNode(w.getNode(),o,null);else if(F.filtersNodes()&&!w.isFiltered()){const de=w.getNode().updateChild(i,o);R=F.updateFullNode(w.getNode(),de,null)}else{const de=gn(i);if(!w.isCompleteForPath(i)&&up(i)>1)return r;const ge=_r(i),$e=w.getNode().getImmediateChild(de).updateChild(ge,o);R=".priority"===de?F.updatePriority(w.getNode(),$e):F.updateChild(w.getNode(),de,$e,ge,Gk,null)}const j=Pk(r,R,w.isFullyInitialized()||mn(i),F.filtersNodes());return $k(s,j,i,c,new hx(c,j,d),v)}function fx(s,r,i,o,c,d,g){const v=r.eventCache;let w,R;const F=new hx(c,r,d);if(mn(i))R=s.filter.updateFullNode(r.eventCache.getNode(),o,g),w=R0(r,R,!0,s.filter.filtersNodes());else{const j=gn(i);if(".priority"===j)R=s.filter.updatePriority(r.eventCache.getNode(),o),w=R0(r,R,v.isFullyInitialized(),v.isFiltered());else{const Q=_r(i),de=v.getNode().getImmediateChild(j);let ge;if(mn(Q))ge=o;else{const Ne=F.getCompleteChild(j);ge=null!=Ne?".priority"===GR(Q)&&Ne.getChild(mk(Q)).isEmpty()?Ne:Ne.updateChild(Q,o):an.EMPTY_NODE}w=de.equals(ge)?r:R0(r,s.filter.updateChild(v.getNode(),j,ge,Q,F,g),v.isFullyInitialized(),s.filter.filtersNodes())}}return w}function zk(s,r){return s.eventCache.isCompleteForChild(r)}function Wk(s,r,i){return i.foreach((o,c)=>{r=r.updateChild(o,c)}),r}function px(s,r,i,o,c,d,g,v){if(r.serverCache.getNode().isEmpty()&&!r.serverCache.isFullyInitialized())return r;let R,w=r;R=mn(i)?o:new Nr(null).setTree(i,o);const F=r.serverCache.getNode();return R.children.inorderTraversal((j,Q)=>{if(F.hasChild(j)){const ge=Wk(0,r.serverCache.getNode().getImmediateChild(j),Q);w=ND(s,w,new $n(j),ge,c,d,g,v)}}),R.children.inorderTraversal((j,Q)=>{const de=!r.serverCache.isCompleteForChild(j)&&void 0===Q.value;if(!F.hasChild(j)&&!de){const Ne=Wk(0,r.serverCache.getNode().getImmediateChild(j),Q);w=ND(s,w,new $n(j),Ne,c,d,g,v)}}),w}class kU{constructor(r,i){this.query_=r,this.eventRegistrations_=[];const o=this.query_._queryParams,c=new JR(o.getIndex()),d=function(s){return s.loadsAllData()?new JR(s.getIndex()):s.hasLimit()?new KB(s):new D0(s)}(o);this.processor_=function(s){return{filter:s}}(d);const g=i.serverCache,v=i.eventCache,w=c.updateFullNode(an.EMPTY_NODE,g.getNode(),null),R=d.updateFullNode(an.EMPTY_NODE,v.getNode(),null),F=new dp(w,g.isFullyInitialized(),c.filtersNodes()),j=new dp(R,v.isFullyInitialized(),d.filtersNodes());this.viewCache_=AD(j,F),this.eventGenerator_=new oU(this.query_)}get query(){return this.query_}}function VU(s,r){const i=bm(s.viewCache_);return i&&(s.query._queryParams.loadsAllData()||!mn(r)&&!i.getImmediateChild(gn(r)).isEmpty())?i.getChild(r):null}function qk(s){return 0===s.eventRegistrations_.length}function Kk(s,r,i){const o=[];if(i){(0,J.hu)(null==r,"A cancel should cancel all event registrations.");const c=s.query._path;s.eventRegistrations_.forEach(d=>{const g=d.createCancelEvent(i,c);g&&o.push(g)})}if(r){let c=[];for(let d=0;d<s.eventRegistrations_.length;++d){const g=s.eventRegistrations_[d];if(g.matches(r)){if(r.hasAnyCallback()){c=c.concat(s.eventRegistrations_.slice(d+1));break}}else c.push(g)}s.eventRegistrations_=c}else s.eventRegistrations_=[];return o}function Zk(s,r,i,o){r.type===Ll.MERGE&&null!==r.source.queryId&&((0,J.hu)(bm(s.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(MD(s.viewCache_),"Missing event cache, even though we have a server cache"));const c=s.viewCache_,d=function(s,r,i,o,c){const d=new TU;let g,v;if(i.type===Ll.OVERWRITE){const R=i;R.source.fromUser?g=fx(s,r,R.path,R.snap,o,c,d):((0,J.hu)(R.source.fromServer,"Unknown source."),v=R.source.tagged||r.serverCache.isFiltered()&&!mn(R.path),g=ND(s,r,R.path,R.snap,o,c,v,d))}else if(i.type===Ll.MERGE){const R=i;R.source.fromUser?g=function(s,r,i,o,c,d,g){let v=r;return o.foreach((w,R)=>{const F=Wr(i,w);zk(r,gn(F))&&(v=fx(s,v,F,R,c,d,g))}),o.foreach((w,R)=>{const F=Wr(i,w);zk(r,gn(F))||(v=fx(s,v,F,R,c,d,g))}),v}(s,r,R.path,R.children,o,c,d):((0,J.hu)(R.source.fromServer,"Unknown source."),v=R.source.tagged||r.serverCache.isFiltered(),g=px(s,r,R.path,R.children,o,c,v,d))}else if(i.type===Ll.ACK_USER_WRITE){const R=i;g=R.revert?function(s,r,i,o,c,d){let g;if(null!=OD(o,i))return r;{const v=new hx(o,r,c),w=r.eventCache.getNode();let R;if(mn(i)||".priority"===gn(i)){let F;if(r.serverCache.isFullyInitialized())F=xD(o,bm(r));else{const j=r.serverCache.getNode();(0,J.hu)(j instanceof an,"serverChildren would be complete if leaf node"),F=ux(o,j)}F=F,R=s.filter.updateFullNode(w,F,d)}else{const F=gn(i);let j=dx(o,F,r.serverCache);null==j&&r.serverCache.isCompleteForChild(F)&&(j=w.getImmediateChild(F)),R=null!=j?s.filter.updateChild(w,F,j,_r(i),v,d):r.eventCache.getNode().hasChild(F)?s.filter.updateChild(w,F,an.EMPTY_NODE,_r(i),v,d):w,R.isEmpty()&&r.serverCache.isFullyInitialized()&&(g=xD(o,bm(r)),g.isLeafNode()&&(R=s.filter.updateFullNode(R,g,d)))}return g=r.serverCache.isFullyInitialized()||null!=OD(o,Fn()),R0(r,R,g,s.filter.filtersNodes())}}(s,r,R.path,o,c,d):function(s,r,i,o,c,d,g){if(null!=OD(c,i))return r;const v=r.serverCache.isFiltered(),w=r.serverCache;if(null!=o.value){if(mn(i)&&w.isFullyInitialized()||w.isCompleteForPath(i))return ND(s,r,i,w.getNode().getChild(i),c,d,v,g);if(mn(i)){let R=new Nr(null);return w.getNode().forEachChild(Yu,(F,j)=>{R=R.set(new $n(F),j)}),px(s,r,i,R,c,d,v,g)}return r}{let R=new Nr(null);return o.foreach((F,j)=>{const Q=Wr(i,F);w.isCompleteForPath(Q)&&(R=R.set(F,w.getNode().getChild(Q)))}),px(s,r,i,R,c,d,v,g)}}(s,r,R.path,R.affectedTree,o,c,d)}else{if(i.type!==Ll.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+i.type);g=function(s,r,i,o,c){const d=r.serverCache;return $k(s,Pk(r,d.getNode(),d.isFullyInitialized()||mn(i),d.isFiltered()),i,o,Gk,c)}(s,r,i.path,o,d)}const w=d.getChanges();return function(s,r,i){const o=r.eventCache;if(o.isFullyInitialized()){const c=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=MD(s);(i.length>0||!s.eventCache.isFullyInitialized()||c&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&i.push(Rk(MD(r)))}}(r,g,w),{viewCache:g,changes:w}}(s.processor_,c,r,i,o);return function(s,r){(0,J.hu)(r.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(r.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}(s.processor_,d.viewCache),(0,J.hu)(d.viewCache.serverCache.isFullyInitialized()||!c.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=d.viewCache,Yk(s,d.changes,d.viewCache.eventCache.getNode(),null)}function Yk(s,r,i,o){return function(s,r,i,o){const c=[],d=[];return r.forEach(g=>{"child_changed"===g.type&&s.index_.indexedValueChanged(g.oldSnap,g.snapshotNode)&&d.push(function(s,r){return{type:"child_moved",snapshotNode:r,childName:s}}(g.childName,g.snapshotNode))}),M0(s,c,"child_removed",r,o,i),M0(s,c,"child_added",r,o,i),M0(s,c,"child_moved",d,o,i),M0(s,c,"child_changed",r,o,i),M0(s,c,"value",r,o,i),c}(s.eventGenerator_,r,i,o?[o]:s.eventRegistrations_)}let PD,FD;class Qk{constructor(){this.views=new Map}}function gx(s,r,i,o){const c=r.source.queryId;if(null!==c){const d=s.views.get(c);return(0,J.hu)(null!=d,"SyncTree gave us an op for an invalid query."),Zk(d,r,i,o)}{let d=[];for(const g of s.views.values())d=d.concat(Zk(g,r,i,o));return d}}function Jk(s,r,i,o,c){const g=s.views.get(r._queryIdentifier);if(!g){let v=xD(i,c?o:null),w=!1;v?w=!0:o instanceof an?(v=ux(i,o),w=!1):(v=an.EMPTY_NODE,w=!1);const R=AD(new dp(v,w,!1),new dp(o,c,!1));return new kU(r,R)}return g}function Xk(s){const r=[];for(const i of s.views.values())i.query._queryParams.loadsAllData()||r.push(i);return r}function fp(s,r){let i=null;for(const o of s.views.values())i=i||VU(o,r);return i}function eF(s,r){return r._queryParams.loadsAllData()?kD(s):s.views.get(r._queryIdentifier)}function tF(s,r){return null!=eF(s,r)}function pp(s){return null!=kD(s)}function kD(s){for(const r of s.views.values())if(r.query._queryParams.loadsAllData())return r;return null}let KU=1;class nF{constructor(r){this.listenProvider_=r,this.syncPointTree_=new Nr(null),this.pendingWriteTree_={visibleWrites:Kc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mx(s,r,i,o,c){return function(s,r,i,o,c){(0,J.hu)(o>s.lastWriteId,"Stacking an older write on top of newer ones"),void 0===c&&(c=!0),s.allWrites.push({path:r,snap:i,writeId:o,visible:c}),c&&(s.visibleWrites=x0(s.visibleWrites,r,i)),s.lastWriteId=o}(s.pendingWriteTree_,r,i,o,c),c?Iv(s,new Em({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,i)):[]}function gp(s,r,i=!1){const o=function(s,r){for(let i=0;i<s.allWrites.length;i++){const o=s.allWrites[i];if(o.writeId===r)return o}return null}(s.pendingWriteTree_,r);if(function(s,r){const i=s.allWrites.findIndex(v=>v.writeId===r);(0,J.hu)(i>=0,"removeWrite called with nonexistent writeId.");const o=s.allWrites[i];s.allWrites.splice(i,1);let c=o.visible,d=!1,g=s.allWrites.length-1;for(;c&&g>=0;){const v=s.allWrites[g];v.visible&&(g>=i&&gU(v,o.path)?c=!1:Fl(o.path,v.path)&&(d=!0)),g--}return!!c&&(d?(function(s){s.visibleWrites=Vk(s.allWrites,_U,Fn()),s.lastWriteId=s.allWrites.length>0?s.allWrites[s.allWrites.length-1].writeId:-1}(s),!0):(o.snap?s.visibleWrites=kk(s.visibleWrites,o.path):ys(o.children,w=>{s.visibleWrites=kk(s.visibleWrites,Wr(o.path,w))}),!0))}(s.pendingWriteTree_,r)){let d=new Nr(null);return null!=o.snap?d=d.set(Fn(),!0):ys(o.children,g=>{d=d.set(new $n(g),!0)}),Iv(s,new DD(o.path,d,i))}return[]}function O0(s,r,i){return Iv(s,new Em({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,i))}function _x(s,r,i,o){const c=r._path,d=s.syncPointTree_.get(c);let g=[];if(d&&("default"===r._queryIdentifier||tF(d,r))){const v=function(s,r,i,o){const c=r._queryIdentifier,d=[];let g=[];const v=pp(s);if("default"===c)for(const[w,R]of s.views.entries())g=g.concat(Kk(R,i,o)),qk(R)&&(s.views.delete(w),R.query._queryParams.loadsAllData()||d.push(R.query));else{const w=s.views.get(c);w&&(g=g.concat(Kk(w,i,o)),qk(w)&&(s.views.delete(c),w.query._queryParams.loadsAllData()||d.push(w.query)))}return v&&!pp(s)&&d.push(new((0,J.hu)(PD,"Reference.ts has not been loaded"),PD)(r._repo,r._path)),{removed:d,events:g}}(d,r,i,o);(function(s){return 0===s.views.size})(d)&&(s.syncPointTree_=s.syncPointTree_.remove(c));const w=v.removed;g=v.events;const R=-1!==w.findIndex(j=>j._queryParams.loadsAllData()),F=s.syncPointTree_.findOnPath(c,(j,Q)=>pp(Q));if(R&&!F){const j=s.syncPointTree_.subtree(c);if(!j.isEmpty()){const Q=function(s){return s.fold((r,i,o)=>{if(i&&pp(i))return[kD(i)];{let c=[];return i&&(c=Xk(i)),ys(o,(d,g)=>{c=c.concat(g)}),c}})}(j);for(let de=0;de<Q.length;++de){const ge=Q[de],Ne=ge.query,$e=oF(s,ge);s.listenProvider_.startListening(N0(Ne),VD(s,Ne),$e.hashFn,$e.onComplete)}}}if(!F&&w.length>0&&!o)if(R){const j=null;s.listenProvider_.stopListening(N0(r),j)}else w.forEach(j=>{const Q=s.queryToTagMap.get(BD(j));s.listenProvider_.stopListening(N0(j),Q)});!function(s,r){for(let i=0;i<r.length;++i){const o=r[i];if(!o._queryParams.loadsAllData()){const c=BD(o),d=s.queryToTagMap.get(c);s.queryToTagMap.delete(c),s.tagToQueryMap.delete(d)}}}(s,w)}return g}function rF(s,r,i){const o=r._path;let c=null,d=!1;s.syncPointTree_.foreachOnPath(o,(j,Q)=>{const de=Mo(j,o);c=c||fp(Q,de),d=d||pp(Q)});let v,g=s.syncPointTree_.get(o);g?(d=d||pp(g),c=c||fp(g,Fn())):(g=new Qk,s.syncPointTree_=s.syncPointTree_.set(o,g)),null!=c?v=!0:(v=!1,c=an.EMPTY_NODE,s.syncPointTree_.subtree(o).foreachChild((Q,de)=>{const ge=fp(de,Fn());ge&&(c=c.updateImmediateChild(Q,ge))}));const w=tF(g,r);if(!w&&!r._queryParams.loadsAllData()){const j=BD(r);(0,J.hu)(!s.queryToTagMap.has(j),"View does not exist, but we have a tag");const Q=KU++;s.queryToTagMap.set(j,Q),s.tagToQueryMap.set(Q,j)}let F=function(s,r,i,o,c,d){const g=Jk(s,r,o,c,d);return s.views.has(r._queryIdentifier)||s.views.set(r._queryIdentifier,g),function(s,r){s.eventRegistrations_.push(r)}(g,i),function(s,r){const i=s.viewCache_.eventCache,o=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Or,(d,g)=>{o.push(Ev(d,g))}),i.isFullyInitialized()&&o.push(Rk(i.getNode())),Yk(s,o,i.getNode(),r)}(g,i)}(g,r,i,RD(s.pendingWriteTree_,o),c,v);if(!w&&!d){const j=eF(g,r);F=F.concat(function(s,r,i){const o=r._path,c=VD(s,r),d=oF(s,i),g=s.listenProvider_.startListening(N0(r),c,d.hashFn,d.onComplete),v=s.syncPointTree_.subtree(o);if(c)(0,J.hu)(!pp(v.value),"If we're adding a query, it shouldn't be shadowed");else{const w=v.fold((R,F,j)=>{if(!mn(R)&&F&&pp(F))return[kD(F).query];{let Q=[];return F&&(Q=Q.concat(Xk(F).map(de=>de.query))),ys(j,(de,ge)=>{Q=Q.concat(ge)}),Q}});for(let R=0;R<w.length;++R){const F=w[R];s.listenProvider_.stopListening(N0(F),VD(s,F))}}return g}(s,r,j))}return F}function LD(s,r,i){const c=s.pendingWriteTree_,d=s.syncPointTree_.findOnPath(r,(g,v)=>{const R=fp(v,Mo(g,r));if(R)return R});return Bk(c,r,d,i,!0)}function Iv(s,r){return iF(r,s.syncPointTree_,null,RD(s.pendingWriteTree_,Fn()))}function iF(s,r,i,o){if(mn(s.path))return sF(s,r,i,o);{const c=r.get(Fn());null==i&&null!=c&&(i=fp(c,Fn()));let d=[];const g=gn(s.path),v=s.operationForChild(g),w=r.children.get(g);if(w&&v){const R=i?i.getImmediateChild(g):null,F=jk(o,g);d=d.concat(iF(v,w,R,F))}return c&&(d=d.concat(gx(c,s,o,i))),d}}function sF(s,r,i,o){const c=r.get(Fn());null==i&&null!=c&&(i=fp(c,Fn()));let d=[];return r.children.inorderTraversal((g,v)=>{const w=i?i.getImmediateChild(g):null,R=jk(o,g),F=s.operationForChild(g);F&&(d=d.concat(sF(F,v,w,R)))}),c&&(d=d.concat(gx(c,s,o,i))),d}function oF(s,r){const i=r.query,o=VD(s,i);return{hashFn:()=>(function(s){return s.viewCache_.serverCache.getNode()}(r)||an.EMPTY_NODE).hash(),onComplete:c=>{if("ok"===c)return o?function(s,r,i){const o=yx(s,i);if(o){const c=vx(o),d=c.path,g=c.queryId,v=Mo(d,r);return Ex(s,d,new A0(sx(g),v))}return[]}(s,i._path,o):function(s,r){return Iv(s,new A0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r))}(s,i._path);{const d=function(s,r){let i="Unknown Error";"too_big"===s?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===s?i="Client doesn't have permission to access the desired data.":"unavailable"===s&&(i="The service is unavailable");const o=new Error(s+" at "+r._path.toString()+": "+i);return o.code=s.toUpperCase(),o}(c,i);return _x(s,i,null,d)}}}}function VD(s,r){const i=BD(r);return s.queryToTagMap.get(i)}function BD(s){return s._path.toString()+"$"+s._queryIdentifier}function yx(s,r){return s.tagToQueryMap.get(r)}function vx(s){const r=s.indexOf("$");return(0,J.hu)(-1!==r&&r<s.length-1,"Bad queryKey."),{queryId:s.substr(r+1),path:new $n(s.substr(0,r))}}function Ex(s,r,i){const o=s.syncPointTree_.get(r);return(0,J.hu)(o,"Missing sync point for query tag that we're tracking"),gx(o,i,RD(s.pendingWriteTree_,r),null)}function N0(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new((0,J.hu)(FD,"Reference.ts has not been loaded"),FD)(s._repo,s._path):s}class bx{constructor(r){this.node_=r}getImmediateChild(r){const i=this.node_.getImmediateChild(r);return new bx(i)}node(){return this.node_}}class wx{constructor(r,i){this.syncTree_=r,this.path_=i}getImmediateChild(r){const i=Wr(this.path_,r);return new wx(this.syncTree_,i)}node(){return LD(this.syncTree_,this.path_)}}const aF=function(s,r,i){return s&&"object"==typeof s?((0,J.hu)(".sv"in s,"Unexpected leaf node or priority contents"),"string"==typeof s[".sv"]?a3(s[".sv"],r,i):"object"==typeof s[".sv"]?l3(s[".sv"],r):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2))):s},a3=function(s,r,i){switch(s){case"timestamp":return i.timestamp;default:(0,J.hu)(!1,"Unexpected server value: "+s)}},l3=function(s,r,i){s.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const o=s.increment;"number"!=typeof o&&(0,J.hu)(!1,"Unexpected increment value: "+o);const c=r.node();if((0,J.hu)(null!=c,"Expected ChildrenNode.EMPTY_NODE for nulls"),!c.isLeafNode())return o;const g=c.getValue();return"number"!=typeof g?o:g+o},lF=function(s,r,i,o){return Ix(r,new wx(i,s),o)},Cx=function(s,r,i){return Ix(s,new bx(r),i)};function Ix(s,r,i){const o=s.getPriority().val(),c=aF(o,r.getImmediateChild(".priority"),i);let d;if(s.isLeafNode()){const g=s,v=aF(g.getValue(),r,i);return v!==g.getValue()||c!==g.getPriority().val()?new _v(v,ti(c)):s}{const g=s;return d=g,c!==g.getPriority().val()&&(d=d.updatePriority(new _v(c))),g.forEachChild(Or,(v,w)=>{const R=Ix(w,r.getImmediateChild(v),i);R!==w&&(d=d.updateImmediateChild(v,R))}),d}}class Tx{constructor(r="",i=null,o={children:{},childCount:0}){this.name=r,this.parent=i,this.node=o}}function UD(s,r){let i=r instanceof $n?r:new $n(r),o=s,c=gn(i);for(;null!==c;){const d=(0,J.DV)(o.node.children,c)||{children:{},childCount:0};o=new Tx(c,o,d),i=_r(i),c=gn(i)}return o}function Cm(s){return s.node.value}function Sx(s,r){s.node.value=r,Dx(s)}function cF(s){return s.node.childCount>0}function jD(s,r){ys(s.node.children,(i,o)=>{r(new Tx(i,s,o))})}function uF(s,r,i,o){i&&!o&&r(s),jD(s,c=>{uF(c,r,!0,o)}),i&&o&&r(s)}function P0(s){return new $n(null===s.parent?s.name:P0(s.parent)+"/"+s.name)}function Dx(s){null!==s.parent&&function(s,r,i){const o=function(s){return void 0===Cm(s)&&!cF(s)}(i),c=(0,J.r3)(s.node.children,r);o&&c?(delete s.node.children[r],s.node.childCount--,Dx(s)):!o&&!c&&(s.node.children[r]=i.node,s.node.childCount++,Dx(s))}(s.parent,s.name,s)}const h3=/[\[\].#$\/\u0000-\u001F\u007F]/,f3=/[\[\].#$\u0000-\u001F\u007F]/,Ax=10485760,HD=function(s){return"string"==typeof s&&0!==s.length&&!h3.test(s)},dF=function(s){return"string"==typeof s&&0!==s.length&&!f3.test(s)},k0=function(s){return null===s||"string"==typeof s||"number"==typeof s&&!gD(s)||s&&"object"==typeof s&&(0,J.r3)(s,".sv")},Qu=function(s,r,i,o){o&&void 0===r||F0((0,J.gK)(s,"value"),r,i)},F0=function(s,r,i){const o=i instanceof $n?new DB(i,s):i;if(void 0===r)throw new Error(s+"contains undefined "+vm(o));if("function"==typeof r)throw new Error(s+"contains a function "+vm(o)+" with contents = "+r.toString());if(gD(r))throw new Error(s+"contains "+r.toString()+" "+vm(o));if("string"==typeof r&&r.length>Ax/3&&(0,J.ug)(r)>Ax)throw new Error(s+"contains a string greater than "+Ax+" utf8 bytes "+vm(o)+" ('"+r.substring(0,50)+"...')");if(r&&"object"==typeof r){let c=!1,d=!1;if(ys(r,(g,v)=>{if(".value"===g)c=!0;else if(".priority"!==g&&".sv"!==g&&(d=!0,!HD(g)))throw new Error(s+" contains an invalid key ("+g+") "+vm(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(s,r){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(r),s.byteLength_+=(0,J.ug)(r),_k(s)})(o,g),F0(s,v,o),function(s){const r=s.parts_.pop();s.byteLength_-=(0,J.ug)(r),s.parts_.length>0&&(s.byteLength_-=1)}(o)}),c&&d)throw new Error(s+' contains ".value" child '+vm(o)+" in addition to actual children.")}},hF=function(s,r,i,o){if(o&&void 0===r)return;const c=(0,J.gK)(s,"values");if(!r||"object"!=typeof r||Array.isArray(r))throw new Error(c+" must be an object containing the children to replace.");const d=[];ys(r,(g,v)=>{const w=new $n(g);if(F0(c,v,Wr(i,w)),".priority"===GR(w)&&!k0(v))throw new Error(c+"contains an invalid value for '"+w.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");d.push(w)}),function(s,r){let i,o;for(i=0;i<r.length;i++){o=r[i];const d=b0(o);for(let g=0;g<d.length;g++)if((".priority"!==d[g]||g!==d.length-1)&&!HD(d[g]))throw new Error(s+"contains an invalid key ("+d[g]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}r.sort(SB);let c=null;for(i=0;i<r.length;i++){if(o=r[i],null!==c&&Fl(c,o))throw new Error(s+"contains a path "+c.toString()+" that is ancestor of another path "+o.toString());c=o}}(c,d)},Mx=function(s,r,i){if(!i||void 0!==r){if(gD(r))throw new Error((0,J.gK)(s,"priority")+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!k0(r))throw new Error((0,J.gK)(s,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},L0=function(s,r,i,o){if(!(o&&void 0===i||HD(i)))throw new Error((0,J.gK)(s,r)+'was an invalid key = "'+i+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},V0=function(s,r,i,o){if(!(o&&void 0===i||dF(i)))throw new Error((0,J.gK)(s,r)+'was an invalid path = "'+i+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vl=function(s,r){if(".info"===gn(r))throw new Error(s+" failed = Can't modify data under /.info/")},fF=function(s,r){const i=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!HD(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==i.length&&!function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),dF(s)}(i))throw new Error((0,J.gK)(s,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function GD(s,r){let i=null;for(let o=0;o<r.length;o++){const c=r[o],d=c.getPath();null!==i&&!$R(d,i.path)&&(s.eventLists_.push(i),i=null),null===i&&(i={events:[],path:d}),i.events.push(c)}i&&s.eventLists_.push(i)}function Rx(s,r,i){GD(s,i),pF(s,o=>$R(o,r))}function Bl(s,r,i){GD(s,i),pF(s,o=>Fl(o,r)||Fl(r,o))}function pF(s,r){s.recursionDepth_++;let i=!0;for(let o=0;o<s.eventLists_.length;o++){const c=s.eventLists_[o];c&&(r(c.path)?(y3(s.eventLists_[o]),s.eventLists_[o]=null):i=!1)}i&&(s.eventLists_=[]),s.recursionDepth_--}function y3(s){for(let r=0;r<s.events.length;r++){const i=s.events[r];if(null!==i){s.events[r]=null;const o=i.getEventRunner();_m&&_s("event: "+i.toString()),pv(o)}}}const gF="repo_interrupt";class E3{constructor(r,i,o,c){this.repoInfo_=r,this.forceRestClient_=i,this.authTokenProvider_=o,this.appCheckProvider_=c,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=SD(),this.transactionQueueTree_=new Tx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mF(s){const i=s.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+i}function B0(s){return function(s){return(s=s||{}).timestamp=s.timestamp||(new Date).getTime(),s}({timestamp:mF(s)})}function _F(s,r,i,o,c){s.dataUpdateCount++;const d=new $n(r);i=s.interceptServerDataCallback_?s.interceptServerDataCallback_(r,i):i;let g=[];if(c)if(o){const w=(0,J.UI)(i,R=>ti(R));g=function(s,r,i,o){const c=yx(s,o);if(c){const d=vx(c),g=d.path,v=d.queryId,w=Mo(g,r),R=Nr.fromObject(i);return Ex(s,g,new wv(sx(v),w,R))}return[]}(s.serverSyncTree_,d,w,c)}else{const w=ti(i);g=function(s,r,i,o){const c=yx(s,o);if(null!=c){const d=vx(c),g=d.path,v=d.queryId,w=Mo(g,r);return Ex(s,g,new Em(sx(v),w,i))}return[]}(s.serverSyncTree_,d,w,c)}else if(o){const w=(0,J.UI)(i,R=>ti(R));g=function(s,r,i){const o=Nr.fromObject(i);return Iv(s,new wv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,o))}(s.serverSyncTree_,d,w)}else{const w=ti(i);g=O0(s.serverSyncTree_,d,w)}let v=d;g.length>0&&(v=Sv(s,d)),Bl(s.eventQueue_,v,g)}function yF(s,r){xx(s,"connected",r),!1===r&&function(s){Tv(s,"onDisconnectEvents");const r=B0(s),i=SD();nx(s.onDisconnect_,Fn(),(c,d)=>{const g=lF(c,d,s.serverSyncTree_,r);bv(i,c,g)});let o=[];nx(i,Fn(),(c,d)=>{o=o.concat(O0(s.serverSyncTree_,c,d));const g=kx(s,c);Sv(s,g)}),s.onDisconnect_=SD(),Bl(s.eventQueue_,Fn(),o)}(s)}function xx(s,r,i){const o=new $n("/.info/"+r),c=ti(i);s.infoData_.updateSnapshot(o,c);const d=O0(s.infoSyncTree_,o,c);Bl(s.eventQueue_,o,d)}function $D(s){return s.nextWriteId_++}function Ox(s,r,i,o,c){Tv(s,"set",{path:r.toString(),value:i,priority:o});const d=B0(s),g=ti(i,o),v=LD(s.serverSyncTree_,r),w=Cx(g,v,d),R=$D(s),F=mx(s.serverSyncTree_,r,w,R,!0);GD(s.eventQueue_,F),s.server_.put(r.toString(),g.val(!0),(Q,de)=>{const ge="ok"===Q;ge||Ao("set at "+r+" failed: "+Q);const Ne=gp(s.serverSyncTree_,R,!ge);Bl(s.eventQueue_,r,Ne),mp(0,c,Q,de)});const j=kx(s,r);Sv(s,j),Bl(s.eventQueue_,j,[])}function S3(s,r,i){s.server_.onDisconnectCancel(r.toString(),(o,c)=>{"ok"===o&&tx(s.onDisconnect_,r),mp(0,i,o,c)})}function vF(s,r,i,o){const c=ti(i);s.server_.onDisconnectPut(r.toString(),c.val(!0),(d,g)=>{"ok"===d&&bv(s.onDisconnect_,r,c),mp(0,o,d,g)})}function Nx(s,r,i){let o;o=".info"===gn(r._path)?_x(s.infoSyncTree_,r,i):_x(s.serverSyncTree_,r,i),Rx(s.eventQueue_,r._path,o)}function EF(s){s.persistentConnection_&&s.persistentConnection_.interrupt(gF)}function Tv(s,...r){let i="";s.persistentConnection_&&(i=s.persistentConnection_.id+":"),_s(i,...r)}function mp(s,r,i,o){r&&pv(()=>{if("ok"===i)r(null);else{const c=(i||"error").toUpperCase();let d=c;o&&(d+=": "+o);const g=new Error(d);g.code=c,r(g)}})}function Px(s,r,i){return LD(s.serverSyncTree_,r,i)||an.EMPTY_NODE}function zD(s,r=s.transactionQueueTree_){if(r||WD(s,r),Cm(r)){const i=wF(s,r);(0,J.hu)(i.length>0,"Sending zero length transaction queue"),i.every(c=>0===c.status)&&function(s,r,i){const o=i.map(R=>R.currentWriteId),c=Px(s,r,o);let d=c;const g=c.hash();for(let R=0;R<i.length;R++){const F=i[R];(0,J.hu)(0===F.status,"tryToSendTransactionQueue_: items in queue should all be run."),F.status=1,F.retryCount++;const j=Mo(r,F.path);d=d.updateChild(j,F.currentOutputSnapshotRaw)}const v=d.val(!0),w=r;s.server_.put(w.toString(),v,R=>{Tv(s,"transaction put response",{path:w.toString(),status:R});let F=[];if("ok"===R){const j=[];for(let Q=0;Q<i.length;Q++)i[Q].status=2,F=F.concat(gp(s.serverSyncTree_,i[Q].currentWriteId)),i[Q].onComplete&&j.push(()=>i[Q].onComplete(null,!0,i[Q].currentOutputSnapshotResolved)),i[Q].unwatcher();WD(s,UD(s.transactionQueueTree_,r)),zD(s,s.transactionQueueTree_),Bl(s.eventQueue_,r,F);for(let Q=0;Q<j.length;Q++)pv(j[Q])}else{if("datastale"===R)for(let j=0;j<i.length;j++)i[j].status=3===i[j].status?4:0;else{Ao("transaction at "+w.toString()+" failed: "+R);for(let j=0;j<i.length;j++)i[j].status=4,i[j].abortReason=R}Sv(s,r)}},g)}(s,P0(r),i)}else cF(r)&&jD(r,i=>{zD(s,i)})}function Sv(s,r){const i=bF(s,r),o=P0(i);return function(s,r,i){if(0===r.length)return;const o=[];let c=[];const g=r.filter(v=>0===v.status).map(v=>v.currentWriteId);for(let v=0;v<r.length;v++){const w=r[v],R=Mo(i,w.path);let j,F=!1;if((0,J.hu)(null!==R,"rerunTransactionsUnderNode_: relativePath should not be null."),4===w.status)F=!0,j=w.abortReason,c=c.concat(gp(s.serverSyncTree_,w.currentWriteId,!0));else if(0===w.status)if(w.retryCount>=25)F=!0,j="maxretry",c=c.concat(gp(s.serverSyncTree_,w.currentWriteId,!0));else{const Q=Px(s,w.path,g);w.currentInputSnapshot=Q;const de=r[v].update(Q.val());if(void 0!==de){F0("transaction failed: Data returned ",de,w.path);let ge=ti(de);"object"==typeof de&&null!=de&&(0,J.r3)(de,".priority")||(ge=ge.updatePriority(Q.getPriority()));const $e=w.currentWriteId,Mt=B0(s),qt=Cx(ge,Q,Mt);w.currentOutputSnapshotRaw=ge,w.currentOutputSnapshotResolved=qt,w.currentWriteId=$D(s),g.splice(g.indexOf($e),1),c=c.concat(mx(s.serverSyncTree_,w.path,qt,w.currentWriteId,w.applyLocally)),c=c.concat(gp(s.serverSyncTree_,$e,!0))}else F=!0,j="nodata",c=c.concat(gp(s.serverSyncTree_,w.currentWriteId,!0))}Bl(s.eventQueue_,i,c),c=[],F&&(r[v].status=2,setTimeout(r[v].unwatcher,Math.floor(0)),r[v].onComplete&&o.push("nodata"===j?()=>r[v].onComplete(null,!1,r[v].currentInputSnapshot):()=>r[v].onComplete(new Error(j),!1,null)))}WD(s,s.transactionQueueTree_);for(let v=0;v<o.length;v++)pv(o[v]);zD(s,s.transactionQueueTree_)}(s,wF(s,i),o),o}function bF(s,r){let i,o=s.transactionQueueTree_;for(i=gn(r);null!==i&&void 0===Cm(o);)o=UD(o,i),i=gn(r=_r(r));return o}function wF(s,r){const i=[];return CF(s,r,i),i.sort((o,c)=>o.order-c.order),i}function CF(s,r,i){const o=Cm(r);if(o)for(let c=0;c<o.length;c++)i.push(o[c]);jD(r,c=>{CF(s,c,i)})}function WD(s,r){const i=Cm(r);if(i){let o=0;for(let c=0;c<i.length;c++)2!==i[c].status&&(i[o]=i[c],o++);i.length=o,Sx(r,i.length>0?i:void 0)}jD(r,o=>{WD(s,o)})}function kx(s,r){const i=P0(bF(s,r)),o=UD(s.transactionQueueTree_,r);return function(s,r,i){let o=s.parent;for(;null!==o;){if(r(o))return!0;o=o.parent}}(o,c=>{Fx(s,c)}),Fx(s,o),uF(o,c=>{Fx(s,c)}),i}function Fx(s,r){const i=Cm(r);if(i){const o=[];let c=[],d=-1;for(let g=0;g<i.length;g++)3===i[g].status||(1===i[g].status?((0,J.hu)(d===g-1,"All SENT items should be at beginning of queue."),d=g,i[g].status=3,i[g].abortReason="set"):((0,J.hu)(0===i[g].status,"Unexpected transaction status in abort"),i[g].unwatcher(),c=c.concat(gp(s.serverSyncTree_,i[g].currentWriteId,!0)),i[g].onComplete&&o.push(i[g].onComplete.bind(null,new Error("set"),!1,null))));-1===d?Sx(r,void 0):i.length=d+1,Bl(s.eventQueue_,P0(r),c);for(let g=0;g<o.length;g++)pv(o[g])}}const Lx=function(s,r){const i=F3(s),o=i.namespace;return"firebase.com"===i.domain&&Ku(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==i.domain&&Ku("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ao("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new JP(i.host,i.secure,o,r,"ws"===i.scheme||"wss"===i.scheme,"",o!==i.subdomain),path:new $n(i.pathString)}},F3=function(s){let r="",i="",o="",c="",d="",g=!0,v="https",w=443;if("string"==typeof s){let R=s.indexOf("//");R>=0&&(v=s.substring(0,R-1),s=s.substring(R+2));let F=s.indexOf("/");-1===F&&(F=s.length);let j=s.indexOf("?");-1===j&&(j=s.length),r=s.substring(0,Math.min(F,j)),F<j&&(c=function(s){let r="";const i=s.split("/");for(let o=0;o<i.length;o++)if(i[o].length>0){let c=i[o];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch(d){}r+="/"+c}return r}(s.substring(F,j)));const Q=function(s){const r={};"?"===s.charAt(0)&&(s=s.substring(1));for(const i of s.split("&")){if(0===i.length)continue;const o=i.split("=");2===o.length?r[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Ao(`Invalid query segment '${i}' in query '${s}'`)}return r}(s.substring(Math.min(s.length,j)));R=r.indexOf(":"),R>=0?(g="https"===v||"wss"===v,w=parseInt(r.substring(R+1),10)):R=r.length;const de=r.slice(0,R);if("localhost"===de.toLowerCase())i="localhost";else if(de.split(".").length<=2)i=de;else{const ge=r.indexOf(".");o=r.substring(0,ge).toLowerCase(),i=r.substring(ge+1),d=o}"ns"in Q&&(d=Q.ns)}return{host:r,port:w,domain:i,subdomain:o,secure:g,scheme:v,pathString:c,namespace:d}};class IF{constructor(r,i,o,c){this.eventType=r,this.eventRegistration=i,this.snapshot=o,this.prevName=c}getPath(){const r=this.snapshot.ref;return"value"===this.eventType?r._path:r.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,J.Pz)(this.snapshot.exportVal())}}class TF{constructor(r,i,o){this.eventRegistration=r,this.error=i,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class SF{constructor(r,i){this.snapshotCallback=r,this.cancelCallback=i}onValue(r,i){this.snapshotCallback.call(null,r,i)}onCancel(r){return(0,J.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,r)}get hasCancelCallback(){return!!this.cancelCallback}matches(r){return this.snapshotCallback===r.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===r.snapshotCallback.userCallback&&this.snapshotCallback.context===r.snapshotCallback.context}}class DF{constructor(r,i){this._repo=r,this._path=i}cancel(){const r=new J.BH;return S3(this._repo,this._path,r.wrapCallback(()=>{})),r.promise}remove(){Vl("OnDisconnect.remove",this._path);const r=new J.BH;return vF(this._repo,this._path,null,r.wrapCallback(()=>{})),r.promise}set(r){Vl("OnDisconnect.set",this._path),Qu("OnDisconnect.set",r,this._path,!1);const i=new J.BH;return vF(this._repo,this._path,r,i.wrapCallback(()=>{})),i.promise}setWithPriority(r,i){Vl("OnDisconnect.setWithPriority",this._path),Qu("OnDisconnect.setWithPriority",r,this._path,!1),Mx("OnDisconnect.setWithPriority",i,!1);const o=new J.BH;return function(s,r,i,o,c){const d=ti(i,o);s.server_.onDisconnectPut(r.toString(),d.val(!0),(g,v)=>{"ok"===g&&bv(s.onDisconnect_,r,d),mp(0,c,g,v)})}(this._repo,this._path,r,i,o.wrapCallback(()=>{})),o.promise}update(r){Vl("OnDisconnect.update",this._path),hF("OnDisconnect.update",r,this._path,!1);const i=new J.BH;return function(s,r,i,o){if((0,J.xb)(i))return _s("onDisconnect().update() called with empty data.  Don't do anything."),void mp(0,o,"ok",void 0);s.server_.onDisconnectMerge(r.toString(),i,(c,d)=>{"ok"===c&&ys(i,(g,v)=>{const w=ti(v);bv(s.onDisconnect_,Wr(r,g),w)}),mp(0,o,c,d)})}(this._repo,this._path,r,i.wrapCallback(()=>{})),i.promise}}class aa{constructor(r,i,o,c){this._repo=r,this._path=i,this._queryParams=o,this._orderByCalled=c}get key(){return mn(this._path)?null:GR(this._path)}get ref(){return new Ul(this._repo,this._path)}get _queryIdentifier(){const r=Ok(this._queryParams),i=PR(r);return"{}"===i?"default":i}get _queryObject(){return Ok(this._queryParams)}isEqual(r){if(!((r=(0,J.m9)(r))instanceof aa))return!1;const i=this._repo===r._repo,o=$R(this._path,r._path);return i&&o&&this._queryIdentifier===r._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(s){let r="";for(let i=s.pieceNum_;i<s.pieces_.length;i++)""!==s.pieces_[i]&&(r+="/"+encodeURIComponent(String(s.pieces_[i])));return r||"/"}(this._path)}}function qD(s,r){if(!0===s._orderByCalled)throw new Error(r+": You can't combine multiple orderBy calls.")}function _p(s){let r=null,i=null;if(s.hasStart()&&(r=s.getIndexStartValue()),s.hasEnd()&&(i=s.getIndexEndValue()),s.getIndex()===Yu){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",c="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(s.hasStart()){if(s.getIndexStartName()!==Nh)throw new Error(o);if("string"!=typeof r)throw new Error(c)}if(s.hasEnd()){if(s.getIndexEndName()!==Zu)throw new Error(o);if("string"!=typeof i)throw new Error(c)}}else if(s.getIndex()===Or){if(null!=r&&!k0(r)||null!=i&&!k0(i))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,J.hu)(s.getIndex()instanceof ZR||s.getIndex()===YR,"unknown index type."),null!=r&&"object"==typeof r||null!=i&&"object"==typeof i)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function KD(s){if(s.hasStart()&&s.hasEnd()&&s.hasLimit()&&!s.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ul extends aa{constructor(r,i){super(r,i,new CD,!1)}get parent(){const r=mk(this._path);return null===r?null:new Ul(this._repo,r)}get root(){let r=this;for(;null!==r.parent;)r=r.parent;return r}}class Im{constructor(r,i,o){this._node=r,this.ref=i,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(r){const i=new $n(r),o=Tm(this.ref,r);return new Im(this._node.getChild(i),o,Or)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,c)=>r(new Im(c,Tm(this.ref,o),Or)))}hasChild(r){const i=new $n(r);return!this._node.getChild(i).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function AF(s,r){return(s=(0,J.m9)(s))._checkNotDeleted("ref"),void 0!==r?Tm(s._root,r):s._root}function MF(s,r){(s=(0,J.m9)(s))._checkNotDeleted("refFromURL");const i=Lx(r,s._repo.repoInfo_.nodeAdmin);fF("refFromURL",i);const o=i.repoInfo;return!s._repo.repoInfo_.isCustomHost()&&o.host!==s._repo.repoInfo_.host&&Ku("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+s._repo.repoInfo_.host+")"),AF(s,i.path.toString())}function Tm(s,r){return null===gn((s=(0,J.m9)(s))._path)?((i=r)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),V0("child","path",i,!1)):V0("child","path",r,!1),new Ul(s._repo,Wr(s._path,r));var i}function Vx(s,r){s=(0,J.m9)(s),Vl("set",s._path),Qu("set",r,s._path,!1);const i=new J.BH;return Ox(s._repo,s._path,r,null,i.wrapCallback(()=>{})),i.promise}function j3(s,r){hF("update",r,s._path,!1);const i=new J.BH;return function(s,r,i,o){Tv(s,"update",{path:r.toString(),value:i});let c=!0;const d=B0(s),g={};if(ys(i,(v,w)=>{c=!1,g[v]=lF(Wr(r,v),ti(w),s.serverSyncTree_,d)}),c)_s("update() called with empty data.  Don't do anything."),mp(0,o,"ok",void 0);else{const v=$D(s),w=function(s,r,i,o){!function(s,r,i,o){(0,J.hu)(o>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:r,children:i,writeId:o,visible:!0}),s.visibleWrites=ax(s.visibleWrites,r,i),s.lastWriteId=o}(s.pendingWriteTree_,r,i,o);const c=Nr.fromObject(i);return Iv(s,new wv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,c))}(s.serverSyncTree_,r,g,v);GD(s.eventQueue_,w),s.server_.merge(r.toString(),i,(R,F)=>{const j="ok"===R;j||Ao("update at "+r+" failed: "+R);const Q=gp(s.serverSyncTree_,v,!j),de=Q.length>0?Sv(s,r):r;Bl(s.eventQueue_,de,Q),mp(0,o,R,F)}),ys(i,R=>{const F=kx(s,Wr(r,R));Sv(s,F)}),Bl(s.eventQueue_,r,[])}}(s._repo,s._path,r,i.wrapCallback(()=>{})),i.promise}function H3(s){return function(s,r){const i=function(s,r){const i=r._path;let o=null;s.syncPointTree_.foreachOnPath(i,(R,F)=>{const j=Mo(R,i);o=o||fp(F,j)});let c=s.syncPointTree_.get(i);c?o=o||fp(c,Fn()):(c=new Qk,s.syncPointTree_=s.syncPointTree_.set(i,c));const d=null!=o,g=d?new dp(o,!0,!1):null;return function(s){return MD(s.viewCache_)}(Jk(c,r,RD(s.pendingWriteTree_,r._path),d?g.getNode():an.EMPTY_NODE,d))}(s.serverSyncTree_,r);return null!=i?Promise.resolve(i):s.server_.get(r).then(o=>{const c=ti(o).withIndex(r._queryParams.getIndex()),d=O0(s.serverSyncTree_,r._path,c);return Rx(s.eventQueue_,r._path,d),Promise.resolve(c)},o=>(Tv(s,"get for query "+(0,J.Pz)(r)+" failed: "+o),Promise.reject(new Error(o))))}((s=(0,J.m9)(s))._repo,s).then(r=>new Im(r,new Ul(s._repo,s._path),s._queryParams.getIndex()))}class ZD{constructor(r){this.callbackContext=r}respondsTo(r){return"value"===r}createEvent(r,i){const o=i._queryParams.getIndex();return new IF("value",this,new Im(r.snapshotNode,new Ul(i._repo,i._path),o))}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,null)}createCancelEvent(r,i){return this.callbackContext.hasCancelCallback?new TF(this,r,i):null}matches(r){return r instanceof ZD&&(!r.callbackContext||!this.callbackContext||r.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class YD{constructor(r,i){this.eventType=r,this.callbackContext=i}respondsTo(r){let i="children_added"===r?"child_added":r;return i="children_removed"===i?"child_removed":i,this.eventType===i}createCancelEvent(r,i){return this.callbackContext.hasCancelCallback?new TF(this,r,i):null}createEvent(r,i){(0,J.hu)(null!=r.childName,"Child events should have a childName.");const o=Tm(new Ul(i._repo,i._path),r.childName),c=i._queryParams.getIndex();return new IF(r.type,this,new Im(r.snapshotNode,o,c),r.prevName)}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,r.prevName)}matches(r){return r instanceof YD&&this.eventType===r.eventType&&(!this.callbackContext||!r.callbackContext||this.callbackContext.matches(r.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function U0(s,r,i,o,c){let d;if("object"==typeof o&&(d=void 0,c=o),"function"==typeof o&&(d=o),c&&c.onlyOnce){const w=i,R=(F,j)=>{Nx(s._repo,s,v),w(F,j)};R.userCallback=i.userCallback,R.context=i.context,i=R}const g=new SF(i,d||void 0),v="value"===r?new ZD(g):new YD(r,g);return function(s,r,i){let o;o=".info"===gn(r._path)?rF(s.infoSyncTree_,r,i):rF(s.serverSyncTree_,r,i),Rx(s.eventQueue_,r._path,o)}(s._repo,s,v),()=>Nx(s._repo,s,v)}function Bx(s,r,i,o){return U0(s,"value",r,i,o)}function RF(s,r,i,o){return U0(s,"child_added",r,i,o)}function xF(s,r,i,o){return U0(s,"child_changed",r,i,o)}function OF(s,r,i,o){return U0(s,"child_moved",r,i,o)}function NF(s,r,i,o){return U0(s,"child_removed",r,i,o)}function PF(s,r,i){let o=null;const c=i?new SF(i):null;"value"===r?o=new ZD(c):r&&(o=new YD(r,c)),Nx(s._repo,s,o)}class Zc{}class kF extends Zc{constructor(r,i){super(),this._value=r,this._key=i}_apply(r){Qu("endAt",this._value,r._path,!0);const i=ex(r._queryParams,this._value,this._key);if(KD(i),_p(i),r._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new aa(r._repo,r._path,i,r._orderByCalled)}}class $3 extends Zc{constructor(r,i){super(),this._value=r,this._key=i}_apply(r){Qu("endBefore",this._value,r._path,!1);const i=function(s,r,i){let o,c;return s.index_===Yu?("string"==typeof r&&(r=Mk(r)),c=ex(s,r,i)):(o=null==i?Nh:Mk(i),c=ex(s,r,o)),c.endBeforeSet_=!0,c}(r._queryParams,this._value,this._key);if(KD(i),_p(i),r._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new aa(r._repo,r._path,i,r._orderByCalled)}}class FF extends Zc{constructor(r,i){super(),this._value=r,this._key=i}_apply(r){Qu("startAt",this._value,r._path,!0);const i=XR(r._queryParams,this._value,this._key);if(KD(i),_p(i),r._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new aa(r._repo,r._path,i,r._orderByCalled)}}class q3 extends Zc{constructor(r,i){super(),this._value=r,this._key=i}_apply(r){Qu("startAfter",this._value,r._path,!1);const i=function(s,r,i){let o;if(s.index_===Yu)"string"==typeof r&&(r=Ak(r)),o=XR(s,r,i);else{let c;c=null==i?Zu:Ak(i),o=XR(s,r,c)}return o.startAfterSet_=!0,o}(r._queryParams,this._value,this._key);if(KD(i),_p(i),r._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new aa(r._repo,r._path,i,r._orderByCalled)}}class Z3 extends Zc{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new aa(r._repo,r._path,function(s,r){const i=s.copy();return i.limitSet_=!0,i.limit_=r,i.viewFrom_="l",i}(r._queryParams,this._limit),r._orderByCalled)}}class Q3 extends Zc{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new aa(r._repo,r._path,function(s,r){const i=s.copy();return i.limitSet_=!0,i.limit_=r,i.viewFrom_="r",i}(r._queryParams,this._limit),r._orderByCalled)}}class X3 extends Zc{constructor(r){super(),this._path=r}_apply(r){qD(r,"orderByChild");const i=new $n(this._path);if(mn(i))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new ZR(i),c=ID(r._queryParams,o);return _p(c),new aa(r._repo,r._path,c,!0)}}class t6 extends Zc{_apply(r){qD(r,"orderByKey");const i=ID(r._queryParams,Yu);return _p(i),new aa(r._repo,r._path,i,!0)}}class r6 extends Zc{_apply(r){qD(r,"orderByPriority");const i=ID(r._queryParams,Or);return _p(i),new aa(r._repo,r._path,i,!0)}}class s6 extends Zc{_apply(r){qD(r,"orderByValue");const i=ID(r._queryParams,YR);return _p(i),new aa(r._repo,r._path,i,!0)}}class a6 extends Zc{constructor(r,i){super(),this._value=r,this._key=i}_apply(r){if(Qu("equalTo",this._value,r._path,!1),r._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(r._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new kF(this._value,this._key)._apply(new FF(this._value,this._key)._apply(r))}}function Yc(s,...r){let i=(0,J.m9)(s);for(const o of r)i=o._apply(i);return i}(function(s){(0,J.hu)(!PD,"__referenceConstructor has already been defined"),PD=s})(Ul),function(s){(0,J.hu)(!FD,"__referenceConstructor has already been defined"),FD=s}(Ul);const Ux={};function VF(s,r,i,o,c){let d=o||s.options.databaseURL;void 0===d&&(s.options.projectId||Ku("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_s("Using default host for project ",s.options.projectId),d=`${s.options.projectId}-default-rtdb.firebaseio.com`);let w,R,g=Lx(d,c),v=g.repoInfo;"undefined"!=typeof process&&(R=process.env.FIREBASE_DATABASE_EMULATOR_HOST),R?(w=!0,d=`http://${R}?ns=${v.namespace}`,g=Lx(d,c),v=g.repoInfo):w=!g.repoInfo.secure;const F=c&&w?new y0(y0.OWNER):new JV(s.name,s.options,r);fF("Invalid Firebase Database URL",g),mn(g.path)||Ku("Database URL must point to the root of a Firebase Database (not including a child path).");const j=function(s,r,i,o){let c=Ux[r.name];c||(c={},Ux[r.name]=c);let d=c[s.toURLString()];return d&&Ku("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new E3(s,false,i,o),c[s.toURLString()]=d,d}(v,s,F,new QV(s.name,i));return new p6(j,s)}class p6{constructor(r,i){this._repoInternal=r,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(s,r,i){if(s.stats_=BR(s.repoInfo_),s.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)s.server_=new TD(s.repoInfo_,(o,c,d,g)=>{_F(s,o,c,d,g)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>yF(s,!0),0);else{if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Pz)(i)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}s.persistentConnection_=new mv(s.repoInfo_,r,(o,c,d,g)=>{_F(s,o,c,d,g)},o=>{yF(s,o)},o=>{!function(s,r){ys(r,(i,o)=>{xx(s,i,o)})}(s,o)},s.authTokenProvider_,s.appCheckProvider_,i),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(o=>{s.server_.refreshAuthToken(o)}),s.appCheckProvider_.addTokenChangeListener(o=>{s.server_.refreshAppCheckToken(o.token)}),s.statsReporter_=function(s,r){const i=s.toString();return VR[i]||(VR[i]=r()),VR[i]}(s.repoInfo_,()=>new sU(s.stats_,s.server_)),s.infoData_=new eU,s.infoSyncTree_=new nF({startListening:(o,c,d,g)=>{let v=[];const w=s.infoData_.getNode(o._path);return w.isEmpty()||(v=O0(s.infoSyncTree_,o._path,w),setTimeout(()=>{g("ok")},0)),v},stopListening:()=>{}}),xx(s,"connected",!1),s.serverSyncTree_=new nF({startListening:(o,c,d,g)=>(s.server_.listen(o,d,c,(v,w)=>{const R=g(v,w);Bl(s.eventQueue_,o._path,R)}),[]),stopListening:(o,c)=>{s.server_.unlisten(o,c)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ul(this._repo,Fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(s,r){const i=Ux[r];(!i||i[s.key]!==s)&&Ku(`Database ${r}(${s.repoInfo_}) has already been deleted.`),EF(s),delete i[s.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(r){null===this._rootInternal&&Ku("Cannot call "+r+" on a deleted database.")}}function y6(s,r){UP(s,r)}class C6{constructor(r,i){this.committed=r,this.snapshot=i}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}mv.prototype.simpleListen=function(s,r){this.sendRequest("q",{p:s},r)},mv.prototype.echo=function(s,r){this.sendRequest("echo",{d:s},r)},kP(cc.SDK_VERSION),(0,cc._registerComponent)(new ba.wA("database",(r,{instanceIdentifier:i})=>VF(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"),r.getProvider("app-check-internal"),i),"PUBLIC").setMultipleInstances(!0)),(0,cc.registerVersion)("@firebase/database","0.12.0",void 0);const D6=new po.Yd("@firebase/database-compat"),BF=function(s){D6.warn("FIREBASE WARNING: "+s)};class R6{constructor(r){this._delegate=r}cancel(r){(0,J.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,J.Wj)("OnDisconnect.cancel","onComplete",r,!0);const i=this._delegate.cancel();return r&&i.then(()=>r(null),o=>r(o)),i}remove(r){(0,J.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,J.Wj)("OnDisconnect.remove","onComplete",r,!0);const i=this._delegate.remove();return r&&i.then(()=>r(null),o=>r(o)),i}set(r,i){(0,J.Dv)("OnDisconnect.set",1,2,arguments.length),(0,J.Wj)("OnDisconnect.set","onComplete",i,!0);const o=this._delegate.set(r);return i&&o.then(()=>i(null),c=>i(c)),o}setWithPriority(r,i,o){(0,J.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,J.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const c=this._delegate.setWithPriority(r,i);return o&&c.then(()=>o(null),d=>o(d)),c}update(r,i){if((0,J.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(r)){const c={};for(let d=0;d<r.length;++d)c[""+d]=r[d];r=c,BF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,J.Wj)("OnDisconnect.update","onComplete",i,!0);const o=this._delegate.update(r);return i&&o.then(()=>i(null),c=>i(c)),o}}class x6{constructor(r,i){this.committed=r,this.snapshot=i}toJSON(){return(0,J.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class yp{constructor(r,i){this._database=r,this._delegate=i}val(){return(0,J.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,J.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,J.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,J.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(r){return(0,J.Dv)("DataSnapshot.child",0,1,arguments.length),r=String(r),V0("DataSnapshot.child","path",r,!1),new yp(this._database,this._delegate.child(r))}hasChild(r){return(0,J.Dv)("DataSnapshot.hasChild",1,1,arguments.length),V0("DataSnapshot.hasChild","path",r,!1),this._delegate.hasChild(r)}getPriority(){return(0,J.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(r){return(0,J.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,J.Wj)("DataSnapshot.forEach","action",r,!1),this._delegate.forEach(i=>r(new yp(this._database,i)))}hasChildren(){return(0,J.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,J.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,J.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ha(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Fs{constructor(r,i){this.database=r,this._delegate=i}on(r,i,o,c){var d;(0,J.Dv)("Query.on",2,4,arguments.length),(0,J.Wj)("Query.on","callback",i,!1);const g=Fs.getCancelAndContextArgs_("Query.on",o,c),v=(R,F)=>{i.call(g.context,new yp(this.database,R),F)};v.userCallback=i,v.context=g.context;const w=null===(d=g.cancel)||void 0===d?void 0:d.bind(g.context);switch(r){case"value":return Bx(this._delegate,v,w),i;case"child_added":return RF(this._delegate,v,w),i;case"child_removed":return NF(this._delegate,v,w),i;case"child_changed":return xF(this._delegate,v,w),i;case"child_moved":return OF(this._delegate,v,w),i;default:throw new Error((0,J.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(r,i,o){if((0,J.Dv)("Query.off",0,3,arguments.length),function(s,r,i){if(void 0!==r)switch(r){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,J.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,r),(0,J.Wj)("Query.off","callback",i,!0),(0,J.lb)("Query.off","context",o,!0),i){const c=()=>{};c.userCallback=i,c.context=o,PF(this._delegate,r,c)}else PF(this._delegate,r)}get(){return H3(this._delegate).then(r=>new yp(this.database,r))}once(r,i,o,c){(0,J.Dv)("Query.once",1,4,arguments.length),(0,J.Wj)("Query.once","callback",i,!0);const d=Fs.getCancelAndContextArgs_("Query.once",o,c),g=new J.BH,v=(R,F)=>{const j=new yp(this.database,R);i&&i.call(d.context,j,F),g.resolve(j)};v.userCallback=i,v.context=d.context;const w=R=>{d.cancel&&d.cancel.call(d.context,R),g.reject(R)};switch(r){case"value":Bx(this._delegate,v,w,{onlyOnce:!0});break;case"child_added":RF(this._delegate,v,w,{onlyOnce:!0});break;case"child_removed":NF(this._delegate,v,w,{onlyOnce:!0});break;case"child_changed":xF(this._delegate,v,w,{onlyOnce:!0});break;case"child_moved":OF(this._delegate,v,w,{onlyOnce:!0});break;default:throw new Error((0,J.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return g.promise}limitToFirst(r){return(0,J.Dv)("Query.limitToFirst",1,1,arguments.length),new Fs(this.database,Yc(this._delegate,function(s){if("number"!=typeof s||Math.floor(s)!==s||s<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Z3(s)}(r)))}limitToLast(r){return(0,J.Dv)("Query.limitToLast",1,1,arguments.length),new Fs(this.database,Yc(this._delegate,function(s){if("number"!=typeof s||Math.floor(s)!==s||s<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Q3(s)}(r)))}orderByChild(r){return(0,J.Dv)("Query.orderByChild",1,1,arguments.length),new Fs(this.database,Yc(this._delegate,function(s){if("$key"===s)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===s)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===s)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return V0("orderByChild","path",s,!1),new X3(s)}(r)))}orderByKey(){return(0,J.Dv)("Query.orderByKey",0,0,arguments.length),new Fs(this.database,Yc(this._delegate,new t6))}orderByPriority(){return(0,J.Dv)("Query.orderByPriority",0,0,arguments.length),new Fs(this.database,Yc(this._delegate,new r6))}orderByValue(){return(0,J.Dv)("Query.orderByValue",0,0,arguments.length),new Fs(this.database,Yc(this._delegate,new s6))}startAt(r=null,i){return(0,J.Dv)("Query.startAt",0,2,arguments.length),new Fs(this.database,Yc(this._delegate,function(s=null,r){return L0("startAt","key",r,!0),new FF(s,r)}(r,i)))}startAfter(r=null,i){return(0,J.Dv)("Query.startAfter",0,2,arguments.length),new Fs(this.database,Yc(this._delegate,function(s,r){return L0("startAfter","key",r,!0),new q3(s,r)}(r,i)))}endAt(r=null,i){return(0,J.Dv)("Query.endAt",0,2,arguments.length),new Fs(this.database,Yc(this._delegate,function(s,r){return L0("endAt","key",r,!0),new kF(s,r)}(r,i)))}endBefore(r=null,i){return(0,J.Dv)("Query.endBefore",0,2,arguments.length),new Fs(this.database,Yc(this._delegate,function(s,r){return L0("endBefore","key",r,!0),new $3(s,r)}(r,i)))}equalTo(r,i){return(0,J.Dv)("Query.equalTo",1,2,arguments.length),new Fs(this.database,Yc(this._delegate,function(s,r){return L0("equalTo","key",r,!0),new a6(s,r)}(r,i)))}toString(){return(0,J.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,J.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(r){if((0,J.Dv)("Query.isEqual",1,1,arguments.length),!(r instanceof Fs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(r._delegate)}static getCancelAndContextArgs_(r,i,o){const c={cancel:void 0,context:void 0};if(i&&o)c.cancel=i,(0,J.Wj)(r,"cancel",c.cancel,!0),c.context=o,(0,J.lb)(r,"context",c.context,!0);else if(i)if("object"==typeof i&&null!==i)c.context=i;else{if("function"!=typeof i)throw new Error((0,J.gK)(r,"cancelOrContext")+" must either be a cancel callback or a context object.");c.cancel=i}return c}get ref(){return new Ha(this.database,new Ul(this._delegate._repo,this._delegate._path))}}class Ha extends Fs{constructor(r,i){super(r,new aa(i._repo,i._path,new CD,!1)),this.database=r,this._delegate=i}getKey(){return(0,J.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(r){return(0,J.Dv)("Reference.child",1,1,arguments.length),"number"==typeof r&&(r=String(r)),new Ha(this.database,Tm(this._delegate,r))}getParent(){(0,J.Dv)("Reference.parent",0,0,arguments.length);const r=this._delegate.parent;return r?new Ha(this.database,r):null}getRoot(){return(0,J.Dv)("Reference.root",0,0,arguments.length),new Ha(this.database,this._delegate.root)}set(r,i){(0,J.Dv)("Reference.set",1,2,arguments.length),(0,J.Wj)("Reference.set","onComplete",i,!0);const o=Vx(this._delegate,r);return i&&o.then(()=>i(null),c=>i(c)),o}update(r,i){if((0,J.Dv)("Reference.update",1,2,arguments.length),Array.isArray(r)){const c={};for(let d=0;d<r.length;++d)c[""+d]=r[d];r=c,BF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vl("Reference.update",this._delegate._path),(0,J.Wj)("Reference.update","onComplete",i,!0);const o=j3(this._delegate,r);return i&&o.then(()=>i(null),c=>i(c)),o}setWithPriority(r,i,o){(0,J.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,J.Wj)("Reference.setWithPriority","onComplete",o,!0);const c=function(s,r,i){if(Vl("setWithPriority",s._path),Qu("setWithPriority",r,s._path,!1),Mx("setWithPriority",i,!1),".length"===s.key||".keys"===s.key)throw"setWithPriority failed: "+s.key+" is a read-only object.";const o=new J.BH;return Ox(s._repo,s._path,r,i,o.wrapCallback(()=>{})),o.promise}(this._delegate,r,i);return o&&c.then(()=>o(null),d=>o(d)),c}remove(r){(0,J.Dv)("Reference.remove",0,1,arguments.length),(0,J.Wj)("Reference.remove","onComplete",r,!0);const i=function(s){return Vl("remove",s._path),Vx(s,null)}(this._delegate);return r&&i.then(()=>r(null),o=>r(o)),i}transaction(r,i,o){(0,J.Dv)("Reference.transaction",1,3,arguments.length),(0,J.Wj)("Reference.transaction","transactionUpdate",r,!1),(0,J.Wj)("Reference.transaction","onComplete",i,!0),function(s,r,i,o){if(void 0!==i&&"boolean"!=typeof i)throw new Error((0,J.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const c=function(s,r,i){var o;if(s=(0,J.m9)(s),Vl("Reference.transaction",s._path),".length"===s.key||".keys"===s.key)throw"Reference.transaction failed: "+s.key+" is a read-only object.";const c=null===(o=null==i?void 0:i.applyLocally)||void 0===o||o,d=new J.BH,v=Bx(s,()=>{});return function(s,r,i,o,c,d){Tv(s,"transaction on "+r);const g={path:r,update:i,onComplete:o,status:null,order:LP(),applyLocally:d,retryCount:0,unwatcher:c,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},v=Px(s,r,void 0);g.currentInputSnapshot=v;const w=g.update(v.val());if(void 0===w)g.unwatcher(),g.currentOutputSnapshotRaw=null,g.currentOutputSnapshotResolved=null,g.onComplete&&g.onComplete(null,!1,g.currentInputSnapshot);else{F0("transaction failed: Data returned ",w,g.path),g.status=0;const R=UD(s.transactionQueueTree_,r),F=Cm(R)||[];let j;F.push(g),Sx(R,F),"object"==typeof w&&null!==w&&(0,J.r3)(w,".priority")?(j=(0,J.DV)(w,".priority"),(0,J.hu)(k0(j),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):j=(LD(s.serverSyncTree_,r)||an.EMPTY_NODE).getPriority().val();const Q=B0(s),de=ti(w,j),ge=Cx(de,v,Q);g.currentOutputSnapshotRaw=de,g.currentOutputSnapshotResolved=ge,g.currentWriteId=$D(s);const Ne=mx(s.serverSyncTree_,r,ge,g.currentWriteId,g.applyLocally);Bl(s.eventQueue_,r,Ne),zD(s,s.transactionQueueTree_)}}(s._repo,s._path,r,(w,R,F)=>{let j=null;w?d.reject(w):(j=new Im(F,new Ul(s._repo,s._path),Or),d.resolve(new C6(R,j)))},v,c),d.promise}(this._delegate,r,{applyLocally:o}).then(d=>new x6(d.committed,new yp(this.database,d.snapshot)));return i&&c.then(d=>i(null,d.committed,d.snapshot),d=>i(d,!1,null)),c}setPriority(r,i){(0,J.Dv)("Reference.setPriority",1,2,arguments.length),(0,J.Wj)("Reference.setPriority","onComplete",i,!0);const o=function(s,r){s=(0,J.m9)(s),Vl("setPriority",s._path),Mx("setPriority",r,!1);const i=new J.BH;return Ox(s._repo,Wr(s._path,".priority"),r,null,i.wrapCallback(()=>{})),i.promise}(this._delegate,r);return i&&o.then(()=>i(null),c=>i(c)),o}push(r,i){(0,J.Dv)("Reference.push",0,2,arguments.length),(0,J.Wj)("Reference.push","onComplete",i,!0);const o=function(s,r){s=(0,J.m9)(s),Vl("push",s._path),Qu("push",r,s._path,!0);const i=mF(s._repo),o=WB(i),c=Tm(s,o),d=Tm(s,o);let g;return g=null!=r?Vx(d,r).then(()=>d):Promise.resolve(d),c.then=g.then.bind(g),c.catch=g.then.bind(g,void 0),c}(this._delegate,r),c=o.then(g=>new Ha(this.database,g));i&&c.then(()=>i(null),g=>i(g));const d=new Ha(this.database,o);return d.then=c.then.bind(c),d.catch=c.catch.bind(c,void 0),d}onDisconnect(){return Vl("Reference.onDisconnect",this._delegate._path),new R6(new DF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class j0{constructor(r,i){this._delegate=r,this.app=i,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(r,i,o={}){!function(s,r,i,o={}){(s=(0,J.m9)(s))._checkNotDeleted("useEmulator"),s._instanceStarted&&Ku("Cannot call useEmulator() after instance has already been initialized.");const c=s._repoInternal;let d;if(c.repoInfo_.nodeAdmin)o.mockUserToken&&Ku('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new y0(y0.OWNER);else if(o.mockUserToken){const g="string"==typeof o.mockUserToken?o.mockUserToken:(0,J.Sg)(o.mockUserToken,s.app.options.projectId);d=new y0(g)}!function(s,r,i,o){s.repoInfo_=new JP(`${r}:${i}`,!1,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams),o&&(s.authTokenProvider_=o)}(c,r,i,d)}(this._delegate,r,i,o)}ref(r){if((0,J.Dv)("database.ref",0,1,arguments.length),r instanceof Ha){const i=MF(this._delegate,r.toString());return new Ha(this,i)}{const i=AF(this._delegate,r);return new Ha(this,i)}}refFromURL(r){(0,J.Dv)("database.refFromURL",1,1,arguments.length);const o=MF(this._delegate,r);return new Ha(this,o)}goOffline(){return(0,J.Dv)("database.goOffline",0,0,arguments.length),function(s){(s=(0,J.m9)(s))._checkNotDeleted("goOffline"),EF(s._repo)}(this._delegate)}goOnline(){return(0,J.Dv)("database.goOnline",0,0,arguments.length),function(s){(s=(0,J.m9)(s))._checkNotDeleted("goOnline"),function(s){s.persistentConnection_&&s.persistentConnection_.resume(gF)}(s._repo)}(this._delegate)}}j0.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:s=>function(s){return{".sv":{increment:s}}}(s)};var N6=Object.freeze({__proto__:null,initStandalone:function({app:s,url:r,version:i,customAuthImpl:o,namespace:c,nodeAdmin:d=!1}){kP(i);const g=new ba.zt("auth-internal",new ba.H0("database-standalone"));return g.setComponent(new ba.wA("auth-internal",()=>o,"PRIVATE")),{instance:new j0(VF(s,g,void 0,r,d),s),namespace:c}}});const P6=j0.ServerValue;function UF(s){return null==s}function jF(s){return"function"==typeof s.set}function HF(s,r){return jF(r)?r:s.ref(r)}function GF(s,r){if(function(s){return"string"==typeof s}(s))return r.stringCase();if(jF(s))return r.firebaseCase();if(function(s){return"function"==typeof s.exportVal}(s))return r.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof s)}function H0(s,r,i="on",o=$h.z){return new sr.y(c=>{let d=null;return d=s[i](r,(g,v)=>{o.schedule(()=>{c.next({snapshot:g,prevKey:v})}),"once"===i&&o.schedule(()=>c.complete())},g=>{o.schedule(()=>c.error(g))}),"on"===i?{unsubscribe(){null!=d&&s.off(r,d)}}:{unsubscribe(){}}}).pipe((0,bn.U)(c=>{const{snapshot:d,prevKey:g}=c;let v=null;return d.exists()&&(v=d.key),{type:r,payload:d,prevKey:g,key:v}}),(0,RV.B)())}function $F(s,r){const i=s.length;for(let o=0;o<i;o++)if(s[o].payload.key===r)return o;return-1}function U6(s,r){const{payload:i,prevKey:o,key:c}=r,d=$F(s,c),g=function(s,r){if(UF(r))return 0;{const i=$F(s,r);return-1===i?s.length:i+1}}(s,o);switch(r.type){case"value":if(r.payload&&r.payload.exists()){let v=null;r.payload.forEach(w=>{const R={payload:w,type:"value",prevKey:v,key:w.key};return v=w.key,s=[...s,R],!1})}return s;case"child_added":if(d>-1){const v=s[d-1];(v&&v.key||null)!==o&&(s=s.filter(w=>w.payload.key!==i.key)).splice(g,0,r)}else{if(null==o)return[r,...s];(s=s.slice()).splice(g,0,r)}return s;case"child_removed":return s.filter(v=>v.payload.key!==i.key);case"child_changed":return s.map(v=>v.payload.key===c?r:v);case"child_moved":if(d>-1){const v=s.splice(d,1)[0];return(s=s.slice()).splice(g,0,v),s}return s;default:return s}}function zF(s){return(UF(s)||0===s.length)&&(s=["child_added","child_removed","child_changed","child_moved"]),s}function WF(s,r,i){return function(s,r,i){return H0(s,"value","once",i).pipe((0,x.w)(o=>{const c=[(0,wi.of)(o)];return r.forEach(d=>c.push(H0(s,d,"on",i))),(0,$o.T)(...c).pipe((0,pd.R)(U6,[]))}),lc())}(s,r=zF(r),i)}function qF(s,r,i){const o=(r=zF(r)).map(c=>H0(s,c,"on",i));return(0,$o.T)(...o)}function KF(s,r){return function(o,c){return GF(o,{stringCase:()=>s.child(o)[r](c),firebaseCase:()=>o[r](c),snapshotCase:()=>o.ref[r](c)})}}function $6(s){return function(i){return i?GF(i,{stringCase:()=>s.child(i).remove(),firebaseCase:()=>i.remove(),snapshotCase:()=>i.ref.remove()}):s.remove()}}function ZF(s,r){return function(){return H0(s,"value","on",r)}}!function(s){s.INTERNAL.registerComponent(new ba.wA("database-compat",(r,{instanceIdentifier:i})=>{const o=r.getProvider("app-compat").getImmediate(),c=r.getProvider("database").getImmediate({identifier:i});return new j0(c,o)},"PUBLIC").setServiceProps({Reference:Ha,Query:Fs,Database:j0,DataSnapshot:yp,enableLogging:y6,INTERNAL:N6,ServerValue:P6}).setMultipleInstances(!0)),s.registerVersion("@firebase/database-compat","0.1.0")}(Tp.Z);const q6=new m.OlP("angularfire2.realtimeDatabaseURL"),K6=new m.OlP("angularfire2.database.use-emulator");let Z6=(()=>{class s{constructor(i,o,c,d,g,v,w,R,F,j,Q,de,ge,Ne){this.schedulers=v;const $e=w,Mt=(0,pr.on)(i,g,o);R&&Ea(Mt,g,F,Q,de,ge,j,Ne),this.database=(0,Et.cc)(`${Mt.name}.database.${c}`,"AngularFireDatabase",Mt.name,()=>{const qt=g.runOutsideAngular(()=>Mt.database(c||void 0));return $e&&qt.useEmulator(...$e),qt},[$e])}list(i,o){const c=this.schedulers.ngZone.runOutsideAngular(()=>HF(this.database,i));let d=c;return o&&(d=o(c)),function(s,r){const i=r.schedulers.outsideAngular,o=r.schedulers.ngZone.run(()=>s.ref);return{query:s,update:KF(o,"update"),set:KF(o,"set"),push:c=>o.push(c),remove:$6(o),snapshotChanges:c=>WF(s,c,i).pipe(Et.iC),stateChanges:c=>qF(s,c,i).pipe(Et.iC),auditTrail:c=>function(s,r,i){return function(s,r,i){return function(s,r){return H0(s,"value","on",r).pipe((0,bn.U)(i=>{let o;return i.payload.forEach(c=>(o=c.key,!1)),{data:i,lastKeyToLoad:o}}))}(s,i).pipe(function(...s){return r=>{let i;return"function"==typeof s[s.length-1]&&(i=s.pop()),r.lift(new PV(s,i))}}(r),(0,bn.U)(([c,d])=>{const g=c.lastKeyToLoad,v=d.map(w=>w.key);return{actions:d,lastKeyToLoad:g,loadedKeys:v}}),function(s){return r=>r.lift(new LV(s))}(c=>-1===c.loadedKeys.indexOf(c.lastKeyToLoad)),(0,bn.U)(c=>c.actions))}(s,qF(s,r).pipe((0,pd.R)((c,d)=>[...c,d],[])),i)}(s,c,i).pipe(Et.iC),valueChanges:(c,d)=>WF(s,c,i).pipe((0,bn.U)(v=>v.map(w=>d&&d.idField?Object.assign(Object.assign({},w.payload.val()),{[d.idField]:w.key}):w.payload.val())),Et.iC)}}(d,this)}object(i){return function(s,r){return{query:s,snapshotChanges:()=>ZF(s,r.schedulers.outsideAngular)().pipe(Et.iC),update:i=>s.ref.update(i),set:i=>s.ref.set(i),remove:()=>s.ref.remove(),valueChanges:()=>ZF(s,r.schedulers.outsideAngular)().pipe(Et.iC,(0,bn.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HF(this.database,i)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(pr.Dh),m.LFG(pr.xv,8),m.LFG(q6,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Et.HU),m.LFG(K6,8),m.LFG(oc,8),m.LFG(qi,8),m.LFG(fo,8),m.LFG(Ki,8),m.LFG(Ii,8),m.LFG(Ws,8),m.LFG(ll,8))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),Y6=(()=>{class s{constructor(i){this.fireDB=i,this.chatDb="/chat",this.items=i.list(this.chatDb).valueChanges()}sendMessage(i){this.fireDB.list(this.chatDb).push(i)}}return s.\u0275fac=function(i){return new(i||s)(m.LFG(Z6))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Q6(s,r){if(1&s&&(m.TgZ(0,"div",10),m.TgZ(1,"p"),m._uU(2),m.qZA(),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m.TgZ(5,"span",11),m._uU(6),m.qZA(),m.qZA()),2&s){const i=m.oxw().$implicit;m.xp6(2),m.hij(" ",i.message," "),m.xp6(2),m.hij(" ",i.user," "),m.xp6(2),m.Oqu(i.date)}}function J6(s,r){if(1&s&&(m.TgZ(0,"div",12),m.TgZ(1,"p"),m._uU(2),m.qZA(),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m.TgZ(5,"span",11),m._uU(6),m.qZA(),m.qZA()),2&s){const i=m.oxw().$implicit;m.xp6(2),m.hij(" ",i.message," "),m.xp6(2),m.hij(" ",i.user," "),m.xp6(2),m.Oqu(i.date)}}function X6(s,r){if(1&s&&(m.TgZ(0,"div"),m.TgZ(1,"div",7),m.YNc(2,Q6,7,3,"div",8),m.YNc(3,J6,7,3,"div",9),m.qZA(),m.qZA()),2&s){const i=r.$implicit,o=m.oxw();m.xp6(2),m.Q6J("ngIf",o.auth.isLoggedIn.email!==i.user),m.xp6(1),m.Q6J("ngIf",o.auth.isLoggedIn.email===i.user)}}const ej=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",component:hd,canActivate:[DV]},{path:"login",component:TV},{path:"about",component:SV},{path:"chat",component:(()=>{class s{constructor(i,o){this.chatS=i,this.auth=o,this.messages=i.items,this.message={user:"",message:"",date:Date().toString()}}sendMessage(){let i=new Date;this.message.user=this.auth.isLoggedIn.email,this.message.date=i.getHours()+":"+i.getMinutes(),console.log(this.message),this.chatS.sendMessage(this.message),this.message.message=""}ngOnInit(){}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(Y6),m.Y36(cw))},s.\u0275cmp=m.Xpm({type:s,selectors:[["app-chat"]],decls:10,vars:4,consts:[[1,"row","msg-container","frame",2,"overflow","scroll"],[1,"msjs"],[4,"ngFor","ngForOf"],["align","center",1,"card","chat-write-box"],[1,"example-full-width"],["type","email","autocomplete","off",1,"msgText",3,"ngModel","ngModelChange"],[3,"click"],[1,"col","m12","col","s12"],["class","box-blue",4,"ngIf"],["class","box-gray",4,"ngIf"],[1,"box-blue"],[1,"date"],[1,"box-gray"]],template:function(i,o){1&i&&(m._UZ(0,"br"),m.TgZ(1,"div",0),m.TgZ(2,"div",1),m.YNc(3,X6,4,2,"div",2),m.ALo(4,"async"),m.qZA(),m.qZA(),m.TgZ(5,"div",3),m.TgZ(6,"label",4),m.TgZ(7,"input",5),m.NdJ("ngModelChange",function(d){return o.message.message=d}),m.qZA(),m.TgZ(8,"button",6),m.NdJ("click",function(){return o.sendMessage()}),m._uU(9,"Enviar"),m.qZA(),m.qZA(),m.qZA()),2&i&&(m.xp6(3),m.Q6J("ngForOf",m.lcZ(4,2,o.messages)),m.xp6(4),m.Q6J("ngModel",o.message.message))},directives:[O.sg,ri,Kr,Uo,O.O5],pipes:[O.Ov],styles:[".example-card[_ngcontent-%COMP%]{max-width:600px}.navColor[_ngcontent-%COMP%]{background-color:#fff}.nav-link[_ngcontent-%COMP%]{background-color:#000;color:#fff}.box-blue[_ngcontent-%COMP%]{background-color:#3841ba;color:#fff;margin:2%;position:relative;background:#3841ba;border:4px solid #3841ba;padding:2%;border-radius:5px;text-align:left}.box-gray[_ngcontent-%COMP%]{margin:2%;position:relative;color:#fff;background:#8f858f;border:4px solid #706a70;padding:2%;border-radius:5px;text-align:right}.example-full-width[_ngcontent-%COMP%]{width:80%;max-width:985px;margin:auto}.msjs[_ngcontent-%COMP%]{max-width:1000px;max-height:1500px;margin:auto}.msg-container[_ngcontent-%COMP%]{max-height:295px;max-width:400px;overflow-y:hidden;overflow-x:hidden;margin:auto}.chat[_ngcontent-%COMP%]{list-style:none;background:none;margin:0;padding:0 17px 0 0;position:absolute;top:60px;height:80vh;width:100%;overflow-y:scroll}.btnEnviar[_ngcontent-%COMP%]{background-color:#2b34c4;border-radius:100%;position:fixed;margin:auto}.chat-write-box[_ngcontent-%COMP%]{bottom:0;max-width:330px;max-height:33px;margin:auto}.example-card[_ngcontent-%COMP%]{margin:auto}"]}),s})()},{path:"saladejuegos",loadChildren:()=>H.e(900).then(H.bind(H,6900)).then(s=>s.SalaDeJuegosModule)},{path:"error",component:MV},{path:"**",redirectTo:"error"}];let tj=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[[bi.Bz.forRoot(ej)],bi.Bz]}),s})();const YF_firebaseConfig={apiKey:"AIzaSyB6Hlfh5Jcs_mGo39zqVXs0tpt1mtHNTrs",authDomain:"sala-de-juegos-e5892.firebaseapp.com",projectId:"sala-de-juegos-e5892",storageBucket:"sala-de-juegos-e5892.appspot.com",messagingSenderId:"357950147430",appId:"1:357950147430:web:2b3a0e1f12fccd543f56a7"},QF=function(){return["login"]};function nj(s,r){1&s&&(m.TgZ(0,"a",11),m._uU(1,"Login"),m.qZA()),2&s&&m.Q6J("routerLink",m.DdM(1,QF))}function rj(s,r){if(1&s){const i=m.EpF();m.TgZ(0,"a",15),m.NdJ("click",function(){return m.CHM(i),m.oxw().auth.logOut()}),m._uU(1,"Log out"),m.qZA()}2&s&&m.Q6J("routerLink",m.DdM(1,QF))}function ij(s,r){if(1&s&&(m.TgZ(0,"a",16),m._uU(1),m.qZA()),2&s){const i=m.oxw();m.xp6(1),m.hij("Bienvenido, ",i.auth.isLoggedIn.email,"")}}function sj(s,r){1&s&&m._UZ(0,"a",16)}const oj=function(){return[""]},aj=function(){return["about"]};let lj=(()=>{class s{constructor(i){this.auth=i}ngOnInit(){}}return s.\u0275fac=function(i){return new(i||s)(m.Y36(cw))},s.\u0275cmp=m.Xpm({type:s,selectors:[["app-navbar"]],decls:21,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","/",1,"navbar-brand"],["src","../assets/iconoJuego.png","alt","","width","50","height","50"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page",1,"nav-link","active",3,"routerLink"],["class","nav-link",3,"routerLink",4,"ngIf"],[1,"nav-link",3,"routerLink"],["class","nav-link",3,"routerLink","click",4,"ngIf"],[1,"nav-item","active","text-light",2,"margin-right","50px"],["class","nav-item active",4,"ngIf"],[1,"nav-link",3,"routerLink","click"],[1,"nav-item","active"]],template:function(i,o){1&i&&(m.TgZ(0,"nav",0),m.TgZ(1,"div",1),m.TgZ(2,"a",2),m._UZ(3,"img",3),m.qZA(),m.TgZ(4,"button",4),m._UZ(5,"span",5),m.qZA(),m.TgZ(6,"div",6),m.TgZ(7,"ul",7),m.TgZ(8,"li",8),m.TgZ(9,"a",9),m._uU(10,"Home"),m.qZA(),m.qZA(),m.TgZ(11,"li",8),m.YNc(12,nj,2,2,"a",10),m.qZA(),m.TgZ(13,"li",8),m.TgZ(14,"a",11),m._uU(15,"About me"),m.qZA(),m.qZA(),m.TgZ(16,"li",8),m.YNc(17,rj,2,2,"a",12),m.qZA(),m.qZA(),m.TgZ(18,"div",13),m.YNc(19,ij,2,1,"a",14),m.YNc(20,sj,1,0,"a",14),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&i&&(m.xp6(9),m.Q6J("routerLink",m.DdM(6,oj)),m.xp6(3),m.Q6J("ngIf",!o.auth.isLoggedIn),m.xp6(2),m.Q6J("routerLink",m.DdM(7,aj)),m.xp6(3),m.Q6J("ngIf",o.auth.isLoggedIn),m.xp6(2),m.Q6J("ngIf",o.auth.isLoggedIn.email),m.xp6(1),m.Q6J("ngIf",!o.auth.isLoggedIn))},directives:[bi.yS,O.O5],styles:[""]}),s})(),cj=(()=>{class s{constructor(){this.title="sala-de-juegos"}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=m.Xpm({type:s,selectors:[["app-root"]],decls:2,vars:0,template:function(i,o){1&i&&(m._UZ(0,"app-navbar"),m._UZ(1,"router-outlet"))},directives:[lj,bi.lC],styles:[""]}),s})(),uj=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=m.oAB({type:s,bootstrap:[cj]}),s.\u0275inj=m.cJS({providers:[],imports:[[Pi,tj,dd,pr.hO.initializeApp(YF_firebaseConfig),ac,NP,C2]]}),s})();Zn().bootstrapModule(uj).catch(s=>console.error(s))},4762:(rt,Me,H)=>{"use strict";H.d(Me,{ZT:()=>m,pi:()=>te,_T:()=>me,mG:()=>ee,Jh:()=>ne,XA:()=>X,CR:()=>ue,ev:()=>Te});var O=function(Oe,Se){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Le,ke){Le.__proto__=ke}||function(Le,ke){for(var xe in ke)Object.prototype.hasOwnProperty.call(ke,xe)&&(Le[xe]=ke[xe])})(Oe,Se)};function m(Oe,Se){if("function"!=typeof Se&&null!==Se)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Le(){this.constructor=Oe}O(Oe,Se),Oe.prototype=null===Se?Object.create(Se):(Le.prototype=Se.prototype,new Le)}var te=function(){return(te=Object.assign||function(Se){for(var Le,ke=1,xe=arguments.length;ke<xe;ke++)for(var Ee in Le=arguments[ke])Object.prototype.hasOwnProperty.call(Le,Ee)&&(Se[Ee]=Le[Ee]);return Se}).apply(this,arguments)};function me(Oe,Se){var Le={};for(var ke in Oe)Object.prototype.hasOwnProperty.call(Oe,ke)&&Se.indexOf(ke)<0&&(Le[ke]=Oe[ke]);if(null!=Oe&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(ke=Object.getOwnPropertySymbols(Oe);xe<ke.length;xe++)Se.indexOf(ke[xe])<0&&Object.prototype.propertyIsEnumerable.call(Oe,ke[xe])&&(Le[ke[xe]]=Oe[ke[xe]])}return Le}function ee(Oe,Se,Le,ke){return new(Le||(Le=Promise))(function(Ee,Xe){function et(mt){try{ct(ke.next(mt))}catch(Tt){Xe(Tt)}}function Pt(mt){try{ct(ke.throw(mt))}catch(Tt){Xe(Tt)}}function ct(mt){mt.done?Ee(mt.value):function(Ee){return Ee instanceof Le?Ee:new Le(function(Xe){Xe(Ee)})}(mt.value).then(et,Pt)}ct((ke=ke.apply(Oe,Se||[])).next())})}function ne(Oe,Se){var ke,xe,Ee,Xe,Le={label:0,sent:function(){if(1&Ee[0])throw Ee[1];return Ee[1]},trys:[],ops:[]};return Xe={next:et(0),throw:et(1),return:et(2)},"function"==typeof Symbol&&(Xe[Symbol.iterator]=function(){return this}),Xe;function et(ct){return function(mt){return function(ct){if(ke)throw new TypeError("Generator is already executing.");for(;Le;)try{if(ke=1,xe&&(Ee=2&ct[0]?xe.return:ct[0]?xe.throw||((Ee=xe.return)&&Ee.call(xe),0):xe.next)&&!(Ee=Ee.call(xe,ct[1])).done)return Ee;switch(xe=0,Ee&&(ct=[2&ct[0],Ee.value]),ct[0]){case 0:case 1:Ee=ct;break;case 4:return Le.label++,{value:ct[1],done:!1};case 5:Le.label++,xe=ct[1],ct=[0];continue;case 7:ct=Le.ops.pop(),Le.trys.pop();continue;default:if(!(Ee=(Ee=Le.trys).length>0&&Ee[Ee.length-1])&&(6===ct[0]||2===ct[0])){Le=0;continue}if(3===ct[0]&&(!Ee||ct[1]>Ee[0]&&ct[1]<Ee[3])){Le.label=ct[1];break}if(6===ct[0]&&Le.label<Ee[1]){Le.label=Ee[1],Ee=ct;break}if(Ee&&Le.label<Ee[2]){Le.label=Ee[2],Le.ops.push(ct);break}Ee[2]&&Le.ops.pop(),Le.trys.pop();continue}ct=Se.call(Oe,Le)}catch(mt){ct=[6,mt],xe=0}finally{ke=Ee=0}if(5&ct[0])throw ct[1];return{value:ct[0]?ct[1]:void 0,done:!0}}([ct,mt])}}}function X(Oe){var Se="function"==typeof Symbol&&Symbol.iterator,Le=Se&&Oe[Se],ke=0;if(Le)return Le.call(Oe);if(Oe&&"number"==typeof Oe.length)return{next:function(){return Oe&&ke>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[ke++],done:!Oe}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(Oe,Se){var Le="function"==typeof Symbol&&Oe[Symbol.iterator];if(!Le)return Oe;var xe,Xe,ke=Le.call(Oe),Ee=[];try{for(;(void 0===Se||Se-- >0)&&!(xe=ke.next()).done;)Ee.push(xe.value)}catch(et){Xe={error:et}}finally{try{xe&&!xe.done&&(Le=ke.return)&&Le.call(ke)}finally{if(Xe)throw Xe.error}}return Ee}function Te(Oe,Se,Le){if(Le||2===arguments.length)for(var Ee,ke=0,xe=Se.length;ke<xe;ke++)(Ee||!(ke in Se))&&(Ee||(Ee=Array.prototype.slice.call(Se,0,ke)),Ee[ke]=Se[ke]);return Oe.concat(Ee||Array.prototype.slice.call(Se))}},8239:(rt,Me,H)=>{"use strict";function O(te,me,ve,ae,he,ee,ne){try{var K=te[ee](ne),oe=K.value}catch(X){return void ve(X)}K.done?me(oe):Promise.resolve(oe).then(ae,he)}function m(te){return function(){var me=this,ve=arguments;return new Promise(function(ae,he){var ee=te.apply(me,ve);function ne(oe){O(ee,ae,he,ne,K,"next",oe)}function K(oe){O(ee,ae,he,ne,K,"throw",oe)}ne(void 0)})}}H.d(Me,{Z:()=>m})}},rt=>{rt(rt.s=5038)}]);